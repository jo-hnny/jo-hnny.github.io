[{"content":"ä¸ºä»€ä¹ˆæœ‰è¿™ç¯‡æ–‡ç«  æœ€è¿‘æˆ‘ä¸ºå¼€æºé¡¹ç›® tkestack çš„å‰ç«¯æ§åˆ¶å°éƒ¨åˆ†æ·»åŠ äº†å¯¹ commit çš„ lintï¼Œåœ¨æ·»åŠ è¿‡ç¨‹ä¸­é‡åˆ°äº†ä¸€äº›å›°éš¾å’Œç–‘æƒ‘ï¼Œåœ¨æ­¤è®°å½•ä¸€ä¸‹\nv4 é…ç½®æ–¹å¼ å®‰è£… husky npm i husky -D æ·»åŠ é…ç½® åœ¨ package.json ä¸­æ·»åŠ å¦‚ä¸‹é…ç½®\n//package.json \u0026#34;lint-staged\u0026#34;: { \u0026#34;./**/*.{ts,tsx,js,jsx}\u0026#34;: [ \u0026#34;eslint\u0026#34;, \u0026#34;prettier --write\u0026#34; ] }, \u0026#34;husky\u0026#34;: { \u0026#34;hooks\u0026#34;: { \u0026#34;pre-commit\u0026#34;: \u0026#34;lint-staged\u0026#34; } }, æˆ–è€…æ·»åŠ .huskyrc æ–‡ä»¶\n// .huskyrc { \u0026#34;hooks\u0026#34;: { \u0026#34;pre-commit\u0026#34;: \u0026#34;npm test\u0026#34; } } v6+ é…ç½®æ–¹å¼ ç¬¬ä¸€æ¬¡ä½¿ç”¨ï¼ŒæŒ‰ç…§ husky doc è¿›è¡Œé…ç½®\nå®‰è£… husky npm i husky -D å¼€å¯ Git hooks npx husky install æ‰§è¡Œåˆ°è¿™é‡Œï¼Œæˆ‘å¾—åˆ°ä¸€ä¸ªé”™è¯¯\nnpx husky install .git can\u0026#39;t be found (see https://git.io/Jc3F9) å¯ä»¥æ¨æ–­å‡ºåŸå› æ˜¯è¿™æ¡å‘½ä»¤éœ€è¦åœ¨é¡¹ç›®æ ¹ç›®å½•æ‰§è¡Œã€‚å³.gitæ‰€åœ¨çš„ç›®å½• tkestack æ˜¯ä¸€ä¸ªå‰åç«¯åŒåœ¨ä¸€ä¸ªä»“åº“çš„é¡¹ç›®ï¼Œç›®å½•ç»“æ„å¦‚ä¸‹\n. â””â”€â”€ web â””â”€â”€ console æˆ‘ä»¬ç°åœ¨åœ¨ console ç›®å½•ï¼Œæ‰€ä»¥æ­£ç¡®çš„æ–¹å¼åº”è¯¥æ˜¯\ncd ../../ npx husky install ./web/console/.husky æ·»åŠ è‡ªåŠ¨æ‰§è¡Œhusky installçš„é’©å­ å¦‚æœå…¶ä»–ç”¨æˆ·è¿›è¡Œå¼€å‘ï¼Œæ˜¾ç„¶æˆ‘ä»¬æ˜¯ä¸å¸Œæœ›ä»–éœ€è¦å…ˆé˜…è¯» husky çš„æ–‡æ¡£ï¼Œç„¶åæ‰‹åŠ¨æ‰§è¡Œnpx husky installçš„ï¼Œæ‰€ä»¥æˆ‘ä»¬æ·»åŠ ä¸€ä¸ª npm scripts çš„é’©å­\nnpm set-script prepare \u0026#34;husky install\u0026#34; ç”±äºç›®å½•çš„åŸå› ï¼Œå¯¹åº”çš„è°ƒæ•´ä¸º\nnpm set-script prepare \u0026#34;cd ../../ \u0026amp;\u0026amp; husky install ./web/console/.husky\u0026#34; æ³¨æ„ âš ï¸ï¼šnpm set-script åªåœ¨ npm version 7.x ç”Ÿæ•ˆ,å¦‚æœä½ ç”¨çš„æ˜¯ 6.x æˆ–è€…æ›´ä½ï¼Œè¿˜æ˜¯æ‰‹åŠ¨åœ¨package.jsonä¸­æ·»åŠ å§\nç°åœ¨æŸ¥çœ‹package.json åº”è¯¥å¯ä»¥çœ‹åˆ°\n// package.json { \u0026#34;scripts\u0026#34;: { \u0026#34;prepare\u0026#34;: \u0026#34;cd ../../ \u0026amp;\u0026amp; husky install ./web/console/.husky\u0026#34; } } æ·»åŠ æˆ‘ä»¬çš„ hook npx husky add .husky/pre-commit \u0026#34;lint-staged\u0026#34; æµ‹è¯•ä¸€ä¸‹ ä¿®æ”¹ä¸€ä¸ªæ–‡ä»¶ä½¿ä¹‹ä¸ç¬¦åˆ eslint è§„èŒƒï¼Œç„¶åæˆ‘ä»¬åšä¸€æ¬¡æäº¤\ngit add . git commit \u0026#39;test husky\u0026#39; ç»“æœå±…ç„¶æˆåŠŸæäº¤äº†ï¼Œæ˜¾ç„¶æˆ‘ä»¬çš„ lint æ²¡æœ‰ç”Ÿæ•ˆ\næˆ‘ä»¬æ£€æŸ¥ä¸€ä¸‹ç°åœ¨æˆ‘ä»¬çš„ console ç›®å½•æœ‰å“ªäº›å˜åŒ–ï¼Œä¼šå‘ç°å¤šäº†ä¸€ä¸ª.husky ç›®å½•ï¼Œç›®å½•ä¸‹æœ‰ä¸€ä¸ªpre-commitæ–‡ä»¶,æ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼š\n#!/bin/sh . \u0026#34;$(dirname \u0026#34;$0\u0026#34;)/_/husky.sh\u0026#34; lint-staged å¤§è‡´å¯ä»¥çŒœæµ‹åˆ°å½“ pre-commit æ—¶ï¼Œå®é™…æ˜¯æ‰§è¡Œäº†è¿™ä¸ª shell è„šæœ¬ï¼Œç”±äºæˆ‘ä»¬çš„ lint-staged å¹¶ä¸æ˜¯å…¨å±€å®‰è£…ï¼Œåœ¨è¿™é‡Œå¹¶ä¸èƒ½æ‰§è¡Œ æ‰€ä»¥æˆ‘ä»¬åœ¨ package.json ä¸­æ·»åŠ ä¸€ä¸ª script\n// package.json { \u0026#34;scripts\u0026#34;: { \u0026#34;prepare\u0026#34;: \u0026#34;cd ../../ \u0026amp;\u0026amp; husky install\u0026#34;, \u0026#34;pre-commit\u0026#34;: \u0026#34;lint-staged\u0026#34; } } æ¥ç€ä¿®æ”¹.husky/pre-commitæ–‡ä»¶\n#!/bin/sh . \u0026#34;$(dirname \u0026#34;$0\u0026#34;)/_/husky.sh\u0026#34; npm run pre-commit å†å°è¯•ä¸€ä¸‹ä¿®æ”¹ä¸€ä¸ªæ–‡ä»¶å¹¶æäº¤\nè¿˜æ˜¯æˆåŠŸäº†ï¼Œlint ä¾ç„¶æ²¡æœ‰ç”Ÿæ•ˆï¼Œ\næŸ¥çœ‹æ–‡æ¡£å¯çŸ¥pre-commitè¿™ä¸ª shell å®é™…æ‰§è¡Œç›®å½•æ˜¯åœ¨.gitæ‰€åœ¨ç›®å½•ï¼Œæ‰€ä»¥æ¥ç€ä¿®æ”¹.husky/pre-commitæ–‡ä»¶\n#!/bin/sh . \u0026#34;$(dirname \u0026#34;$0\u0026#34;)/_/husky.sh\u0026#34; cd ./web/console npm run pre-commit æœ€åå†æ¬¡ä¿®æ”¹æ–‡ä»¶å¹¶ commitï¼Œç»ˆäºå¯ä»¥çœ‹åˆ°å‘½ä»¤è¡Œæ‰§è¡Œäº†lint-stagedï¼Œlint å¤±è´¥ï¼Œcommit æœªæˆåŠŸ\nä¸ºä»€ä¹ˆä» v4 åˆ° v6 å¾ˆæ˜¾ç„¶ï¼Œv6 çš„é…ç½® ç›¸æ¯” v4 å¤æ‚äº†å¾ˆå¤š,é‚£ä¹ˆä¸ºä»€ä¹ˆ husky å®˜æ–¹è¦ä¿®æ”¹ä¹‹å‰çš„é…ç½®æ–¹å¼å‘¢ï¼Ÿ è¦äº†è§£è¿™ä¸ªé—®é¢˜ä¹‹å‰æˆ‘ä»¬å…ˆçœ‹ä¸€ä¸‹ husky v4 çš„å·¥ä½œæ–¹å¼\nhusky@v4 æ˜¯å¦‚ä½•è¿è¡Œçš„ é¦–å…ˆ husky åœ¨å®‰è£…æ—¶ä¼šåœ¨ .git/hooks/ ç›®å½•å®‰è£…æ‰€æœ‰å¯èƒ½ä¼šä½¿ç”¨åˆ°çš„ hooks\næ¯”å¦‚å½“æˆ‘ä»¬è¿›è¡Œä¸€æ¬¡æäº¤æ—¶ï¼Œæ¯ä¸ª git hook æ£€æŸ¥æˆ‘ä»¬æœ‰æ²¡æœ‰åœ¨ package.json æˆ–è€….huskyrc ä¸­å®šä¹‰å¯¹åº”çš„é’©å­:\n$ git commit pre-commit (native) â†’ husky/runner.js (node) â†’ is a pre-commit defined in `.huskyrc.js`? â†’ YES, run it prepare-commit-msg (native) â†’ husky/runner.js (node) â†’ is a prepare-commit-msg defined in `.huskyrc.js`? â†’ NO, do nothing commit-msg (native) â†’ husky/runner.js (node) â†’ is a commit-msg defined in `.huskyrc.js`? â†’ NO, do nothing post-commit (native) â†’ husky/runner.js (node) â†’ is a post-commit defined in `.huskyrc.js`? â†’ NO, do nothing   ä¼˜ç‚¹ï¼š ç”¨æˆ·å¯ä»¥åœ¨é…ç½®æ–‡ä»¶ä¸­æ·»åŠ ã€æ›´æ–°ã€åˆ é™¤ hookï¼Œhusky ä¼šè‡ªåŠ¨åˆ¤æ–­æ‰§è¡Œ\n  ç¼ºç‚¹ï¼š ä¸ç®¡æˆ‘ä»¬æœ‰æ²¡æœ‰é…ç½® hookï¼Œæ‰€æœ‰çš„ git hook éƒ½ä¼šæ‰§è¡Œä¸€éï¼ŒåŒ…æ‹¬æ‰§è¡Œ node husky/runner.js\n  husky@v6 æ˜¯å¦‚ä½•è¿è¡Œçš„ 2016 å¹´ï¼ŒGit 2.9 å¼•å…¥äº†core.hooksPathï¼Œä»–ä½¿ç”¨æˆ·å¯ä»¥è‡ªå®šä¹‰ git hooks çš„ç›®å½•,åœ¨æ­¤ä¹‹å‰ï¼Œhooks åªèƒ½æ”¾åœ¨.git/hooks/ç›®å½•ä¸‹,ç„¶è€Œ.git ç›®å½•æ˜¯ä¸èƒ½æäº¤çš„ï¼Œä½†æ˜¯ç°åœ¨é…ç½®core.hooksPathä¹‹åï¼Œæ¯”å¦‚ husky ä½¿ç”¨husky install é…ç½® .husky/ä½œä¸º git hooks ç›®å½•ï¼Œæˆ‘ä»¬å¯ä»¥æäº¤.husky/ç›®å½•ä½œä¸ºé¡¹ç›®çš„ä¸€éƒ¨åˆ†ã€‚\n ä¼˜ç‚¹ï¼š  é¿å…äº†åˆ›å»ºå’Œè¿è¡Œæ‰€æœ‰ git hooks ç°åœ¨ git hooks å’Œ husky é…ç½®æ–‡ä»¶å®é™…ä¸Šæ˜¯ä¸€ä¸ªæ–‡ä»¶ï¼Œæ–¹ä¾¿ç®¡ç†   ç¼ºç‚¹ï¼š  é…ç½®å¤æ‚ç¹ç    å‚è€ƒ husky doc\nWhy husky has dropped conventional JS config\n","date":"2021-07-06T14:24:51+08:00","image":"https://jo-hnny.github.io/p/huskyv7%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97/cover_hu01741809d1f58ad23f9de5fc011deff8_4984873_120x120_fill_q75_box_smart1.jpg","permalink":"https://jo-hnny.github.io/p/huskyv7%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97/","title":"Husky@v7ä½¿ç”¨æŒ‡å—"},{"content":" å›¾æ‘„äºè¥¿æ¹–\n æœ¬æ–‡ä»¥ ubuntu18.0.4 ä¸ºä¾‹\nå®‰è£… ZSH sudo apt-get install zsh\nè®¾ç½® ZSH ä¸ºé»˜è®¤ shell chsh -s $(which zsh)\nå®‰è£…ohmyzsh sh -c \u0026quot;$(curl -fsSL https://raw.github.com/ohmyzsh/ohmyzsh/master/tools/install.sh)\u0026quot;\nä½†æ˜¯ç”±äºç½‘ç»œçš„é—®é¢˜ï¼Œæˆ‘æ€»æ˜¯é‡åˆ°è¿™ä¸ªé”™è¯¯ï¼š\nFailed to connect to raw.github.com port 443: Connection refused\næ‰€ä»¥æˆ‘æ¢äº†ä¸ªæ–¹æ³•ï¼Œå…ˆæŠŠ ohmyzsh çš„ GitHub ä»“åº“å…‹éš†ä¸‹æ¥,ç„¶åå†å®‰è£…ï¼š\n git clone https://github.com/ohmyzsh/ohmyzsh.git sh -c ohmyzsh/tools/install.sh  zsh æ’ä»¶å’Œä¸»é¢˜é…ç½® å®‰è£…spaceshipä¸»é¢˜  git clone https://github.com/denysdovhan/spaceship-prompt.git \u0026quot;$ZSH_CUSTOM/themes/spaceship-prompt\u0026quot; --depth=1 ln -s \u0026quot;$ZSH_CUSTOM/themes/spaceship-prompt/spaceship.zsh-theme\u0026quot; \u0026quot;$ZSH_CUSTOM/themes/spaceship.zsh-theme\u0026quot;  å®‰è£…zsh-autosuggestionsæ’ä»¶ è¿™ä¸ªæ’ä»¶ä¸»è¦ä½œç”¨æ˜¯è®°å½•ä¸‹å†å²å‘½ä»¤ï¼Œåœ¨ä½ è¾“å…¥ä¸€éƒ¨åˆ†æ—¶è‡ªåŠ¨æç¤ºè¡¥å…¨\ngit clone https://github.com/zsh-users/zsh-autosuggestions ${ZSH_CUSTOM:-~/.oh-my-zsh/custom}/plugins/zsh-autosuggestions\nå®‰è£…zsh-syntax-highlightingæ’ä»¶ è¿™ä¸ªæ’ä»¶ä¸»è¦åŠŸèƒ½æ˜¯é«˜äº®ä½ è¾“å…¥çš„æ­£ç¡®çš„å‘½ä»¤\ngit clone https://github.com/zsh-users/zsh-syntax-highlighting.git ${ZSH_CUSTOM:-~/.oh-my-zsh/custom}/plugins/zsh-syntax-highlighting\næœ€åé…ç½®.zshrc æ–‡ä»¶  vi ~/.zshrc ZSH_THEME=\u0026quot;spaceship\u0026quot; plugins=(git zsh-autosuggestions zsh-syntax-highlighting) source ~/.zshrc  æœ€åè®°å½•ä¸€ä¸‹ ssh ç™»å½• ubuntu root æ‰€éœ€è¦çš„ä¸€äº›é…ç½® é»˜è®¤ ubuntu root è´¦å·æ— æ³• ssh è¿æ¥ï¼Œä¸€å¼€å§‹ä¸çŸ¥é“ï¼Œæ­»æ´»è¿ä¸ä¸Š\nè®¾ç½® root è´¦æˆ·å¯†ç  sudo passwd\næŒ‰ç…§æç¤ºè¾“å…¥å¹¶ç¡®è®¤å¯†ç \nä¿®æ”¹ ssh é…ç½®  æ‰“å¼€ ssh é…ç½® sudo vi /etc/ssh/sshd_config ä¿®æ”¹ PermitRootLogin yes é‡å¯ ssh sudo service ssh restart é‡æ–° ssh è¿æ¥ root ç”¨æˆ·  ","date":"2021-01-04T10:39:16+08:00","image":"https://jo-hnny.github.io/p/zsh%E9%85%8D%E7%BD%AE%E6%8C%87%E5%8D%97/cover_hu9d339b934dffcf255507bb48006cd78d_7347600_120x120_fill_q75_box_smart1.jpg","permalink":"https://jo-hnny.github.io/p/zsh%E9%85%8D%E7%BD%AE%E6%8C%87%E5%8D%97/","title":"ZSHé…ç½®æŒ‡å—"},{"content":"åˆé•¿äº†ä¸€å² è¶Šæ¥è¶Šæ²¡åŠæ³•å¿½è§†è‡ªå·±çš„å¹´é¾„ï¼Œä½†æ˜¯æ¯ä¸ªäººçš„è·¯æ³¨å®šæ˜¯ä¸ä¸€æ ·çš„ï¼Œä¹Ÿè®¸æˆ‘çš„æ³¨å®šåå·ä¸€ç‚¹ï¼ŒåŠ æ²¹ï¼Œ better than better\nç¥å¤§å®¶æ–°å¹´æ–°æ°”è±¡  Happy New Year   Rabbit Girl   Cat Girl \næ’å›¾æ¥è‡ªæœ€è¿‘å–œæ¬¢çš„æ—¥æœ¬ç”»å¸ˆ å¤©å‡ªãˆã‚‹ .twitter-tweet { font: 14px/1.45 -apple-system,BlinkMacSystemFont,\"Segoe UI\",Roboto,Oxygen-Sans,Ubuntu,Cantarell,\"Helvetica Neue\",sans-serif; border-left: 4px solid #2b7bb9; padding-left: 1.5em; color: #555; } .twitter-tweet a { color: #2b7bb9; text-decoration: none; } blockquote.twitter-tweet a:hover, blockquote.twitter-tweet a:focus { text-decoration: underline; }  ğŸ¼ãŠçŸ¥ã‚‰ã›ğŸ¼\nå¹´è³€çŠ¶ã®å†è²©ã™ã‚‹ã“ã¨ã«ãªã‚Šã¾ã—ãŸğŸ’Œ\nã™ã§ã«è²©å£²ã‚¹ã‚¿ãƒ¼ãƒˆã—ã¦ã¾ã™ğŸ¾\nä»Šå›ã¯ãŠåå‰ã¨ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã¯ãªã—ã§ç›´ç­†ã‚µã‚¤ãƒ³ã®ã¿ã§ã™ã®ã§ã”æ³¨æ„ãã ã•ã„ï¼ï¼\n12/30 22æ™‚ã¾ã§ã®è²©å£²ãªã®ã§ã‚ˆã‚ã—ããŠé¡˜ã„ã—ã¾ã™ã«ã‚ƒã‚“à¸…( Â´ ^ ` à¸…)https://t.co/wbBHAB0ZRJ #booth_pm pic.twitter.com/9SZ7bMdy2l\n\u0026mdash; å¤©å‡ªãˆã‚‹ğŸ¼ğŸ¾ãŠä¼‘ã¿ä¸­ (@amanagiel) December 27, 2020 ","date":"2020-12-28T11:08:45+08:00","image":"https://jo-hnny.github.io/p/happy-birthday-with-new-year/cover_hu4d97dd12715d2145d15f97493ddd5f65_5555706_120x120_fill_q75_box_smart1.jpg","permalink":"https://jo-hnny.github.io/p/happy-birthday-with-new-year/","title":"Happy Birthday With New Year"},{"content":"åˆæŠ˜è…¾äº† ä¹‹å‰ä¸‹å®šå†³å¿ƒä¸æŠ˜è…¾çš„ï¼Œå°±åªæ˜¯ç”¨ github pages é»˜è®¤çš„ä¸»é¢˜ï¼Œæœ€ç®€å•çš„æ–¹å¼ï¼Œä½†æ˜¯ä»é‚£ä¹‹åå¾ˆä¹…éƒ½æ²¡æœ‰æ‰“å¼€è¿‡åšå®¢äº†ï¼Œå¥½åƒå…´è¶£ä¸§å¤±äº†ï¼Œè¿™æ¬¡æ­£å¥½çœ‹åˆ°è¿™ä¸ªä¸»é¢˜å¾ˆå–œæ¬¢ï¼Œå°±åˆæŠ˜=æŠ˜è…¾ä¸€ä¸‹ï¼Œä¸è¿‡ actions éƒ¨ç½²å¥½äº†ï¼Œåé¢å†™åšå®¢ä¹Ÿå°±å¾ˆç®€å•å•¦ï¼\nå¹´ç»ˆäº† ä»Šå¹´ä¸å‡ºæ„æ–™çš„è¿‡çš„å¾ˆå¿«ï¼Œä½†æ˜¯ä¹Ÿå‘ç”Ÿäº†å¾ˆå¤šäº‹æƒ…ï¼Œä»æ­å·æ’¤äº†å›æ¥ï¼Œå…¶å®å¿ƒé‡Œæ„Ÿè§‰æ˜¯è‡ªå·±è®¤è¾“äº†ï¼Œèººå¹³äº†ï¼Œä¸æŒ£æ‰äº†ï¼Œä½†æ˜¯æƒ³æƒ³å¯¹è‡ªå·±æ¥è¯´åº”è¯¥æ˜¯æœ€å¥½çš„é€‰æ‹©äº†ï¼Œä¹‹å‰é‚£æ ·çš„çŠ¶æ€ï¼Œä¸çŸ¥é“èƒ½ä¸èƒ½æ´»åˆ°ç°åœ¨å‘¢ï¼\næ–°å¹´æœŸå¾…   æ”’é’±\n  å˜å¾—æ›´å¥½ï¼Œä»å†…åˆ°å¤–\n çŸ«æ­£çš„äº‹æƒ…å»åŒ»é™¢çœ‹çœ‹æ–¹æ¡ˆ è¿‘è§†çš„äº‹æƒ…ï¼Œå°šæœªæƒ³å¥½ï¼Œä¸æˆ´çœ¼é•œè‡ªç„¶æ˜¯ç»ä½³çš„ è„¸ä¸Šçš„ç–¤ä¹Ÿå¯ä»¥å»å’¨è¯¢ä¸€ä¸‹ï¼Œæœ€å¥½çš®è‚¤çŠ¶æ€ç¨³å®š å¿ƒèƒ½é™ä¸‹æ¥ å¤šå‚åŠ æˆ·å¤–æ´»åˆ°    æŠŠæƒ³å†™çš„å¼€æºé¡¹ç›®å†™äº†\n å›¾ç‰‡çš„ - å…ˆå†™è¿™ä¸ª è§†é¢‘çš„ - æ…¢æ…¢æ¥    å·¥ä½œä¸Š\n å­¦ä¹ ä¸€ä¸‹ go å­¦ä¹  k8s ç›¸å…³    æ„Ÿæƒ…\n \u0026hellip;    è¿‡å¹´è¦åšçš„äº‹æƒ…\n ç»™çˆ¸å¦ˆä¹°å¥—è¡£æœå§ï¼Œæ¯•ä¸šä¹Ÿå¥½å‡ å¹´äº†ï¼Œè¿˜æ²¡ç»™ä»–ä»¬ä¹°è¿‡    ","date":"2020-12-23T17:01:19+08:00","image":"https://jo-hnny.github.io/p/%E5%8F%88%E6%8A%98%E8%85%BE%E5%8D%9A%E5%AE%A2%E5%95%A6/cover_hue815052c239014777f9dec990de4542a_1567547_120x120_fill_q75_box_smart1.jpg","permalink":"https://jo-hnny.github.io/p/%E5%8F%88%E6%8A%98%E8%85%BE%E5%8D%9A%E5%AE%A2%E5%95%A6/","title":"åˆæŠ˜è…¾åšå®¢å•¦"},{"content":"å¾ªç¯ function find2(data: number[], n) { let low = 0; let higth = data.length; let middleIndex = low + Math.floor((higth - low) / 2); let middleValue = data[middleIndex]; while (n !== middleValue) { if (higth \u0026lt;= low) { return -1; } if (n \u0026lt; middleValue) { higth = middleIndex; } else { low = middleIndex; } middleIndex = low + Math.floor((higth - low) / 2); middleValue = data[middleIndex]; } return middleIndex; } // test  const array = [...new Array(1000)].map((_, index) =\u0026gt; index); const n = 500; console.log(find2(array, n)); é€’å½’ // äºŒåˆ†æŸ¥æ‰¾ - é€’å½’æ³• function find2(data: number[], n: number, preIndex: number = 0) { const len = data.length; if (len \u0026lt;= 0) { return -1; } const middleIndex = Math.floor(len / 2); const middleValue = data[middleIndex]; if (n \u0026lt; middleValue) { return find2(data.slice(0, middleIndex), n, preIndex); } if (n === middleValue) { return preIndex + middleIndex; } if (n \u0026gt; middleValue) { return find2( data.slice(middleIndex + 1, len), n, preIndex + middleIndex + 1 ); } } // test  const array = [...new Array(1000)].map((_, index) =\u0026gt; index); const n = 500; console.log(find2(array, n)); ","date":"2020-12-23T11:55:21+08:00","image":"https://jo-hnny.github.io/p/%E4%BA%8C%E5%88%86%E6%9F%A5%E6%89%BE/cover_huc924efba91b0c18895da55f8ccb26750_913071_120x120_fill_q75_box_smart1.jpg","permalink":"https://jo-hnny.github.io/p/%E4%BA%8C%E5%88%86%E6%9F%A5%E6%89%BE/","title":"äºŒåˆ†æŸ¥æ‰¾"},{"content":"ä»Šå¤©å°è¯•åœ¨é¡¹ç›®ä¸­å®Œæˆåˆ‡æ¢ä¸»é¢˜çš„åŠŸèƒ½ï¼Œç›®å‰å·²ç»å®ç°ï¼Œæ•…åšä¸ªè®°å½•  æ–°å»ºä¸€ä¸ª scss æ–‡ä»¶ä¿å­˜é¢œè‰²é…ç½®ï¼Œä¾‹å¦‚ï¼š  // themes.scss  $themes: ( light: ( main: #364f6b, second: #3fc1c9, third: #f5f5f5, fourth: #fc5185, ), dark: ( main: #e4f9f5, second: #30e3ca, third: #11999e, fourth: #40514e, ), ); æ–°å»ºå¦ä¸€ä¸ª scss æ–‡ä»¶ï¼Œåˆ›å»º mixinï¼š  // themify.scss @import \u0026#34;./themes.scss\u0026#34;; @mixinthemify($themes: $themes) { @each $theme, $map in $themes { :global(.theme-#{$theme}) \u0026amp; { $theme-map: () !global; @each $key, $submap in $map { $value: map-get(map-get($themes, $theme), \u0026#34;#{$key}\u0026#34;); $theme-map: map-merge( $theme-map, ( $key: $value, ) ) !global; } @content; $theme-map: null !global; } } } @functionthemed($key) { @return map-get($theme-map, $key); } ä½¿ç”¨ï¼š  @import \u0026#34;../../assets/styles/themify.scss\u0026#34;; .header { width: 100%; height: 60px; padding: 0 20px; display: flex; justify-content: flex-end; align-items: center; @includethemify { background-color: themed(\u0026#34;main\u0026#34;); color: themed(\u0026#34;third\u0026#34;); } } æœ€åï¼š  import React, { useState } from \u0026#34;react\u0026#34;; import styles from \u0026#34;./app.module.scss\u0026#34;; import classNames from \u0026#34;classnames\u0026#34;; import { Header } from \u0026#34;./components/header\u0026#34;; enum Themes { Light = \u0026#34;light\u0026#34;, Dark = \u0026#34;dark\u0026#34;, } function App() { const [theme, setTheme] = useState\u0026lt;Themes\u0026gt;(Themes.Light); function toggleTheme() { setTheme(theme === Themes.Light ? Themes.Dark : Themes.Light); } return ( \u0026lt;div className={classNames(styles.app, `theme-${theme}`)}\u0026gt; \u0026lt;Header toogleTheme={toggleTheme} /\u0026gt; \u0026lt;/div\u0026gt; ); } export default App; ","date":"2020-12-23T11:41:47+08:00","image":"https://jo-hnny.github.io/p/%E5%9C%A8scss%E5%92%8Ccss_module%E7%8E%AF%E5%A2%83%E4%B8%AD%E5%88%87%E6%8D%A2%E4%B8%BB%E9%A2%98/cover_hu9efe6025afacf0be349490fd897a8728_1800161_120x120_fill_q75_box_smart1.jpg","permalink":"https://jo-hnny.github.io/p/%E5%9C%A8scss%E5%92%8Ccss_module%E7%8E%AF%E5%A2%83%E4%B8%AD%E5%88%87%E6%8D%A2%E4%B8%BB%E9%A2%98/","title":"åœ¨scsså’Œcss_moduleç¯å¢ƒä¸­åˆ‡æ¢ä¸»é¢˜"},{"content":"å½“æˆ‘åœ¨ react é¡¹ç›®ä¸­ä¸ºä¸€ä¸ªå…ƒç´ æ·»åŠ äº† css modules çš„æ ·å¼ï¼Œä½†æ˜¯ç”±äºæˆ‘è¦ä½¿ç”¨ iconfontï¼Œå¿…é¡»åœ¨å…ƒç´ ä¸Šæ·»åŠ ä¸€ä¸ªåä¸º iconfont çš„ class åç§°ï¼Œæœæ¥æœå»ä¹Ÿæ²¡æ‰¾åˆ°ä»€ä¹ˆä¼˜é›…çš„å®ç°ï¼Œé‚£å°±æŒ‰ç…§ class çš„æœ¬è´¨å®ç°å§ï¼Œclass æœ¬è´¨å°±æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œå¤šä¸ª class åç”±ç©ºæ ¼åˆ†å‰²ï¼Œæ•…:\npublic render() { return ( \u0026lt;div className={`${styles.uploader}iconfont`}\u0026gt; \u0026lt;input type=\u0026#34;file\u0026#34; className={styles[\u0026#39;file-input\u0026#39;]} /\u0026gt; \u0026amp;#xe7da; \u0026lt;/div\u0026gt; ) } ä»Šå¤©æ–°å‘ç°ä¸€ä¸ªåº“classnameså¯ä»¥å¾ˆå¥½çš„è§£å†³è¿™ä¸ªé—®é¢˜,ä½¿ç”¨å¦‚ä¸‹ï¼š\nimport classNames from \u0026#34;classnames\u0026#34;; import React, { Component } from \u0026#34;react\u0026#34;; import styles from \u0026#34;./index.module.scss\u0026#34;; export default class extends Component { public uploadImage = (e: React.ChangeEvent\u0026lt;HTMLInputElement\u0026gt;) =\u0026gt; { console.log(e.target.files); }; public render() { return ( \u0026lt;div className={classNames(\u0026#34;iconfont\u0026#34;, styles.uploader)}\u0026gt; \u0026lt;input type=\u0026#34;file\u0026#34; accept=\u0026#34;image/png, image/jpeg\u0026#34; multiple={true} className={styles[\u0026#34;file-input\u0026#34;]} onChange={this.uploadImage} /\u0026gt; \u0026amp;#xe81c; \u0026lt;/div\u0026gt; ); } } ","date":"2019-09-18T21:16:58+08:00","image":"https://jo-hnny.github.io/p/react%E9%A1%B9%E7%9B%AE%E4%B8%AD%E5%90%8C%E6%97%B6%E6%B7%BB%E5%8A%A0css-modules%E4%B8%8E%E6%99%AE%E9%80%9Aclass/cover_huefcbb9b8b5b12eb8cf00ffdf2b15a7b8_2697992_120x120_fill_q75_box_smart1.jpg","permalink":"https://jo-hnny.github.io/p/react%E9%A1%B9%E7%9B%AE%E4%B8%AD%E5%90%8C%E6%97%B6%E6%B7%BB%E5%8A%A0css-modules%E4%B8%8E%E6%99%AE%E9%80%9Aclass/","title":"Reacté¡¹ç›®ä¸­åŒæ—¶æ·»åŠ css Modulesä¸æ™®é€šclass"},{"content":"React + Redux + TypeScript - æˆä¸ºæ›´å¥½çš„å‰ç«¯ï¼ˆæ•™ç¨‹ï¼‰ æˆ‘åœ¨å¼€å§‹æ„å»º React åº”ç”¨ï¼Œä½†æ˜¯æˆ‘å¸Œæœ›æˆ‘çš„åº”ç”¨æœ‰ä¸€ä¸ªå¥½çš„æ„å»ºæ–¹å¼ï¼Œè¿™æ˜¯æˆ‘åœ¨ Medium ä¸Šçœ‹åˆ°çš„ä¸€ç¯‡ä¸é”™çš„æ•™ç¨‹ï¼Œä¸ºäº†æ–¹ä¾¿æˆ‘ç†è§£ï¼Œé¡ºä¾¿å­¦è‹±è¯­ï¼Œç¿»è¯‘åœ¨æ­¤ï¼Œè‹±è¯­ç‰ˆçš„å¯ä»¥ç‚¹å‡»æŸ¥çœ‹åŸæ–‡\næ„å»ºä¸€ä¸ªæ»¡æ„çš„ React åº”ç”¨ç¨‹åºæ˜¯æ¯”è¾ƒå›°éš¾çš„ï¼ˆä¸»è¦æ˜¯æ¯”è¾ƒéš¾æ‰¾åˆ°ä¸€ä»½ React çš„æœ€ä½³å®è·µï¼Œè¿™ç‚¹ Angular è¿˜æ˜¯å¾ˆä¼˜ç§€çš„ï¼Œä½†æ˜¯æˆ‘å–œæ¬¢ jsxï¼‰ã€‚å½“ä½ æŒæ¡äº† VirtualDOM çš„æ¦‚å¿µä»¥åŠæ¡†æ¶æ˜¯å¦‚ä½•å·¥ä½œçš„æ—¶å€™ï¼Œä½ ä¼šå¾ˆå¿«æ„è¯†åˆ°å•å•ä½¿ç”¨ React æœ¬èº«ä¸è¶³ä»¥æ„å»ºæ¯” TODO-LIST æ›´å¤§çš„åº”ç”¨ã€‚è¿™ä¸ªæ—¶å€™ä½ å¼€å§‹å­¦ä¹ ä½¿ç”¨ç±»ä¼¼ Flux è¿™æ ·çš„ store æ¶æ„ï¼Œæ¯”å¦‚è¯´åº”ç”¨æœ€å¹¿æ³›çš„ Reduxï¼Œå¾ˆå¿«ä½ ä¼šæ²‰æ²¡åœ¨ actions å’Œ reducers ä¸­ï¼Œå¹¶ä¸”ä½ å¼€å§‹åœ¨ä¿æŒæ•°æ®åˆ†ç¦»ä¸Šé‡åˆ°æ›´å¤šçš„å›°éš¾ï¼Œè¿™å¬èµ·æ¥ä½ æ˜¯ä¸æ˜¯å¾ˆç†Ÿæ‚‰ï¼Ÿ\nåœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘å°†ä»‹ç»å¦‚ä½•æ„å»ºä¸€ä¸ªå¯æ‰©å±•çš„åº”ç”¨ç¨‹åºï¼Œå†çœ‹æ¥ä¸‹é‡Œçš„å†…å®¹ä¹‹å‰ï¼Œæˆ‘å¸Œæœ›ä½ å·²ç»æ˜ç™½ React æ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Œå¹¶ä¸”å¯¹ Flux æˆ–è€… Redux æœ‰ä¸€ç‚¹äº†è§£ã€‚\næœ¬æ–‡æ˜¯æˆ‘ç”± 2018 å¹´ 7 æœˆ 25 æ—¥ SwingDev åœ¨ microConf å¤§ä¼šä¸Šçš„æ¼”è®²æ•´ç†è€Œæˆçš„ä¹¦é¢ç‰ˆæœ¬ã€‚æ›´å¤šçš„ä¿¡æ¯å¯ä»¥ç‚¹å‡»microconf.io.\nä¸ºä»€ä¹ˆè¦ä½¿ç”¨ Store å¦‚æœä½ å·²ç»ä½¿ç”¨ React ç¼–å†™è¿‡ä¸€ä¸ªå°çš„åº”ç”¨ç¨‹åºï¼Œé‚£ä¹ˆä½ ä¼šå‘ç°å¥½åƒå°‘äº†äº›ä»€ä¹ˆã€‚\nå‡è®¾æˆ‘ä»¬æ­£åœ¨åˆ›å»ºç”±ä¸¤ä¸ªä¸»è¦ç»„ä»¶æ„æˆçš„ç®€å•åº”ç”¨ï¼šåŒ…å«æ‰€æœ‰ç”µå­é‚®ä»¶åˆ—è¡¨çš„ä¾§è¾¹æ ç»„ä»¶å’Œæ˜¾ç¤ºå½“å‰æ‰€é€‰ç”µå­é‚®ä»¶å†…å®¹çš„å†…å®¹ç»„ä»¶ã€‚å•å‡»ä¾§è¾¹æ çš„å…ƒç´ æ—¶ï¼Œæˆ‘ä»¬ä½¿ç”¨è·¯ç”±æ¥æ›´æ”¹é¡µé¢çš„ URL å¹¶å°†ç”µå­é‚®ä»¶çš„ ID æ”¾åœ¨å…¶ä¸­ã€‚ä½†æ˜¯æˆ‘ä»¬éœ€è¦åœ¨å†…å®¹ç»„ä»¶ä¸­è·å–åˆ°ç”µå­é‚®ä»¶çš„å…·ä½“å†…å®¹ï¼Œå³ä½¿ä¾§è¾¹æ ç»„ä»¶ä¸­å·²ç»å­˜åœ¨è¯¥æ•°æ®ï¼Œæˆ‘ä»¬ä¾ç„¶æ— æ³•åœ¨ä»–çš„å…„å¼Ÿç»„ä»¶ä¸­è·å–åˆ°è¯¥æ•°æ®ã€‚\nä½ ä¹Ÿè®¸å·²ç»æƒ³åˆ°ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠæ•°æ®ç§»åŠ¨åˆ°çˆ¶ç»„ä»¶ï¼ˆåŒ…å«äº†ä¾§è¾¹æ ç»„ä»¶å’Œå†…å®¹ç»„ä»¶ï¼‰æ¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œä½†æ˜¯è¿™ä¼šäº§ç”Ÿè®¸å¤šæ½œåœ¨çš„é—®é¢˜å’Œç“¶é¢ˆã€‚é¦–å…ˆæˆ‘ä»¬éœ€è¦ä»çˆ¶ç»„ä»¶ä¼ é€’æ•°æ®åˆ°å­ç»„ä»¶ï¼Œå¹¶ä¸”å°†æ‰€æœ‰æ•°æ®å¤„ç†é€»è¾‘æ”¾åˆ°çˆ¶ç»„ä»¶ä¸­ï¼ˆä¾‹å¦‚åˆ é™¤é‚®ä»¶ï¼‰ã€‚\nä½¿ç”¨ Flux æ¶æ„æœ‰åŠ©äºè§£å†³è¿™ä¸¤ä¸ªé—®é¢˜ï¼Œå®ƒæŠ½è±¡äº†å­˜å‚¨æ•°æ®å’Œæ“ä½œæ•°æ®ï¼ˆå³ actionsï¼‰çš„é€»è¾‘ï¼Œå¹¶ä¸”æä¾›äº†ç®€å•çš„æ–¹æ³•å°†æ•°æ®ä¼ é€’ç»™éœ€è¦å®ƒçš„ç»„ä»¶ï¼ˆå³ Redux ä¸­çš„ connect å‡½æ•°ï¼‰ã€‚\nStore æ¶æ„ 101ï¼ˆ101 æ˜¯ä»€ä¹ˆæ¢—,æˆ‘è¿˜ç‰¹æ„æœäº†ä¸€ä¸‹ï¼Œå¥½åƒæ˜¯åˆçº§çš„æ„æ€ï¼Œå¤§æ¦‚å°±æ˜¯ Store æ¶æ„åˆçº§æ•™ç¨‹å§ï¼‰ Store æ¶æ„æ˜¯ä¸€ä¸ªåˆçº§çš„æ¦‚å¿µï¼Œä½†æ˜¯å¦‚æœä½ ä»¥å‰ä»æœªå¬è¯´ï¼Œå®ƒå¯èƒ½å¬èµ·æ¥å¾ˆå¥‡æ€ªï¼Œä¸‹å›¾å¾ˆå¥½çš„æè¿°äº†å®ƒï¼š\næˆ‘ä»¬ä¸å†å°†æ‰€æœ‰æ•°æ®ä¿å­˜åˆ°ç»„ä»¶ä¸­ï¼Œè€Œæ˜¯ä½¿ç”¨å”¯ä¸€çš„å…¨å±€ Store ä½œä¸ºæˆ‘ä»¬çš„äº‹å®ä¸Šçš„æ•°æ®æ¥æºã€‚\nå®ƒå®šä¹‰äº†æ•´ä¸ª UIï¼Œä¿å­˜äº†æ‰€æœ‰åŠ¨æ€æ•°æ®-åŒ…æ‹¬æ¥è‡ªæœåŠ¡å™¨çš„ä»¥åŠç”¨æˆ·å’Œåº”ç”¨çš„å†…éƒ¨çŠ¶æ€ï¼Œæˆ‘ä»¬åŸºäºè¿™ä¸ª store æ¥æ„å»ºæˆ‘ä»¬çš„åº”ç”¨ã€‚\nå½“ç”¨æˆ·è§¦å‘äº†ä¸€ä¸ªæ“ä½œ =ã€‹ æ¯”å¦‚åœ¨é¡µé¢ä¸Šç‚¹å‡»ä¸€ä¸ªæŒ‰é’® =ã€‹ è°ƒç”¨ Actionï¼ˆAction æ˜¯ä¸€ä¸ªç®€å•çš„å¯¹è±¡ï¼Œä»…åŒ…å«ä¸€ä¸ªè¡¨æ˜ action ç±»å‹çš„ type å±æ€§å’Œå¯é€‰çš„è¡¥å……æ•°æ®ï¼‰=ã€‹action ä¼šå‘é€åˆ° reducerï¼ˆä¸€ä¸ªå…·æœ‰å•ä¸€ä½œç”¨çš„å‡½æ•°ï¼Œå®ƒä¾æ® action å’Œæ—§çš„ state ç”Ÿæˆä¸€ä¸ªæ–°çš„ stateï¼Œæ¯”å¦‚ç”¨æˆ·ç‚¹å‡»æŒ‰é’®æ–°åˆ›å»ºäº†ä¸€å°é‚®ä»¶ï¼Œreducer å°±ä¼šæŠŠæ–°é‚®ä»¶æ·»åŠ åˆ°æ—§çš„é‚®ä»¶åˆ—è¡¨ä¸­ï¼Œç”Ÿæˆä¸€ä¸ªæ–°çš„é‚®ä»¶åˆ—è¡¨ï¼Œå½“ç„¶ï¼Œreducer è¿”å›çš„æ˜¯ä¸€ä¸ªå®Œæ•´çš„ stateï¼Œé‚®ä»¶åˆ—è¡¨åŒ…å«åœ¨å…¶ä¸­ï¼‰=ã€‹æ–°çš„ store ä¼ é€’ç»™ç»„ä»¶ =ã€‹ç»„ä»¶ç›¸åº”çš„æ›´æ–° UI\nTypeScript + React = â¤ï¸ Angular å¼€å‘è€…é»˜è®¤ä½¿ç”¨ TypeScript ä½œä¸ºå¼€å‘è¯­è¨€ã€‚React åº”ç”¨ä»ç„¶ä¸»è¦ä½¿ç”¨ javascript å¼€å‘ï¼Œä½¿ç”¨å¼ºç±»å‹è¯­è¨€å¯èƒ½ä¼šåœ¨ä¸€å¼€å§‹ä½¿å¾—å¼€å‘å˜å¾—å¤æ‚ï¼Œä½†æ˜¯å¦‚æœä½ æŒ‰ç…§è§„åˆ™ä½¿ç”¨ï¼Œåˆ™ä¼šåœ¨åç»­çš„å¼€å‘ä¸­ç»™ä½ å¸¦æ¥æå¤§çš„ä½œç”¨ã€‚æˆ‘ä»¬åœ¨æœ¬æ–‡ä¸­æ„å»º çš„åº”ç”¨ç¨‹åºä½¿ç”¨ Typescript è¿›è¡Œå¼€å‘ï¼Œä»¥è¡¨æ˜åœ¨ Typescript çš„å¸®åŠ©ä¸‹é‡æ„ Redux store æ˜¯å¤šä¹ˆå®¹æ˜“ã€‚\nå°† TypeScript ä¸ React ä¸€èµ·ä½¿ç”¨å¯ä»¥ä»å¤šæ–¹é¢è·ç›Šã€‚é™¤äº†ä½¿ç”¨ç±»å‹åŒ–è¯­è¨€çš„å¸¸è§å¥½å¤„ä¹‹å¤–ï¼ˆæ‚¨å¯ä»¥åœ¨æ­¤å¤„é˜…è¯»æ›´å¤šç›¸å…³ä¿¡æ¯ï¼‰ï¼Œåœ¨ç¼–å†™ React é¡¹ç›®æ—¶æ‚¨å¯ä»¥è½»æ¾è¾“å…¥ Props å’Œ Stateï¼Œæ¯”å¦‚ä½ ä½¿ç”¨ä¸€ä¸ªç»„ä»¶æ—¶ï¼ŒIDE ä¼šæç¤ºè¯¥ç»„ä»¶æ‰€éœ€è¦çš„æ‰€æœ‰ propsï¼Œå¦‚æœä½ å¿˜è®°äº†æ·»åŠ ç»„ä»¶éœ€è¦çš„å¿…é¡»å±æ€§ï¼ŒTypescript ä¹Ÿä¼šæé†’ä½ ï¼ˆç¡®å®ä¼šé¿å…å¾ˆå¤šä½çº§é”™è¯¯ï¼Œå¾€å¾€è¿™ç§ä½çº§ bug æœ€ä¸ºè‡´å‘½ï¼Œæµªè´¹æå¤šçš„æ—¶é—´ï¼‰ã€‚\nä½†æ˜¯ä¸ä»…å¦‚æ­¤ï¼Œä½¿ç”¨ Typescript æ‰©å±• Redux è¿˜æœ‰æ›´å¤šçš„å¥½å¤„ï¼Œä½ çš„ store é”®å…¥å°±æ˜¯å…¶ä¸­ä¹‹ä¸€ï¼Œä½ æ— é¡»ç‚¹å‡»è·³è½¬åˆ° Reducer æ¥æ¨æµ‹ store çš„æ•°æ®ç»“æ„ï¼Œæ­¤å¤–å½“ä½ é”®å…¥ action æˆ–è€… action ç”Ÿæˆå™¨ï¼ˆå·¥å‚æ¨¡å¼ï¼‰æ—¶ä¸ç”¨çŒœæµ‹å®ƒä»¬æ¥æ”¶ä»€ä¹ˆç±»å‹çš„å‚æ•°ã€‚\nè®©æˆ‘ä»¬æ¥å†™ä¸ªç¤ºä¾‹ï¼š\nfunction searchAction(options) { return { type: â€˜SEARCHâ€™, ...options }; } è¿™æ˜¯ä¸€ä¸ªç®€å•çš„ action ç”Ÿæˆå™¨ï¼Œå®ƒæ¥æ”¶ options å‚æ•°ç”Ÿæˆä¸€ä¸ª type ä¸º SEARCH çš„æ–° actionï¼Œä½ èƒ½å‘Šè¯‰æˆ‘å®ƒåˆ°åº•è¦æ¥æ”¶ä¸€ä¸ªä»€ä¹ˆæ ·çš„ options å—ï¼Ÿ\næ²¡æœ‰ä»»ä½•æç¤ºæˆ‘ä»¬åˆ°åº•è¦ä¼ é€’ä»€ä¹ˆå‚æ•°ç»™å®ƒï¼Œä½ å¯èƒ½ä¼šæ‰¾éæ•´ä¸ªé¡¹ç›®æ¥ææ˜ç™½ options å¯¹è±¡åˆ°åº•æ˜¯ä¸ªä»€ä¹ˆï¼Œä½†æ˜¯å¾ˆæœ‰å¯èƒ½ä½ æ‰¾éæ•´ä¸ªé¡¹ç›®è¿˜æ˜¯ä¸çŸ¥é“åˆ°åº•è¦ä¼ ä»€ä¹ˆå‚æ•°ï¼ï¼ˆæ·±æœ‰ä½“ä¼šï¼Œæœ‰æ—¶å€™ç”šè‡³éœ€è¦æ‰“å¼€å¼€å‘è€…å·¥å…·æŸ¥çœ‹æ¥å£åˆ°åº•è¿”å›äº†ä»€ä¹ˆï¼Œç„¶åå†å»æ¨å¯¼æ•°æ®ç»“æ„ï¼‰\nä¸‹é¢æ˜¯é‡å†™ä¸º Typescript çš„ç‰ˆæœ¬ï¼Œä¸€çœ¼çœ‹å»å¯èƒ½ä¼šè§‰å¾—æœ‰ç‚¹å¤æ‚ï¼Œä½†æ˜¯é™„åŠ çš„ interface æ¸…é™¤äº†æ‰€æœ‰æ··ä¹±ï¼Œä½¿ç”¨æ­¤ä»£ç ï¼Œä½ å¯ä»¥æ¸…æ™°çš„çœ‹åˆ°è¯¥å‡½æ•°éœ€è¦å”¯ä¸€çš„ä¸€ä¸ªåŒ…å«æœ‰å¿…è¦å±æ€§ text å’Œå¯é€‰å±æ€§ tagsï¼ˆç”±æ•°å­—æ„æˆçš„æ•°ç»„ï¼‰çš„å¯¹è±¡ã€‚\ninterface SearchActionOptions { text: string; tags?: number[]; } interface ISearchAction extends SearchActionOptions { type: string; } function searchAction(options: SearchActionOptions): ISearchAction { return { type: \u0026#34;SEARCH\u0026#34;, ...options, }; } å¦‚æœæˆ‘ä»¬ä¸æ­£ç¡®çš„ä½¿ç”¨å®ƒï¼Œç¼–è¾‘å™¨ä¼šç»™å‡ºç›¸å…³æç¤ºï¼\næˆªå›¾æ¥è‡ªäº VisualStudio Code\nè®°äº‹æœ¬ APP æœ¬æ–‡ä¼šåˆ›å»ºä¸€ä¸ªç®€å•çš„è®°äº‹æœ¬ APPï¼Œä½ å¯ä»¥åœ¨GitHubæ‰¾åˆ°è¿™ä¸ªä»“åº“ï¼Œå¦‚æœä½ æƒ³åœ¨å·²æœ‰ä»£ç çš„åŸºç¡€ä¸Šç¼–å†™ï¼Œä½ å¯ä»¥ä» master åˆ†æ”¯æ£€å‡ºä»£ç ã€‚\nåœ¨ä»“åº“é‡Œä½ å¯ä»¥æ‰¾åˆ°å·²é…ç½®çš„ React + TypeScript é¡¹ç›®ï¼Œå…¶ä¸­å®ç°äº†æ‰€æœ‰ç»„ä»¶å¹¶å®šä¹‰äº†æ‰€æœ‰åŸºæœ¬ actionï¼Œè™½ç„¶ç¼ºå°‘äº† storeã€‚\nåœ¨è¿™ä¸ªåº”ç”¨ä¸­æˆ‘ä»¬æœ‰ä¸‰ä¸ª actionï¼š\n NOTES_FETCH åº”ç”¨å¼€å§‹è·å–æ•°æ®æ—¶è°ƒç”¨ NOTES_FETCH_SUCCESS åº”ç”¨è·å–æ•°æ®æˆåŠŸæ—¶è°ƒç”¨ NOTES_FETCH_ERROR åº”ç”¨è·å–æ•°æ®å‡ºé”™æ—¶è°ƒç”¨  export interface IActionNotesFetch extends Action { type: \u0026#34;NOTES_FETCH\u0026#34;; } export interface IActionNotesFetchSuccess extends Action { type: \u0026#34;NOTES_FETCH_SUCCESS\u0026#34;; notes: NoteModel[]; } export interface IActionNotesFetchError extends Action { type: \u0026#34;NOTES_FETCH_ERROR\u0026#34;; errorMessage: string; } export type AppActions = | IActionNotesFetch | IActionNotesFetchSuccess | IActionNotesFetchError; æˆ‘ä»¬åº”è¯¥å¦‚ä½•æ„é€  store ä»¥æ–¹ä¾¿å‘ç”¨æˆ·å±•ç¤ºæ•°æ®ï¼Ÿ\nå¸¸è§ï¼ˆä¸æ¨èï¼‰æ–¹æ³• æœ€åŸºæœ¬çš„ store æ„é€ å¯èƒ½å¦‚ä¸‹æ‰€ç¤ºï¼š\nexport interface NotesListState { state: string; // \u0026#39;INIT\u0026#39;, \u0026#39;LOADING\u0026#39; | \u0026#39;LOADED\u0026#39; | \u0026#39;ERROR\u0026#39;,  notes: NoteModel[]; errorMessage?: string; } æˆ‘ä»¬å­˜å‚¨è¿™ä¸ªåˆ—è¡¨çš„å½“å‰çŠ¶æ€ï¼š\n åˆå§‹çŠ¶æ€ - å‘æœåŠ¡å™¨å‘é€è¯·æ±‚ä¹‹å‰ åŠ è½½ä¸­ - ç­‰å¾…æœåŠ¡å™¨è¿”å› åŠ è½½å®Œæ¯• - å·²ç»è·å–æ•°æ®åˆ°æœ¬åœ° é”™è¯¯ - æ— æ³•è¿æ¥æˆ–è€…æœåŠ¡å™¨é”™è¯¯  åœ¨æ­¤æ¶æ„ä¸­å¯¹åº”çš„ reducer å¯èƒ½å¦‚ä¸‹ï¼š\nexport function notesListReducer( state: NotesListState, action: AppActions ): NotesListState { if (action.type === \u0026#34;NOTES_FETCH\u0026#34;) { return { ...state, state: \u0026#34;LOADING\u0026#34;, notes: [], }; } if (action.type === \u0026#34;NOTES_FETCH_SUCCESS\u0026#34;) { return { ...state, state: \u0026#34;LOADED\u0026#34;, notes: action.notes, }; } if (action.type === \u0026#34;NOTES_FETCH_ERROR\u0026#34;) { return { ...state, state: \u0026#34;ERROR\u0026#34;, notes: [], errorMessage: action.errorMessage, }; } return state; } è¿™æ˜¯ä¸€ä¸ªç®€å•çš„å‡½æ•°ï¼Œåªæœ‰ä¸‰ä¸ªæ¡ä»¶è¯­å¥ï¼Œåˆ†åˆ«å¯¹æ¯ä¸ª action åšå‡ºååº”ã€‚\næ¥ä¸‹æ¥å”¯ä¸€è¦åšçš„å°±æ˜¯æŠŠ store ä¸ React ç»„ä»¶è¿æ¥èµ·æ¥ï¼ŒRedux æœ‰ä¸€ä¸ªå‡½æ•° connect å¯ä»¥å¾ˆæ–¹ä¾¿çš„å¸®æˆ‘ä»¬å®ç°è¿™ä¸ªåŠŸèƒ½ï¼Œå®ƒæ¥æ”¶ä¸¤ä¸ªå›è°ƒå‡½æ•°ï¼Œç¬¬ä¸€ä¸ªå°†æˆ‘ä»¬çš„å…¨å±€ state è½¬æ¢ä¸ºç»„ä»¶çš„ propsï¼Œç¬¬äºŒä¸ªå›è°ƒå‡½æ•°å®šä¹‰ç»„ä»¶å¯ç”¨çš„ actionsï¼Œæˆ‘ä»¬æŠŠç¬¬ä¸€ä¸ªå‡½æ•°æ›´æ–°ä¸ºä»¥ä¸‹å½¢å¼ï¼š\nconst mapStateToProps = (state: AppState, ownProps: HomeViewProps) =\u0026gt; { return { notes: state.list.notes, state: state.list.state, errorMessage: state.list.errorMessage, }; }; ä½ å¯ä»¥åœ¨ github ä»“åº“ä¸­çš„sprint1-finish tag ä¸‹æ‰¾åˆ°å¯ç”¨çš„ç‰ˆæœ¬ã€‚\né—®ä¸ç­” è¿™ä¸ªç‰ˆæœ¬å¯ä»¥æˆåŠŸçš„åŠ è½½å’Œæ˜¾ç¤ºç¬”è®°ï¼ˆnotesï¼‰ã€‚ä½†æ˜¯è®©æˆ‘ä»¬æ€è€ƒä¸€ä¸‹ï¼ŒåŠ å…¥æˆ‘ä»¬éœ€è¦æ·»åŠ çš„ä¸‹ä¸€ä¸ªåŠŸèƒ½æ˜¯-æœç´¢ã€‚ç”±äºæˆ‘ä»¬çš„ store æ˜¯ä¸€ä¸ªå…¨å±€å•ä¸€æ•°æ®æºï¼Œæ‰€ä»¥å½“æˆ‘ä»¬è¿‡æ»¤æ‰æŸäº› note æ—¶ï¼Œå®ƒå°±ä¼šä»æˆ‘ä»¬çš„ store ç§»é™¤ï¼Œè¿™æ„å‘³ç€åœ¨æ¯æ¬¡ç”¨æˆ·æœç´¢æ—¶ï¼Œæˆ‘ä»¬éƒ½éœ€è¦ä»æœåŠ¡å™¨åŠ è½½æ•°æ®ï¼Œä»¥ä¾¿å‘ç”¨æˆ·å±•ç¤ºæ•°æ®ã€‚\nä½†æ˜¯å¦‚æœæˆ‘ä»¬æƒ³è¦å±•ç¤ºå¦ä¸€ä¸ªå…·æœ‰ç›¸åŒæ•°æ®çš„åˆ—è¡¨ï¼Œé‚£ä¹ˆåŠ¿å¿…ä¼šæœ‰ä¸€äº›ç›¸åŒçš„æ¡ç›®åŒæ—¶å‡ºç°åœ¨ä¸¤ä¸ªåˆ—è¡¨ä¸­ï¼Œè¿™ä¼šäº§ç”Ÿä¸å¿…è¦çš„å†—ä½™ï¼Œå¦‚æœå®é™…çš„å†…å®¹å’Œç¬¬äºŒä¸ªåˆ—è¡¨çš„æ¡ç›®ä¸åŒï¼Œåˆä¼šäº§ç”Ÿæ­§ä¹‰ã€‚\nä¸è¿‡ï¼Œæˆ‘ä»¬æœ‰ä¸€ä¸ªå«åš store è§„èŒƒåŒ–çš„æ–¹æ¡ˆå¯ä»¥å°†æˆ‘ä»¬çš„ React/Redux åº”ç”¨æå‡åˆ°ä¸€ä¸ªæ–°çš„æ°´å¹³ã€‚\nstore è§„èŒƒåŒ– è¦ä½¿ç”¨è§„èŒƒåŒ–ï¼Œæˆ‘ä»¬éœ€è¦é‡æ–°æ„æ€ storeï¼Œåœ¨è¿™é‡Œæˆ‘ä»¬å°†å®ƒåˆ†ä¸ºä¸¤ç±»ï¼š\n ç¬¬ä¸€ä¸ªæ˜¯æˆ‘ä»¬å¯ä»¥è§†ä¸ºå‰ç«¯æ•°æ®åº“çš„æ•°æ® storeï¼Œå®ƒä¿å­˜ç€å¯ç”¨å®ä½“çš„ç›¸å…³ä¿¡æ¯ã€‚è¯¥ store å¿…é¡»ç‹¬ç«‹äºç”¨æˆ·æ­£åœ¨ä¸ä¹‹äº¤äº’çš„å®é™…è§†å›¾ã€‚ ç¬¬äºŒä¸ªæ˜¯æˆ‘ä»¬çš„ UI storeï¼Œè¿™é‡ŒåŒ…å«æœ‰æ‰€æœ‰æœ‰å…³ç”¨æˆ· UI çŠ¶æ€çš„ä¿¡æ¯ï¼Œä½†æ˜¯æˆ‘çš„æ„æ€ä¸æ˜¯åœ¨ UI store å¦å¤–ä¿å­˜ä¸€ä»½å®ä½“æ•°æ®ï¼Œè€Œæ˜¯ä¿å­˜æ¡ç›®çš„ idã€‚  Redux æœ¬èº«æ¨èçš„ç»“æ„å¦‚ä¸‹ï¼š\n{ entities: { notes: { byId: { 1: { id: 1, title: \u0026#39;First Note\u0026#39;, description: \u0026#39;Lorem Ipsum\u0026#39; }, 3: { id: 3, title: \u0026#39;Another Note\u0026#39;, description: \u0026#39;Dolor Sit Amet\u0026#39; } }, allIds: [1, 3] }, }, ui: { dashboardList: { state: \u0026#39;LOADED\u0026#39;, notes: [1, 3] } } } æˆ‘ä»¬ä¸»è¦çš„ store åˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼šentities å’Œ uiï¼Œui å±æ€§ä¸‹çš„æ•°æ®ç»“æ„ç”±å¼€å‘è€…å†³å®šï¼Œä½†æ˜¯æœ€é‡è¦çš„æ˜¯æˆ‘ä»¬æ²¡æœ‰ä¿å­˜çœŸæ­£çš„ç¬”è®°æ•°æ®ï¼Œè€Œæ˜¯ä¿å­˜ç¬”è®°çš„ idã€‚\næ•°æ®å­˜å‚¨æ›´åŠ ç»“æ„åŒ–ã€‚å¯¹äºæ¯ä¸ªå®ä½“ç±»å‹ï¼Œæˆ‘ä»¬ä¿æŒå¯¹è±¡åŒ…å«ä¸¤ä¸ªå±æ€§ï¼š\n byId:å°†å®ä½“çš„ id æ˜ å°„åˆ°å…¶å†…å®¹çš„å¯¹è±¡ allIds æ˜¯æˆ‘ä»¬å½“å‰å•†åº—ä¸­æ‰€æœ‰ ID çš„æ•°ç»„  å¦‚æœä½ æƒ³äº†è§£æœ‰å…³ store è§„èŒƒåŒ–çš„æ›´å¤šä¿¡æ¯ï¼Œå»ºè®®å‚è€ƒUsing the Redux Store Like a Database by Nick Sweeting å’Œåœ¨ StackOverflow ä¸Šçš„è®¨è®º Redux - Why normalize?\næ”¹è‰¯ç‰ˆ è®©æˆ‘ä»¬ä½¿ç”¨è§„èŒƒåŒ–é‡å†™ä¸€ä¸‹ï¼Œé¦–å…ˆæˆ‘ä»¬éœ€è¦å°† reducer è½¬æ¢ä¸º UI storeï¼Œç„¶åä½¿ç”¨.map å‡½æ•°å°†ç¬”è®°æ˜ å°„åˆ° ID å±æ€§ä¸‹ï¼š\nexport function notesListReducer(state: NotesListState, action: AppActions): NotesListState { if (action.type === \u0026#39;NOTES_FETCH\u0026#39;) { return { ...state, state: \u0026#39;LOADING\u0026#39;, notes: [], }; } if (action.type === \u0026#39;NOTES_FETCH_SUCCESS\u0026#39;) { return { ...state, state: \u0026#39;LOADED\u0026#39;, notes: action.notes*.map((n: NoteModel) =\u0026gt; n.id**)*, }; } if (action.type === \u0026#39;NOTES_FETCH_ERROR\u0026#39;) { return { ...state, state: \u0026#39;ERROR\u0026#39;, notes: [], errorMessage: action.errorMessage }; } return state; } æ¥ä¸‹æ¥æˆ‘ä»¬éœ€è¦ä¸ºæ•°æ® store å®šä¹‰ typeï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼å®ç°ï¼š\nexport type NotesDict = { [Key: number]: NoteModel; }; export type NotesDictState = { byId: NotesDict; allIds: number[]; }; ç¬¬ä¸€ä¸ª interface æ˜¯ç”¨ Typescript çš„æ–¹å¼å£°æ˜ç‰¹å®šå½¢å¼çš„å¯¹è±¡ï¼Œåœ¨è¿™é‡Œæˆ‘ä»¬å®šä¹‰ ById ä¸ºä¸€ä¸ªå¯¹è±¡ï¼Œä»¥æ•°å­— id ä½œä¸ºé”®ï¼ŒNoteModel ä½œä¸ºå±æ€§ã€‚\nç°åœ¨æˆ‘ä»¬é‡æ–°ç¼–å†™ä¸€ä¸ª reducer æ›´æ–° storeï¼š\nexport function notesDictReducer( state: NotesDictState, action: AppActions ): NotesDictState { if (action.type === \u0026#34;NOTES_FETCH_SUCCESS\u0026#34;) { return { byId: action.notes.reduce( (acc, note) =\u0026gt; ({ ...acc, [note.id]: note }), state ), allIds: action.notes.map((n) =\u0026gt; n.id), }; } return state; } æˆ‘ä»¬åªå¯¹NOTES_FETCH_SUCCESSè¿™ä¸ª action åšå‡ºååº”ï¼Œå› ä¸ºè¿™æ˜¯æä¾›æ–°æ•°æ®çš„å”¯ä¸€æ“ä½œï¼Œç„¶åæˆ‘ä»¬æ„å»ºä»¥ id ä½œä¸ºé”®çš„å¯¹è±¡å’ŒåŒ…å«æ‰€æœ‰ id çš„æ•°ç»„ã€‚\nç°åœ¨æˆ‘ä»¬éœ€è¦åˆå¹¶æ‰€æœ‰çš„ reducer å¹¶ä¸”åˆ›å»ºä¸€ä¸ª main store æ¥ä¿å­˜è¿™äº›æ•°æ®ï¼š\nexport function mainReducer(state: AppState = defaultState(), action: Action) { return { entities: { notes: notesDictReducer(state.entities.notes, action), }, ui: { list: notesListReducer(state.ui.list, action), }, }; } åœ¨å®é™…é¡¹ç›®ä¸­ä½ å¯èƒ½ä¼šä½¿ç”¨combineReducersæ¥ç®€åŒ–ä»£ç ã€‚\næ¥ä¸‹æ¥å”¯ä¸€è¦åšçš„äº‹å°±æ˜¯æ›´æ–°æˆ‘ä»¬çš„è¿æ¥å™¨ï¼ˆconnectorï¼‰ï¼Œç°åœ¨æˆ‘ä»¬çš„ UI ç¬”è®°åˆ—è¡¨åªåŒ…å« idï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦å°†å®ƒæ˜ å°„åˆ°å®é™…çš„ç¬”è®°å¯¹è±¡ï¼š\nconst mapStateToProps = (state: AppState, ownProps: HomeViewProps) =\u0026gt; { return { notes: state.ui.list.notes.map( (noteId) =\u0026gt; state.entities.notes.byId[noteId] ), state: state.ui.list.state, errorMessage: state.ui.list.errorMessage, }; }; æ·»åŠ æœç´¢ ä½¿ç”¨æ–°æ¶æ„æ·»åŠ æœç´¢å®Œå…¨ä¸æ˜¯é—®é¢˜ï¼Œé¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦åˆ›å»ºä¸€ä¸ªæ–°çš„ action interfaceï¼Œçœ‹èµ·æ¥åƒä¸‹é¢è¿™æ ·ï¼š\nexport interface IActionSearchNotes { type: \u0026#34;NOTES_SEARCH\u0026#34;; options: { searchText: string; }; } æ¥ä¸‹é‡Œæˆ‘ä»¬éœ€è¦æ›´æ–° UI reducerï¼š\nexport function notesListReducer( state: NotesListState, action: AppActions, notes: NotesDictState ): NotesListState { /* all other reducers */ if (action.type === \u0026#34;NOTES_SEARCH\u0026#34;) { return { ...state, notes: notes.allIds .map((id) =\u0026gt; notes.byId[id]) .filter(filterByText(action.options.searchText.toLowerCase())) .map((n) =\u0026gt; n.id), }; } return state; } è¯·æ³¨æ„ï¼Œæˆ‘ä»¬éœ€è¦å°†æ•°æ® store ä¼ é€’åˆ° reducer ä¸­ï¼Œä»¥ä¾¿èƒ½å¤Ÿéå†æ‰€æœ‰å…ƒç´ å¹¶ä»…è¿‡æ»¤å‡ºä¸æœç´¢å­—ç¬¦åŒ¹é…çš„ç»“æœï¼Œä½ å¯ä»¥é€šè¿‡å„ç§æ–¹å¼å®ç° filterByText å‡½æ•°ï¼Œä¸‹é¢æ˜¯å…¶ä¸­ä¸€ç§å®ç°æ–¹å¼ï¼š\nfunction filterByText(text: string): (n: NoteModel) =\u0026gt; boolean { return (note: NoteModel): boolean =\u0026gt; { return ( note.title.toLowerCase().indexOf(text) \u0026gt; -1 || note.content.toLowerCase().indexOf(text) \u0026gt; -1 ); }; } è¯¥å‡½æ•°æ£€æŸ¥äº†ç¬”è®°çš„æ ‡é¢˜æˆ–è€…å†…å®¹æ˜¯å¦èƒ½å¤Ÿä¸æœç´¢åŒ¹é…ã€‚\nå¥½äº†ï¼Œå°±æ˜¯è¿™ä¹ˆå¤šäº†ï¼Œæˆ‘ä»¬å·²ç»å®ç°äº†æœç´¢ï¼Œè¯·æ³¨æ„æˆ‘ä»¬äº‹å®ä¸Šå¹¶æ²¡æœ‰è§¦åŠè¿æ¥å™¨ï¼ˆconnectorï¼‰ï¼Œå› ä¸ºæˆ‘ä»¬çš„ store å·²ç»è§„èŒƒåŒ–ï¼Œæ‰€ä»¥æ— éœ€æ›´æ–°è§†å›¾ã€‚æ·»åŠ æ›´å¤šçš„æœç´¢åŠŸèƒ½æˆ–è€…æ’åºåŠŸèƒ½ä¹Ÿä¸éœ€è¦æœ‰å¤ªå¤šçš„æ›´æ”¹ã€‚å¦‚æœæˆ‘ä»¬éœ€è¦æ·»åŠ åˆ·æ–°åŠŸèƒ½ä¸åå°ä¿æŒåŒæ­¥ï¼Œæˆ‘ä»¬åº”ç”¨ä¸­çš„æ‰€æœ‰å®ä¾‹å°†è‡ªåŠ¨æ›´æ–°ã€‚\næ‘˜è¦ æˆ‘å¸Œæœ›æœ¬æ–‡èƒ½å¤Ÿè®©æ‚¨åŸºæœ¬äº†è§£ Redux store è§„èŒƒåŒ–çš„å·¥ä½œåŸç†ä»¥åŠå¦‚ä½•ä½¿ç”¨å®ƒæ¥æ”¹è¿›é¡¹ç›®ã€‚å¦‚æœæ‚¨æƒ³é€šè¿‡æ­¤ç¤ºä¾‹è¿›è¡Œæ›´å¤šæ“ä½œï¼Œæˆ‘å»ºè®®æ‚¨æ‰§è¡Œä»¥ä¸‹ä¸€é¡¹æˆ–æ‰€æœ‰ç»ƒä¹ ï¼š\n åˆ é™¤å…ƒç´ çš„åŠŸèƒ½ æ·»åŠ æ ‡è®°åŠŸèƒ½ æ·»åŠ æŒ‰æ ‡ç­¾æœç´¢çš„é€‰é¡¹  æœ¬æ–‡åŸºäº 2018 å¹´ 7 æœˆ 25 æ—¥åœ¨æ³¢å…°åæ²™ä¸¾è¡Œçš„ SwingDev microConfâ€œState of the State in Reactâ€ç ”è®¨ä¼šã€‚å¦‚æœæ‚¨æƒ³äº†è§£æœ‰å…³è¯¥æ´»åŠ¨çš„æ›´å¤šä¿¡æ¯ï¼Œè¯·è®¿é—®www.microconf.ioã€‚\n","date":"2019-09-18T21:14:23+08:00","image":"https://jo-hnny.github.io/p/%E8%AF%91react-redux-typescript/cover_hu214c846e4a0e357a14266a12e8b1a4b9_1120274_120x120_fill_q75_box_smart1.jpg","permalink":"https://jo-hnny.github.io/p/%E8%AF%91react-redux-typescript/","title":"(è¯‘)React+Redux+Typescript"},{"content":"ä¸ºä»€ä¹ˆè¦ä½¿ç”¨ æœ‰æ—¶å€™æˆ‘æƒ³å†™ä¸ªç®€å•çš„ demoï¼Œä½†æ˜¯æˆ‘ä¾ç„¶æƒ³è¦ä½¿ç”¨ ES6+çš„è¯­æ³•ï¼Œè¿˜æœ‰ scss ä»¥ï¼Œnode modules åŒ…æ‹¬ä¸€äº›å…¶å®ƒçš„ä¾èµ–ï¼Œæ¯”å¦‚æˆ‘è¦å†™ webgl çš„ demoï¼Œæˆ‘å¯èƒ½è¿˜éœ€è¦å¼•å…¥ä¸€äº› shader æ–‡ä»¶ï¼Œè¿™ä¸ªæ—¶å€™æœ€å…ˆæƒ³åˆ°çš„è‚¯å®šæ˜¯ webpack äº†ï¼Œä½†æ˜¯ webpack çš„é…ç½®æ˜¯çœŸçš„éº»çƒ¦ï¼Œè€Œæˆ‘åªæ˜¯æƒ³å†™ä¸ª demo è€Œå·²ï¼Œæ‰€ä»¥æˆ‘æŠŠç›®å…‰æ”¾åˆ°äº† parcel ä¸Šï¼Œæˆ‘ 17 å¹´å°±çœ‹åˆ°è¿™è´§äº†ï¼Œä»¥ä¸ºå®ƒèƒ½é¢ è¦† webpack å‘¢ï¼Œç„¶å¹¶åµï¼Œæˆ‘ç°åœ¨å¼€å§‹æ–°é¡¹ç›®è¿˜æ˜¯å¾—é…ç½®ä¸€å¤§å †çš„ webpack å±æ€§ï¼Œä½†æ˜¯åœ¨è¿™ç§å†™ä¸ªå° demo çš„éœ€æ±‚ä¸‹ï¼Œæˆ‘æƒ³ parcel åº”è¯¥èƒ½å‘æŒ¥å®ƒçš„ä»·å€¼ã€‚\nå¼€å§‹ æ–°å»ºé¡¹ç›®æ–‡ä»¶ mkdir webgl-demo åˆå§‹åŒ–é¡¹ç›® npm init -y æ–°å»ºæ–‡ä»¶ åœ¨ index.html æ–‡ä»¶ä¸­å¼•å…¥ index.js æ–‡ä»¶ï¼Œç„¶åå…¶ä»–çš„ä¾èµ–æˆ‘ä»¬éƒ½ä¼šåœ¨ index.js æ–‡ä»¶ä¸­å¼•å…¥ \u0026lt;!DOCTYPE html\u0026gt; \u0026lt;html lang=\u0026#34;en\u0026#34;\u0026gt; \u0026lt;head\u0026gt; \u0026lt;meta charset=\u0026#34;UTF-8\u0026#34; /\u0026gt; \u0026lt;meta name=\u0026#34;viewport\u0026#34; content=\u0026#34;width=device-width, initial-scale=1.0\u0026#34; /\u0026gt; \u0026lt;meta http-equiv=\u0026#34;X-UA-Compatible\u0026#34; content=\u0026#34;ie=edge\u0026#34; /\u0026gt; \u0026lt;title\u0026gt;Document\u0026lt;/title\u0026gt; \u0026lt;/head\u0026gt; \u0026lt;body\u0026gt; \u0026lt;canvas\u0026gt;\u0026lt;/canvas\u0026gt; \u0026lt;script src=\u0026#34;./index.js\u0026#34;\u0026gt;\u0026lt;/script\u0026gt; \u0026lt;/body\u0026gt; \u0026lt;/html\u0026gt; åœ¨ index.js ä¸­ç¼–å†™ä»£ç ï¼Œå¼•å…¥ä¾èµ–,æˆ‘è¿™ä»£ç å°±ä¸å†™äº†ï¼Œå¼•å…¥ä¸€ä¸‹ä¾èµ–å§ import fragShader from \u0026#34;./index.frag\u0026#34;; import vertShader from \u0026#34;./index.vert\u0026#34;; import \u0026#34;./index.scss\u0026#34;; å®‰è£… parcel,å¯ä»¥å…¨å±€å®‰è£…ï¼Œä¹Ÿå¯ä»¥å®‰è£…åˆ°é¡¹ç›®ï¼Œæˆ‘è¿™å°±å®‰è£…åˆ°é¡¹ç›®äº†,æ¨èå®‰è£…åˆ°é¡¹ç›®ï¼Œè¿™æ ·ä¸ä¼šåˆ«äººæ‹¿å»ä¸çŸ¥é“æ€ä¹ˆç”¨ npm i parcel-bundler -D å¯åŠ¨é¡¹ç›®ï¼Œå®é™…ä¸Šæˆ‘æŠŠå®ƒåŠ åˆ° npm script é‡Œé¢äº† { \u0026#34;name\u0026#34;: \u0026#34;webgl-demo\u0026#34;, \u0026#34;version\u0026#34;: \u0026#34;1.0.0\u0026#34;, \u0026#34;description\u0026#34;: \u0026#34;\u0026#34;, \u0026#34;main\u0026#34;: \u0026#34;index.js\u0026#34;, \u0026#34;scripts\u0026#34;: { \u0026#34;start\u0026#34;: \u0026#34;parcel index.html\u0026#34;, \u0026#34;test\u0026#34;: \u0026#34;echo \\\u0026#34;Error: no test specified\\\u0026#34; \u0026amp;\u0026amp; exit 1\u0026#34; }, \u0026#34;keywords\u0026#34;: [], \u0026#34;author\u0026#34;: \u0026#34;\u0026#34;, \u0026#34;license\u0026#34;: \u0026#34;ISC\u0026#34;, \u0026#34;dependencies\u0026#34;: { \u0026#34;parcel-bundler\u0026#34;: \u0026#34;^1.12.3\u0026#34; }, \u0026#34;devDependencies\u0026#34;: { \u0026#34;glslify-bundle\u0026#34;: \u0026#34;^5.1.1\u0026#34;, \u0026#34;glslify-deps\u0026#34;: \u0026#34;^1.3.1\u0026#34; } } æ¥ç€å¯åŠ¨é¡¹ç›®\nnpm start å®ƒå°±è¿™ä¹ˆè·‘èµ·æ¥äº†ï¼Œæˆ‘çœŸçš„æ˜¯æœ‰ç‚¹æƒŠè®¶ï¼Œæˆ‘ä»¥ä¸ºèµ·ç è¦è‡ªå·±å®‰è£…ä¸€ä¸‹å…¶ä»–çš„ loader ä»€ä¹ˆçš„ï¼Œä½†æ˜¯å®Œå…¨ä¸éœ€è¦ï¼Œå®ƒä¼šè‡ªå·±æ ¹æ®æ–‡ä»¶åç¼€ï¼Œè‡ªåŠ¨å®‰è£… loader ä»€ä¹ˆçš„ï¼Œåæ­£ä½ æ˜¯çœŸçš„ä»€ä¹ˆé…ç½®æ–‡ä»¶éƒ½ä¸ç”¨å†™ã€‚\nç»“æŸ parcel æ˜¯çœŸçš„å¼ºå¤§ï¼Œæˆ‘ä»¥åç»ˆäºå¯ä»¥éšå¿ƒæ‰€æ¬²çš„å†™ demo äº†ï¼Œç”¨æˆ‘è‡ªå·±æœ€å–œæ¬¢çš„æ–¹å¼ã€‚\n","date":"2019-09-18T21:11:32+08:00","image":"https://picsum.photos/seed/0d93939eee4441478b76522c689dfce3/4096/2160","permalink":"https://jo-hnny.github.io/p/parcel%E7%AE%80%E5%8D%95%E8%AF%95%E7%94%A8/","title":"Parcelç®€å•è¯•ç”¨"},{"content":"å®ç°æ‹‰æ ¼æœ—æ—¥æ’å€¼ç®—æ³• ä¹‹å‰åšå›¾ç‰‡æ›²çº¿è°ƒèŠ‚çš„æ—¶å€™ä½¿ç”¨åˆ°äº†æ‹‰æ ¼æœ—æ—¥æ’å€¼ç®—æ³•ï¼Œä¸»è¦å‚è€ƒäº†ç»´åŸºç™¾ç§‘ï¼Œè¿™é‡Œç®€å•è®°å½•ä¸€ä¸‹\nä»€ä¹ˆæ˜¯æ‹‰æ ¼æœ—æ—¥æ’å€¼ç®—æ³• å¦‚ä½•é€šè¿‡ç»™å®šçš„æœ‰é™ç‚¹å¾—åˆ°æ‹‰æ ¼æœ—æ—¥æ’å€¼å‡½æ•° ç¤ºä¾‹ ç»´åŸºç™¾ç§‘ä¸Šäº¤ä»£çš„ç®—æ˜¯æ¯”è¾ƒæ˜ç™½äº†ï¼Œç„¶åæˆ‘ä»¬è¦åšçš„å°±æ˜¯ç”¨ä»£ç å»å®ç°è¿™ä¸ªç®—æ³•äº†ï¼Œä¸‹é¢ç»™å‡ºæˆ‘çš„å®ç° const points = [ [4, 10], [5, 5.25], [6, 1], ]; const getLa = (points) =\u0026gt; { return (i) =\u0026gt; { function la(points, index = 0) { if (index === points.length) return 0; const [x, y] = points[index]; const up = points.reduce( (pre, [xn], upIndex) =\u0026gt; (upIndex === index ? pre : pre * (i - xn)), 1 ); const down = points.reduce( (pre, [xn], downIndex) =\u0026gt; (downIndex === index ? pre : pre * (x - xn)), 1 ); return y * (up / down) + la(points, index + 1); } return la(points); }; }; const laFn = getLa(points); console.log(laFn(18)); // -11 æˆ‘å†™è¿™ä¸ªçš„æ—¶å€™æ„Ÿè§‰éš¾ç‚¹å€’æ˜¯ä¸åœ¨ç®—æ³•ä¸Šï¼Œè€Œæ˜¯å¦‚ä½•æŠŠç®—æ³•è½¬æ¢ä¸ºæˆ‘ä»¬åœ¨ç¨‹åºä¸­å¯ç”¨çš„å‡½æ•°\n","date":"2019-09-18T21:10:50+08:00","image":"https://picsum.photos/seed/a06caa46404f48529f7fd8cba609add4/4096/2160","permalink":"https://jo-hnny.github.io/p/%E5%AE%9E%E7%8E%B0%E6%8B%89%E6%A0%BC%E6%9C%97%E6%97%A5%E6%8F%92%E5%80%BC%E7%AE%97%E6%B3%95/","title":"å®ç°æ‹‰æ ¼æœ—æ—¥æ’å€¼ç®—æ³•"},{"content":"ç®€å•çš„æ’åºæ€»æ˜¯è¦ä¼šçš„å˜› æ¨èä¸€ä¸ªå¾ˆå¥½çš„ APP - ç®—æ³•åŠ¨ç”»å›¾è§£ï¼Œä»¥ä¸‹è§£æ³•éƒ½æ˜¯å‚è€ƒè¯¥ APP å®ç°\nå†’æ³¡æ’åº æˆ‘ä¸å¤ªå¥½æŠŠ APP çš„åŠ¨ç”»è´´ä¸Šæ¥ï¼Œå¤§å®¶å¯ä»¥è‡ªå·±æœç´¢ä¸€ä¸‹ï¼Œä½†æ˜¯ä¸»è¦çš„æ€æƒ³å°±æ˜¯ï¼Œä»æ•°ç»„æœ«ä½å¼€å§‹ï¼Œä¾æ¬¡å’Œä¸Šä¸€ä½ä¸¤ä¸¤æ¯”è¾ƒï¼Œå°†è¾ƒå°çš„æ•°äº¤æ¢åˆ°å·¦è¾¹ï¼Œé‚£ä¹ˆç¬¬ä¸€è½®ä¸‹æ¥ä¹‹åï¼Œæœ€å·¦ä¾§å°±æ˜¯è¯¥æ•°ç»„æœ€å°çš„å€¼ï¼Œæ¥ä¸‹æ¥é‡å¤ä¹‹å‰çš„åŠ¨ä½œï¼Œå°†ç¬¬äºŒå°çš„æ•°å­—æ’åœ¨å·¦ä¾§å€’æ•°ç¬¬äºŒä¸ªï¼Œé‡å¤æ•°ç»„é•¿åº¦çš„æ¬¡æ•°ä¹‹åå³å®Œæˆæ’åºï¼Œä¸‹é¢æ˜¯æˆ‘çš„å®ç°ï¼š\n// å®šä¹‰ä¸€ä¸ªå·¥å…·å‡½æ•°ï¼Œç”¨äºäº¤æ¢æ•°ç»„ä¸­ä¸¤ä¸ªä½ç½®çš„å€¼ function exchange(list, index1, index2) { [list[index1], list[index2]] = [list[index2], list[index1]]; } function bubbleSort(list) { let position = 0; const len = list.length; while (position \u0026lt; len) { for (let i = len - 1; i \u0026gt; position; i--) { if (list[i] \u0026lt; list[i - 1]) { exchange(list, i, i - 1); } } position++; } return list; } å¿«é€Ÿæ’åº é¡¾åæ€ä¹‰ï¼Œè¯¥æ’åºçš„ç‰¹ç‚¹å°±æ˜¯å¿«ï¼Œä¸»è¦æ€æƒ³å°±æ˜¯ä»åŸå§‹æ•°ç»„ä¸­å–ä¸€ä¸ªåŸºå‡†å€¼ï¼Œç„¶åæ¯”æ­¤å€¼å¤§çš„éƒ½æ”¾åˆ°å³è¾¹ï¼Œå°çš„éƒ½æ”¾å·¦è¾¹ï¼Œç„¶åå–åŸºå‡†å€¼å·¦è¾¹çš„å’Œå³è¾¹çš„å„ä¸ºæ–°æ•°ç»„ï¼Œé‡å¤ä¹‹å‰çš„æ­¥éª¤ï¼Œä¹Ÿå°±æ˜¯ä¸€ç§é€’å½’ï¼Œæœ€åç›´è‡³å·¦ä¾§ã€å³ä¾§éƒ½åªæœ‰ä¸€ä¸ªå…ƒç´ æˆ–è€… 0 ä¸ªå…ƒç´ ï¼Œæˆ‘çš„å®ç°å¦‚ä¸‹ï¼š\nfunction quickSort(list) { const len = list.length; if (len \u0026lt; 2) return list; const left = []; const right = []; const basic = list[0]; list .slice(1) .forEach((item) =\u0026gt; (item \u0026gt;= basic ? right.push(item) : left.push(item))); return quickSort(left).concat(basic, quickSort(right)); } ç®—æ³•æ—¶é—´å¤æ‚åº¦ ç®—æ³•æœ‰å¥½æœ‰åï¼Œé‚£ä¹ˆæˆ‘ä»¬æ€ä¹ˆè¡¡é‡ç®—æ³•çš„å¥½æ€€å‘¢ï¼Ÿè¿™é‡Œå°±å¼•å…¥äº†æ—¶é—´å¤æ‚åº¦çš„æ¦‚å¿µï¼Œæ¯”å¦‚ä¸Šè¾¹çš„å†’æ³¡æ’åºçš„æ—¶é—´å¤æ‚åº¦ä¸º O(n^2),è€Œå¿«æ’çš„æ—¶é—´å¤æ‚åº¦åˆ™ä¸º O(n*Logn),é‚£ä¹ˆè¿™ä¸ªå¤æ‚åº¦åˆ°åº•æ˜¯å¦‚ä½•å¾—æ¥çš„,æˆ‘åœ¨çŸ¥ä¹ä¸Šè¾¹æ‰¾åˆ°ä¸€ç¯‡å›ç­”è®²çš„å¾ˆå¥½\n","date":"2019-09-18T21:10:17+08:00","image":"https://picsum.photos/seed/2b71bb853ecf406b9f615b4d6f90b521/4096/2160","permalink":"https://jo-hnny.github.io/p/%E5%86%92%E6%B3%A1%E6%8E%92%E5%BA%8F%E4%B8%8E%E5%BF%AB%E6%8E%92%E4%BB%A5%E5%8F%8A%E7%AE%97%E6%B3%95%E7%9A%84%E6%97%B6%E9%97%B4%E5%A4%8D%E6%9D%82%E5%BA%A6/","title":"å†’æ³¡æ’åºä¸å¿«æ’ä»¥åŠç®—æ³•çš„æ—¶é—´å¤æ‚åº¦"},{"content":"æ¨¡æ‹Ÿå®ç° callï¼Œapply æˆ‘å°±ä¸å†™äº†ï¼Œå¾ˆç›¸ä¼¼ Function.prototype.callMe = function (that, ...args) { that[this.name] = this; that[this.name](...args); }; æ¨¡æ‹Ÿå®ç° bind Function.prototype.bindMe = function (that, ...args) { that[this.name] = this; return function () { that[this.name](...args); }; }; æ€»ç»“ call å’Œ apply éƒ½æ˜¯ä¸ºäº†æ”¹å˜å‡½æ•°åœ¨å®šä¹‰æ—¶åŸæœ¬çš„ this æŒ‡å‘ï¼Œé‚£ä¹ˆæƒ³æƒ³ this çš„è¡¨ç°ï¼Œå§‹ç»ˆæŒ‡å‘è°ƒç”¨è‡ªå·±çš„å¯¹è±¡ï¼Œæˆ‘ä»¬è¦åšçš„å°±æ˜¯ç”¨ call å’Œ bind æä¾›çš„å¯¹è±¡ä½œä¸ºè°ƒç”¨è¯¥å‡½æ•°çš„å¯¹è±¡ï¼Œå³æŠŠè¯¥å‡½æ•°æŒ‚è½½ä¸ºæ‰€æä¾›å¯¹è±¡çš„ä¸€ä¸ªå±æ€§ã€‚\n","date":"2019-09-18T21:08:52+08:00","image":"https://picsum.photos/seed/42a9af59d3a34710adcf0d7b8bf521d9/4096/2160","permalink":"https://jo-hnny.github.io/p/%E6%A8%A1%E6%8B%9F%E5%AE%9E%E7%8E%B0call%E5%92%8Capply%E4%BB%A5%E5%8F%8Abind/","title":"æ¨¡æ‹Ÿå®ç°callå’Œapplyä»¥åŠbind"},{"content":"å‰æƒ… é¡¹ç›®åšçš„æ˜¯è§†é¢‘æ¸²æŸ“ï¼Œä¹Ÿå°±æ˜¯è§†é¢‘æ¸²æŸ“åˆ° webgl ä¸Šï¼ŒåŒæ—¶åŠ ä¸Šä¸€äº›è½¬åœºç‰¹æ•ˆï¼Œæ–‡æœ¬æ•ˆæœï¼Œä¹‹å‰çš„æ–‡æœ¬æ•ˆæœæˆ‘æ˜¯ç”¨ DIV æ ‡ç­¾åŠ ä¸Š css3 çš„ animation å®šä½åˆ° canvas åŒºåŸŸå®ç°çš„ï¼Œæœ¬ç€èƒ½ç”¨ webgl å®ç°å°±ç”¨ webgl å®ç°çš„åˆè¡·æœ€åå†³å®šæ–‡æœ¬æ•ˆæœä¹Ÿç”¨ webgl å®ç°ï¼Œå¤§è‡´æ€è·¯å°±æ˜¯å¾—åˆ°æ–‡æœ¬çš„çº¹ç†ï¼Œç„¶åç”¨ shader å¤„ç†çº¹ç†å®ç°åŠ¨æ•ˆ,é‡åˆ°çš„å‘ä¸»è¦æ¥è‡ªå¾—åˆ°çº¹ç†æ—¶çš„å­—ä½“æ•ˆæœã€‚\nä½¿ç”¨ svg å¾—åˆ°æ–‡æœ¬çº¹ç† ç”±äº svg å‰åç«¯é€šç”¨ï¼Œèƒ½å¤Ÿä¿æŒä¸€è‡´ï¼Œæ•…åˆæ­¥å†³å®šä½¿ç”¨ svg å®ç°æ–‡æœ¬çº¹ç†ï¼Œæ­¥éª¤ä¹Ÿå°±æ˜¯æ‹¼æ¥ä¸Šé¢œè‰²ã€å­—ä½“ã€å­—å·çš„å±æ€§å¾—åˆ°ä¸€ä¸ª svg å­—ç¬¦ä¸²ï¼Œç„¶åå°†å­—ç¬¦ä¸²è½¬ä¸ºä¸€ä¸ª blob åœ°å€ï¼ŒæŠŠè¿™ä¸ªåœ°å€ç»™å›¾ç‰‡ï¼Œä»¥æ­¤å¾—åˆ°çº¹ç†ã€‚\nå­—ä½“ä¸ç”Ÿæ•ˆ è¿™ä¹ˆåšäº†ä¹‹åå‘ç°å…¶ä½™çš„æ–‡æœ¬å¤§å°ã€é¢œè‰²éƒ½æ²¡é—®é¢˜ï¼Œå°±æ˜¯å­—ä½“ä¸ç”Ÿæ•ˆï¼Œæœ€åç»è¿‡ç ”ç©¶å¾—å‡ºåˆæ­¥ç»“è®ºï¼Œæˆ‘ä»¬ä½¿ç”¨çš„åªæ˜¯ä¸€ä¸ª svg å­—ç¬¦ï¼Œå¹¶ä¸èƒ½å’Œé¡¹ç›®ä¸­ css å£°æ˜çš„ font-face å…³è”èµ·æ¥ï¼Œè¦æƒ³å­—ä½“ç”Ÿæ•ˆï¼Œå¿…é¡»æŠŠå­—ä½“ç”¨ base64 çš„å½¢å¼å†…è”åˆ° svg ä¸­ã€‚\nè¯´å¹²å°±å¹² ä¸å°±æ˜¯ base64 å˜›ï¼Œç»è¿‡æˆ‘ä¿®æ”¹ webpack loader é…ç½®ï¼Œå­—ä½“æ–‡ä»¶æˆåŠŸå†…è”åˆ° svg ä¸­ï¼Œä½†æ˜¯å¦ˆå‘€ï¼Œè¿™ä¸ª svg çœŸä»–ä¹ˆçš„å¤§ï¼Œå‡ å M çš„å­—ç¬¦ï¼Œé¡µé¢åŠ è½½è¦è½¬è€åŠå¤©ï¼Œå¦‚æœä»¥åæ”¯æŒå­—ä½“è¶Šæ¥è¶Šå¤šï¼Œé‚£è¿™ä¸ªè‚¯å®šä¸è¡Œçš„ï¼Œå¾—æ”¹ä¸€ä¸‹ï¼Œæˆ‘è§‰å¾— ajax åŠ¨æ€è¯·æ±‚å­—ä½“ä¸º blobï¼Œç„¶åè½¬ base64ï¼Œæœç„¶è¿™ä¸ªæ–¹æ¡ˆå¥½å¤šäº†ï¼Œé¡µé¢åŠ è½½å¾ˆå¿«ï¼Œæ²¡æœ‰å½±å“ï¼Œäºæ˜¯æ¥ç€å¼€æï¼Œç»“æœåˆ°äº†ä»å›¾ç‰‡åˆ°çº¹ç†è¿™ä¸€æ­¥çš„æ—¶å€™çº¿ç¨‹ç›´æ¥é˜»å¡äº†ï¼Œè§†é¢‘æ’­æ”¾åˆ°è¿™çš„æ—¶å€™ï¼Œæˆ‘çš„è¿›åº¦æŒ‡é’ˆæ€»ä¼šå¡ä¸Šä¸€ç§’å·¦å³ï¼Œéå¸¸å½±å“ä½“éªŒï¼Œåº”è¯¥æ˜¯è¿™ä¸ªå›¾ç‰‡ä½“ç§¯å¤ªå¤§äº†ï¼Œè¿™å°±æ— è§£äº†å•Šï¼Œåˆè¦å­—ä½“ç”Ÿæ•ˆï¼Œåˆè¦æ–‡ä»¶å°ï¼ŒåŠä¸åˆ°å•Šã€‚\næ¢æ–¹æ¡ˆ æ²¡åŠæ³•è¿™ä¸ªæ˜¯è¡Œä¸é€šäº†ï¼Œæ¢æ–¹æ¡ˆå§ï¼Œå¥½åƒä¹Ÿæ²¡ä»€ä¹ˆèƒ½æ¢çš„äº†ï¼Œåªå‰© canvas äº†ï¼Œé‚£å°±ä¸Šå§ï¼Œç”Ÿæˆä¸€ä¸ª canvas å…ƒç´ ï¼Œç”»ä¸Šæ–‡æœ¬ï¼Œè®¾ç½®å­—ä½“é¢œè‰²ï¼Œå—¯ï¼Œå®Œç¾ã€‚\nç¦»å®Œç¾è¿˜å·®ä¸€æ ¹å¤´å‘ä¸çš„è·ç¦» æœ€åè¿˜æ˜¯å‘ç°äº†ä¸€ç‚¹é—®é¢˜ï¼Œé‚£å°±æ˜¯ä¸€å¼€å§‹åˆ‡æ¢å­—ä½“çš„æ—¶å€™å¹¶æ²¡æœ‰ç”Ÿæ•ˆï¼Œä½†æ˜¯åˆ‡ä¸Šå‡ æ¬¡å°±åˆç”Ÿæ•ˆäº†ï¼Œç»è¿‡æˆ‘å¤šå¹´å‰ç«¯ç»éªŒçŒœæµ‹ï¼Œæµè§ˆå™¨æœ¬ç€ä¸ºç”¨æˆ·èŠ‚çº¦èµ„æºçš„ç¾å¥½æƒ³æ³•ï¼Œæ€»æ˜¯ç­‰ä½ ç¡®å®ç”¨åˆ°äº†è¿™ä¸ªå­—ä½“çš„æ—¶å€™æ‰å»åŠ è½½å­—ä½“ï¼Œä¹Ÿå°±æ˜¯ canvas ä¸Šç”¨åˆ°è¿™ä¸ªå­—ä½“çš„æ—¶å€™æ‰å»åŠ è½½å­—ä½“ï¼Œä½†æ˜¯ canvas æ˜¯è¦é©¬ä¸Šç”Ÿæˆçº¹ç†çš„ï¼Œå®ƒå¯ç­‰ä¸äº†ä½ ï¼Œäºæ˜¯å°±å‡ºç°äº†ä¸€å¼€å§‹ä¸ç”Ÿæ•ˆï¼Œåé¢åˆç”Ÿæ•ˆçš„çŠ¶å†µï¼Œé‚£å°±æå‰ä½¿ç”¨å­—ä½“å§ï¼Œäºæ˜¯æˆ‘åœ¨æœ€å¤–å±‚çš„ html ä¸ŠåŠ äº†ä¸€äº›æ–‡æœ¬ï¼Œåˆ†åˆ«æŒ‡å®šäº†ä½¿ç”¨çš„å­—ä½“ï¼Œç„¶å displayï¼šnoneï¼Œç»“æœå±…ç„¶è¿˜æ˜¯ä¸ç®¡ç”¨ï¼Œå¦ˆçš„ï¼Œæµè§ˆå™¨æƒ³å¤ªå¤šäº†ï¼Œç”±äº displayï¼šnone ä½ ä¹Ÿçœ‹ä¸åˆ°ï¼Œæ‰€ä»¥æµè§ˆå™¨è¿˜æ˜¯æ²¡å»åŠ è½½èµ„æºï¼Œsoï¼Œæ”¹æˆäº†ç»å¯¹å®šä½ï¼Œtopï¼š -1000pxï¼Œå†ä¸€è¯•ï¼Œå“ˆå“ˆï¼Œå¥½äº†ã€‚\næ€»ç»“ svg å‘æ¯”è¾ƒå¤šï¼Œè€Œä¸”æˆ‘å¯¹ä»–å¹¶ä¸ç†Ÿæ‚‰ï¼Œè¿˜æ˜¯ canvas æ¯”è¾ƒå¯çˆ±\n","date":"2019-09-18T21:06:15+08:00","image":"https://picsum.photos/seed/8b427e54cff84b0fbdfdce68b842a094/4096/2160","permalink":"https://jo-hnny.github.io/p/%E8%AE%B0%E4%B8%80%E6%AC%A1webgl%E6%96%87%E6%9C%AC%E7%89%B9%E6%95%88%E6%89%80%E8%B8%A9%E7%9A%84%E5%9D%91/","title":"è®°ä¸€æ¬¡webglæ–‡æœ¬ç‰¹æ•ˆæ‰€è¸©çš„å‘"},{"content":"ä¸ºäº†å­¦ä¹ è¿™ä¸ªï¼Œæˆ‘å†™äº†ä¸€ä¸ªä¾‹å­ï¼Œä¸»è¦æ˜¯ä¸€ä¸ªåŸºäº koa çš„ restful æœåŠ¡ï¼Œç„¶åæ˜¯åŸºäº mochaã€supertest çš„æµ‹è¯•æ–‡ä»¶ã€‚\n1ã€é¦–å…ˆéœ€è¦å®‰è£…ä¾èµ– npm i supertest mocha chai --save-dev\n2ã€npm script [ \u0026#34;scripts\u0026#34;: { \u0026#34;start\u0026#34;: \u0026#34;nodemon app.js\u0026#34;, \u0026#34;test\u0026#34;: \u0026#34;mocha\u0026#34; }, ] 3ã€ç›®å½•ç»“æ„ Mocha é»˜è®¤è¿è¡Œ test å­ç›®å½•é‡Œé¢çš„æµ‹è¯•è„šæœ¬ã€‚æ‰€ä»¥ï¼Œä¸€èˆ¬éƒ½ä¼šæŠŠæµ‹è¯•è„šæœ¬æ”¾åœ¨ test ç›®å½•é‡Œé¢ï¼Œç„¶åæ‰§è¡Œ mocha å°±ä¸éœ€è¦å‚æ•°äº†\n4ã€ç¼–å†™æµ‹è¯•æ–‡ä»¶ åœ¨æˆ‘çš„é¡¹ç›®ä¸­æœ‰ä¸€ä¸ªå…³äº user çš„ rest æ¥å£ï¼Œuser çš„æ•°æ®æ¨¡å‹å¤§è‡´å¦‚ä¸‹ï¼š\n{ \u0026#34;name\u0026#34;: \u0026#34;wu\u0026#34;, \u0026#34;age\u0026#34;: 24, \u0026#34;likes\u0026#34;: [\u0026#34;movie\u0026#34;, \u0026#34;music\u0026#34;] } 4.1ã€å¼•å…¥éœ€è¦çš„æ¨¡å— const request = require(\u0026#34;supertest\u0026#34;)(\u0026#34;http://127.0.0.1:3000\u0026#34;); //åˆå§‹åŒ–supertest const DB = require(\u0026#34;../db\u0026#34;); const USERS = new DB(\u0026#34;users\u0026#34;); const { expect } = require(\u0026#34;chai\u0026#34;); // å¼•å…¥chaiçš„expectæ–­è¨€ å…³äºchaiçš„ä½¿ç”¨å¯ä»¥å»å®˜ç½‘æŸ¥çœ‹ï¼Œæ¯”è¾ƒç®€å•\n4.2ã€describe å¯¹æµ‹è¯•è¿›è¡Œæè¿°,å¯ä»¥è¿›è¡ŒåµŒå¥—\ndescribe(\u0026#39;users api\u0026#39;, () =\u0026gt; { describe(\u0026#39;post: æ–°å¢ä¸€ä¸ªç”¨æˆ·\u0026#39;, () =\u0026gt; { }) } 4.3ã€é’©å­ mochaæä¾›äº†å››ä¸ªé’©å­å‡½æ•°beforeã€ afterã€afterEach å’Œ beforeEachã€‚\nå…¶ä¸­beforeé’©å­ä¼šåœ¨æœ¬åŒºå—çš„æ‰€æœ‰æµ‹è¯•ç”¨ä¾‹ä¹‹å‰æ‰§è¡Œï¼ŒbeforeEaché’©å­ä¼šåœ¨æœ¬åŒºå¿«çš„æ¯ä¸ªæµ‹è¯•ç”¨ä¾‹ä¹‹å‰æ‰§è¡Œï¼Œafterä¸afterEachåŒç†ã€‚\næ¯”å¦‚æˆ‘æƒ³åœ¨æ‰€æœ‰æµ‹è¯•ç”¨ä¾‹å¼€å§‹ä¹‹å‰æ¸…ç©ºæ•°æ®åº“ä¸­ USERS çš„æ•°æ®ã€‚\ndescribe(\u0026#39;users api\u0026#39;, () =\u0026gt; { before(async () =\u0026gt; { this.user = { name: \u0026#39;walala\u0026#39;, age: 8, likes: [] } await USERS.clear() }) ) åœ¨è¿™ä¸ªé’©å­ä¸­æˆ‘ä½¿ç”¨äº†asyncå‡½æ•°ï¼Œä½ åœ¨ä¸‹è¾¹ä¹Ÿä¼šçœ‹åˆ°ä½¿ç”¨ done æ–¹æ³•é€šçŸ¥è¿™ä¸ªå¼‚æ­¥å›è°ƒå®Œæˆçš„æ–¹å¼ï¼Œ Mocha å†…ç½®å¯¹ Promise çš„æ”¯æŒï¼Œå…è®¸ç›´æ¥è¿”å› Promiseï¼Œç­‰åˆ°å®ƒçš„çŠ¶æ€æ”¹å˜ï¼Œå†æ‰§è¡Œæ–­è¨€ï¼Œè€Œä¸ç”¨æ˜¾å¼è°ƒç”¨ done æ–¹æ³•\n4.4ã€it itç¬¬ä¸€ä¸ªå‚æ•°æ˜¯å¯¹é¢„æœŸç»“æœçš„æè¿°ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯ä¸€ä¸ª callbackï¼Œæ˜¯è¯¦ç»†çš„æµ‹è¯•è¡Œä¸ºã€‚\ndescribe(\u0026#34;users api\u0026#34;, () =\u0026gt; { before(async () =\u0026gt; { this.user = { name: \u0026#34;walala\u0026#34;, age: 8, likes: [], }; await USERS.clear(); }); describe(\u0026#34;post: æ–°å¢ä¸€ä¸ªç”¨æˆ·\u0026#34;, () =\u0026gt; { it(\u0026#34;è¿”å›200çŠ¶æ€ç ï¼Œä»¥åŠä¸€ä¸ªåŒ…å«æ–°å¢ç”¨æˆ·idçš„å¯¹è±¡\u0026#34;, (done) =\u0026gt; { request .post(\u0026#34;/user\u0026#34;) .send(this.user) .expect(200) .end((err, res) =\u0026gt; { if (err) done(err); expect(res.body).to.have.property(\u0026#34;id\u0026#34;).equal(0); this.id = res.body.id; done(); }); }); }); describe(\u0026#34;get: è·å–ç”¨æˆ·\u0026#34;, () =\u0026gt; { it(\u0026#34;è¿”å›çŠ¶æ€ç 200ï¼Œ ä»¥åŠç”¨æˆ·å¯¹è±¡\u0026#34;, (done) =\u0026gt; { request .get(`/user/${this.id}`) .expect(200) .end((err, res) =\u0026gt; { if (err) done(err); expect(res.body).to.be.deep.equal(this.user); done(); }); }); }); describe(\u0026#34;put: ä¿®æ”¹\u0026#34;, () =\u0026gt; { before((done) =\u0026gt; { this.user = { name: \u0026#34;walala\u0026#34;, age: 28, likes: [], }; done(); }); it(\u0026#34;è¿”å›çŠ¶æ€ç 200\u0026#34;, (done) =\u0026gt; { request.put(`/user/${this.id}`).send(this.user).expect(200).end(done); }); }); describe(\u0026#34;getAll: è·å–æ‰€æœ‰ç”¨æˆ·\u0026#34;, () =\u0026gt; { it(\u0026#34;è¿”å›çŠ¶æ€ç 200ï¼Œä»¥åŠåŒ…å«ç”¨æˆ·å¯¹è±¡çš„æ•°ç»„\u0026#34;, (done) =\u0026gt; { request .get(`/user`) .expect(200) .end((err, res) =\u0026gt; { if (err) done(err); expect(res.body).to.be.deep.include(this.user); done(); }); }); }); describe(\u0026#34;delete: åˆ é™¤ç”¨æˆ·\u0026#34;, () =\u0026gt; { it(\u0026#34;è¿”å›çŠ¶æ€ç 200\u0026#34;, (done) =\u0026gt; { request.get(`/user`).expect(200).end(done); }); }); }); 5ã€è¿è¡Œæµ‹è¯• npm start\nnpm test\næµ‹è¯•å°±å®Œæˆäº†\n","date":"2019-09-18T21:01:55+08:00","image":"https://picsum.photos/seed/ccbd0034a97a40f299bb27b18bf93999/4096/2160","permalink":"https://jo-hnny.github.io/p/%E5%9F%BA%E4%BA%8Emocha%E7%9A%84nodejs%E5%8D%95%E5%85%83%E6%B5%8B%E8%AF%95/","title":"åŸºäºmochaçš„nodejså•å…ƒæµ‹è¯•"},{"content":"å†™å®Œæ ‡é¢˜å°±åæ‚”äº†ï¼Œes6 çš„ class åªæ˜¯è¯­æ³•ç³–ï¼Œé‚£ä¹ˆæˆ‘è¦æƒ³çŸ¥é“ es5 çš„ç±»çš„å®ç°ä¸æ˜¯åº”è¯¥å»çœ‹ es6 çš„æºç å—ï¼Ÿè™½ç„¶è¿™æ ·ï¼Œä½†æ˜¯æˆ‘çš„ä¾‹å­éƒ½å·²ç»å†™å®Œäº†ï¼Œæˆ‘è¿˜æ˜¯ po ä¸Šæ¥å§ï¼Œå›å¤´å†çœ‹çœ‹ es6 æ˜¯æ€ä¹ˆå®ç°çš„ã€‚\né¦–å…ˆçœ‹çœ‹ ES6 çš„ class class A { constructor(x) { // æ„é€ å‡½æ•°  this.x = x; // ä¸ºAçš„å®ä¾‹æ·»åŠ propså±æ€§  } test() { // ç»™Açš„å®ä¾‹æ·»åŠ æ–¹æ³•  console.log(\u0026#34;test å®ä¾‹æ–¹æ³•\u0026#34;); } static test() { // ç»™Aæ·»åŠ é™æ€æ–¹æ³•  console.log(\u0026#34;test é™æ€æ–¹æ³•\u0026#34;); } } A.som = 123; // ç»™Aæ·»åŠ é™æ€å±æ€§ï¼Œè¿™ä¸ªæœ‰ç‚¹low,ä¸ºä»€ä¹ˆä¸æ˜¯static som = 123  // å®ç°ç»§æ‰¿ class B extends A { constructor(x, y) { super(x); this.y = y; } } const b = new B(1, 2); B.test(); // test é™æ€æ–¹æ³• b.test(); // test å®ä¾‹æ–¹æ³• console.log(B.som); // 123 console.log(b.x); // 1 console.log(b.y); // 2 å†™èµ·æ¥å¾ˆç®€å•\nes5 çš„å®ç° function A(x) { // æ„é€ æ–¹æ³•  this.x = x; // ä¸ºAçš„å®ä¾‹æ·»åŠ propså±æ€§ } A.prototype.test = function () { // ç»™Açš„å®ä¾‹æ·»åŠ æ–¹æ³•  console.log(\u0026#34;test å®ä¾‹æ–¹æ³•\u0026#34;); }; A.test = function () { // ç»™Aæ·»åŠ é™æ€æ–¹æ³•  console.log(\u0026#34;test é™æ€æ–¹æ³•\u0026#34;); }; A.som = 123; // ç»™Aæ·»åŠ é™æ€å±æ€§  // å®ç°ç»§æ‰¿ function B(x, y) { A.apply(this, [x, y]); // æ‰§è¡ŒAçš„æ„é€ å‡½æ•°  this.y = y; } // B.__proto__ = A // ç»§æ‰¿Açš„é™æ€æ–¹æ³•,è¿™æ ·å†™eslintä¼šæŠ¥é”™ï¼Œmdnè¯´æ˜¯ä¼šå¸¦æ¥æ€§èƒ½é—®é¢˜ï¼Œä½†æ˜¯æˆ‘è§‰å¾—å¥½åƒä¸ä¼šï¼Œå…¶å®ƒçš„èµ„æ–™éƒ½ç”¨çš„æ˜¯å¯¹è±¡éå†æ·»åŠ ï¼Œæ„Ÿè§‰æœ‰ç‚¹éº»çƒ¦  // B.prototype.__proto__ = A.prototype // ç»§æ‰¿Açš„å®ä¾‹æ–¹æ³•ï¼Œprototypeä¹Ÿæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œä»–ä¹Ÿæœ‰__proto__  // æ‰¾åˆ°ä¸€ä¸ªæ–°æ–¹æ³•ï¼Œå®è´¨æ˜¯ä¸€æ ·çš„ï¼Œä½†æ˜¯eslintä¸æŠ¥é”™ï¼Œä½†æ˜¯çœ‹äº†ä¸€ä¸‹å…¼å®¹æ€§ï¼Œsafariä¸æ”¯æŒ  Object.setPrototypeOf(B, A); Object.setPrototypeOf(B.prototype, A.prototype); const b = new B(1, 2); B.test(); // test é™æ€æ–¹æ³• b.test(); // test å®ä¾‹æ–¹æ³• console.log(B.som); // 123 console.log(b.x); // 1 console.log(b.y); // 2 ç•¥æ˜¾å¤æ‚\n","date":"2019-09-18T21:00:58+08:00","image":"https://picsum.photos/seed/064c5fca816c45068b6c3cd7fa82dcf2/4096/2160","permalink":"https://jo-hnny.github.io/p/%E7%B1%BB%E7%9A%84%E5%AE%9E%E7%8E%B0%E5%9C%A8es5%E4%B8%8Ees6%E4%B8%8B%E7%9A%84%E5%8C%BA%E5%88%AB/","title":"ç±»çš„å®ç°åœ¨es5ä¸es6ä¸‹çš„åŒºåˆ«"},{"content":"è¿™é‡Œä¸»è¦è®°å½•ä¸€äº›æˆ‘æ²¡æœ‰å›ç­”ä¸Šæ¥çš„é¢è¯•é¢˜\n1ã€ä½œç”¨åŸŸé“¾ ä»Šå¤©æ¥åˆ°äº†ä¸€ä¸ªç”µè¯é¢è¯•ï¼Œæ„Ÿè§‰å›ç­”çš„å¾ˆä¸å¥½ï¼Œæˆ‘å¯¹ css å°¤å…¶ä¸å¤ªæ“…é•¿ï¼ŒBFC è¿™ä¸ªæ²¡ç­”ä¸Šæ¥ï¼Œå…¶å®ä¹‹å‰æ˜¯æœ‰çœ‹åˆ°è¿‡çš„ï¼Œä½†æ˜¯ç”±äºè‡ªå·±å¯¹ css çš„ä¸é‡è§†ï¼Œå¯¼è‡´æ²¡æœ‰å…³æ³¨ã€‚\nä½†æ˜¯è¿™ç¯‡æ–‡ç« è¦è¯´çš„æ˜¯ä½œç”¨åŸŸé“¾ï¼Œæœ¬æ¥ js ç®—æ˜¯æˆ‘æ“…é•¿çš„ï¼Œè¿™ä¸ªæ²¡ç­”ä¸Šæ¥å®å±ä¸åº”è¯¥ï¼Œå°±ç®—æˆ‘æ²¡å…³æ³¨è¿™ä¸ªæ¦‚å¿µï¼Œä½†æ˜¯æˆ‘åº”è¯¥çŸ¥é“å®ƒçš„æ­£ç¡®æƒ…å†µçš„ï¼Œå°±è¿™ä¹ˆä¸€ä¸ªå¹³æ—¶å†™ä»£ç è§‰å¾—ç†æ‰€åº”å½“çš„ä¸œè¥¿ï¼Œè¢«é—®èµ·æ¥çš„æ—¶å€™æˆ‘ç«Ÿç„¶ç­”é”™äº†ã€‚\n1.1ã€æ‰§è¡Œç¯å¢ƒ æ‰§è¡Œç¯å¢ƒå®šä¹‰äº†å˜é‡æˆ–å‡½æ•°æœ‰æƒè®¿é—®çš„å…¶ä»–æ•°æ®ï¼Œæ¯ä¸ªæ‰§è¡Œç¯å¢ƒéƒ½æœ‰ä¸€ä¸ªä¸ä¹‹å…³è”çš„å˜é‡å¯¹è±¡ï¼ˆvariable objectï¼‰ï¼Œç¯å¢ƒä¸­å®šä¹‰çš„å˜é‡å’Œå‡½æ•°éƒ½ä¿å­˜åœ¨è¿™ä¸ªå¯¹è±¡ä¸­ï¼Œå…¨å±€æ‰§è¡Œç¯å¢ƒæ˜¯æœ€å¤–å±‚çš„ä¸€ä¸ªæ‰§è¡Œç¯å¢ƒï¼Œæ¯ä¸ªå‡½æ•°éƒ½æœ‰è‡ªå·±çš„æ‰§è¡Œç¯å¢ƒï¼Œå½“æ‰§è¡Œæµè¿›å…¥ä¸€ä¸ªå‡½æ•°æ—¶ï¼Œå‡½æ•°çš„ç¯å¢ƒå°±ä¼šè¢«æ¨å…¥åˆ°ä¸€ä¸ªç¯å¢ƒæ ˆä¸­ï¼Œå½“å‡½æ•°æ‰§è¡Œå®Œæ¯•ï¼Œè¿™ä¸ªç¯å¢ƒå°±ä¼šå‡ºæ ˆå¹¶é”€æ¯ï¼ŒåŒæ—¶ä¿å­˜åœ¨å…¶ä¸­çš„å˜é‡å’Œå‡½æ•°ä¹Ÿéšä¹‹é”€æ¯ï¼Œæ§åˆ¶æƒäº¤è¿˜ç»™ä¹‹å‰çš„æ‰§è¡Œç¯å¢ƒã€‚\n1.2ã€ä½œç”¨åŸŸé“¾ å½“ä»£ç åœ¨ä¸€ä¸ªç¯å¢ƒä¸­æ‰§è¡Œæ—¶ï¼Œä¼šåˆ›å»ºå˜é‡å¯¹è±¡çš„ä¸€ä¸ªä½œç”¨åŸŸé“¾ï¼Œä½œç”¨åŸŸé“¾çš„æœ€å‰ç«¯ï¼Œå§‹ç»ˆæ˜¯å½“å‰æ‰§è¡Œçš„ä»£ç æ‰€åœ¨ç¯å¢ƒçš„å˜é‡å¯¹è±¡ï¼Œå¦‚æœè¿™ä¸ªç¯å¢ƒæ˜¯å‡½æ•°ï¼Œåˆ™å°†å…¶æ´»åŠ¨å¯¹è±¡ï¼ˆactivation objectï¼‰ä½œä¸ºå˜é‡å¯¹è±¡ï¼Œï¼Œæ´»åŠ¨å¯¹è±¡æœ€å¼€å§‹åªæœ‰ä¸€ä¸ªå˜é‡ï¼Œå³ arguments å¯¹è±¡ï¼Œä½œç”¨åŸŸé“¾ä¸­çš„ä¸‹ä¸€ä¸ªå˜é‡å¯¹è±¡æ¥è‡ªå¤–éƒ¨ç¯å¢ƒï¼Œå†ä¸‹ä¸€ä¸ªåˆ™æ¥è‡ªå¤–éƒ¨ç¯å¢ƒçš„å¤–éƒ¨ç¯å¢ƒï¼Œç›´åˆ°æœ«ç«¯å…¨å±€æ‰§è¡Œç¯å¢ƒï¼Œè¿™å°±å½¢æˆäº†ä¸€ä¸ªä½œç”¨åŸŸé“¾ã€‚\n1.3ã€æ´»åŠ¨å¯¹è±¡ 1ã€å½“è°ƒç”¨å‡½æ•°æ—¶ï¼Œé¦–å…ˆåˆ›å»ºä¸€ä¸ªæ´»åŠ¨å¯¹è±¡ 2ã€ä¸ºæ´»åŠ¨å¯¹è±¡æ·»åŠ ä¸€ä¸ªç±»ä¼¼æ•°ç»„çš„ arguments å¯¹è±¡\n3ã€å°†å®šä¹‰å‡½æ•°æ—¶æ‰€åœ¨çš„æ‰§è¡Œç¯å¢ƒå¯¹åº”çš„ä½œç”¨åŸŸé“¾å¤åˆ¶åˆ°å‡½æ•°å†…éƒ¨çš„[[scope]]å±æ€§ä¸Šï¼ŒæŠŠè‡ªå·±çš„æ´»åŠ¨å¯¹è±¡æ¨å…¥ä½œç”¨åŸŸé“¾çš„é¡¶ç«¯\n4ã€ä¹‹åå‘ç”Ÿç”± ECMA-262 ä¸­æ‰€è°“â€™æ´»åŠ¨å¯¹è±¡â€™å®Œæˆçš„â€™å˜é‡å®ä¾‹åŒ–â€™(Variable Instatiation)çš„è¿‡ç¨‹\n(1)ã€æ­¤æ—¶å°†å‡½æ•°çš„å½¢å‚åˆ›å»ºä¸ºæ´»åŠ¨å¯¹è±¡(å˜é‡å¯¹è±¡)çš„å±æ€§ï¼Œå¦‚æœè°ƒç”¨å‡½æ•°æ—¶ä¼ é€’çš„å‚æ•°ä¸å½¢å¼å‚æ•°ä¸€è‡´ï¼Œåˆ™å°†ç›¸åº”å‚æ•°å€¼èµ‹ç»™è¿™äº›å±æ€§ï¼Œå¦åˆ™ï¼Œä¼šç»™å±æ€§èµ‹ undefined å€¼ã€‚ (2)ã€å°†å‡½æ•°å†…éƒ¨å£°æ˜çš„æ‰€æœ‰å±€éƒ¨å˜é‡åˆ›å»ºä¸ºæ´»åŠ¨å¯¹è±¡(å˜é‡å¯¹è±¡)çš„å±æ€§ï¼Œå…¶å€¼éƒ½è¢«'é¢„è§£æ'ä¸ºundefinedå€¼ï¼Œä»¥ä¸Šä¸¤æ­¥å®Œæˆæ´»åŠ¨å¯¹è±¡(å˜é‡å¯¹è±¡)ä¿å­˜å˜é‡çš„è¿‡ç¨‹ã€‚ (3)ã€å¯¹äºå®šä¹‰çš„å†…éƒ¨å‡½æ•°ï¼Œç”¨å£°æ˜çš„å‡½æ•°åinnerMethodï¼Œä¸ºæ´»åŠ¨å¯¹è±¡(å˜é‡å¯¹è±¡)åˆ›å»ºåŒåå±æ€§ï¼Œè€Œå®šä¹‰çš„å†…éƒ¨å‡½æ•°åˆ™è¢«åˆ›å»ºä¸ºå‡½æ•°å¯¹è±¡å¹¶æŒ‡å®šç»™è¯¥å±æ€§ï¼Œå®Œæˆæ´»åŠ¨å¯¹è±¡(å˜é‡å¯¹è±¡)ä¿å­˜å‡½æ•°çš„è¿‡ç¨‹ã€‚ æ³¨ï¼šåœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œé™¤äº†å®é™…å‚æ•°å’Œå‡½æ•°å£°æ˜æœ‰å€¼å¤–ï¼Œå…¶å®ƒéƒ½è¢«'é¢„è§£æ'ä¸ºundefinedå€¼ã€‚ æ³¨ï¼šå¯¹äº(1)ã€(2)ã€(3)æ­¥éª¤çš„é¡ºåºï¼Œå› ä¸ºå˜é‡å£°æ˜æ¯”å‡½æ•°å£°æ˜çš„ä¼˜å…ˆçº§é«˜ï¼Œå˜é‡å£°æ˜ä¼˜å…ˆäºå‡½æ•°å£°æ˜è¢«æå‡ï¼Œå¦‚æœä¸¤è€…åŒååŒæ—¶å­˜åœ¨ï¼Œåè¢«æå‡çš„å‡½æ•°å£°æ˜ä¼šè¦†ç›–å…ˆè¢«æå‡çš„å˜é‡å£°æ˜**(å¼•ç”¨æ¥æºä½œè€…(2)ã€(3)é¡ºåºåäº†)**ã€‚ æ³¨ï¼šå¯¹äº(2)ï¼Œå‡½æ•°è¢«èµ‹å€¼ä¸ºå‡½æ•°å®šä¹‰çš„å­—ç¬¦ä¸²ï¼Œå¹¶ä¸ä¼šå¯¹å‡½æ•°ä½“ä¸­çš„JSä»£ç åšç‰¹æ®Šå¤„ç†(å¦‚è¿ç®—ç­‰)ï¼Œåªæ˜¯å°†å‡½æ•°ä½“JSä»£ç çš„æ‰«æç»“æœ(å­—ç¬¦ä¸²)ä¿å­˜åœ¨æ´»åŠ¨å¯¹è±¡(å˜é‡å¯¹è±¡)çš„ä¸æ­¤å‡½æ•°åå¯¹åº”çš„å±æ€§ä¸Šï¼Œåœ¨å‡½æ•°æ‰§è¡Œæ—¶å†åšè¿›ä¸€æ­¥å¤„ç†ã€‚ 2ã€æ•°ç»„å»é‡ è¿™æ˜¯ä¸€ä¸ªå¾ˆç»å…¸çš„é—®é¢˜ï¼Œå½“ç„¶æœ€ç®€å•çš„å›ç­”å°±æ˜¯ä½¿ç”¨ Set\nconst array = [1,2,3,2,4] [... new Set(array)] å¾ˆæ˜æ˜¾é¢è¯•å®˜ä¸æƒ³å†å¬åˆ°è¿™ä¸ªå›ç­”ï¼Œç„¶åæˆ‘è¯´äº†å¦ä¸€ç§æ–¹å¼\nconst array = [1, 2, 3, 2, 4]; array.reduce((targetAarr, item) =\u0026gt; { if (!targetAarr.includes(item)) targetAarr.push(item); return targetAarr; }, []); ç„¶åé¢è¯•å®˜è¿˜æƒ³å¬åˆ°å…¶ä»–çš„æ–¹æ³•ï¼Œæˆ‘å°±åˆè¯´äº†ä¸€ä¸ªå¯¹è±¡é”®å€¼å¯¹çš„æ–¹å¼\nconst array = [1, 2, 3, 2, 4]; const targetObject = {}; array.forEach((item) =\u0026gt; (targetObject[item] = item)); Object.keys(targetObject); å¾ˆæ˜æ˜¾è¿™ç§æ–¹å¼æœ‰ä¸ªé—®é¢˜ï¼Œä¸èƒ½åŒºåˆ†'1'å’Œ1 å†é—®æˆ‘ï¼Œæˆ‘è¯´äº†å¯ä»¥å…ˆæ’åºï¼Œå†æŸ¥çœ‹ç›¸é‚»é¡¹æ˜¯å¦ç›¸åŒï¼Œä»£ç å®ç°å¤§æ¦‚æ˜¯è¿™ä¸ªæ ·å­ï¼Œè¿™å„¿ä¸å¾—ä¸è¯´åˆ° sort æ–¹æ³•ä¼ å‚çš„é—®é¢˜ï¼Œæˆ‘ä¹‹å‰ä¸€ç›´æ˜¯æœ‰è‡ªå®šä¹‰ callback æ¥æ’åºçš„ï¼Œé¢è¯•å®˜é—®æˆ‘å¦‚æœä¸ä¼ å‚æ˜¯ä»€ä¹ˆæƒ…å†µï¼Œè¿™ä¸ªæˆ‘è¿˜æ­£æ²¡æ³¨æ„åˆ°åŸæ¥å¯ä»¥ä¸ä¼ å‚ï¼Œå½“ç„¶æˆ‘ç›´è§‰æ˜¯å¦‚æœä¸ä¼ å‚ï¼Œåº”è¯¥æ˜¯ä»å°åˆ°å¤§æ’åºï¼Œä½†æ˜¯æˆ‘ä¸çŸ¥é“çš„ä¸œè¥¿å½“ç„¶ä¸æ•¢èƒ¡è¯´ï¼Œå°±ç›´æ¥å›ç­”äº†ä¸çŸ¥é“ï¼Œå›æ¥ä¸€çœ‹ï¼Œä¸ä¼ å‚çš„è¯ï¼Œå…ƒç´ æŒ‰ç…§è½¬æ¢ä¸ºçš„å­—ç¬¦ä¸²çš„å„ä¸ªå­—ç¬¦çš„ Unicode ä½ç‚¹è¿›è¡Œæ’åºã€‚\nconst array = [1, 2, 3, 2, 4]; const targetArr = array.sort(); targetArr.forEach((item, index, arr) =\u0026gt; { if (item === arr[index + 1]) arr.splice(index, 1); }); console.log(targetArr); è¯´åˆ°è¿™äº†ï¼Œæˆ‘å†è®°å½•ä¸€ä¸‹æ•°ç»„å’Œå­—ç¬¦ä¸²å¸¸å¸¸å¼„æ··çš„å‡ ä¸ªæ–¹æ³•ï¼Œä¹‹å‰æ¯æ¬¡ç”¨åˆ°è¿™å‡ ä¸ªæ–¹æ³•éƒ½ä¼šæ‰“å¼€ mdn çš„æ–‡æ¡£ï¼Œè™½ç„¶æˆ‘è§‰å¾—è¿™æ ·æ²¡ä»€ä¹ˆï¼Œä½†æ˜¯ä¸‡ä¸€è¢«é—®åˆ°äº†å‘¢ï¼Œæˆ‘æ„Ÿè§‰æˆ‘å›ç­”çš„æ—¶å€™å¥½åƒå°±æœ‰è¯´æ··äº†çš„ã€‚\n1ã€Array.prototype.slice:æ–¹æ³•è¿”å›ä¸€ä¸ªä»å¼€å§‹åˆ°ç»“æŸï¼ˆä¸åŒ…æ‹¬ç»“æŸï¼‰é€‰æ‹©çš„æ•°ç»„çš„ä¸€éƒ¨åˆ†æµ…æ‹·è´åˆ°ä¸€ä¸ªæ–°æ•°ç»„å¯¹è±¡ã€‚ä¸”åŸå§‹æ•°ç»„ä¸ä¼šè¢«ä¿®æ”¹ã€‚\narr.slice(); // [0, end]  arr.slice(begin); // [begin, end]  arr.slice(begin, end); // [begin, end) 2ã€Aarray.prototype.splice:æ–¹æ³•é€šè¿‡åˆ é™¤ç°æœ‰å…ƒç´ å’Œ/æˆ–æ·»åŠ æ–°å…ƒç´ æ¥æ›´æ”¹ä¸€ä¸ªæ•°ç»„çš„å†…å®¹ã€‚\narray.splice(start) // åˆ é™¤start - end array.splice(start, deleteCount) // ä»startå¼€å§‹ï¼ŒåŒ…æ‹¬startï¼Œåˆ é™¤deletecountä¸ªå…ƒç´   array.splice(start, deleteCount, item1, item2, ...) // åˆ é™¤å…ƒç´ ï¼Œå¹¶ä¸”ä»startä½ç½®å¼€å§‹æ·»åŠ è‹¥å¹²ä¸ªå…ƒç´  3ã€String.prototype.slice:æ–¹æ³•æå–ä¸€ä¸ªå­—ç¬¦ä¸²çš„ä¸€éƒ¨åˆ†ï¼Œå¹¶è¿”å›ä¸€æ–°çš„å­—ç¬¦ä¸²ã€‚ä¸ä¿®æ”¹åŸå­—ç¬¦ä¸²ã€‚\nstr.slice(beginSlice[, endSlice]) beginSlice\nä»è¯¥ç´¢å¼•ï¼ˆä»¥ 0 ä¸ºåŸºæ•°ï¼‰å¤„å¼€å§‹æå–åŸå­—ç¬¦ä¸²ä¸­çš„å­—ç¬¦ã€‚å¦‚æœå€¼ä¸ºè´Ÿæ•°ï¼Œä¼šè¢«å½“åš sourceLength + beginSlice çœ‹å¾…ï¼Œè¿™é‡Œçš„ sourceLength æ˜¯å­—ç¬¦ä¸²çš„é•¿åº¦ (ä¾‹å¦‚ï¼Œ å¦‚æœ beginSlice æ˜¯ -3 åˆ™çœ‹ä½œæ˜¯: sourceLength - 3)\nendSlice\nå¯é€‰ã€‚åœ¨è¯¥ç´¢å¼•ï¼ˆä»¥ 0 ä¸ºåŸºæ•°ï¼‰å¤„ç»“æŸæå–å­—ç¬¦ä¸²ã€‚å¦‚æœçœç•¥è¯¥å‚æ•°ï¼Œslice ä¼šä¸€ç›´æå–åˆ°å­—ç¬¦ä¸²æœ«å°¾ã€‚å¦‚æœè¯¥å‚æ•°ä¸ºè´Ÿæ•°ï¼Œåˆ™è¢«çœ‹ä½œæ˜¯ sourceLength + endSliceï¼Œè¿™é‡Œçš„ sourceLength å°±æ˜¯å­—ç¬¦ä¸²çš„é•¿åº¦(ä¾‹å¦‚ï¼Œå¦‚æœ endSlice æ˜¯ -3ï¼Œåˆ™æ˜¯, sourceLength - 3)ã€‚\nè¿™ä¹ˆçœ‹çš„è¯å…¶å®ä»–å’Œ Array çš„ç”¨æ³•åŸºæœ¬ä¸€æ ·\n4ã€String.prototype.split:æ–¹æ³•ä½¿ç”¨æŒ‡å®šçš„åˆ†éš”ç¬¦å­—ç¬¦ä¸²å°†ä¸€ä¸ª String å¯¹è±¡åˆ†å‰²æˆå­—ç¬¦ä¸²æ•°ç»„ï¼Œä»¥å°†å­—ç¬¦ä¸²åˆ†éš”ä¸ºå­å­—ç¬¦ä¸²ï¼Œä»¥ç¡®å®šæ¯ä¸ªæ‹†åˆ†çš„ä½ç½®ã€‚\næœ€åæ€»ç»“ä¸€ä¸‹ï¼ŒArrayå’ŒStringéƒ½æœ‰sliceæ–¹æ³•ï¼Œä¸»è¦ç”¨æ¥æˆªå–æŒ‡å®šé•¿åº¦ï¼ŒArrayæœ‰ä¸€ä¸ªspliceæ–¹æ³•ç”¨æ¥åˆ é™¤ã€æ·»åŠ å…ƒç´ ï¼Œè€ŒStringæœ‰ä¸€ä¸ªslitæ–¹æ³•ç”¨æ¥æŠŠå­—ç¬¦ä¸²åˆ†å‰²æˆæ•°ç»„ã€‚\nupdate 2018.03.23 3ã€Promise è¿”å›å€¼çš„é—®é¢˜ è¢«é¢è¯•å®˜é—®åˆ° promise è¿ç»­ç‚¹ thenï¼Œç¬¬äºŒä¸ªç‚¹ then ä¼šè¿”å›ä»€ä¹ˆï¼Œæˆ‘å¾ˆè‡ªä¿¡çš„è¯´å¦‚æœè‡ªå·±ä¸æŒ‡å®šè¿”å›å€¼çš„è¯æ˜¯ resolve çš„å€¼ï¼Œäº‹å®ä¸Šæˆ‘é”™äº†ï¼š\nPromise.resolve(1) .then((rsp) =\u0026gt; console.log(rsp)) // 1  .then((rsp) =\u0026gt; console.log(rsp)); // undefined so then å‡½æ•° callback æ¥æ”¶çš„å€¼åº”è¯¥æ˜¯ä¸Šä¸€ä¸ª thencallback è¿”å›çš„å€¼ã€‚\n4ã€è‡ªå·±å®ç°ä¸€ä¸ª co ä¸‹é¢æ˜¯æˆ‘ä¸€ä¸ªç®€å•çš„å®ç°ï¼Œä¸»è¦å°±æ˜¯è¦åšåˆ°ä¸æ–­çš„é€’å½’è°ƒç”¨ï¼š\nfunction co(gn) { gn = gn(); return new Promise((resolve, reject) =\u0026gt; { next(); function next(data) { const { done, value } = gn.next(data); if (done) return resolve(value); value.then((rsp) =\u0026gt; next(rsp)).catch((err) =\u0026gt; reject(err)); } }); } function* test() { const a = yield Promise.resolve(1); const b = yield Promise.resolve(2); return a + b; } co(test) .then((rsp) =\u0026gt; console.log(rsp)) // 3  .catch((err) =\u0026gt; console.log(err)); å»ºè®®è¿™ç§é—®é¢˜æœ€å¥½èƒ½è®©ä¸Šæœºå†™ä¸€ä¸‹ä»£ç ï¼Œè®©æˆ‘å¹²æƒ³å’Œåœ¨çº¸ä¸Šå†™å®åœ¨æ˜¯æœ‰ç‚¹å›°éš¾ã€‚\n5ã€prototype çš„é—®é¢˜ ç°åœ¨æ‰å›æƒ³èµ·æ¥è‡ªå·±å…¨è¯´é”™äº†ï¼Œå½“æ—¶è¿˜ä¿¡èª“æ—¦æ—¦ï¼ŒçœŸæ˜¯ç¾æ„§,éƒ½æ˜¯è‡ªå·±çš„æƒ¯æ€§æ€ç»´ï¼Œæ²¡æœ‰æ³¨æ„åˆ°è¿™æ¬¡æ˜¯ç›´æ¥ä¿®æ”¹äº† prototype çš„æŒ‡å‘,è¯´åˆ°åº•è¿˜æ˜¯å¯¹è±¡å¼•ç”¨çš„é—®é¢˜\nfunction A() {} function B() { this.hello = \u0026#34;hello\u0026#34;; } var a = new A(); A.prototype = new B(); var a1 = new A(); console.log(a.hello); // undefined console.log(a1.hello); // hello ç°åœ¨ä¸€çœ‹ï¼Œæ„Ÿè§‰è¿™æ¬¡é¢è¯•åˆå‡‰äº†ã€‚\n6ã€å¦‚ä½•å®šä¹‰ä¸€ä¸ªçœŸæ­£çš„å¸¸é‡ å¤§å®¶éƒ½çŸ¥é“ ES6 å¼•å…¥äº† const è¡¨ç¤ºå¸¸é‡ï¼Œä½†æ˜¯å¤§å®¶ä¹ŸçŸ¥é“ const å¹¶ä¸èƒ½é˜²æ­¢ç”¨æˆ·ä¿®æ”¹å¯¹è±¡çš„å±æ€§ï¼Œæ·»åŠ ã€åˆ é™¤å±æ€§ï¼Œé‚£ä¹ˆå¦‚ä½•å®šä¹‰ä¸€ä¸ªçœŸæ­£æ„ä¹‰ä¸Šçš„å¸¸é‡ï¼Œè¿™ä¸ªå¹¶æ²¡æœ‰ä»€ä¹ˆæŠ€æœ¯ä¸Šçš„å«é‡ï¼ˆå½“ç„¶æˆ‘ä¹Ÿè¯•ç€ä»å…¶ä»–æ–¹é¢å»å®ç°ï¼Œåƒæ˜¯ä»£ç†ä¹‹ç±»çš„ï¼Œç°åœ¨å…ˆä¸è¯´ï¼‰ï¼Œæ‰“å¼€çº¢å®ä¹¦ï¼Œç¿»åˆ°é«˜çº§æŠ€å·§-é˜²ç¯¡æ”¹å¯¹è±¡ï¼Œåœ¨è¿™é‡Œç»™å¤§å®¶ä»‹ç»äº†å‡ ä¸ªå¯¹è±¡çš„æ–¹æ³•ï¼š\n6.1ã€ä¸å¯æ‰©å±•å¯¹è±¡-å³æ— æ³•ä¸ºå¯¹è±¡æ·»åŠ å±æ€§ï¼› var a = { name: \u0026#34;johnny\u0026#34; }; Object.preventExtensions(a); a.age = 10; console.log(a.age); // undefined  a.name = \u0026#34;saber\u0026#34;; console.log(a.name); // saber  delete a.name; console.log(a.name); // undefined 6.2ã€å¯†å°çš„å¯¹è±¡-ä¸èƒ½æ·»åŠ ã€åˆ é™¤å±æ€§ï¼š var a = { name: \u0026#34;johnny\u0026#34; }; Object.seal(a); a.age = 10; console.log(a.age); // undefined  a.name = \u0026#34;saber\u0026#34;; console.log(a.name); // saber  delete a.name; console.log(a.name); // saber 6.3ã€å†»ç»“çš„å¯¹è±¡-æ— æ³•æ·»åŠ ã€åˆ é™¤ã€ä¿®æ”¹å±æ€§ï¼ŒçœŸæ­£çš„å¸¸é‡ï¼š var a = { name: \u0026#34;johnny\u0026#34; }; Object.freeze(a); a.age = 10; console.log(a.age); // undefined  a.name = \u0026#34;saber\u0026#34;; console.log(a.name); // johnny  delete a.name; console.log(a.name); // johnny ä¸Šé¢æ·»åŠ ã€åˆ é™¤ã€ä¿®æ”¹æ“ä½œåœ¨éä¸¥æ ¼æ¨¡å¼ä¸‹ä¸ºä¸ç”Ÿæ•ˆï¼Œåœ¨ä¸¥æ ¼æ¨¡å¼ä¸‹ä¼šæŠ¥é”™ï¼Œå»ºè®®å¤§å®¶å¼€å¯ä¸¥æ ¼æ¨¡å¼ã€‚\n","date":"2019-09-18T21:00:11+08:00","image":"https://picsum.photos/seed/dced38d5da1f47a591d1011c5276f6b4/4096/2160","permalink":"https://jo-hnny.github.io/p/%E9%9D%A2%E8%AF%95%E8%AE%B0%E5%BD%95/","title":"é¢è¯•è®°å½•"},{"content":"ä¸€ç›´æƒ³å­¦ä¹ ä¸€ä¸‹ RxJSï¼Œä»ä¸€å¼€å§‹å­¦ä¹  android çš„æ—¶å€™å°±å¬è¯´è¿‡ RxJAVAï¼Œä½†æ˜¯ä¹‹å‰æ¯æ¬¡éƒ½çœ‹ä¸ä¸‹å»ï¼Œä¸å¤ªæ¸…æ¥šè¿™ä¸ªæ˜¯å¹²ä»€ä¹ˆçš„ã€‚ä»Šå¤©ä¸‹å®šå†³å¿ƒè¦å¥½å¥½çœ‹ä¸€çœ‹ã€‚\n1ã€Observable (å¯è§‚å¯Ÿå¯¹è±¡) RxJS çš„æ ¸å¿ƒæ¦‚å¿µå°±æ˜¯è§‚å¯Ÿè€…æ¨¡å¼ï¼Œä¹Ÿå°±æ˜¯ä¸€ä¸ªå¯è§‚å¯Ÿå¯¹è±¡ä¼šæ¨é€æ•°æ®ï¼Œä¸€ä¸ªè§‚å¯Ÿè€…é€šè¿‡è®¢é˜…æ¥å—è¿™äº›æ•°æ®ï¼Œ\nåˆ›å»ºä¸€ä¸ªå¯è§‚å¯Ÿå¯¹è±¡\nvar observable = Rx.Observable.create(function (observer) { observer.next(1); observer.next(2); observer.next(3); setTimeout(() =\u0026gt; { observer.next(4); observer.complete(); }, 1000); }); æ¯ä¸ª next()ä¼šå‘å¤–æŠ›å‡ºä¸€ä¸ªæ•°æ®\n2ã€Observer (è§‚å¯Ÿè€…) è§‚å¯Ÿè€…é€šè¿‡è®¢é˜…æ¥æ‹‰å–å¯è§‚å¯Ÿå¯¹è±¡çš„æ•°æ®ã€‚\nåˆ›å»ºä¸€ä¸ªè§‚å¯Ÿè€…\nvar observer = { next: (x) =\u0026gt; console.log(\u0026#34;Observer got a next value: \u0026#34; + x), error: (err) =\u0026gt; console.error(\u0026#34;Observer got an error: \u0026#34; + err), complete: () =\u0026gt; console.log(\u0026#34;Observer got a complete notification\u0026#34;), }; è§‚å¯Ÿè€…å¯¹è±¡ä¸­ä½ å¯ä»¥çœç•¥æŸä¸€ä¸ªå‡½æ•°ï¼Œå¦å¤–è§‚å¯Ÿè€…ä¹Ÿå¯ä»¥åªæ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œé‚£ä¹ˆå®ƒå¯¹åº”çš„å°±æ˜¯ next é€šçŸ¥çš„å¤„ç†æ–¹æ³•ã€‚\n3ã€Subscription (è®¢é˜…) ä¸Šè¾¹æˆ‘ä»¬æœ‰äº†ä¸€ä¸ªå¯è§‚å¯Ÿå¯¹è±¡å’Œä»¥ä¸€ä¸ªå¯è§‚å¯Ÿè€…ï¼Œé‚£ä¹ˆç°åœ¨æˆ‘ä»¬å°±éœ€è¦ä½¿ç”¨è®¢é˜…å°†ä»–ä»¬è”ç³»èµ·æ¥\nvar subscription = observable.subscribe(observer); // Observer got a next value: 1 // Observer got a next value: 2 // Observer got a next value: 3 // Observer got a next value: 4 // Observer got a complete notification å½“ä½ è®¢é˜…çš„æ—¶å€™ï¼Œè§‚å¯Ÿè€…å°±å¼€å§‹æ‹‰å–æ•°æ®äº†ï¼ŒåŒæ—¶ä¼šå¾—åˆ°ä¸€ä¸ª Subscription å¯¹è±¡,å®ƒæœ‰ä¸€ä¸ªunsubscribe()å‡½æ•°å¯ä»¥å–æ¶ˆè®¢é˜…ï¼Œè¿˜æœ‰ä¸€ä¸ªadd()æ–¹æ³•å¯ä»¥æŠŠå¦ä¸€ä¸ª Subscription å¯¹è±¡åˆå¹¶åˆ°è‡ªå·±èº«ä¸Šï¼Œä»¥åŠä¸€ä¸ªremove(otherSubscription) æ–¹æ³•ï¼Œç”¨æ¥æ’¤é”€ä¸€ä¸ªå·²æ·»åŠ çš„å­ Subscriptionã€‚\nä¸Šè¾¹å°±æ˜¯ RxJS çš„åŸºæœ¬æ¦‚å¿µäº†ï¼Œä¸‹è¾¹ä¼šè®²ä¸€äº›å…¶å®ƒçš„æ‰©å±•\n4ã€Subject (ä¸»ä½“) subject å³æ˜¯ Observableï¼Œåˆæ˜¯ Observer\nä½œä¸º Observableï¼ˆå¯è§‚å¯Ÿå¯¹è±¡ï¼‰ var subject = new Rx.Subject(); subject.subscribe({ next: (v) =\u0026gt; console.log(\u0026#34;observerA: \u0026#34; + v), }); subject.subscribe({ next: (v) =\u0026gt; console.log(\u0026#34;observerB: \u0026#34; + v), }); subject.next(1); subject.next(2); // æ‰“å°ç»“æœ:  /* observerA: 1 observerB: 1 observerA: 2 observerB: 2 */ ä½œä¸º Observerï¼ˆè§‚å¯Ÿè€…ï¼‰ var subject = new Rx.Subject(); subject.subscribe({ next: (v) =\u0026gt; console.log(\u0026#34;observerA: \u0026#34; + v), }); subject.subscribe({ next: (v) =\u0026gt; console.log(\u0026#34;observerB: \u0026#34; + v), }); var observable = Rx.Observable.from([1, 2, 3]); observable.subscribe(subject); // ä½ å¯ä»¥æä¾›ä¸€ä¸ª Subject è¿›è¡Œè®¢é˜…  // æ‰“å°ç»“æœ  /* observerA: 1 observerB: 1 observerA: 2 observerB: 2 observerA: 3 observerB: 3 */ subject çš„å¤šæ’­ å¤šæ’­è¿™ä¸ªæˆ‘æœ‰ç‚¹ä¸çŸ¥é“æ€ä¹ˆè¯´ï¼Œæ™®é€šçš„ observable æ˜¯å•æ’­çš„ï¼Œæ„æ€å°±æ˜¯ä¸¤ä¸ªè®¢é˜…æ˜¯äº’ä¸å½±å“ã€ç‹¬ç«‹çš„ï¼Œä¸€ä¸ªè®¢é˜…å®Œæ¯•ä¹‹åå†è¿›è¡Œä¸‹ä¸€ä¸ªè®¢é˜…ï¼Œä½†æ˜¯ subject æ˜¯å¤šæ’­çš„ï¼Œä¸‹è¾¹é€šè¿‡ä»£ç çœ‹ä¸€ä¸‹ä»–ä»¬çš„åŒºåˆ«ï¼š\n// æ™®é€šobservableå•æ’­ const { Observable, Subject } = require(\u0026#34;rxjs\u0026#34;); const observable = Observable.create((observer) =\u0026gt; { observer.next(1); observer.next(2); }); observable.subscribe((k) =\u0026gt; console.log(\u0026#34;from observer a:\u0026#34;, k)); observable.subscribe((k) =\u0026gt; console.log(\u0026#34;from observer b:\u0026#34;, k)); // from observer a: 1 // from observer a: 2 // from observer b: 1 // from observer b: 2 å¯ä»¥é€šè¿‡æ‰“å°ç»“æœçœ‹å‡ºæ¥ï¼Œä¸¤ä¸ªè®¢é˜…æ˜¯ç‹¬ç«‹çš„ï¼Œå…ˆæ‰“å°å®Œäº† aï¼Œå†æ‰“å°å®Œäº† bã€‚\nconst { Observable, Subject } = require(\u0026#34;rxjs\u0026#34;); const subject = new Subject(); const observable = Observable.create((observer) =\u0026gt; { observer.next(1); observer.next(2); }); subject.subscribe((k) =\u0026gt; console.log(\u0026#34;from observer a:\u0026#34;, k)); subject.subscribe((k) =\u0026gt; console.log(\u0026#34;from observer b:\u0026#34;, k)); observable.subscribe(subject); // from observer a: 1 // from observer b: 1 // from observer a: 2 // from observer b: 2 ä¸¤ä¸ªè®¢é˜…æ˜¯åŒæ—¶æ‰§è¡Œçš„ã€‚\nå¦å¤– subject è¿˜æœ‰å‡ ä¸ªå˜ç§ï¼Œæˆ‘å›å¤´å†è¡¥å……ã€‚\nè¿™ä¸€æ¬¡çš„å…ˆè®²åˆ°è¿™å§ï¼Œrxjs çš„ä¸œè¥¿å¥½å¤šï¼Œå¤´ç—›ï¼Œä¸‹æ¬¡æ›´æ–° observable çš„å‡ ç§åˆ›å»ºæ–¹æ³•ä»¥åŠå¸¸ç”¨çš„æ“ä½œç¬¦\n5ã€ä»Šå¤©è¡¥å…… observable çš„å‡ ç§åˆ›å»ºæ–¹æ³• æ¥è‡ªä¸€ä¸ªæˆ–å¤šä¸ªå€¼ Rx.Observable.of(\u0026#34;foo\u0026#34;, \u0026#34;bar\u0026#34;); æ¥è‡ªæ•°ç»„ Rx.Observable.from([1, 2, 3]); æ¥è‡ªäº‹ä»¶ Rx.Observable.fromEvent(document.querySelector(\u0026#34;button\u0026#34;), \u0026#34;click\u0026#34;); æ¥è‡ª promise Rx.Observable.fromPromise(fetch(\u0026#34;/users\u0026#34;)); æ¥è‡ªå›è°ƒå‡½æ•° // fs.exists = (path, cb(exists)) const exists = Rx.Observable.bindCallback(fs.exists); exists(\u0026#34;file.txt\u0026#34;).subscribe((exists) =\u0026gt; console.log(\u0026#34;Does file exist?\u0026#34;, exists) ); è‡ªå·±åˆ›å»º ä¸€å¼€å§‹è®²åˆ°å¾— observable éƒ½æ˜¯è¿™ç§è‡ªå·±åˆ›å»ºå¾—ã€‚\nvar myObservable = new Rx.Subject(); myObservable.subscribe((value) =\u0026gt; console.log(value)); myObservable.next(\u0026#34;foo\u0026#34;); var myObservable = Rx.Observable.create((observer) =\u0026gt; { observer.next(\u0026#34;foo\u0026#34;); setTimeout(() =\u0026gt; observer.next(\u0026#34;bar\u0026#34;), 1000); }); myObservable.subscribe((value) =\u0026gt; console.log(value)); 6ã€æ“ä½œç¬¦ æ“ä½œç¬¦æ˜¯ Observable ç±»å‹ä¸Šçš„æ–¹æ³•ï¼Œæ¯”å¦‚ .map(...)ã€.filter(...)ã€.merge(...)ï¼Œç­‰ç­‰ã€‚å½“æ“ä½œç¬¦è¢«è°ƒç”¨æ—¶ï¼Œå®ƒä»¬ä¸ä¼šæ”¹å˜å·²ç»å­˜åœ¨çš„ Observable å®ä¾‹ã€‚ç›¸åï¼Œå®ƒä»¬è¿”å›ä¸€ä¸ªæ–°çš„ Observable ï¼Œå®ƒçš„ subscription é€»è¾‘åŸºäºç¬¬ä¸€ä¸ª Observable ã€‚\nçœ‹ç€çœ‹ç€å‘ç°å…¶å® RxJS çš„æ“ä½œç¬¦çš„æ¦‚å¿µå¾ˆå®½ï¼Œå¹¶ä¸æ­¢æˆ‘ä¸€å¼€å§‹ä»¥ä¸ºçš„mapã€filterè¿™äº›ä¸œè¥¿ï¼Œæ€»çš„æ¥è¯´å®ƒæŠŠæ“ä½œç¬¦åˆ†ä¸ºäº†å®ä¾‹æ“ä½œç¬¦å’Œé™æ€æ“ä½œç¬¦ï¼Œå’Œ js ä¸­çš„å®ä¾‹æ–¹æ³•ä¸é™æ€æ–¹æ³•çš„æ„æ€å·®ä¸å¤šã€‚\nç®€å•æ¥è¯´å®ä¾‹æ“ä½œç¬¦å°±æ˜¯Observableå®ä¾‹ä¸Šçš„æ–¹æ³•ï¼Œæ¯”å¦‚mapã€filterï¼Œè€Œé™æ€æ“ä½œç¬¦å°±æ˜¯Observableä¸ŠæŒ‚è½½çš„æ–¹æ³•ï¼Œæ¯”å¦‚å„ç§åˆ›å»º Observable å®ä¾‹çš„æ–¹æ³•createã€ofã€from\n","date":"2019-09-18T20:58:39+08:00","image":"https://picsum.photos/seed/b950dc5fee90419792f927c90bc40a88/4096/2160","permalink":"https://jo-hnny.github.io/p/%E5%AD%A6%E4%B9%A0rxjs/","title":"å­¦ä¹ RxJS"},{"content":"å‰è¨€ ä»Šå¤©åœ¨YouTubeä¸Šçœ‹åˆ°äº†ä¸€ä¸ªç³»åˆ—è§†é¢‘ï¼Œæ€»å…±ä¸‰é›†ï¼Œè®²è§£äº†æ€ä¹ˆç”¨ js å®ç°åŒºå—é“¾ï¼Œæ„Ÿè§‰æµ…æ˜¾æ˜“æ‡‚ï¼Œä¸ºäº†åŠ æ·±ç†è§£ï¼Œå‡­ç€è®°å¿†å’Œè‡ªå·±çš„ç†è§£å†æ¬¡è‡ªå·±å®ç°ä¸€éã€‚\nä»£ç æ€»å…±å®ç°äº†ä¸‰ä¸ªç±»ï¼Œ\n1ã€Blockç±»ç”¨äºç”ŸæˆåŒºå—å®ä¾‹ï¼Œä¸»è¦æ˜¯å­˜å‚¨ä¿¡æ¯ï¼Œç”Ÿæˆ hashï¼›\n2ã€BlockChainç±»ç”¨äºå°†åŒºå—æ·»åŠ åˆ°é“¾ä¸Šï¼Œä»¥åŠæš´éœ²æ·»åŠ äº¤æ˜“è®°å½•ã€æŒ–çŸ¿ã€è·å–ç”¨æˆ·è´¦æˆ·èµ„é‡‘ã€æ ¡éªŒåŒºå—é“¾å®‰å…¨æ€§ç­‰æ–¹æ³•ã€‚\n3ã€Transactionç±»ç”¨äºç”Ÿæˆäº¤æ˜“ä¿¡æ¯.\n1ã€Block ç±» åŒºå—é“¾å­—é¢æ„æ€ä¸Šç†è§£å°±æ˜¯åŒºå—æ„æˆçš„é“¾ï¼ŒåŒºå—ä¸»è¦æ˜¯å­˜å‚¨ç€ä¸€äº›ä¿¡æ¯ï¼Œå…¶ä¸­ä¸å¯æˆ–ç¼ºçš„æœ‰ä¸»ä½“ï¼Œå³äº¤æ˜“ä¿¡æ¯ï¼ˆå½“ç„¶æœ¬ç¯‡ä¸»è¦è®²çš„æ˜¯åŒºå—é“¾è´§å¸ï¼ŒåŒºå—é“¾ä¹Ÿå¯èƒ½ç”¨äºå…¶ä»–æ–¹é¢ï¼‰ï¼Œ æ—¶é—´æˆ³ï¼Œå³åŒºå—ç”Ÿæˆæ—¶é—´ï¼Œä¸Šä¸€ä¸ªåŒºå—çš„å“ˆå¸Œå€¼ï¼Œæœ¬åŒºå—çš„å“ˆå¸Œå€¼ï¼ˆç”±ä¸Šä¸€ä¸ªåŒºå—çš„å“ˆå¸Œä¸æœ¬åŒºå—çš„æ•°æ®å…±åŒç”Ÿæˆï¼Œè¿™æ ·ï¼Œå½“ä¸Šä¸€ä¸ªåŒºå—è¢«ä¿®æ”¹ï¼Œé‚£ä¹ˆæœ¬åŒºå—çš„å“ˆå¸Œä¹Ÿéœ€è¦è¢«ä¿®æ”¹ï¼Œæ‰èƒ½ä¸ä¸Šä¸€ä¸ªåŒºå—çš„å“ˆå¸Œå¯¹åº”èµ·æ¥ï¼Œè¿™æ ·çš„è¯ä¿®æ”¹ä¿¡æ¯çš„äººéœ€è¦ä¿®æ”¹å¾€åæ‰€æœ‰åŒºå—çš„ä¿¡æ¯ï¼‰ã€‚\nå…¶ä¸­å€¼å¾—æ³¨æ„çš„æ˜¯åœ¨åŒºå—é“¾ä¸­æœ‰ä¸€ä¸ªæŒ–çŸ¿çš„æ¦‚å¿µï¼Œè¿™ä¸ªæŒ–çŸ¿å°±æ˜¯é€šè¿‡è®¡ç®—ä½¿å¾—æœ¬åŒºå¿«çš„å“ˆå¸Œå€¼æ»¡è¶³é¢„è®¾çš„è¦æ±‚ï¼Œæ¯”å¦‚è¯´æ¯”ç‰¹å¸å°±æ˜¯è¦æ±‚ç”Ÿæˆçš„åŒºå—çš„å“ˆå¸Œå€¼çš„å‰å‡ ä½æ˜¯nä¸ª0ï¼Œè¿™ä¸ªnå°±ä»£è¡¨äº†æŒ–çŸ¿çš„éš¾åº¦ç³»æ•°ï¼Œæ¯”ç‰¹å¸ä¼šéšç€æ¯”ç‰¹å¸çš„äº§å‡ºä¸æ–­åŠ å¤§è¿™ä¸ªéš¾åº¦ç³»æ•°ï¼Œä½¿å¾—æŒ–çŸ¿å˜çš„è¶Šæ¥è¶Šéš¾\nclass Block { /** * * @param {Number} timestamp æ—¶é—´æˆ³ * @param {Array} transactions äº¤æ˜“ä¿¡æ¯ * @param {String} preHash ä¸Šä¸€ä¸ªåŒºå—çš„å“ˆå¸Œå€¼ * @param {Number} difficulty éš¾åº¦ç³»æ•° */ constructor(timestamp, transactions, preHash, difficulty) { Object.assign(this, { timestamp, transactions, preHash, hash: this.getHash(difficulty), }); } getHash(difficulty) { let hash = \u0026#34;\u0026#34;; let nonce = 0; do { const msg = `${this.timestamp}${JSON.stringify(this.data)}${nonce}`; hash = crypto.createHash(\u0026#34;sha256\u0026#34;).update(msg).digest(\u0026#34;hex\u0026#34;); nonce++; } while (hash.substr(0, difficulty) !== Array(difficulty).fill(0).join(\u0026#34;\u0026#34;)); return hash; } } 2ã€BlockChain ç±» BlockChain ç±»åœ¨ç”Ÿæˆå®ä¾‹çš„æ—¶å€™ä¼šæŠŠç¬¬ä¸€ä¸ªå…ƒåŒºå—æ”¾å…¥åˆ°é“¾ä¸­ï¼Œè¿™ä¸ªåŒºå—ä¸å­˜å‚¨ä»»ä½•æœ‰ç”¨çš„ä¿¡æ¯ï¼Œ ä½¿ç”¨è€…å¯ä»¥å‘å®ä¾‹ä¸­æ·»åŠ äº¤æ˜“ä¿¡æ¯ï¼Œå®ä¾‹ä¼šæŠŠè¿™äº›äº¤æ˜“ä¿¡æ¯æš‚å­˜èµ·æ¥ï¼Œç›´åˆ°çŸ¿å·¥å¼€å§‹æŒ–çŸ¿ï¼ŒæŒ–çŸ¿æˆåŠŸåæ‰€æš‚å­˜çš„äº¤æ˜“ä¿¡æ¯å°±è¢«å†™å…¥äº†æ–°ç”Ÿæˆçš„åŒºå—ä¸­ï¼ŒåŒæ—¶ç»™äºˆçŸ¿å·¥çš„å¥–åŠ±ä¼šæš‚å­˜èµ·æ¥ï¼Œç›´åˆ°ä¸‹ä¸€ä¸ªåŒºå—ç”Ÿæˆï¼ŒçŸ¿å·¥å°±ç®—çœŸçš„æ”¶åˆ°äº†å¥–åŠ±ã€‚\nclass BlockChain { constructor() { this.chain = [this.createGenesisBlock()]; this.pendingTransactions = []; // æš‚å­˜äº¤æ˜“ä¿¡æ¯çš„åœ°æ–¹  this.miningReward = 100; // ç»™ä¸çŸ¿å·¥çš„å¥–åŠ±  this.difficulty = 3; // éš¾åº¦ç³»æ•°  } createGenesisBlock() { return new Block(Date.now(), [], 0, 1); } lastBlock() { return this.chain[this.chain.length - 1]; } mine(miningRewardAddress) { const preHash = this.lastBlock().hash; const block = new Block( Date.now(), this.pendingTransactions, preHash, this.difficulty ); this.chain.push(block); this.pendingTransactions = [ new Transaction(null, miningRewardAddress, this.miningReward), ]; } createTransactions(transaction) { if (!this.isChainValid) return false; this.pendingTransactions.push(transaction); } isChainValid() { // æ ¡éªŒåŒºå—é“¾æ˜¯å¦æœªè¢«ä¿®æ”¹  const len = this.chain.length; for (let i = 1; i \u0026lt; len; i++) { const curBlock = this.chain[i]; const preBlock = this.chain[i - 1]; if (curBlock.hash !== curBlock.getHash()) return false; if (curBlock.preHash !== preBlock.hash) return false; } return true; } getBalanceOfAddress(address) { // è·å¾—æŸä¸ªè´¦æˆ·çš„ä½™é¢  let balance = 0; this.chain.forEach(({ transactions }) =\u0026gt; { transactions.forEach(({ fromAddress, toAddress, amount }) =\u0026gt; { if (fromAddress === address) balance -= amount; if (toAddress === address) balance += amount; }); }); return balance; } } 3ã€Transaction ç±» Transaction ç±»æ²¡ä»€ä¹ˆå¥½è¯´çš„ï¼Œå°±æ˜¯ç”Ÿæˆäº¤æ˜“ä¿¡æ¯ã€‚\nclass Transaction { constructor(fromAddress, toAddress, amount) { Object.assign(this, { fromAddress, toAddress, amount, }); } } åè¯­ å‰è¨€è¿˜æ˜¯è¦æ­ä¸€ä¸‹åè¯­çš„ï¼Œä¸Šé¢åªæ˜¯ç”¨ä»£ç æ¥è®²äº†ä¸€ä¸‹åŒºå—é“¾çš„åŸç†ï¼ŒçœŸæ­£çš„åŒºå—é“¾ç»†èŠ‚è¦æ›´åŠ å¤æ‚ï¼Œä¹Ÿè¿˜æœ‰å…¶å®ƒçš„ä¸œè¥¿ï¼Œæ¯”å¦‚è¯´å¾ˆé‡è¦çš„ p2pï¼Œå¯¹ p2p è¿˜æ˜¯å¾ˆæœ‰å…´è¶£çš„ï¼Œåé¢æœ‰æ—¶é—´äº†å†å­¦ä¹ ä¸€ä¸‹ã€‚\nå¦å¤–ï¼Œæˆ‘è¿˜æ˜¯å¾ˆçœ‹å¥½åŒºå—é“¾çš„ï¼Œå®ƒçš„ä½œç”¨è¿œä¸æ­¢è¢«ç”¨æ¥åœˆé’±å‰²éŸ­èœï¼Œæˆ‘ä¹Ÿä¹°è¿‡ EOSï¼Œå½“ç„¶æ˜¯äºäº†ï¼Œä½†æ˜¯æˆ‘è¿˜æ˜¯å¾ˆçœ‹å¥½å®ƒä½œä¸ºåŒºå—é“¾å¹³å°çš„å‡ºå‘ç‚¹ã€‚\næ·»ä¸€ä¸ªæ‰€æœ‰ä»£ç ï¼ˆä»£ç ä¸å¤šå°±ä¸æ–°å»ºä»“åº“äº†ï¼‰ const crypto = require(\u0026#34;crypto\u0026#34;); class Block { /** * * @param {Number} timestamp æ—¶é—´æˆ³ * @param {Array} transactions äº¤æ˜“ä¿¡æ¯ * @param {String} preHash ä¸Šä¸€ä¸ªåŒºå—çš„å“ˆå¸Œå€¼ * @param {Number} difficulty éš¾åº¦ç³»æ•° */ constructor(timestamp, transactions, preHash, difficulty) { Object.assign(this, { timestamp, transactions, preHash, hash: this.getHash(difficulty), }); } getHash(difficulty) { // è®¡ç®—å“ˆå¸Œç›´åˆ°æ»¡è¶³è¦æ±‚  let hash = \u0026#34;\u0026#34;; let nonce = 0; do { const msg = `${this.timestamp}${JSON.stringify(this.data)}${nonce}`; hash = crypto.createHash(\u0026#34;sha256\u0026#34;).update(msg).digest(\u0026#34;hex\u0026#34;); nonce++; } while (hash.substr(0, difficulty) !== Array(difficulty).fill(0).join(\u0026#34;\u0026#34;)); return hash; } } class BlockChain { constructor() { this.chain = [this.createGenesisBlock()]; this.pendingTransactions = []; // æš‚å­˜äº¤æ˜“ä¿¡æ¯çš„åœ°æ–¹  this.miningReward = 100; // ç»™ä¸çŸ¿å·¥çš„å¥–åŠ±  this.difficulty = 3; // éš¾åº¦ç³»æ•°  } createGenesisBlock() { return new Block(Date.now(), [], 0, 1); } lastBlock() { return this.chain[this.chain.length - 1]; } mine(miningRewardAddress) { const preHash = this.lastBlock().hash; const block = new Block( Date.now(), this.pendingTransactions, preHash, this.difficulty ); this.chain.push(block); this.pendingTransactions = [ new Transaction(null, miningRewardAddress, this.miningReward), ]; } createTransactions(transaction) { if (!this.isChainValid) return false; this.pendingTransactions.push(transaction); } isChainValid() { // æ ¡éªŒåŒºå—é“¾æ˜¯å¦æœªè¢«ä¿®æ”¹  const len = this.chain.length; for (let i = 1; i \u0026lt; len; i++) { const curBlock = this.chain[i]; const preBlock = this.chain[i - 1]; if (curBlock.hash !== curBlock.getHash()) return false; if (curBlock.preHash !== preBlock.hash) return false; } return true; } getBalanceOfAddress(address) { // è·å¾—æŸä¸ªè´¦æˆ·çš„ä½™é¢  let balance = 0; this.chain.forEach(({ transactions }) =\u0026gt; { transactions.forEach(({ fromAddress, toAddress, amount }) =\u0026gt; { if (fromAddress === address) balance -= amount; if (toAddress === address) balance += amount; }); }); return balance; } } class Transaction { constructor(fromAddress, toAddress, amount) { Object.assign(this, { fromAddress, toAddress, amount, }); } } const myChain = new BlockChain(); const tran1 = new Transaction(\u0026#34;addr1\u0026#34;, \u0026#34;addr2\u0026#34;, 10); myChain.createTransactions(tran1); const tran2 = new Transaction(\u0026#34;addr1\u0026#34;, \u0026#34;addr2\u0026#34;, 1); myChain.createTransactions(tran2); myChain.mine(\u0026#34;myAddr\u0026#34;); myChain.mine(\u0026#34;myAddr\u0026#34;); console.log(myChain.getBalanceOfAddress(\u0026#34;myAddr\u0026#34;)); ","date":"2019-09-18T20:53:59+08:00","image":"https://picsum.photos/seed/c6a1438cfc9d4682b65330ff7573994d/4096/2160","permalink":"https://jo-hnny.github.io/p/nodejs%E8%AE%B2%E8%A7%A3%E5%8C%BA%E5%9D%97%E9%93%BE%E5%8E%9F%E7%90%86/","title":"Nodejsè®²è§£åŒºå—é“¾åŸç†"},{"content":"ä¹‹å‰ä¹Ÿæœ‰çœ‹è¿‡èµ„æ–™ï¼Œå½“æ—¶è§‰å¾—æ˜ç™½äº†ï¼Œä½†æ˜¯æ—¶é—´ä¸€ä¹…å°±å¿˜è®°äº†ï¼Œä¸€æ–¹é¢æ˜¯å¹³æ—¶å·¥ä½œä¸­æ²¡æœ‰ä½¿ç”¨ï¼Œå¦ä¸€æ–¹é¢æ˜¯åªæ˜¯çœ‹ï¼Œæ²¡æœ‰è‡ªå·±å»æ€è€ƒï¼Œæ‰€ä»¥è¿™æ¬¡å†³å®šè‡ªå·±ç†ä¸€ç†ã€‚\né¦–å…ˆçœ‹å‡ ä¸ªæ¦‚å¿µ 1ã€__proto__åŸå‹å¯¹è±¡ å¯¹è±¡çš„__proto__æŒ‡å‘åˆ›å»ºå®ƒçš„æ„é€ å‡½æ•°çš„prototype,å½“ä½ è°ƒç”¨è¯¥å¯¹è±¡çš„å±æ€§çš„æ—¶å€™ï¼Œå¦‚æœå®ƒè‡ªèº«æ²¡æœ‰è¿™ä¸ªå±æ€§ï¼Œå®ƒä¼šå»__proto__ä¸Šæ‰¾è¿™ä¸ªå±æ€§\n2ã€prototype åªæœ‰å‡½æ•°æ‰æœ‰prototypeå±æ€§ï¼Œå½“ä½ åˆ›å»ºä¸€ä¸ªå‡½æ•°çš„æ—¶å€™ï¼ŒJS ä¼šä¸ºè¿™ä¸ªå‡½æ•°æ·»åŠ prototypeå±æ€§ï¼Œå€¼æ˜¯ä¸€ä¸ªæœ‰constructorå±æ€§çš„å¯¹è±¡,(å¯¹è±¡ä¸¤ä¸ªå­—å¾ˆå…³é”®ï¼Œè¿™æ„å‘³ç€è¿™ä¸ªå¯¹è±¡ä¹Ÿæœ‰__proto__å±æ€§,å®ƒæŒ‡å‘åˆ›å»ºå®ƒçš„æ„é€ å‡½æ•°å³Objectçš„prototypeã€‚)\næ¥ä¸‹æ¥çœ‹çœ‹ä»£ç  function A() {} var a = new A(); console.log(A.__proto__ === Function.prototype); // true  console.log(a.__proto__ === A.prototype); // true  console.log(a.__proto__.__proto__ === Object.prototype); // true ç„¶ååŒç†æˆ‘è§‰å¾—ä¸‹è¾¹çš„ä¹Ÿåº”è¯¥æˆç«‹\nconsole.log(Object.prototype.__proto__ === Object.prototype); // false ä½†æ˜¯äº‹å®å¾ˆä¸å¹¸ï¼Œå¾—åˆ°çš„æ˜¯ false.\nconsole.log(Object.prototype.__proto__); // null æ‰“å°ä¸€çœ‹æ˜¯ nullï¼Œç„¶åå†æƒ³æƒ³ï¼Œå…¶å® js å°±æ˜¯è¿™æ ·è®¾è®¡çš„è€Œå·²ï¼Œè¦ä¸è¿™ä¸ªåŸå‹é“¾ä¸å¾—æ²¡å®Œæ²¡äº†äº†å˜›,ä½ æƒ³æƒ³æœ‰ä¸ªå¯¹è±¡æ‰¾ä¸€ä¸ªå±æ€§ï¼Œå®ƒæ‰¾åˆ°Object.prototypeå°±åº”è¯¥åˆ°å¤´äº†ï¼Œè¦ä¸å®ƒå°±ä¼šä¸€ç›´æ‰¾ä¸‹å»ï¼Œæ— å°½å¾ªç¯ã€‚\nç„¶åæˆ‘ä»¬çœ‹ä¸€ä¸ªé—®é¢˜ï¼Œå°±æ˜¯Functionä¸Objectçš„é—®é¢˜ console.log(Object.__proto__ === Function.prototype); // true  console.log(Function.__proto__ === Function.prototype); // true å¯ä»¥çœ‹å‡ºObjectæ˜¯ç”±Functionæ„é€ å‡ºæ¥çš„ï¼Œè€ŒFunctionæ˜¯ç”±Functionè‡ªå·±æ„é€ å‡ºæ¥çš„ï¼Œè¿™ä¸ªå¬èµ·æ¥å¥½å¥‡æ€ªï¼Œè‡ªå·±æ„é€ è‡ªå·±ã€‚\nconstructor ä¸‹é¢å†çœ‹çœ‹prototype.constructor\nfunction A() {} var a = new A(); console.log(A.prototype.constructor === A); // true å‡½æ•°çš„prototype.constructoræŒ‡å‘äº†è‡ªå·±ï¼Œé™¤æ­¤ä¹‹å¤–ï¼Œæˆ‘ç›®å‰è¿˜æ²¡å‘ç°è¿™ä¸ªæœ‰ä»€ä¹ˆç”¨ã€‚\nfunction A() {} var a = new A(); console.log(A.prototype.constructor === A); // true  console.log(a.constructor === A); // true æ‰¾åˆ°ä¸€ä¸ªè¯´æ³•\nconstructorå±æ€§ä¸å½±å“ä»»ä½•JavaScriptçš„å†…éƒ¨å±æ€§ã€‚instanceofæ£€æµ‹å¯¹è±¡çš„åŸå‹é“¾ï¼Œé€šå¸¸ä½ æ˜¯æ— æ³•ä¿®æ”¹çš„ï¼ˆä¸è¿‡æŸäº›å¼•æ“é€šè¿‡ç§æœ‰çš„__proto__å±æ€§æš´éœ²å‡ºæ¥ï¼‰ã€‚constructorå…¶å®æ²¡æœ‰ä»€ä¹ˆç”¨å¤„ï¼Œåªæ˜¯JavaScriptè¯­è¨€è®¾è®¡çš„å†å²é—ç•™ç‰©ã€‚ç”±äºconstructorå±æ€§æ˜¯å¯ä»¥å˜æ›´çš„ï¼Œæ‰€ä»¥æœªå¿…çœŸçš„æŒ‡å‘å¯¹è±¡çš„æ„é€ å‡½æ•°ï¼Œåªæ˜¯ä¸€ä¸ªæç¤ºã€‚ä¸è¿‡ï¼Œä»ç¼–ç¨‹ä¹ æƒ¯ä¸Šï¼Œæˆ‘ä»¬åº”è¯¥å°½é‡è®©å¯¹è±¡çš„constructoræŒ‡å‘å…¶æ„é€ å‡½æ•°ï¼Œä»¥ç»´æŒè¿™ä¸ªæƒ¯ä¾‹ã€‚ ä½œè€…ï¼šè´ºå¸ˆä¿Š é“¾æ¥ï¼šhttps://www.zhihu.com/question/19951896/answer/13457869 æ¥æºï¼šçŸ¥ä¹ è‘—ä½œæƒå½’ä½œè€…æ‰€æœ‰ã€‚å•†ä¸šè½¬è½½è¯·è”ç³»ä½œè€…è·å¾—æˆæƒï¼Œéå•†ä¸šè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚ ","date":"2019-09-18T20:52:35+08:00","image":"https://picsum.photos/seed/7a25d1e14d8d44d08048f21ffe09c5fe/4096/2160","permalink":"https://jo-hnny.github.io/p/__proto__%E4%B8%8Eprototype/","title":"__Proto__ä¸prototype"},{"content":"æœ¬æ–‡ä¸ä»‹ç» React Native çš„ APIï¼ŒAPI å¯ä»¥å‚è€ƒå®˜ç½‘æˆ–è€… react native ä¸­æ–‡ç½‘ï¼Œä¸»è¦æ˜¯ä»ç¯å¢ƒæ­å»ºå¼€å§‹ï¼Œåˆ©ç”¨è±†ç“£çš„å¼€æ”¾ api æ­å»ºä¸€ä¸ªè±†ç“£ç”µå½±çš„åº”ç”¨ã€‚ ä¸€ã€ç¯å¢ƒæ­å»º ç¯å¢ƒæ­å»ºå¯ä»¥å‚è€ƒå®˜ç½‘\nå¿…è¦çš„ä¾èµ–\nâ‘ ã€Python 2\nâ‘¡ã€Node\nâ‘¢ã€yarn\nâ‘£ã€Android Studio\nâ‘¤ã€Expo\näºŒã€Hello World npm install -g create-react-native-app\né€‰æ‹©ä¸€ä¸ªæ–‡ä»¶å¤¹ä½œä¸ºä½ çš„é¡¹ç›®åœ°å€\ncreate-react-native-app douban_movie\ncd douban_movie\nnpm start\nç­‰å¾…å‘½ä»¤è¡Œå‡ºç°ä¸€ä¸ªäºŒç»´ç ï¼Œç„¶ååœ¨æ‰‹æœºä¸Šæ‰“å¼€ expo æ‰«é¢è¿™ä¸ªäºŒç»´ç ï¼Œå°±å¯ä»¥å®æ—¶é¢„è§ˆ app æ•ˆæœäº†ã€‚\nä¸‰ã€é¡¹ç›®æ„æ€ ç›®å‰åœ¨ è±†ç“£ç”µå½± API ä¸­ç¡®è®¤ä¸ç”¨æ³¨å†Œå¯ä»¥ç›´æ¥ä½¿ç”¨çš„æ¥å£æœ‰è¿™äº›\næŒ‰ç…§è¿™äº› api æä¾›çš„ä¿¡æ¯å¤§è‡´ç¡®å®šé¡µé¢ç»“æ„ä¸ºï¼š\n1ã€tab å¯¼èˆªé¡µï¼šåŒ…æ‹¬æœç´¢é¡µé¢ã€top250ã€åŒ—ç¾ç¥¨æˆ¿æ¦œé¡µé¢ã€æ­£åœ¨ä¸Šæ˜ é¡µé¢ã€å³å°†ä¸Šæ˜ é¡µé¢\n2ã€è¯¦æƒ…é¡µé¢ï¼šåŒ…æ‹¬ç”µå½±è¯¦æƒ…å’Œæ¼”å‘˜è¯¦æƒ…\nå››ã€å¼€å·¥ 1ã€é¡¹ç›®ç›®å½•ç»“æ„ï¼š |------components | |------http | |------views | App.js | package.json 2ã€è·å–æ¥å£æ•°æ® åœ¨ react native ä¸­è¿›è¡Œ http è¯·æ±‚ä½¿ç”¨çš„ api æ˜¯fetch fetchæ˜¯ä¸€ç§æ–°çš„web HTTPè¯·æ±‚apiï¼Œç°åœ¨å·²ç»å†…ç½®åœ¨äº†å¤§å¤šæ•°çš„æµè§ˆå™¨ä¸­ï¼Œåœ¨æ­¤ä¹‹å‰web HTTPè¯·æ±‚éƒ½æ˜¯é€šè¿‡ XMLHttpRequestå®ç°çš„\nè¯·æ³¨æ„ï¼Œfetch è§„èŒƒä¸ jQuery.ajax() ä¸»è¦æœ‰ä¸¤ç§æ–¹å¼çš„ä¸åŒï¼Œç‰¢è®°ï¼š å½“æ¥æ”¶åˆ°ä¸€ä¸ªä»£è¡¨é”™è¯¯çš„ HTTP çŠ¶æ€ç æ—¶ï¼Œä» fetch()è¿”å›çš„ Promise ä¸ä¼šè¢«æ ‡è®°ä¸º rejectï¼Œ å³ä½¿è¯¥ HTTP å“åº”çš„çŠ¶æ€ç æ˜¯ 404 æˆ– 500ã€‚ç›¸åï¼Œå®ƒä¼šå°† Promise çŠ¶æ€æ ‡è®°ä¸º resolve ï¼ˆä½†æ˜¯ä¼šå°† resolve çš„è¿”å›å€¼çš„ ok å±æ€§è®¾ç½®ä¸º false ï¼‰ï¼Œ ä»…å½“ç½‘ç»œæ•…éšœæ—¶æˆ–è¯·æ±‚è¢«é˜»æ­¢æ—¶ï¼Œæ‰ä¼šæ ‡è®°ä¸º rejectã€‚ é»˜è®¤æƒ…å†µä¸‹, fetch ä¸ä¼šä»æœåŠ¡ç«¯å‘é€æˆ–æ¥æ”¶ä»»ä½• cookies, å¦‚æœç«™ç‚¹ä¾èµ–äºç”¨æˆ· sessionï¼Œåˆ™ä¼šå¯¼è‡´æœªç»è®¤è¯çš„è¯·æ±‚ï¼ˆè¦å‘é€ cookiesï¼Œå¿…é¡»è®¾ç½® credentials é€‰é¡¹ï¼‰.\nå„æµè§ˆå™¨å¯¹ fetch çš„æ”¯æŒæƒ…å†µï¼š /http/fetchApi.js export default fetchApi = (url) =\u0026gt; { return fetch(url).then((rsp) =\u0026gt; { if (rsp.ok) return rsp.json(); return Promise.reject(rsp.json()); }); }; /http/api.js import fetchApi from \u0026#34;./fetchApi\u0026#34;; const baseUrl = \u0026#34;https://api.douban.com/v2/movie/\u0026#34;; exports.movieInfo = (id) =\u0026gt; fetchApi(`${baseUrl}subject/${id}`); exports.actorInfo = (id) =\u0026gt; fetchApi(`${baseUrl}celebrity/${id}`); exports.search = (q, start = 0, count = 10) =\u0026gt; fetchApi(`${baseUrl}search?q=${q}\u0026amp;start=${start}\u0026amp;count=${count}`); exports.top250 = (start = 0, count = 10) =\u0026gt; fetchApi(`${baseUrl}top250?start=${start}\u0026amp;count=${count}`); exports.usBox = () =\u0026gt; fetchApi(`${baseUrl}us_box`); exports.showing = () =\u0026gt; fetchApi(`${baseUrl}in_theaters`); exports.comingSoon = (start = 0, count = 10) =\u0026gt; fetchApi(`${baseUrl}coming_soon?start=${start}\u0026amp;count=${count}`); 3ã€åŸºç¡€ç»„ä»¶ /components é¦–å…ˆéœ€è¦ä¸€ä¸ªå¡ç‰‡ç»„ä»¶æ¥å±•ç¤ºæœ€åŸºæœ¬çš„ç”µå½±ä¿¡æ¯\u0026mdash;ç”µå½±åç§°ã€æµ·æŠ¥ã€è¯„åˆ† /components/MovieCard.js è¿™é‡Œç”¨åˆ°äº†ä¸€ä¸ªç»„ä»¶åº“react-native-elements\nimport React from \u0026#34;react\u0026#34;; import { StyleSheet, Text, Image } from \u0026#34;react-native\u0026#34;; import { Card, Rating } from \u0026#34;react-native-elements\u0026#34;; export default class MovieCard extends React.Component { constructor(props) { super(props); } render() { return ( \u0026lt;Card title={this.props.title} image={{ uri: this.props.img }} containerStyle={styles.card} \u0026gt; \u0026lt;Rating type=\u0026#34;star\u0026#34; fractions={1} startingValue={this.props.rating} readonly imageSize={25} /\u0026gt; \u0026lt;/Card\u0026gt; ); } } const styles = StyleSheet.create({ card: { width: 150, height: 240, justifyContent: \u0026#34;space-around\u0026#34;, alignItems: \u0026#34;center\u0026#34;, }, }); å¡ç‰‡åˆ—è¡¨ç»„ä»¶ /components/ListPage.js import React from \u0026#34;react\u0026#34;; import { FlatList, TouchableHighlight, View, StyleSheet } from \u0026#34;react-native\u0026#34;; import MovieCard from \u0026#34;./MovieCard\u0026#34;; export default class ListPage extends React.Component { constructor(props) { super(props); } render() { const { navigate } = this.props.navigation; if (!this.props.movies.length) return \u0026lt;View\u0026gt;\u0026lt;/View\u0026gt;; return ( \u0026lt;FlatList data={this.props.movies} renderItem={({ item }) =\u0026gt; ( \u0026lt;TouchableHighlight onPress={() =\u0026gt; navigate(\u0026#34;MovieInfo\u0026#34;, { id: item.id })} \u0026gt; \u0026lt;View\u0026gt; \u0026lt;MovieCard img={item.images.small} rating={item.rating.average} title={item.title} /\u0026gt; \u0026lt;/View\u0026gt; \u0026lt;/TouchableHighlight\u0026gt; )} keyExtractor={(item) =\u0026gt; item.id} numColumns={2} onEndReachedThreshold={0.5} onEndReached={this.props.loadData} /\u0026gt; ); } } 4ã€é¡µé¢ /views /views/Top250 /views/UsBox.js /views/Showing.js /views/ComingSoon.js è¿™å‡ ä¸ªé¡µé¢çš„é€»è¾‘æ˜¯ç›¸ä¼¼çš„ï¼Œåªæ˜¯æ•°æ®ä¸ä¸€æ ·è€Œå·²,å°±åªçœ‹ä¸€ä¸‹ Top250.js çš„ä»£ç  import React from \u0026#34;react\u0026#34;; import { top250 } from \u0026#34;../http/api\u0026#34;; import ListPage from \u0026#34;../components/ListPage\u0026#34;; export default class Top250 extends React.Component { constructor() { super(); this.state = { movies: [], }; this.getTop250(); } static navigationOptions = { tabBarLabel: \u0026#34;Top 250\u0026#34;, }; getTop250 = () =\u0026gt; { top250(this.state.movies.length) .then((rsp) =\u0026gt; { this.setState((preSate) =\u0026gt; ({ movies: preSate.movies.concat(rsp.subjects), })); }) .catch((err) =\u0026gt; { console.log(\u0026#34;getTop250 error\u0026#34;, err); }); }; render() { return ( \u0026lt;ListPage movies={this.state.movies} loadData={this.getTop250} navigation={this.props.navigation} /\u0026gt; ); } } æœç´¢é¡µé¢ /views/Home.js import React from \u0026#34;react\u0026#34;; import { StyleSheet, View } from \u0026#34;react-native\u0026#34;; import { SearchBar } from \u0026#34;react-native-elements\u0026#34;; import { search } from \u0026#34;../http/api\u0026#34;; import ListPage from \u0026#34;../components/ListPage\u0026#34;; export default class Home extends React.Component { constructor() { super(); this.state = { movies: [], key: \u0026#34;\u0026#34;, }; } static navigationOptions = { tabBarLabel: \u0026#34;ä¸»é¡µ\u0026#34;, }; keyChange = (key) =\u0026gt; { this.setState({ key, }); this.getSearch(); }; getSearch = () =\u0026gt; { search(this.state.key).then((rsp) =\u0026gt; { this.setState({ movies: rsp.subjects, }); }); }; render() { return ( \u0026lt;View\u0026gt; \u0026lt;SearchBar onChangeText={this.keyChange} placeholder=\u0026#34;è¾“å…¥å…³é”®å­—æœç´¢\u0026#34; /\u0026gt; \u0026lt;ListPage movies={this.state.movies} loadData={this.getSearch} navigation={this.props.navigation} /\u0026gt; \u0026lt;/View\u0026gt; ); } } 5ã€å¯¼èˆªå®ç° import React from \u0026#34;react\u0026#34;; import { TabNavigator, StackNavigator } from \u0026#34;react-navigation\u0026#34;; import Home from \u0026#34;./views/Home\u0026#34;; import Top250 from \u0026#34;./views/Top250\u0026#34;; import UsBox from \u0026#34;./views/UsBox\u0026#34;; import Showing from \u0026#34;./views/Showing\u0026#34;; import ComingSoon from \u0026#34;./views/ComingSoon\u0026#34;; import MovieInfo from \u0026#34;./views/MovieInfo\u0026#34;; import ActorInfo from \u0026#34;./views/ActorInfo\u0026#34;; export default MyApp = StackNavigator( { FirstScreen: { screen: TabNavigator( { Top250: { screen: Top250, }, UsBox: { screen: UsBox, }, Home: { screen: Home, }, Showing: { screen: Showing, }, ComingSoon: { screen: ComingSoon, }, }, { tabBarPosition: \u0026#34;bottom\u0026#34;, animationEnabled: true, lazy: true, initialRouteName: \u0026#34;Home\u0026#34;, } ), }, MovieInfo: { screen: MovieInfo, }, ActorInfo: { screen: ActorInfo, }, }, { headerMode: \u0026#34;none\u0026#34;, } ); ","date":"2019-09-18T20:51:20+08:00","image":"https://picsum.photos/seed/c2c7c029452b45aa8117a63cd653cdb4/4096/2160","permalink":"https://jo-hnny.github.io/p/%E5%88%9D%E6%8E%A2react-native/","title":"åˆæ¢react Native"},{"content":"1ã€å¾—åˆ°ä¸€ä¸ªå›ºå®šé•¿åº¦çš„éç©ºçš„æ•°ç»„ æ¯”å¦‚æˆ‘éœ€è¦ä¸€ä¸ªæ•°ç»„ï¼Œå…ƒç´ æ˜¯ 1-10ï¼Œé¦–å…ˆæˆ‘ä¸æƒ³ç”¨ç›´æ¥æ‰‹å†™ä¸€ä¸ªæ•°ç»„ï¼Œä»¥å‰çš„å®ç°æ–¹å¼:\nnew Array(10).fill(0).map((_, index) =\u0026gt; ++index); ä¸ºä»€ä¹ˆè¦åŠ ä¸ª fill å‘¢ï¼Œæ˜¯å› ä¸º Array æ„é€ å‡½æ•°è¿”å›çš„æ•°ç»„éƒ½æ˜¯ç©ºä½ï¼Œå°±æ˜¯ä»€ä¹ˆéƒ½æ²¡æœ‰ï¼Œè¿ undefined éƒ½ä¸æ˜¯ï¼Œmap æ–¹æ³•ä¸ç”Ÿæ•ˆã€‚ es6 æ‰©å±•è¿ç®—ç¬¦çš„å†™æ³•ï¼š\n[...new Array(10)].map((_, index) =\u0026gt; ++index); æ‰©å±•è¿ç®—ç¬¦ä¼šå°†ç©ºä½éƒ½å˜æˆ undefinedã€‚\n2ã€es6 - Symbol å¥½åƒæ²¡ä»€ä¹ˆå¥½è¯´çš„ï¼Œæœ€å¤§çš„ç‰¹ç‚¹å°±æ˜¯å”¯ä¸€æ€§ï¼Œä½†æ˜¯ä¹Ÿæ„Ÿè§‰åˆ°äº†ä¸€ä¸ªé—®é¢˜ï¼Œç”¨å®ƒä½œä¸ºå±æ€§åçš„æ—¶å€™ï¼Œè¦æƒ³å–å‡ºæ¥å¿…é¡»ä½¿ç”¨è¿™ä¸ª Symbol å€¼ï¼Œé‚£ä¹ˆè·¨æ¨¡å—çš„æ—¶å€™ï¼Œå…¶å®ƒæ¨¡å—æƒ³å–å‡ºè¿™ä¸ªå€¼ï¼Œè¿˜å¿…é¡»æŠŠè¿™ä¸ª Symbol å€¼æŠ›å‡ºå»ã€‚\nåˆçœ‹åˆ°äº†Symbol.for()ï¼Œå¥½åƒèƒ½è§£å†³é—®é¢˜ï¼Œä½†æ˜¯æ€»æ„Ÿè§‰å“ªä¸å¯¹\n3ã€getter ä¸ setter getter var obj = { log: [\u0026#34;example\u0026#34;, \u0026#34;test\u0026#34;], get latest() { if (this.log.length == 0) return undefined; return this.log[this.log.length - 1]; }, }; console.log(obj.latest); // \u0026#34;test\u0026#34;. var obj = { log: [\u0026#34;example\u0026#34;, \u0026#34;test\u0026#34;], latest() { if (this.log.length == 0) return undefined; return this.log[this.log.length - 1]; }, }; console.log(obj.latest()); setter var language = { set current(name) { this.log.push(name); }, log: [], }; language.current = \u0026#34;EN\u0026#34;; console.log(language.log); // [\u0026#39;EN\u0026#39;]  language.current = \u0026#34;FA\u0026#34;; console.log(language.log); // [\u0026#39;EN\u0026#39;, \u0026#39;FA\u0026#39;] var language = { current(name) { this.log.push(name); }, log: [], }; language.current(\u0026#34;EN\u0026#34;); console.log(language.log); // [\u0026#39;EN\u0026#39;]  language.current(\u0026#34;FA\u0026#34;); console.log(language.log); // [\u0026#39;EN\u0026#39;, \u0026#39;FA\u0026#39;] é‡è¦çš„æ˜¯å½“å–å€¼ã€èµ‹å€¼æ—¶ä½ å¯ä»¥é€šè¿‡getå‡½æ•°ä»¥åŠsetå‡½æ•°åšä¸€äº›å…¶å®ƒçš„äº‹ã€‚\n4ã€è¿ç»­èµ‹å€¼å­˜åœ¨çš„é—®é¢˜ let a = {}; let b = a; a.x = a = { n: 1 }; console.log(a.x); // undefined console.log(b.x); // {n: 1} ä¸çŸ¥é“è¿™æ®µä»£ç çš„ç»“æœæœ‰æ²¡æœ‰ä¸€ç‚¹å‡ºäººæ„æ–™ï¼ŒåŸå› å°±æ˜¯åœ¨èµ‹å€¼ä¹‹å‰ï¼Œå°±å·²ç»ç¡®å®šäº†å†…å­˜ä¸­çš„åœ°å€ï¼Œç„¶åæ‰å¼€å§‹èµ‹å€¼\n5ã€yield*çš„ç”¨æ³• çœ‹åˆ°äº†ä¸€ä¸ªæ•°ç»„æ‹å¹³çš„é—®é¢˜,å…¶ä¸­yield*çš„ä½œç”¨å°±åƒæ˜¯ä¸€ä¸ªå¯¹å…¶å®ƒ generator å‡½æ•°çš„ä»£ç†ã€‚\nconst a = [1, [[2], 3, 4], 5]; function* flatten2(arr) { for (item of arr) { Array.isArray(item) ? yield* flatten2(item) : yield item; } } const numbers = flatten2(a); console.log(numbers.next()); // 1  console.log(numbers.next()); // 2 6ã€å®ç°è‡ªå·±çš„é˜²æŠ–å‡½æ•° const a = () =\u0026gt; console.log(\u0026#34;a\u0026#34;); const choke = (fn, timeout = 0) =\u0026gt; { let start = 0; return () =\u0026gt; { const now = Date.now(); if (now - start \u0026gt; timeout) { start = now; return fn(); } }; }; const b = choke(a, 1000); b(); b(); 7ã€è‡ªå®šä¹‰ä¸€ä¸ªäº‹ä»¶ç±» class Event { constructor() { this.stack = {}; } emit(eName, ...args) { if (this.stack[eName]) this.stack[eName].forEach((cb) =\u0026gt; cb(...args)); } on(eName, cb) { if (this.stack[eName]) return this.stack[eName].push(cb); this.stack[eName] = [cb]; } off(eName, cb) { if (!this.stack[eName]) return; if (!cb) return delete this.stack[eName]; this.stack[eName].forEach((acb, index) =\u0026gt; { if (acb === cb) delete this.stack[eName][index]; }); } } const e = new Event(); e.on(\u0026#34;click\u0026#34;, (a) =\u0026gt; console.log(a)); e.emit(\u0026#34;click\u0026#34;, 123); 8ã€egg é…åˆ dockers ä½¿ç”¨æ—¶è¦æŠŠ scripts start ä¸­çš„\u0026ndash;demon å»æ‰ã€‚ ","date":"2019-09-18T20:50:02+08:00","image":"https://picsum.photos/seed/a0fe4c2dd95249899623f35136c16e97/4096/2160","permalink":"https://jo-hnny.github.io/p/%E9%9A%8F%E7%AC%94/","title":"éšç¬”"},{"content":"å‰äº›å¤©é¡¹ç›®éœ€æ±‚è¦å®ç°å±å¹•å–è¯ï¼Œé€šè¿‡æˆ‘çš„è°ƒç ”ä½¿ç”¨ range api å®ç°äº†è¿™ä¸ªåŠŸèƒ½ï¼Œåæ¥æˆ‘åˆåˆ†æäº†æ‰‡è´çš„å¼€æ”¾ apiï¼Œäº†è§£äº†æ‰‡è´çš„å±å¹•å–è¯å®ç°æ–¹å¼ï¼Œåœ¨è¿™é‡Œæ€»ç»“ä¸€ä¸‹ã€‚\nRange æ–¹å¼ è¿™æ˜¯æˆ‘åœ¨é¡¹ç›®ä¸­å®ç°å±å¹•å–è¯çš„æ–¹å¼ï¼Œå…¶å…³é”®åœ¨äºdocument.caretRangeFromPoint(float x, float y)æ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•æ¥æ”¶ä¸€ä¸ªåæ ‡ï¼Œé€šè¿‡è¿™ä¸ªåæ ‡ç”Ÿæˆä¸€ä¸ª range å¯¹è±¡ï¼Œé€šè¿‡è¿™ä¸ª range å¯¹è±¡å¯ä»¥è·å–åˆ°å½“å‰ç‚¹å‡»çš„æ–‡æœ¬å†…å®¹ï¼Œä»¥åŠå½“å‰ç‚¹å‡»çš„æ–‡æœ¬ä½ç½®ï¼Œæˆ‘æŠŠè¿™ä¸ªå®ç°æ–¹å¼å°è£…æˆäº†ä¸€ä¸ªåŒ…thewordï¼Œå·²ç»ä¸Šä¼ åˆ°äº† npm ä»“åº“ï¼Œä¸‹è¾¹é€šè¿‡ä»£ç åˆ†æä¸€ä¸‹ï¼š\nexport default (event, regexp = /[a-zA-Z\u0026#39;â€™]/) =\u0026gt; { // ç›‘æµ‹ä¸€ä¸ªå­—ç¬¦æ˜¯å¦æ˜¯æ„æˆå•è¯çš„å­—ç¬¦  const isWord = (str) =\u0026gt; str \u0026amp;\u0026amp; regexp.test(str); const { clientX, clientY } = event; // é€šè¿‡ä¸€ä¸ªç‚¹ç”Ÿæˆrange  const range = document.caretRangeFromPoint(clientX, clientY); // ç‚¹å‡»çš„domeèŠ‚ç‚¹çš„æ–‡æœ¬å†…å®¹  const data = range.startContainer.data; // ç‚¹å‡»çš„å­—ç¬¦åœ¨æ–‡æœ¬ä¸­çš„ä½ç½®  const point = range.startOffset; if (!isWord(data[point])) return; let j = point - 1; let k = point + 1; let wordArr = [data[point]]; // ä»ç‚¹å‡»ä½ç½®å‘å‰å¯»æ‰¾ç¬¦åˆæ„æˆå•è¯æ¡ä»¶çš„å­—ç¬¦ï¼Œç›´åˆ°é‡åˆ°éæ„æˆå•è¯çš„å­—ç¬¦  while (isWord(data[j])) { wordArr.unshift(data[j]); j--; } // é‡æ–°è®¾ç½®rangeå¼€å§‹çš„ä½ç½®  range.setStart(range.startContainer, j + 1); // // ä»ç‚¹å‡»ä½ç½®å‘åå¯»æ‰¾ç¬¦åˆæ„æˆå•è¯æ¡ä»¶çš„å­—ç¬¦ï¼Œç›´åˆ°é‡åˆ°éæ„æˆå•è¯çš„å­—ç¬¦  while (isWord(data[k])) { wordArr.push(data[k]); k++; } // é‡æ–°è®¾ç½®rangeç»“æŸçš„ä½ç½®  range.setEnd(range.endContainer, k); // è·å–å½“å‰windowä¸‹çš„é€‰åŒºï¼Œå¹¶ä¸”æ¸…ç©ºæ‰€æœ‰é€‰åŒº  const s = window.getSelection(); s.removeAllRanges(); // ä¸€å¼€å§‹ä½¿ç”¨äº†åŸå§‹æ‹–è“æ•ˆæœè¡¨ç¤ºé€‰ä¸­ï¼Œä½†æ˜¯å¯å®šåˆ¶æ€§å·®ï¼Œè¾¾ä¸åˆ°UIæƒ³è¦çš„æ•ˆæœï¼Œæ‰€ä»¥æ³¨é‡Šæ‰äº†  // s.addRange(range)  const word = wordArr.join(\u0026#34;\u0026#34;); // è·å–rangeçš„ä½ç½®ä¿¡æ¯  const rect = range.getBoundingClientRect(); return { word, rect, }; }; æœ€åé€šè¿‡è¿™ä¸ªæ–¹æ³•ï¼Œæˆ‘ä»¬æˆåŠŸçš„è·å–åˆ°äº†ç‚¹å‡»çš„å•è¯ï¼Œä»¥åŠè¯¥å•è¯çš„ä½ç½®ä¿¡æ¯ï¼ŒåŒ…æ‹¬å®½é«˜ã€è·ç¦»å±å¹•çš„ä½ç½®ï¼Œæœ€åé€šè¿‡ä¸€ä¸ªå®šä½çš„ div è¦†ç›–æ‰åŸå…ˆçš„å•è¯ï¼Œå®ç°äº†é€‰ä¸­æ•ˆæœã€‚\nåˆ†å‰²æ–‡ç« çš„æ–¹å¼ è¿™ä¸ªå…¶å®å°±æ˜¯æ‹¿åˆ°å…¨ç¯‡æ–‡ç« ï¼Œç”¨ç©ºæ ¼å°†å…¨æ–‡åˆ†å‰²æˆå•è¯æ„æˆçš„æ•°ç»„ï¼Œç„¶åå¾ªç¯ç”Ÿæˆ domï¼Œç»™æ¯ä¸ª dom ç»‘å®šç‚¹å‡»äº‹ä»¶ï¼›æˆ‘ä¸€å¼€å§‹ä¹Ÿæ˜¯è¿™ä¹ˆæƒ³çš„ï¼Œä½†æ˜¯å½“æ—¶è§‰å¾—è¿™ä¸ªæ–¹æ³•å¤ªæš´åŠ›äº†ï¼Œå¹¶ä¸”å¯èƒ½å¸¦æ¥æ€§èƒ½é—®é¢˜ï¼Œå½“ç„¶æˆ‘ç°åœ¨è¿˜æ˜¯è§‰å¾—å®ƒå¾ˆæš´åŠ›ï¼Œä½†æ˜¯å®ƒè¶³å¤Ÿç®€å•ã€‚\nè¯ç»„æŸ¥è¯¢ æ‰‡è´çš„å®ç°æ–¹å¼æ˜¯è¿˜æœ‰ä¸€ä¸ªæ¥å£ä¼šè¿”å›è¯ç»„åœ¨æ–‡ç« ä¸­çš„ä½ç½®ï¼Œä½ç½®çš„è¡¨ç¤ºæ˜¯ä»¥è¯¥è¯ç»„çš„èµ·å§‹å•è¯å’Œç»“æŸå•è¯åˆ†åˆ«æ˜¯ç¬¬å‡ ä¸ªå•è¯ç¡®å®šçš„ï¼ŒæŒ‰ç…§æˆ‘çš„æ–¹æ³•å‡å¦‚è¦å®ç°è¯ç»„æŸ¥è¯¢åŠŸèƒ½ï¼Œä¹Ÿæ˜¯éœ€è¦è¿™ä¹ˆä¸€ä¸ªè¯ç»„çš„æ¥å£ï¼Œä½†æ˜¯ä½ç½®ä¿¡æ¯å°±åº”è¯¥æ˜¯å­—ç¬¦ä½ç½®äº†ã€‚\n","date":"2019-09-18T20:47:53+08:00","image":"https://picsum.photos/seed/72184b95064c4307b47f42fcf2c85619/4096/2160","permalink":"https://jo-hnny.github.io/p/web%E5%B1%8F%E5%B9%95%E5%8F%96%E8%AF%8D%E5%AE%9E%E7%8E%B0%E6%96%B9%E5%BC%8F/","title":"Webå±å¹•å–è¯å®ç°æ–¹å¼"}]