<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>å†·å®«</title><link>https://jo-hnny.github.io/</link><description>Recent content on å†·å®«</description><generator>Hugo -- gohugo.io</generator><language>zh-cn</language><lastBuildDate>Fri, 03 Dec 2021 15:21:17 +0800</lastBuildDate><atom:link href="https://jo-hnny.github.io/index.xml" rel="self" type="application/rss+xml"/><item><title>Gitåˆ›å»ºç©ºåˆ†æ”¯</title><link>https://jo-hnny.github.io/p/git%E5%88%9B%E5%BB%BA%E7%A9%BA%E5%88%86%E6%94%AF/</link><pubDate>Fri, 03 Dec 2021 15:21:17 +0800</pubDate><guid>https://jo-hnny.github.io/p/git%E5%88%9B%E5%BB%BA%E7%A9%BA%E5%88%86%E6%94%AF/</guid><description>&lt;img src="https://picsum.photos/seed/1638516077/4096/2160" alt="Featured image of post Gitåˆ›å»ºç©ºåˆ†æ”¯" />&lt;h1 id="é—®é¢˜">é—®é¢˜&lt;/h1>
&lt;p>ç»å¸¸æ€§çš„æ¯”å¦‚æˆ‘ä»¬å†™äº†ä¸€ä¸ªåº“ï¼ŒåŒæ—¶æƒ³æ­å»ºä¸€ä¸ªå±•ç¤º demo ç”¨çš„é¡µé¢ï¼Œè¿™æ—¶å€™æœ€ç†æƒ³çš„å°±æ˜¯åº“æ˜¯ä¸€ä¸ªåˆ†æ”¯ï¼Œdemo æ˜¯ä¸€ä¸ªåˆ†æ”¯ï¼Œæ‰€ä»¥æ­¤æ—¶å°±æœ‰ä¸€ä¸ªéœ€æ±‚ï¼Œå¸Œæœ›å¯ä»¥åˆ›å»ºä¸€ä¸ªç©ºçš„åˆ†æ”¯ï¼Œä¸å«ä¹‹å‰ä»»ä½•ä¸€ä¸ªåˆ†æ”¯çš„æ–‡ä»¶ä»¥åŠ commit è®°å½•ã€‚&lt;/p>
&lt;h1 id="è§£å†³æ–¹å¼">è§£å†³æ–¹å¼&lt;/h1>
&lt;h2 id="1åˆ›å»ºåˆ†æ”¯">1ã€åˆ›å»ºåˆ†æ”¯&lt;/h2>
&lt;p>&lt;code>git checkout --orphan demo&lt;/code>&lt;/p>
&lt;p>è¯¥å‘½ä»¤ä¼šåˆ›å»ºä¸€ä¸ªåä¸º demo çš„åˆ†æ”¯ï¼Œå¹¶ä¸”è¯¥åˆ†æ”¯ä¸‹æœ‰å‰ä¸€ä¸ªåˆ†æ”¯ä¸‹çš„æ‰€æœ‰æ–‡ä»¶,ä½†æ˜¯ä¸åŒ…å«å‰ä¸€ä¸ªåˆ†æ”¯çš„æäº¤è®°å½•ã€‚&lt;/p>
&lt;h2 id="2-åˆ é™¤æ–‡ä»¶">2ã€ åˆ é™¤æ–‡ä»¶&lt;/h2>
&lt;p>&lt;code>git rm -rf .&lt;/code>&lt;/p>
&lt;p>è¯¥å‘½ä»¤ä¼šåˆ é™¤å½“å‰ç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶&lt;/p></description></item><item><title>Github Page è‡ªåŠ¨åŒ–éƒ¨ç½²action</title><link>https://jo-hnny.github.io/p/github-page-%E8%87%AA%E5%8A%A8%E5%8C%96%E9%83%A8%E7%BD%B2action/</link><pubDate>Mon, 11 Oct 2021 16:11:59 +0800</pubDate><guid>https://jo-hnny.github.io/p/github-page-%E8%87%AA%E5%8A%A8%E5%8C%96%E9%83%A8%E7%BD%B2action/</guid><description>&lt;img src="https://picsum.photos/seed/1633939919/4096/2160" alt="Featured image of post Github Page è‡ªåŠ¨åŒ–éƒ¨ç½²action" />&lt;h2 id="è®°å½•ä¸€ä¸‹æˆ‘å¸¸ç”¨çš„ä¸€å¥—-github-page-è‡ªåŠ¨åŒ–éƒ¨ç½²-actions">è®°å½•ä¸€ä¸‹æˆ‘å¸¸ç”¨çš„ä¸€å¥— github-page è‡ªåŠ¨åŒ–éƒ¨ç½² actions&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-yml" data-lang="yml">&lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">CI&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">&lt;/span>&lt;span class="nt">on&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">push&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">&lt;/span>&lt;span class="nt">jobs&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">deploy&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">runs-on&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">ubuntu-18.04&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">steps&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>- &lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">Git checkout&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">uses&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">actions/checkout@v2&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>- &lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">Setup NodeJS&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">uses&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">actions/setup-node@v2&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">with&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">node-version&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;14&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>- &lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">Build&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">run&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">|&lt;/span>&lt;span class="sd">
&lt;/span>&lt;span class="sd"> npm install
&lt;/span>&lt;span class="sd"> npm run build&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>- &lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">Deploy&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">uses&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">peaceiris/actions-gh-pages@v3&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">with&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">personal_token&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">${{ secrets.TOKEN }}&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">publish_dir&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">./dist&lt;/span>&lt;span class="w">
&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>å…¶ä¸­ secrets.TOKEN ä¸º è‡ªå·±åˆ›å»ºçš„ &lt;a class="link" href="https://github.com/settings/tokens" target="_blank" rel="noopener"
>Personal access tokens&lt;/a>,åˆ›å»ºæˆåŠŸä¹‹åå°†å…¶æ·»åŠ åˆ°ç›®æ ‡é¡¹ç›®çš„ Settings/secrets ä¸‹&lt;/p></description></item><item><title>Husky@v7ä½¿ç”¨æŒ‡å—</title><link>https://jo-hnny.github.io/p/huskyv7%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97/</link><pubDate>Tue, 06 Jul 2021 14:24:51 +0800</pubDate><guid>https://jo-hnny.github.io/p/huskyv7%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97/</guid><description>&lt;img src="https://jo-hnny.github.io/p/huskyv7%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97/cover.jpg" alt="Featured image of post Husky@v7ä½¿ç”¨æŒ‡å—" />&lt;h2 id="ä¸ºä»€ä¹ˆæœ‰è¿™ç¯‡æ–‡ç« ">ä¸ºä»€ä¹ˆæœ‰è¿™ç¯‡æ–‡ç« &lt;/h2>
&lt;p>æœ€è¿‘æˆ‘ä¸ºå¼€æºé¡¹ç›® &lt;code>tkestack&lt;/code> çš„å‰ç«¯æ§åˆ¶å°éƒ¨åˆ†æ·»åŠ äº†å¯¹ commit çš„ lintï¼Œåœ¨æ·»åŠ è¿‡ç¨‹ä¸­é‡åˆ°äº†ä¸€äº›å›°éš¾å’Œç–‘æƒ‘ï¼Œåœ¨æ­¤è®°å½•ä¸€ä¸‹&lt;/p>
&lt;h2 id="v4-é…ç½®æ–¹å¼">v4 é…ç½®æ–¹å¼&lt;/h2>
&lt;h3 id="å®‰è£…-husky">å®‰è£… husky&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">npm i husky -D
&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="æ·»åŠ é…ç½®">æ·»åŠ é…ç½®&lt;/h3>
&lt;p>åœ¨ package.json ä¸­æ·»åŠ å¦‚ä¸‹é…ç½®&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-json" data-lang="json">&lt;span class="c1">//package.json
&lt;/span>&lt;span class="c1">&lt;/span>&lt;span class="s2">&amp;#34;lint-staged&amp;#34;&lt;/span>&lt;span class="err">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="nt">&amp;#34;./**/*.{ts,tsx,js,jsx}&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[&lt;/span>
&lt;span class="s2">&amp;#34;eslint&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="s2">&amp;#34;prettier --write&amp;#34;&lt;/span>
&lt;span class="p">]&lt;/span>
&lt;span class="p">}&lt;/span>&lt;span class="err">,&lt;/span>
&lt;span class="s2">&amp;#34;husky&amp;#34;&lt;/span>&lt;span class="err">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="nt">&amp;#34;hooks&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="nt">&amp;#34;pre-commit&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;lint-staged&amp;#34;&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="p">}&lt;/span>&lt;span class="err">,&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>æˆ–è€…æ·»åŠ .huskyrc æ–‡ä»¶&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-json" data-lang="json">&lt;span class="c1">// .huskyrc
&lt;/span>&lt;span class="c1">&lt;/span>&lt;span class="p">{&lt;/span>
&lt;span class="nt">&amp;#34;hooks&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="nt">&amp;#34;pre-commit&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;lint-staged&amp;#34;&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="v6-é…ç½®æ–¹å¼">v6+ é…ç½®æ–¹å¼&lt;/h2>
&lt;p>ç¬¬ä¸€æ¬¡ä½¿ç”¨ï¼ŒæŒ‰ç…§ husky doc è¿›è¡Œé…ç½®&lt;/p>
&lt;h3 id="å®‰è£…-husky-1">å®‰è£… husky&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">npm i husky -D
&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="å¼€å¯-git-hooks">å¼€å¯ Git hooks&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">npx husky install
&lt;/code>&lt;/pre>&lt;/div>&lt;p>æ‰§è¡Œåˆ°è¿™é‡Œï¼Œæˆ‘å¾—åˆ°ä¸€ä¸ªé”™è¯¯&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">npx husky install
.git can&lt;span class="err">&amp;#39;&lt;/span>t be found &lt;span class="o">(&lt;/span>see https://git.io/Jc3F9&lt;span class="o">)&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>å¯ä»¥æ¨æ–­å‡ºåŸå› æ˜¯è¿™æ¡å‘½ä»¤éœ€è¦åœ¨é¡¹ç›®æ ¹ç›®å½•æ‰§è¡Œã€‚å³&lt;code>.git&lt;/code>æ‰€åœ¨çš„ç›®å½•
tkestack æ˜¯ä¸€ä¸ªå‰åç«¯åŒåœ¨ä¸€ä¸ªä»“åº“çš„é¡¹ç›®ï¼Œç›®å½•ç»“æ„å¦‚ä¸‹&lt;/p>
&lt;pre tabindex="0">&lt;code>.
â””â”€â”€ web
â””â”€â”€ console
&lt;/code>&lt;/pre>&lt;p>æˆ‘ä»¬ç°åœ¨åœ¨ console ç›®å½•ï¼Œæ‰€ä»¥æ­£ç¡®çš„æ–¹å¼åº”è¯¥æ˜¯&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="nb">cd&lt;/span> ../../
npx husky install ./web/console/.husky
&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="æ·»åŠ è‡ªåŠ¨æ‰§è¡Œhusky-installçš„é’©å­">æ·»åŠ è‡ªåŠ¨æ‰§è¡Œ&lt;code>husky install&lt;/code>çš„é’©å­&lt;/h3>
&lt;p>å¦‚æœå…¶ä»–ç”¨æˆ·è¿›è¡Œå¼€å‘ï¼Œæ˜¾ç„¶æˆ‘ä»¬æ˜¯ä¸å¸Œæœ›ä»–éœ€è¦å…ˆé˜…è¯» husky çš„æ–‡æ¡£ï¼Œç„¶åæ‰‹åŠ¨æ‰§è¡Œ&lt;code>npx husky install&lt;/code>çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬æ·»åŠ ä¸€ä¸ª npm scripts çš„é’©å­&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">npm set-script prepare &lt;span class="s2">&amp;#34;husky install&amp;#34;&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>ç”±äºç›®å½•çš„åŸå› ï¼Œå¯¹åº”çš„è°ƒæ•´ä¸º&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">npm set-script prepare &lt;span class="s2">&amp;#34;cd ../../ &amp;amp;&amp;amp; husky install ./web/console/.husky&amp;#34;&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>æ³¨æ„ âš ï¸ï¼š&lt;code>npm set-script&lt;/code> åªåœ¨ npm version 7.x ç”Ÿæ•ˆ,å¦‚æœä½ ç”¨çš„æ˜¯ 6.x æˆ–è€…æ›´ä½ï¼Œè¿˜æ˜¯æ‰‹åŠ¨åœ¨&lt;code>package.json&lt;/code>ä¸­æ·»åŠ å§&lt;/p>
&lt;p>ç°åœ¨æŸ¥çœ‹&lt;code>package.json&lt;/code> åº”è¯¥å¯ä»¥çœ‹åˆ°&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-json" data-lang="json">&lt;span class="c1">// package.json
&lt;/span>&lt;span class="c1">&lt;/span>&lt;span class="p">{&lt;/span>
&lt;span class="nt">&amp;#34;scripts&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="nt">&amp;#34;prepare&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;cd ../../ &amp;amp;&amp;amp; husky install ./web/console/.husky&amp;#34;&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="æ·»åŠ æˆ‘ä»¬çš„-hook">æ·»åŠ æˆ‘ä»¬çš„ hook&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">npx husky add .husky/pre-commit &lt;span class="s2">&amp;#34;lint-staged&amp;#34;&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="æµ‹è¯•ä¸€ä¸‹">æµ‹è¯•ä¸€ä¸‹&lt;/h3>
&lt;p>ä¿®æ”¹ä¸€ä¸ªæ–‡ä»¶ä½¿ä¹‹ä¸ç¬¦åˆ eslint è§„èŒƒï¼Œç„¶åæˆ‘ä»¬åšä¸€æ¬¡æäº¤&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">git add .
git commit &lt;span class="s1">&amp;#39;test husky&amp;#39;&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>ç»“æœå±…ç„¶æˆåŠŸæäº¤äº†ï¼Œæ˜¾ç„¶æˆ‘ä»¬çš„ lint æ²¡æœ‰ç”Ÿæ•ˆ&lt;/p>
&lt;p>æˆ‘ä»¬æ£€æŸ¥ä¸€ä¸‹ç°åœ¨æˆ‘ä»¬çš„ console ç›®å½•æœ‰å“ªäº›å˜åŒ–ï¼Œä¼šå‘ç°å¤šäº†ä¸€ä¸ª.husky ç›®å½•ï¼Œç›®å½•ä¸‹æœ‰ä¸€ä¸ª&lt;code>pre-commit&lt;/code>æ–‡ä»¶,æ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="cp">#!/bin/sh
&lt;/span>&lt;span class="cp">&lt;/span>. &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="k">$(&lt;/span>dirname &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nv">$0&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="k">)&lt;/span>&lt;span class="s2">/_/husky.sh&amp;#34;&lt;/span>
lint-staged
&lt;/code>&lt;/pre>&lt;/div>&lt;p>å¤§è‡´å¯ä»¥çŒœæµ‹åˆ°å½“ pre-commit æ—¶ï¼Œå®é™…æ˜¯æ‰§è¡Œäº†è¿™ä¸ª shell è„šæœ¬ï¼Œç”±äºæˆ‘ä»¬çš„ lint-staged å¹¶ä¸æ˜¯å…¨å±€å®‰è£…ï¼Œåœ¨è¿™é‡Œå¹¶ä¸èƒ½æ‰§è¡Œ
æ‰€ä»¥æˆ‘ä»¬åœ¨ package.json ä¸­æ·»åŠ ä¸€ä¸ª script&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-json" data-lang="json">&lt;span class="c1">// package.json
&lt;/span>&lt;span class="c1">&lt;/span>&lt;span class="p">{&lt;/span>
&lt;span class="nt">&amp;#34;scripts&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="nt">&amp;#34;prepare&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;cd ../../ &amp;amp;&amp;amp; husky install&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="nt">&amp;#34;pre-commit&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;lint-staged&amp;#34;&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>æ¥ç€ä¿®æ”¹&lt;code>.husky/pre-commit&lt;/code>æ–‡ä»¶&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="cp">#!/bin/sh
&lt;/span>&lt;span class="cp">&lt;/span>. &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="k">$(&lt;/span>dirname &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nv">$0&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="k">)&lt;/span>&lt;span class="s2">/_/husky.sh&amp;#34;&lt;/span>
npm run pre-commit
&lt;/code>&lt;/pre>&lt;/div>&lt;p>å†å°è¯•ä¸€ä¸‹ä¿®æ”¹ä¸€ä¸ªæ–‡ä»¶å¹¶æäº¤&lt;/p>
&lt;p>è¿˜æ˜¯æˆåŠŸäº†ï¼Œlint ä¾ç„¶æ²¡æœ‰ç”Ÿæ•ˆï¼Œ&lt;/p>
&lt;p>æŸ¥çœ‹æ–‡æ¡£å¯çŸ¥&lt;code>pre-commit&lt;/code>è¿™ä¸ª shell å®é™…æ‰§è¡Œç›®å½•æ˜¯åœ¨&lt;code>.git&lt;/code>æ‰€åœ¨ç›®å½•ï¼Œæ‰€ä»¥æ¥ç€ä¿®æ”¹&lt;code>.husky/pre-commit&lt;/code>æ–‡ä»¶&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="cp">#!/bin/sh
&lt;/span>&lt;span class="cp">&lt;/span>. &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="k">$(&lt;/span>dirname &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nv">$0&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="k">)&lt;/span>&lt;span class="s2">/_/husky.sh&amp;#34;&lt;/span>
&lt;span class="nb">cd&lt;/span> ./web/console
npm run pre-commit
&lt;/code>&lt;/pre>&lt;/div>&lt;p>æœ€åå†æ¬¡ä¿®æ”¹æ–‡ä»¶å¹¶ commitï¼Œç»ˆäºå¯ä»¥çœ‹åˆ°å‘½ä»¤è¡Œæ‰§è¡Œäº†&lt;code>lint-staged&lt;/code>ï¼Œlint å¤±è´¥ï¼Œcommit æœªæˆåŠŸ&lt;/p>
&lt;h2 id="ä¸ºä»€ä¹ˆä»-v4-åˆ°-v6">ä¸ºä»€ä¹ˆä» v4 åˆ° v6&lt;/h2>
&lt;p>å¾ˆæ˜¾ç„¶ï¼Œv6 çš„é…ç½® ç›¸æ¯” v4 å¤æ‚äº†å¾ˆå¤š,é‚£ä¹ˆä¸ºä»€ä¹ˆ husky å®˜æ–¹è¦ä¿®æ”¹ä¹‹å‰çš„é…ç½®æ–¹å¼å‘¢ï¼Ÿ
è¦äº†è§£è¿™ä¸ªé—®é¢˜ä¹‹å‰æˆ‘ä»¬å…ˆçœ‹ä¸€ä¸‹ husky v4 çš„å·¥ä½œæ–¹å¼&lt;/p>
&lt;h3 id="huskyv4-æ˜¯å¦‚ä½•è¿è¡Œçš„">husky@v4 æ˜¯å¦‚ä½•è¿è¡Œçš„&lt;/h3>
&lt;p>é¦–å…ˆ husky åœ¨å®‰è£…æ—¶ä¼šåœ¨ .git/hooks/ ç›®å½•å®‰è£…æ‰€æœ‰å¯èƒ½ä¼šä½¿ç”¨åˆ°çš„ hooks&lt;/p>
&lt;p>æ¯”å¦‚å½“æˆ‘ä»¬è¿›è¡Œä¸€æ¬¡æäº¤æ—¶ï¼Œæ¯ä¸ª git hook æ£€æŸ¥æˆ‘ä»¬æœ‰æ²¡æœ‰åœ¨ package.json æˆ–è€….huskyrc ä¸­å®šä¹‰å¯¹åº”çš„é’©å­:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">$ git commit
pre-commit &lt;span class="o">(&lt;/span>native&lt;span class="o">)&lt;/span> â†’ husky/runner.js &lt;span class="o">(&lt;/span>node&lt;span class="o">)&lt;/span>
â†’ is a pre-commit defined in &lt;span class="sb">`&lt;/span>.huskyrc.js&lt;span class="sb">`&lt;/span>? â†’ YES, run it
prepare-commit-msg &lt;span class="o">(&lt;/span>native&lt;span class="o">)&lt;/span> â†’ husky/runner.js &lt;span class="o">(&lt;/span>node&lt;span class="o">)&lt;/span>
â†’ is a prepare-commit-msg defined in &lt;span class="sb">`&lt;/span>.huskyrc.js&lt;span class="sb">`&lt;/span>? â†’ NO, &lt;span class="k">do&lt;/span> nothing
commit-msg &lt;span class="o">(&lt;/span>native&lt;span class="o">)&lt;/span> â†’ husky/runner.js &lt;span class="o">(&lt;/span>node&lt;span class="o">)&lt;/span>
â†’ is a commit-msg defined in &lt;span class="sb">`&lt;/span>.huskyrc.js&lt;span class="sb">`&lt;/span>? â†’ NO, &lt;span class="k">do&lt;/span> nothing
post-commit &lt;span class="o">(&lt;/span>native&lt;span class="o">)&lt;/span> â†’ husky/runner.js &lt;span class="o">(&lt;/span>node&lt;span class="o">)&lt;/span>
â†’ is a post-commit defined in &lt;span class="sb">`&lt;/span>.huskyrc.js&lt;span class="sb">`&lt;/span>? â†’ NO, &lt;span class="k">do&lt;/span> nothing
&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>
&lt;p>ä¼˜ç‚¹ï¼š ç”¨æˆ·å¯ä»¥åœ¨é…ç½®æ–‡ä»¶ä¸­æ·»åŠ ã€æ›´æ–°ã€åˆ é™¤ hookï¼Œhusky ä¼šè‡ªåŠ¨åˆ¤æ–­æ‰§è¡Œ&lt;/p>
&lt;/li>
&lt;li>
&lt;p>ç¼ºç‚¹ï¼š ä¸ç®¡æˆ‘ä»¬æœ‰æ²¡æœ‰é…ç½® hookï¼Œæ‰€æœ‰çš„ git hook éƒ½ä¼šæ‰§è¡Œä¸€éï¼ŒåŒ…æ‹¬æ‰§è¡Œ node husky/runner.js&lt;/p>
&lt;/li>
&lt;/ul>
&lt;h3 id="huskyv6-æ˜¯å¦‚ä½•è¿è¡Œçš„">husky@v6 æ˜¯å¦‚ä½•è¿è¡Œçš„&lt;/h3>
&lt;p>2016 å¹´ï¼ŒGit 2.9 å¼•å…¥äº†&lt;code>core.hooksPath&lt;/code>ï¼Œä»–ä½¿ç”¨æˆ·å¯ä»¥è‡ªå®šä¹‰ git hooks çš„ç›®å½•,åœ¨æ­¤ä¹‹å‰ï¼Œhooks åªèƒ½æ”¾åœ¨.git/hooks/ç›®å½•ä¸‹,ç„¶è€Œ.git ç›®å½•æ˜¯ä¸èƒ½æäº¤çš„ï¼Œä½†æ˜¯ç°åœ¨é…ç½®&lt;code>core.hooksPath&lt;/code>ä¹‹åï¼Œæ¯”å¦‚ husky ä½¿ç”¨&lt;code>husky install&lt;/code> é…ç½® .husky/ä½œä¸º git hooks ç›®å½•ï¼Œæˆ‘ä»¬å¯ä»¥æäº¤.husky/ç›®å½•ä½œä¸ºé¡¹ç›®çš„ä¸€éƒ¨åˆ†ã€‚&lt;/p>
&lt;ul>
&lt;li>ä¼˜ç‚¹ï¼š
&lt;ul>
&lt;li>é¿å…äº†åˆ›å»ºå’Œè¿è¡Œæ‰€æœ‰ git hooks&lt;/li>
&lt;li>ç°åœ¨ git hooks å’Œ husky é…ç½®æ–‡ä»¶å®é™…ä¸Šæ˜¯ä¸€ä¸ªæ–‡ä»¶ï¼Œæ–¹ä¾¿ç®¡ç†&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>ç¼ºç‚¹ï¼š
&lt;ul>
&lt;li>é…ç½®å¤æ‚ç¹ç&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h2 id="å‚è€ƒ">å‚è€ƒ&lt;/h2>
&lt;p>&lt;a class="link" href="https://typicode.github.io/husky" target="_blank" rel="noopener"
>husky doc&lt;/a>&lt;/p>
&lt;p>&lt;a class="link" href="https://blog.typicode.com/husky-git-hooks-javascript-config/" target="_blank" rel="noopener"
>Why husky has dropped conventional JS config&lt;/a>&lt;/p>
&lt;h2 id="20210721-è¡¥å……">2021.07.21 è¡¥å……&lt;/h2>
&lt;p>æœ‰åç«¯åŒå­¦é‡åˆ°äº†æ— æ³•æäº¤ä»£ç çš„é—®é¢˜ï¼Œå…·ä½“è¡¨ç°æ˜¯ä¿®æ”¹äº†åç«¯ä»£ç ï¼Œç„¶åæäº¤ï¼Œå‘ç°è§¦å‘çš„ husky çš„ commit é’©å­ï¼Œç»è¿‡æ’æŸ¥æ˜¯åç«¯åŒå­¦åœ¨å‰ç«¯ç›®å½•æ‰§è¡Œäº† npm installï¼Œå¯¼è‡´æŒ‚è½½äº† husky çš„é’©å­
ï¼Œè§£å†³æ–¹æ¡ˆï¼š&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">git config --unset core.hooksPath
&lt;/code>&lt;/pre>&lt;/div>&lt;p>å› ä¸º v6 ç‰ˆæœ¬çš„ husky çš„åŸç†å°±æ˜¯è®¾ç½®äº† core.hooksPathï¼Œ æ‰€ä»¥æˆ‘ä»¬é‡ç½®å®ƒå°±å¥½äº†&lt;/p></description></item><item><title>ZSHé…ç½®æŒ‡å—</title><link>https://jo-hnny.github.io/p/zsh%E9%85%8D%E7%BD%AE%E6%8C%87%E5%8D%97/</link><pubDate>Mon, 04 Jan 2021 10:39:16 +0800</pubDate><guid>https://jo-hnny.github.io/p/zsh%E9%85%8D%E7%BD%AE%E6%8C%87%E5%8D%97/</guid><description>&lt;img src="https://jo-hnny.github.io/p/zsh%E9%85%8D%E7%BD%AE%E6%8C%87%E5%8D%97/cover.jpg" alt="Featured image of post ZSHé…ç½®æŒ‡å—" />&lt;blockquote>
&lt;p>å›¾æ‘„äºè¥¿æ¹–&lt;/p>
&lt;/blockquote>
&lt;p>æœ¬æ–‡ä»¥ ubuntu18.0.4 ä¸ºä¾‹&lt;/p>
&lt;h2 id="å®‰è£…-zsh">å®‰è£… ZSH&lt;/h2>
&lt;p>&lt;code>sudo apt-get install zsh&lt;/code>&lt;/p>
&lt;h2 id="è®¾ç½®-zsh-ä¸ºé»˜è®¤-shell">è®¾ç½® ZSH ä¸ºé»˜è®¤ shell&lt;/h2>
&lt;p>&lt;code>chsh -s $(which zsh)&lt;/code>&lt;/p>
&lt;h2 id="å®‰è£…ohmyzshhttpsohmyzsh">å®‰è£…&lt;a class="link" href="https://ohmyz.sh/" target="_blank" rel="noopener"
>ohmyzsh&lt;/a>&lt;/h2>
&lt;p>&lt;code>sh -c &amp;quot;$(curl -fsSL https://raw.github.com/ohmyzsh/ohmyzsh/master/tools/install.sh)&amp;quot;&lt;/code>&lt;br>
ä½†æ˜¯ç”±äºç½‘ç»œçš„é—®é¢˜ï¼Œæˆ‘æ€»æ˜¯é‡åˆ°è¿™ä¸ªé”™è¯¯ï¼š&lt;br>
&lt;code>Failed to connect to raw.github.com port 443: Connection refused&lt;/code>&lt;br>
æ‰€ä»¥æˆ‘æ¢äº†ä¸ªæ–¹æ³•ï¼Œå…ˆæŠŠ ohmyzsh çš„ GitHub ä»“åº“å…‹éš†ä¸‹æ¥,ç„¶åå†å®‰è£…ï¼š&lt;/p>
&lt;ol>
&lt;li>&lt;code>git clone https://github.com/ohmyzsh/ohmyzsh.git&lt;/code>&lt;/li>
&lt;li>&lt;code>sh -c ohmyzsh/tools/install.sh&lt;/code>&lt;/li>
&lt;/ol>
&lt;h2 id="zsh-æ’ä»¶å’Œä¸»é¢˜é…ç½®">zsh æ’ä»¶å’Œä¸»é¢˜é…ç½®&lt;/h2>
&lt;h3 id="å®‰è£…spaceshiphttpsgithubcomdenysdovhanspaceship-promptä¸»é¢˜">å®‰è£…&lt;a class="link" href="https://github.com/denysdovhan/spaceship-prompt" target="_blank" rel="noopener"
>spaceship&lt;/a>ä¸»é¢˜&lt;/h3>
&lt;ol>
&lt;li>&lt;code>git clone https://github.com/denysdovhan/spaceship-prompt.git &amp;quot;$ZSH_CUSTOM/themes/spaceship-prompt&amp;quot; --depth=1&lt;/code>&lt;/li>
&lt;li>&lt;code>ln -s &amp;quot;$ZSH_CUSTOM/themes/spaceship-prompt/spaceship.zsh-theme&amp;quot; &amp;quot;$ZSH_CUSTOM/themes/spaceship.zsh-theme&amp;quot;&lt;/code>&lt;/li>
&lt;/ol>
&lt;h3 id="å®‰è£…zsh-autosuggestionshttpsgithubcomzsh-userszsh-autosuggestionsæ’ä»¶">å®‰è£…&lt;a class="link" href="https://github.com/zsh-users/zsh-autosuggestions" target="_blank" rel="noopener"
>zsh-autosuggestions&lt;/a>æ’ä»¶&lt;/h3>
&lt;p>è¿™ä¸ªæ’ä»¶ä¸»è¦ä½œç”¨æ˜¯è®°å½•ä¸‹å†å²å‘½ä»¤ï¼Œåœ¨ä½ è¾“å…¥ä¸€éƒ¨åˆ†æ—¶è‡ªåŠ¨æç¤ºè¡¥å…¨&lt;br>
&lt;code>git clone https://github.com/zsh-users/zsh-autosuggestions ${ZSH_CUSTOM:-~/.oh-my-zsh/custom}/plugins/zsh-autosuggestions&lt;/code>&lt;/p>
&lt;h3 id="å®‰è£…zsh-syntax-highlightinghttpsgithubcomzsh-userszsh-syntax-highlightingæ’ä»¶">å®‰è£…&lt;a class="link" href="https://github.com/zsh-users/zsh-syntax-highlighting" target="_blank" rel="noopener"
>zsh-syntax-highlighting&lt;/a>æ’ä»¶&lt;/h3>
&lt;p>è¿™ä¸ªæ’ä»¶ä¸»è¦åŠŸèƒ½æ˜¯é«˜äº®ä½ è¾“å…¥çš„æ­£ç¡®çš„å‘½ä»¤&lt;br>
&lt;code>git clone https://github.com/zsh-users/zsh-syntax-highlighting.git ${ZSH_CUSTOM:-~/.oh-my-zsh/custom}/plugins/zsh-syntax-highlighting&lt;/code>&lt;/p>
&lt;h3 id="æœ€åé…ç½®zshrc-æ–‡ä»¶">æœ€åé…ç½®.zshrc æ–‡ä»¶&lt;/h3>
&lt;ol>
&lt;li>&lt;code>vi ~/.zshrc&lt;/code>&lt;/li>
&lt;li>&lt;code>ZSH_THEME=&amp;quot;spaceship&amp;quot;&lt;/code>&lt;/li>
&lt;li>&lt;code>plugins=(git zsh-autosuggestions zsh-syntax-highlighting)&lt;/code>&lt;/li>
&lt;li>&lt;code>source ~/.zshrc&lt;/code>&lt;/li>
&lt;/ol>
&lt;h2 id="æœ€åè®°å½•ä¸€ä¸‹-ssh-ç™»å½•-ubuntu-root-æ‰€éœ€è¦çš„ä¸€äº›é…ç½®">æœ€åè®°å½•ä¸€ä¸‹ ssh ç™»å½• ubuntu root æ‰€éœ€è¦çš„ä¸€äº›é…ç½®&lt;/h2>
&lt;p>é»˜è®¤ ubuntu root è´¦å·æ— æ³• ssh è¿æ¥ï¼Œä¸€å¼€å§‹ä¸çŸ¥é“ï¼Œæ­»æ´»è¿ä¸ä¸Š&lt;/p>
&lt;h3 id="è®¾ç½®-root-è´¦æˆ·å¯†ç ">è®¾ç½® root è´¦æˆ·å¯†ç &lt;/h3>
&lt;p>&lt;code>sudo passwd&lt;/code>&lt;br>
æŒ‰ç…§æç¤ºè¾“å…¥å¹¶ç¡®è®¤å¯†ç &lt;/p>
&lt;h3 id="ä¿®æ”¹-ssh-é…ç½®">ä¿®æ”¹ ssh é…ç½®&lt;/h3>
&lt;ol>
&lt;li>æ‰“å¼€ ssh é…ç½® &lt;code>sudo vi /etc/ssh/sshd_config&lt;/code>&lt;/li>
&lt;li>ä¿®æ”¹ &lt;code>PermitRootLogin yes&lt;/code>&lt;/li>
&lt;li>é‡å¯ ssh &lt;code>sudo service ssh restart&lt;/code>&lt;/li>
&lt;li>é‡æ–° ssh è¿æ¥ root ç”¨æˆ·&lt;/li>
&lt;/ol></description></item><item><title>Happy Birthday With New Year</title><link>https://jo-hnny.github.io/p/happy-birthday-with-new-year/</link><pubDate>Mon, 28 Dec 2020 11:08:45 +0800</pubDate><guid>https://jo-hnny.github.io/p/happy-birthday-with-new-year/</guid><description>&lt;img src="https://jo-hnny.github.io/p/happy-birthday-with-new-year/cover.jpg" alt="Featured image of post Happy Birthday With New Year" />&lt;h2 id="åˆé•¿äº†ä¸€å²">åˆé•¿äº†ä¸€å²&lt;/h2>
&lt;p>è¶Šæ¥è¶Šæ²¡åŠæ³•å¿½è§†è‡ªå·±çš„å¹´é¾„ï¼Œä½†æ˜¯æ¯ä¸ªäººçš„è·¯æ³¨å®šæ˜¯ä¸ä¸€æ ·çš„ï¼Œä¹Ÿè®¸æˆ‘çš„æ³¨å®šåå·ä¸€ç‚¹ï¼ŒåŠ æ²¹ï¼Œ better than better&lt;/p>
&lt;h2 id="ç¥å¤§å®¶æ–°å¹´æ–°æ°”è±¡">ç¥å¤§å®¶æ–°å¹´æ–°æ°”è±¡&lt;/h2>
&lt;p>&lt;figure
class="gallery-image"
style="
flex-grow: 66;
flex-basis: 158px"
>
&lt;a href="https://jo-hnny.github.io/p/happy-birthday-with-new-year/new-year.PNG" data-size="3784x5716">
&lt;img src="https://jo-hnny.github.io/p/happy-birthday-with-new-year/new-year.PNG"
width="3784"
height="5716"
srcset="https://jo-hnny.github.io/p/happy-birthday-with-new-year/new-year_huebb6f38c275b6fe8087980db183c0f07_30347436_480x0_resize_box_3.PNG 480w, https://jo-hnny.github.io/p/happy-birthday-with-new-year/new-year_huebb6f38c275b6fe8087980db183c0f07_30347436_1024x0_resize_box_3.PNG 1024w"
loading="lazy"
alt="Happy New Year">
&lt;/a>
&lt;figcaption>Happy New Year&lt;/figcaption>
&lt;/figure>
&lt;figure
class="gallery-image"
style="
flex-grow: 71;
flex-basis: 171px"
>
&lt;a href="https://jo-hnny.github.io/p/happy-birthday-with-new-year/rabbit.PNG" data-size="1190x1670">
&lt;img src="https://jo-hnny.github.io/p/happy-birthday-with-new-year/rabbit.PNG"
width="1190"
height="1670"
srcset="https://jo-hnny.github.io/p/happy-birthday-with-new-year/rabbit_huee5fe307af317435b697f2dc2593050e_3407597_480x0_resize_box_3.PNG 480w, https://jo-hnny.github.io/p/happy-birthday-with-new-year/rabbit_huee5fe307af317435b697f2dc2593050e_3407597_1024x0_resize_box_3.PNG 1024w"
loading="lazy"
alt="Rabbit Girl">
&lt;/a>
&lt;figcaption>Rabbit Girl&lt;/figcaption>
&lt;/figure>
&lt;figure
class="gallery-image"
style="
flex-grow: 140;
flex-basis: 337px"
>
&lt;a href="https://jo-hnny.github.io/p/happy-birthday-with-new-year/cat.PNG" data-size="1529x1087">
&lt;img src="https://jo-hnny.github.io/p/happy-birthday-with-new-year/cat.PNG"
width="1529"
height="1087"
srcset="https://jo-hnny.github.io/p/happy-birthday-with-new-year/cat_hucb6d5b96b67e3dd6dde42589d2255763_2955063_480x0_resize_box_3.PNG 480w, https://jo-hnny.github.io/p/happy-birthday-with-new-year/cat_hucb6d5b96b67e3dd6dde42589d2255763_2955063_1024x0_resize_box_3.PNG 1024w"
loading="lazy"
alt="Cat Girl">
&lt;/a>
&lt;figcaption>Cat Girl&lt;/figcaption>
&lt;/figure>&lt;/p>
&lt;h3 id="æ’å›¾æ¥è‡ªæœ€è¿‘å–œæ¬¢çš„æ—¥æœ¬ç”»å¸ˆ-å¤©å‡ªãˆã‚‹twittercomamanagiel">æ’å›¾æ¥è‡ªæœ€è¿‘å–œæ¬¢çš„æ—¥æœ¬ç”»å¸ˆ &lt;a class="link" href="//twitter.com/amanagiel" >å¤©å‡ªãˆã‚‹&lt;/a>&lt;/h3>
&lt;style type="text/css">
.twitter-tweet {
font: 14px/1.45 -apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen-Sans,Ubuntu,Cantarell,"Helvetica Neue",sans-serif;
border-left: 4px solid #2b7bb9;
padding-left: 1.5em;
color: #555;
}
.twitter-tweet a {
color: #2b7bb9;
text-decoration: none;
}
blockquote.twitter-tweet a:hover,
blockquote.twitter-tweet a:focus {
text-decoration: underline;
}
&lt;/style>
&lt;blockquote class="twitter-tweet">&lt;p lang="ja" dir="ltr">ğŸ¼ãŠçŸ¥ã‚‰ã›ğŸ¼&lt;br>&lt;br>å¹´è³€çŠ¶ã®å†è²©ã™ã‚‹ã“ã¨ã«ãªã‚Šã¾ã—ãŸğŸ’Œ&lt;br>ã™ã§ã«è²©å£²ã‚¹ã‚¿ãƒ¼ãƒˆã—ã¦ã¾ã™ğŸ¾&lt;br>ä»Šå›ã¯ãŠåå‰ã¨ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã¯ãªã—ã§ç›´ç­†ã‚µã‚¤ãƒ³ã®ã¿ã§ã™ã®ã§ã”æ³¨æ„ãã ã•ã„ï¼ï¼&lt;br>12/30 22æ™‚ã¾ã§ã®è²©å£²ãªã®ã§ã‚ˆã‚ã—ããŠé¡˜ã„ã—ã¾ã™ã«ã‚ƒã‚“à¸…( Â´ ^ ` à¸…)&lt;a href="https://t.co/wbBHAB0ZRJ">https://t.co/wbBHAB0ZRJ&lt;/a> &lt;a href="https://twitter.com/hashtag/booth_pm?src=hash&amp;amp;ref_src=twsrc%5Etfw">#booth_pm&lt;/a> &lt;a href="https://t.co/9SZ7bMdy2l">pic.twitter.com/9SZ7bMdy2l&lt;/a>&lt;/p>&amp;mdash; å¤©å‡ªãˆã‚‹ğŸ¼ğŸ¾ (@amanagiel) &lt;a href="https://twitter.com/amanagiel/status/1343043691972231168?ref_src=twsrc%5Etfw">December 27, 2020&lt;/a>&lt;/blockquote></description></item><item><title>åˆæŠ˜è…¾åšå®¢å•¦</title><link>https://jo-hnny.github.io/p/%E5%8F%88%E6%8A%98%E8%85%BE%E5%8D%9A%E5%AE%A2%E5%95%A6/</link><pubDate>Wed, 23 Dec 2020 17:01:19 +0800</pubDate><guid>https://jo-hnny.github.io/p/%E5%8F%88%E6%8A%98%E8%85%BE%E5%8D%9A%E5%AE%A2%E5%95%A6/</guid><description>&lt;img src="https://jo-hnny.github.io/p/%E5%8F%88%E6%8A%98%E8%85%BE%E5%8D%9A%E5%AE%A2%E5%95%A6/cover.jpg" alt="Featured image of post åˆæŠ˜è…¾åšå®¢å•¦" />&lt;h2 id="åˆæŠ˜è…¾äº†">åˆæŠ˜è…¾äº†&lt;/h2>
&lt;p>ä¹‹å‰ä¸‹å®šå†³å¿ƒä¸æŠ˜è…¾çš„ï¼Œå°±åªæ˜¯ç”¨ github pages é»˜è®¤çš„ä¸»é¢˜ï¼Œæœ€ç®€å•çš„æ–¹å¼ï¼Œä½†æ˜¯ä»é‚£ä¹‹åå¾ˆä¹…éƒ½æ²¡æœ‰æ‰“å¼€è¿‡åšå®¢äº†ï¼Œå¥½åƒå…´è¶£ä¸§å¤±äº†ï¼Œè¿™æ¬¡æ­£å¥½çœ‹åˆ°è¿™ä¸ªä¸»é¢˜å¾ˆå–œæ¬¢ï¼Œå°±åˆæŠ˜=æŠ˜è…¾ä¸€ä¸‹ï¼Œä¸è¿‡ actions éƒ¨ç½²å¥½äº†ï¼Œåé¢å†™åšå®¢ä¹Ÿå°±å¾ˆç®€å•å•¦ï¼&lt;/p>
&lt;h2 id="å¹´ç»ˆäº†">å¹´ç»ˆäº†&lt;/h2>
&lt;p>ä»Šå¹´ä¸å‡ºæ„æ–™çš„è¿‡çš„å¾ˆå¿«ï¼Œä½†æ˜¯ä¹Ÿå‘ç”Ÿäº†å¾ˆå¤šäº‹æƒ…ï¼Œä»æ­å·æ’¤äº†å›æ¥ï¼Œå…¶å®å¿ƒé‡Œæ„Ÿè§‰æ˜¯è‡ªå·±è®¤è¾“äº†ï¼Œèººå¹³äº†ï¼Œä¸æŒ£æ‰äº†ï¼Œä½†æ˜¯æƒ³æƒ³å¯¹è‡ªå·±æ¥è¯´åº”è¯¥æ˜¯æœ€å¥½çš„é€‰æ‹©äº†ï¼Œä¹‹å‰é‚£æ ·çš„çŠ¶æ€ï¼Œä¸çŸ¥é“èƒ½ä¸èƒ½æ´»åˆ°ç°åœ¨å‘¢ï¼&lt;/p>
&lt;h2 id="æ–°å¹´æœŸå¾…">æ–°å¹´æœŸå¾…&lt;/h2>
&lt;ul>
&lt;li>
&lt;p>æ”’é’±&lt;/p>
&lt;/li>
&lt;li>
&lt;p>å˜å¾—æ›´å¥½ï¼Œä»å†…åˆ°å¤–&lt;/p>
&lt;ul>
&lt;li>çŸ«æ­£çš„äº‹æƒ…å»åŒ»é™¢çœ‹çœ‹æ–¹æ¡ˆ&lt;/li>
&lt;li>è¿‘è§†çš„äº‹æƒ…ï¼Œå°šæœªæƒ³å¥½ï¼Œä¸æˆ´çœ¼é•œè‡ªç„¶æ˜¯ç»ä½³çš„&lt;/li>
&lt;li>è„¸ä¸Šçš„ç–¤ä¹Ÿå¯ä»¥å»å’¨è¯¢ä¸€ä¸‹ï¼Œæœ€å¥½çš®è‚¤çŠ¶æ€ç¨³å®š&lt;/li>
&lt;li>å¿ƒèƒ½é™ä¸‹æ¥&lt;/li>
&lt;li>å¤šå‚åŠ æˆ·å¤–æ´»åˆ°&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>æŠŠæƒ³å†™çš„å¼€æºé¡¹ç›®å†™äº†&lt;/p>
&lt;ul>
&lt;li>å›¾ç‰‡çš„ - å…ˆå†™è¿™ä¸ª&lt;/li>
&lt;li>è§†é¢‘çš„ - æ…¢æ…¢æ¥&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>å·¥ä½œä¸Š&lt;/p>
&lt;ul>
&lt;li>å­¦ä¹ ä¸€ä¸‹ go&lt;/li>
&lt;li>å­¦ä¹  k8s ç›¸å…³&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>æ„Ÿæƒ…&lt;/p>
&lt;ul>
&lt;li>&amp;hellip;&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>è¿‡å¹´è¦åšçš„äº‹æƒ…&lt;/p>
&lt;ul>
&lt;li>ç»™çˆ¸å¦ˆä¹°å¥—è¡£æœå§ï¼Œæ¯•ä¸šä¹Ÿå¥½å‡ å¹´äº†ï¼Œè¿˜æ²¡ç»™ä»–ä»¬ä¹°è¿‡&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul></description></item><item><title>äºŒåˆ†æŸ¥æ‰¾</title><link>https://jo-hnny.github.io/p/%E4%BA%8C%E5%88%86%E6%9F%A5%E6%89%BE/</link><pubDate>Wed, 23 Dec 2020 11:55:21 +0800</pubDate><guid>https://jo-hnny.github.io/p/%E4%BA%8C%E5%88%86%E6%9F%A5%E6%89%BE/</guid><description>&lt;img src="https://jo-hnny.github.io/p/%E4%BA%8C%E5%88%86%E6%9F%A5%E6%89%BE/cover.jpg" alt="Featured image of post äºŒåˆ†æŸ¥æ‰¾" />&lt;h2 id="å¾ªç¯">å¾ªç¯&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-typescript" data-lang="typescript">&lt;span class="kd">function&lt;/span> &lt;span class="nx">find2&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">data&lt;/span>: &lt;span class="kt">number&lt;/span>&lt;span class="p">[],&lt;/span> &lt;span class="nx">n&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="kd">let&lt;/span> &lt;span class="nx">low&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="kd">let&lt;/span> &lt;span class="nx">higth&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">data&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">length&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="kd">let&lt;/span> &lt;span class="nx">middleIndex&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">low&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="nb">Math&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">floor&lt;/span>&lt;span class="p">((&lt;/span>&lt;span class="nx">higth&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="nx">low&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">/&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="kd">let&lt;/span> &lt;span class="nx">middleValue&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">data&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="nx">middleIndex&lt;/span>&lt;span class="p">];&lt;/span>
&lt;span class="k">while&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">n&lt;/span> &lt;span class="o">!==&lt;/span> &lt;span class="nx">middleValue&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">higth&lt;/span> &lt;span class="o">&amp;lt;=&lt;/span> &lt;span class="nx">low&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="k">return&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">n&lt;/span> &lt;span class="o">&amp;lt;&lt;/span> &lt;span class="nx">middleValue&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="nx">higth&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">middleIndex&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="p">}&lt;/span> &lt;span class="k">else&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="nx">low&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">middleIndex&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="nx">middleIndex&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">low&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="nb">Math&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">floor&lt;/span>&lt;span class="p">((&lt;/span>&lt;span class="nx">higth&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="nx">low&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">/&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="nx">middleValue&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">data&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="nx">middleIndex&lt;/span>&lt;span class="p">];&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="k">return&lt;/span> &lt;span class="nx">middleIndex&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="c1">// test
&lt;/span>&lt;span class="c1">&lt;/span>
&lt;span class="kr">const&lt;/span> &lt;span class="nx">array&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[...&lt;/span>&lt;span class="k">new&lt;/span> &lt;span class="nb">Array&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">1000&lt;/span>&lt;span class="p">)].&lt;/span>&lt;span class="nx">map&lt;/span>&lt;span class="p">((&lt;/span>&lt;span class="nx">_&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">index&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">=&amp;gt;&lt;/span> &lt;span class="nx">index&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="kr">const&lt;/span> &lt;span class="nx">n&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">500&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">find2&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">array&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">n&lt;/span>&lt;span class="p">));&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="é€’å½’">é€’å½’&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-typescript" data-lang="typescript">&lt;span class="c1">// äºŒåˆ†æŸ¥æ‰¾ - é€’å½’æ³•
&lt;/span>&lt;span class="c1">&lt;/span>&lt;span class="kd">function&lt;/span> &lt;span class="nx">find2&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">data&lt;/span>: &lt;span class="kt">number&lt;/span>&lt;span class="p">[],&lt;/span> &lt;span class="nx">n&lt;/span>: &lt;span class="kt">number&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">preIndex&lt;/span>: &lt;span class="kt">number&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="kr">const&lt;/span> &lt;span class="nx">len&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">data&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">length&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">len&lt;/span> &lt;span class="o">&amp;lt;=&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="k">return&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="kr">const&lt;/span> &lt;span class="nx">middleIndex&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nb">Math&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">floor&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">len&lt;/span> &lt;span class="o">/&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="kr">const&lt;/span> &lt;span class="nx">middleValue&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">data&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="nx">middleIndex&lt;/span>&lt;span class="p">];&lt;/span>
&lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">n&lt;/span> &lt;span class="o">&amp;lt;&lt;/span> &lt;span class="nx">middleValue&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="k">return&lt;/span> &lt;span class="nx">find2&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">data&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">slice&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">middleIndex&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="nx">n&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">preIndex&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">n&lt;/span> &lt;span class="o">===&lt;/span> &lt;span class="nx">middleValue&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="k">return&lt;/span> &lt;span class="nx">preIndex&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="nx">middleIndex&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">n&lt;/span> &lt;span class="o">&amp;gt;&lt;/span> &lt;span class="nx">middleValue&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="k">return&lt;/span> &lt;span class="nx">find2&lt;/span>&lt;span class="p">(&lt;/span>
&lt;span class="nx">data&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">slice&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">middleIndex&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">len&lt;/span>&lt;span class="p">),&lt;/span>
&lt;span class="nx">n&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="nx">preIndex&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="nx">middleIndex&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="mi">1&lt;/span>
&lt;span class="p">);&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="c1">// test
&lt;/span>&lt;span class="c1">&lt;/span>
&lt;span class="kr">const&lt;/span> &lt;span class="nx">array&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[...&lt;/span>&lt;span class="k">new&lt;/span> &lt;span class="nb">Array&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">1000&lt;/span>&lt;span class="p">)].&lt;/span>&lt;span class="nx">map&lt;/span>&lt;span class="p">((&lt;/span>&lt;span class="nx">_&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">index&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">=&amp;gt;&lt;/span> &lt;span class="nx">index&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="kr">const&lt;/span> &lt;span class="nx">n&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">500&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">find2&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">array&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">n&lt;/span>&lt;span class="p">));&lt;/span>
&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>åœ¨scsså’Œcss_moduleç¯å¢ƒä¸­åˆ‡æ¢ä¸»é¢˜</title><link>https://jo-hnny.github.io/p/%E5%9C%A8scss%E5%92%8Ccss_module%E7%8E%AF%E5%A2%83%E4%B8%AD%E5%88%87%E6%8D%A2%E4%B8%BB%E9%A2%98/</link><pubDate>Wed, 23 Dec 2020 11:41:47 +0800</pubDate><guid>https://jo-hnny.github.io/p/%E5%9C%A8scss%E5%92%8Ccss_module%E7%8E%AF%E5%A2%83%E4%B8%AD%E5%88%87%E6%8D%A2%E4%B8%BB%E9%A2%98/</guid><description>&lt;img src="https://jo-hnny.github.io/p/%E5%9C%A8scss%E5%92%8Ccss_module%E7%8E%AF%E5%A2%83%E4%B8%AD%E5%88%87%E6%8D%A2%E4%B8%BB%E9%A2%98/cover.jpg" alt="Featured image of post åœ¨scsså’Œcss_moduleç¯å¢ƒä¸­åˆ‡æ¢ä¸»é¢˜" />&lt;h2 id="ä»Šå¤©å°è¯•åœ¨é¡¹ç›®ä¸­å®Œæˆåˆ‡æ¢ä¸»é¢˜çš„åŠŸèƒ½ç›®å‰å·²ç»å®ç°æ•…åšä¸ªè®°å½•">ä»Šå¤©å°è¯•åœ¨é¡¹ç›®ä¸­å®Œæˆåˆ‡æ¢ä¸»é¢˜çš„åŠŸèƒ½ï¼Œç›®å‰å·²ç»å®ç°ï¼Œæ•…åšä¸ªè®°å½•&lt;/h2>
&lt;ol>
&lt;li>æ–°å»ºä¸€ä¸ª scss æ–‡ä»¶ä¿å­˜é¢œè‰²é…ç½®ï¼Œä¾‹å¦‚ï¼š&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-scss" data-lang="scss">&lt;span class="c1">// themes.scss
&lt;/span>&lt;span class="c1">&lt;/span>
&lt;span class="nv">$themes&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="p">(&lt;/span>
&lt;span class="na">light&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="p">(&lt;/span>
&lt;span class="na">main&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="mh">#364f6b&lt;/span>&lt;span class="o">,&lt;/span>
&lt;span class="na">second&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="mh">#3fc1c9&lt;/span>&lt;span class="o">,&lt;/span>
&lt;span class="na">third&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="mh">#f5f5f5&lt;/span>&lt;span class="o">,&lt;/span>
&lt;span class="na">fourth&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="mh">#fc5185&lt;/span>&lt;span class="o">,&lt;/span>
&lt;span class="p">)&lt;/span>&lt;span class="o">,&lt;/span>
&lt;span class="na">dark&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="p">(&lt;/span>
&lt;span class="na">main&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="mh">#e4f9f5&lt;/span>&lt;span class="o">,&lt;/span>
&lt;span class="na">second&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="mh">#30e3ca&lt;/span>&lt;span class="o">,&lt;/span>
&lt;span class="na">third&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="mh">#11999e&lt;/span>&lt;span class="o">,&lt;/span>
&lt;span class="na">fourth&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="mh">#40514e&lt;/span>&lt;span class="o">,&lt;/span>
&lt;span class="p">)&lt;/span>&lt;span class="o">,&lt;/span>
&lt;span class="p">);&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;ol start="2">
&lt;li>æ–°å»ºå¦ä¸€ä¸ª scss æ–‡ä»¶ï¼Œåˆ›å»º mixinï¼š&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-scss" data-lang="scss">&lt;span class="c1">// themify.scss
&lt;/span>&lt;span class="c1">&lt;/span>&lt;span class="k">@import&lt;/span> &lt;span class="s2">&amp;#34;./themes.scss&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="k">@mixin&lt;/span>&lt;span class="nf"> themify&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nv">$themes&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="nv">$themes&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="k">@each&lt;/span> &lt;span class="nv">$theme&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="nv">$map&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="nv">$themes&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="nd">:global&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="nc">.theme-&lt;/span>&lt;span class="si">#{&lt;/span>&lt;span class="nv">$theme&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="o">)&lt;/span> &lt;span class="k">&amp;amp;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="nv">$theme-map&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="p">()&lt;/span> &lt;span class="k">!global&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="k">@each&lt;/span> &lt;span class="nv">$key&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="nv">$submap&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="nv">$map&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="nv">$value&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="nf">map-get&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nf">map-get&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nv">$themes&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="nv">$theme&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="si">#{&lt;/span>&lt;span class="nv">$key&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="nv">$theme-map&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="nf">map-merge&lt;/span>&lt;span class="p">(&lt;/span>
&lt;span class="nv">$theme-map&lt;/span>&lt;span class="o">,&lt;/span>
&lt;span class="p">(&lt;/span>
&lt;span class="nv">$key&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="nv">$value&lt;/span>&lt;span class="o">,&lt;/span>
&lt;span class="p">)&lt;/span>
&lt;span class="p">)&lt;/span> &lt;span class="k">!global&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="k">@content&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="nv">$theme-map&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="n">null&lt;/span> &lt;span class="k">!global&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="k">@function&lt;/span>&lt;span class="nf"> themed&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nv">$key&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="k">@return&lt;/span> &lt;span class="nf">map-get&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nv">$theme-map&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="nv">$key&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;ol start="3">
&lt;li>ä½¿ç”¨ï¼š&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-scss" data-lang="scss">&lt;span class="k">@import&lt;/span> &lt;span class="s2">&amp;#34;../../assets/styles/themify.scss&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="nc">.header&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="na">width&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="mi">100&lt;/span>&lt;span class="kt">%&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="na">height&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="mi">60&lt;/span>&lt;span class="kt">px&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="na">padding&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">20&lt;/span>&lt;span class="kt">px&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="na">display&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="ni">flex&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="na">justify-content&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="ni">flex-end&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="na">align-items&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="ni">center&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="k">@include&lt;/span>&lt;span class="nd"> themify&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="na">background-color&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="nf">themed&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;main&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="na">color&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="nf">themed&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;third&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;ol start="4">
&lt;li>æœ€åï¼š&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-typescript" data-lang="typescript">&lt;span class="kr">import&lt;/span> &lt;span class="nx">React&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="nx">useState&lt;/span> &lt;span class="p">}&lt;/span> &lt;span class="kr">from&lt;/span> &lt;span class="s2">&amp;#34;react&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="kr">import&lt;/span> &lt;span class="nx">styles&lt;/span> &lt;span class="kr">from&lt;/span> &lt;span class="s2">&amp;#34;./app.module.scss&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="kr">import&lt;/span> &lt;span class="nx">classNames&lt;/span> &lt;span class="kr">from&lt;/span> &lt;span class="s2">&amp;#34;classnames&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="kr">import&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="nx">Header&lt;/span> &lt;span class="p">}&lt;/span> &lt;span class="kr">from&lt;/span> &lt;span class="s2">&amp;#34;./components/header&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="kr">enum&lt;/span> &lt;span class="nx">Themes&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="nx">Light&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;light&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="nx">Dark&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;dark&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="kd">function&lt;/span> &lt;span class="nx">App() {&lt;/span>
&lt;span class="kr">const&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="nx">theme&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">setTheme&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">useState&lt;/span>&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">Themes&lt;/span>&lt;span class="p">&amp;gt;(&lt;/span>&lt;span class="nx">Themes&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Light&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="kd">function&lt;/span> &lt;span class="nx">toggleTheme() {&lt;/span>
&lt;span class="nx">setTheme&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">theme&lt;/span> &lt;span class="o">===&lt;/span> &lt;span class="nx">Themes&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Light&lt;/span> &lt;span class="o">?&lt;/span> &lt;span class="nx">Themes.Dark&lt;/span> : &lt;span class="kt">Themes.Light&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="k">return&lt;/span> &lt;span class="p">(&lt;/span>
&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">div&lt;/span> &lt;span class="na">className&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="nx">classNames&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">styles&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">app&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="sb">`theme-&lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="nx">theme&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="sb">`&lt;/span>&lt;span class="p">)}&amp;gt;&lt;/span>
&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">Header&lt;/span> &lt;span class="na">toogleTheme&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="nx">toggleTheme&lt;/span>&lt;span class="p">}&lt;/span> &lt;span class="p">/&amp;gt;&lt;/span>
&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">div&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;span class="p">);&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="kr">export&lt;/span> &lt;span class="k">default&lt;/span> &lt;span class="nx">App&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>Reacté¡¹ç›®ä¸­åŒæ—¶æ·»åŠ css Modulesä¸æ™®é€šclass</title><link>https://jo-hnny.github.io/p/react%E9%A1%B9%E7%9B%AE%E4%B8%AD%E5%90%8C%E6%97%B6%E6%B7%BB%E5%8A%A0css-modules%E4%B8%8E%E6%99%AE%E9%80%9Aclass/</link><pubDate>Wed, 18 Sep 2019 21:16:58 +0800</pubDate><guid>https://jo-hnny.github.io/p/react%E9%A1%B9%E7%9B%AE%E4%B8%AD%E5%90%8C%E6%97%B6%E6%B7%BB%E5%8A%A0css-modules%E4%B8%8E%E6%99%AE%E9%80%9Aclass/</guid><description>&lt;img src="https://jo-hnny.github.io/p/react%E9%A1%B9%E7%9B%AE%E4%B8%AD%E5%90%8C%E6%97%B6%E6%B7%BB%E5%8A%A0css-modules%E4%B8%8E%E6%99%AE%E9%80%9Aclass/cover.jpg" alt="Featured image of post Reacté¡¹ç›®ä¸­åŒæ—¶æ·»åŠ css Modulesä¸æ™®é€šclass" />&lt;p>å½“æˆ‘åœ¨ react é¡¹ç›®ä¸­ä¸ºä¸€ä¸ªå…ƒç´ æ·»åŠ äº† css modules çš„æ ·å¼ï¼Œä½†æ˜¯ç”±äºæˆ‘è¦ä½¿ç”¨ iconfontï¼Œå¿…é¡»åœ¨å…ƒç´ ä¸Šæ·»åŠ ä¸€ä¸ªåä¸º iconfont çš„ class åç§°ï¼Œæœæ¥æœå»ä¹Ÿæ²¡æ‰¾åˆ°ä»€ä¹ˆä¼˜é›…çš„å®ç°ï¼Œé‚£å°±æŒ‰ç…§ class çš„æœ¬è´¨å®ç°å§ï¼Œclass æœ¬è´¨å°±æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œå¤šä¸ª class åç”±ç©ºæ ¼åˆ†å‰²ï¼Œæ•…:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-tsx" data-lang="tsx">&lt;span class="kr">public&lt;/span> &lt;span class="nx">render() {&lt;/span>
&lt;span class="k">return&lt;/span> &lt;span class="p">(&lt;/span>
&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">div&lt;/span> &lt;span class="na">className&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="sb">`&lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="nx">styles&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">uploader&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="sb"> iconfont`&lt;/span>&lt;span class="p">}&amp;gt;&lt;/span>
&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">input&lt;/span> &lt;span class="na">type&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;file&amp;#34;&lt;/span> &lt;span class="na">className&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="nx">styles&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;file-input&amp;#39;&lt;/span>&lt;span class="p">]}&lt;/span> &lt;span class="p">/&amp;gt;&lt;/span>
&lt;span class="o">&amp;amp;&lt;/span>&lt;span class="err">#&lt;/span>&lt;span class="nx">xe7da&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">div&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;span class="p">)&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>ä»Šå¤©æ–°å‘ç°ä¸€ä¸ªåº“&lt;a class="link" href="https://github.com/JedWatson/classnames" target="_blank" rel="noopener"
>classnames&lt;/a>å¯ä»¥å¾ˆå¥½çš„è§£å†³è¿™ä¸ªé—®é¢˜,ä½¿ç”¨å¦‚ä¸‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-tsx" data-lang="tsx">&lt;span class="kr">import&lt;/span> &lt;span class="nx">classNames&lt;/span> &lt;span class="kr">from&lt;/span> &lt;span class="s2">&amp;#34;classnames&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="kr">import&lt;/span> &lt;span class="nx">React&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="nx">Component&lt;/span> &lt;span class="p">}&lt;/span> &lt;span class="kr">from&lt;/span> &lt;span class="s2">&amp;#34;react&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="kr">import&lt;/span> &lt;span class="nx">styles&lt;/span> &lt;span class="kr">from&lt;/span> &lt;span class="s2">&amp;#34;./index.module.scss&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="kr">export&lt;/span> &lt;span class="k">default&lt;/span> &lt;span class="kr">class&lt;/span> &lt;span class="kr">extends&lt;/span> &lt;span class="nx">Component&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="kr">public&lt;/span> &lt;span class="nx">uploadImage&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">e&lt;/span>: &lt;span class="kt">React.ChangeEvent&lt;/span>&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">HTMLInputElement&lt;/span>&lt;span class="p">&amp;gt;)&lt;/span> &lt;span class="o">=&amp;gt;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">e&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">target&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">files&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="p">};&lt;/span>
&lt;span class="kr">public&lt;/span> &lt;span class="nx">render() {&lt;/span>
&lt;span class="k">return&lt;/span> &lt;span class="p">(&lt;/span>
&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">div&lt;/span> &lt;span class="na">className&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="nx">classNames&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;iconfont&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">styles&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">uploader&lt;/span>&lt;span class="p">)}&amp;gt;&lt;/span>
&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">input&lt;/span>
&lt;span class="na">type&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;file&amp;#34;&lt;/span>
&lt;span class="na">accept&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;image/png, image/jpeg&amp;#34;&lt;/span>
&lt;span class="na">multiple&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="kc">true&lt;/span>&lt;span class="p">}&lt;/span>
&lt;span class="na">className&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="nx">styles&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s2">&amp;#34;file-input&amp;#34;&lt;/span>&lt;span class="p">]}&lt;/span>
&lt;span class="na">onChange&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">uploadImage&lt;/span>&lt;span class="p">}&lt;/span>
&lt;span class="p">/&amp;gt;&lt;/span>
&lt;span class="o">&amp;amp;&lt;/span>&lt;span class="err">#&lt;/span>&lt;span class="nx">xe81c&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">div&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;span class="p">);&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>(è¯‘)React+Redux+Typescript</title><link>https://jo-hnny.github.io/p/%E8%AF%91react-redux-typescript/</link><pubDate>Wed, 18 Sep 2019 21:14:23 +0800</pubDate><guid>https://jo-hnny.github.io/p/%E8%AF%91react-redux-typescript/</guid><description>&lt;img src="https://jo-hnny.github.io/p/%E8%AF%91react-redux-typescript/cover.jpg" alt="Featured image of post (è¯‘)React+Redux+Typescript" />&lt;h1 id="react--redux--typescript---æˆä¸ºæ›´å¥½çš„å‰ç«¯æ•™ç¨‹">React + Redux + TypeScript - æˆä¸ºæ›´å¥½çš„å‰ç«¯ï¼ˆæ•™ç¨‹ï¼‰&lt;/h1>
&lt;p>æˆ‘åœ¨å¼€å§‹æ„å»º React åº”ç”¨ï¼Œä½†æ˜¯æˆ‘å¸Œæœ›æˆ‘çš„åº”ç”¨æœ‰ä¸€ä¸ªå¥½çš„æ„å»ºæ–¹å¼ï¼Œè¿™æ˜¯æˆ‘åœ¨ Medium ä¸Šçœ‹åˆ°çš„ä¸€ç¯‡ä¸é”™çš„æ•™ç¨‹ï¼Œä¸ºäº†æ–¹ä¾¿æˆ‘ç†è§£ï¼Œé¡ºä¾¿å­¦è‹±è¯­ï¼Œç¿»è¯‘åœ¨æ­¤ï¼Œè‹±è¯­ç‰ˆçš„å¯ä»¥&lt;a class="link" href="https://medium.com/swinginc/react-redux-typescript-into-the-better-frontend-tutorial-d32f46e97995" target="_blank" rel="noopener"
>ç‚¹å‡»æŸ¥çœ‹åŸæ–‡&lt;/a>&lt;/p>
&lt;p>æ„å»ºä¸€ä¸ªæ»¡æ„çš„ React åº”ç”¨ç¨‹åºæ˜¯æ¯”è¾ƒå›°éš¾çš„ï¼ˆä¸»è¦æ˜¯æ¯”è¾ƒéš¾æ‰¾åˆ°ä¸€ä»½ React çš„æœ€ä½³å®è·µï¼Œè¿™ç‚¹ Angular è¿˜æ˜¯å¾ˆä¼˜ç§€çš„ï¼Œä½†æ˜¯æˆ‘å–œæ¬¢ jsxï¼‰ã€‚å½“ä½ æŒæ¡äº† VirtualDOM çš„æ¦‚å¿µä»¥åŠæ¡†æ¶æ˜¯å¦‚ä½•å·¥ä½œçš„æ—¶å€™ï¼Œä½ ä¼šå¾ˆå¿«æ„è¯†åˆ°å•å•ä½¿ç”¨ React æœ¬èº«ä¸è¶³ä»¥æ„å»ºæ¯” TODO-LIST æ›´å¤§çš„åº”ç”¨ã€‚è¿™ä¸ªæ—¶å€™ä½ å¼€å§‹å­¦ä¹ ä½¿ç”¨ç±»ä¼¼ Flux è¿™æ ·çš„ store æ¶æ„ï¼Œæ¯”å¦‚è¯´åº”ç”¨æœ€å¹¿æ³›çš„ Reduxï¼Œå¾ˆå¿«ä½ ä¼šæ²‰æ²¡åœ¨ actions å’Œ reducers ä¸­ï¼Œå¹¶ä¸”ä½ å¼€å§‹åœ¨ä¿æŒæ•°æ®åˆ†ç¦»ä¸Šé‡åˆ°æ›´å¤šçš„å›°éš¾ï¼Œè¿™å¬èµ·æ¥ä½ æ˜¯ä¸æ˜¯å¾ˆç†Ÿæ‚‰ï¼Ÿ&lt;/p>
&lt;p>åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘å°†ä»‹ç»å¦‚ä½•æ„å»ºä¸€ä¸ªå¯æ‰©å±•çš„åº”ç”¨ç¨‹åºï¼Œå†çœ‹æ¥ä¸‹é‡Œçš„å†…å®¹ä¹‹å‰ï¼Œæˆ‘å¸Œæœ›ä½ å·²ç»æ˜ç™½ React æ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Œå¹¶ä¸”å¯¹ Flux æˆ–è€… Redux æœ‰ä¸€ç‚¹äº†è§£ã€‚&lt;/p>
&lt;p>æœ¬æ–‡æ˜¯æˆ‘ç”± 2018 å¹´ 7 æœˆ 25 æ—¥ SwingDev åœ¨ microConf å¤§ä¼šä¸Šçš„æ¼”è®²æ•´ç†è€Œæˆçš„ä¹¦é¢ç‰ˆæœ¬ã€‚æ›´å¤šçš„ä¿¡æ¯å¯ä»¥ç‚¹å‡»&lt;a class="link" href="http://www.microconf.io/" target="_blank" rel="noopener"
>microconf.io&lt;/a>.&lt;/p>
&lt;h2 id="ä¸ºä»€ä¹ˆè¦ä½¿ç”¨-store">ä¸ºä»€ä¹ˆè¦ä½¿ç”¨ Store&lt;/h2>
&lt;p>å¦‚æœä½ å·²ç»ä½¿ç”¨ React ç¼–å†™è¿‡ä¸€ä¸ªå°çš„åº”ç”¨ç¨‹åºï¼Œé‚£ä¹ˆä½ ä¼šå‘ç°å¥½åƒå°‘äº†äº›ä»€ä¹ˆã€‚&lt;/p>
&lt;p>å‡è®¾æˆ‘ä»¬æ­£åœ¨åˆ›å»ºç”±ä¸¤ä¸ªä¸»è¦ç»„ä»¶æ„æˆçš„ç®€å•åº”ç”¨ï¼šåŒ…å«æ‰€æœ‰ç”µå­é‚®ä»¶åˆ—è¡¨çš„&lt;strong>ä¾§è¾¹æ ç»„ä»¶&lt;/strong>å’Œæ˜¾ç¤ºå½“å‰æ‰€é€‰ç”µå­é‚®ä»¶å†…å®¹çš„&lt;strong>å†…å®¹ç»„ä»¶&lt;/strong>ã€‚å•å‡»ä¾§è¾¹æ çš„å…ƒç´ æ—¶ï¼Œæˆ‘ä»¬ä½¿ç”¨è·¯ç”±æ¥æ›´æ”¹é¡µé¢çš„ URL å¹¶å°†ç”µå­é‚®ä»¶çš„ ID æ”¾åœ¨å…¶ä¸­ã€‚ä½†æ˜¯æˆ‘ä»¬éœ€è¦åœ¨å†…å®¹ç»„ä»¶ä¸­è·å–åˆ°ç”µå­é‚®ä»¶çš„å…·ä½“å†…å®¹ï¼Œå³ä½¿ä¾§è¾¹æ ç»„ä»¶ä¸­å·²ç»å­˜åœ¨è¯¥æ•°æ®ï¼Œæˆ‘ä»¬ä¾ç„¶æ— æ³•åœ¨ä»–çš„å…„å¼Ÿç»„ä»¶ä¸­è·å–åˆ°è¯¥æ•°æ®ã€‚&lt;/p>
&lt;p>ä½ ä¹Ÿè®¸å·²ç»æƒ³åˆ°ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠæ•°æ®ç§»åŠ¨åˆ°çˆ¶ç»„ä»¶ï¼ˆåŒ…å«äº†ä¾§è¾¹æ ç»„ä»¶å’Œå†…å®¹ç»„ä»¶ï¼‰æ¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œä½†æ˜¯è¿™ä¼šäº§ç”Ÿè®¸å¤šæ½œåœ¨çš„é—®é¢˜å’Œç“¶é¢ˆã€‚é¦–å…ˆæˆ‘ä»¬éœ€è¦ä»çˆ¶ç»„ä»¶ä¼ é€’æ•°æ®åˆ°å­ç»„ä»¶ï¼Œå¹¶ä¸”å°†æ‰€æœ‰æ•°æ®å¤„ç†é€»è¾‘æ”¾åˆ°çˆ¶ç»„ä»¶ä¸­ï¼ˆä¾‹å¦‚åˆ é™¤é‚®ä»¶ï¼‰ã€‚&lt;/p>
&lt;p>ä½¿ç”¨ Flux æ¶æ„æœ‰åŠ©äºè§£å†³è¿™ä¸¤ä¸ªé—®é¢˜ï¼Œå®ƒæŠ½è±¡äº†å­˜å‚¨æ•°æ®å’Œæ“ä½œæ•°æ®ï¼ˆå³ actionsï¼‰çš„é€»è¾‘ï¼Œå¹¶ä¸”æä¾›äº†ç®€å•çš„æ–¹æ³•å°†æ•°æ®ä¼ é€’ç»™éœ€è¦å®ƒçš„ç»„ä»¶ï¼ˆå³ Redux ä¸­çš„ connect å‡½æ•°ï¼‰ã€‚&lt;/p>
&lt;h2 id="store-æ¶æ„-101101-æ˜¯ä»€ä¹ˆæ¢—æˆ‘è¿˜ç‰¹æ„æœäº†ä¸€ä¸‹å¥½åƒæ˜¯åˆçº§çš„æ„æ€å¤§æ¦‚å°±æ˜¯-store-æ¶æ„åˆçº§æ•™ç¨‹å§">Store æ¶æ„ 101ï¼ˆ101 æ˜¯ä»€ä¹ˆæ¢—,æˆ‘è¿˜ç‰¹æ„æœäº†ä¸€ä¸‹ï¼Œå¥½åƒæ˜¯åˆçº§çš„æ„æ€ï¼Œå¤§æ¦‚å°±æ˜¯ Store æ¶æ„åˆçº§æ•™ç¨‹å§ï¼‰&lt;/h2>
&lt;p>Store æ¶æ„æ˜¯ä¸€ä¸ªåˆçº§çš„æ¦‚å¿µï¼Œä½†æ˜¯å¦‚æœä½ ä»¥å‰ä»æœªå¬è¯´ï¼Œå®ƒå¯èƒ½å¬èµ·æ¥å¾ˆå¥‡æ€ªï¼Œä¸‹å›¾å¾ˆå¥½çš„æè¿°äº†å®ƒï¼š&lt;/p>
&lt;p>&lt;figure
>
&lt;a href="https://raw.githubusercontent.com/johnny19941216/storage-room/master/img/20190918203459.png" >
&lt;img src="https://raw.githubusercontent.com/johnny19941216/storage-room/master/img/20190918203459.png"
loading="lazy"
>
&lt;/a>
&lt;/figure>&lt;/p>
&lt;p>æˆ‘ä»¬ä¸å†å°†æ‰€æœ‰æ•°æ®ä¿å­˜åˆ°ç»„ä»¶ä¸­ï¼Œè€Œæ˜¯ä½¿ç”¨å”¯ä¸€çš„å…¨å±€ Store ä½œä¸ºæˆ‘ä»¬çš„äº‹å®ä¸Šçš„æ•°æ®æ¥æºã€‚&lt;/p>
&lt;p>å®ƒå®šä¹‰äº†æ•´ä¸ª UIï¼Œä¿å­˜äº†æ‰€æœ‰åŠ¨æ€æ•°æ®-åŒ…æ‹¬æ¥è‡ªæœåŠ¡å™¨çš„ä»¥åŠç”¨æˆ·å’Œåº”ç”¨çš„å†…éƒ¨çŠ¶æ€ï¼Œæˆ‘ä»¬åŸºäºè¿™ä¸ª store æ¥æ„å»ºæˆ‘ä»¬çš„åº”ç”¨ã€‚&lt;/p>
&lt;p>å½“ç”¨æˆ·è§¦å‘äº†ä¸€ä¸ªæ“ä½œ =ã€‹ æ¯”å¦‚åœ¨é¡µé¢ä¸Šç‚¹å‡»ä¸€ä¸ªæŒ‰é’® =ã€‹ è°ƒç”¨ Actionï¼ˆAction æ˜¯ä¸€ä¸ªç®€å•çš„å¯¹è±¡ï¼Œä»…åŒ…å«ä¸€ä¸ªè¡¨æ˜ action ç±»å‹çš„ type å±æ€§å’Œå¯é€‰çš„è¡¥å……æ•°æ®ï¼‰=ã€‹action ä¼šå‘é€åˆ° reducerï¼ˆä¸€ä¸ªå…·æœ‰å•ä¸€ä½œç”¨çš„å‡½æ•°ï¼Œå®ƒä¾æ® action å’Œæ—§çš„ state ç”Ÿæˆä¸€ä¸ªæ–°çš„ stateï¼Œæ¯”å¦‚ç”¨æˆ·ç‚¹å‡»æŒ‰é’®æ–°åˆ›å»ºäº†ä¸€å°é‚®ä»¶ï¼Œreducer å°±ä¼šæŠŠæ–°é‚®ä»¶æ·»åŠ åˆ°æ—§çš„é‚®ä»¶åˆ—è¡¨ä¸­ï¼Œç”Ÿæˆä¸€ä¸ªæ–°çš„é‚®ä»¶åˆ—è¡¨ï¼Œå½“ç„¶ï¼Œreducer è¿”å›çš„æ˜¯ä¸€ä¸ªå®Œæ•´çš„ stateï¼Œé‚®ä»¶åˆ—è¡¨åŒ…å«åœ¨å…¶ä¸­ï¼‰=ã€‹æ–°çš„ store ä¼ é€’ç»™ç»„ä»¶ =ã€‹ç»„ä»¶ç›¸åº”çš„æ›´æ–° UI&lt;/p>
&lt;h2 id="typescript--react--">TypeScript + React = â¤ï¸&lt;/h2>
&lt;p>Angular å¼€å‘è€…é»˜è®¤ä½¿ç”¨ TypeScript ä½œä¸ºå¼€å‘è¯­è¨€ã€‚React åº”ç”¨ä»ç„¶ä¸»è¦ä½¿ç”¨ javascript å¼€å‘ï¼Œä½¿ç”¨å¼ºç±»å‹è¯­è¨€å¯èƒ½ä¼šåœ¨ä¸€å¼€å§‹ä½¿å¾—å¼€å‘å˜å¾—å¤æ‚ï¼Œä½†æ˜¯å¦‚æœä½ æŒ‰ç…§è§„åˆ™ä½¿ç”¨ï¼Œåˆ™ä¼šåœ¨åç»­çš„å¼€å‘ä¸­ç»™ä½ å¸¦æ¥æå¤§çš„ä½œç”¨ã€‚æˆ‘ä»¬åœ¨æœ¬æ–‡ä¸­æ„å»º çš„åº”ç”¨ç¨‹åºä½¿ç”¨ Typescript è¿›è¡Œå¼€å‘ï¼Œä»¥è¡¨æ˜åœ¨ Typescript çš„å¸®åŠ©ä¸‹é‡æ„ Redux store æ˜¯å¤šä¹ˆå®¹æ˜“ã€‚&lt;/p>
&lt;p>å°† TypeScript ä¸ React ä¸€èµ·ä½¿ç”¨å¯ä»¥ä»å¤šæ–¹é¢è·ç›Šã€‚é™¤äº†ä½¿ç”¨ç±»å‹åŒ–è¯­è¨€çš„å¸¸è§å¥½å¤„ä¹‹å¤–ï¼ˆæ‚¨å¯ä»¥&lt;a class="link" href="https://atomicobject.com/resources/oo-programming/object-oriented-typing" target="_blank" rel="noopener"
>åœ¨æ­¤å¤„&lt;/a>é˜…è¯»æ›´å¤šç›¸å…³ä¿¡æ¯ï¼‰ï¼Œåœ¨ç¼–å†™ React é¡¹ç›®æ—¶æ‚¨å¯ä»¥è½»æ¾è¾“å…¥ Props å’Œ Stateï¼Œæ¯”å¦‚ä½ ä½¿ç”¨ä¸€ä¸ªç»„ä»¶æ—¶ï¼ŒIDE ä¼šæç¤ºè¯¥ç»„ä»¶æ‰€éœ€è¦çš„æ‰€æœ‰ propsï¼Œå¦‚æœä½ å¿˜è®°äº†æ·»åŠ ç»„ä»¶éœ€è¦çš„å¿…é¡»å±æ€§ï¼ŒTypescript ä¹Ÿä¼šæé†’ä½ ï¼ˆç¡®å®ä¼šé¿å…å¾ˆå¤šä½çº§é”™è¯¯ï¼Œå¾€å¾€è¿™ç§ä½çº§ bug æœ€ä¸ºè‡´å‘½ï¼Œæµªè´¹æå¤šçš„æ—¶é—´ï¼‰ã€‚&lt;/p>
&lt;p>ä½†æ˜¯ä¸ä»…å¦‚æ­¤ï¼Œä½¿ç”¨ Typescript æ‰©å±• Redux è¿˜æœ‰æ›´å¤šçš„å¥½å¤„ï¼Œä½ çš„ store é”®å…¥å°±æ˜¯å…¶ä¸­ä¹‹ä¸€ï¼Œä½ æ— é¡»ç‚¹å‡»è·³è½¬åˆ° Reducer æ¥æ¨æµ‹ store çš„æ•°æ®ç»“æ„ï¼Œæ­¤å¤–å½“ä½ é”®å…¥ action æˆ–è€… action ç”Ÿæˆå™¨ï¼ˆå·¥å‚æ¨¡å¼ï¼‰æ—¶ä¸ç”¨çŒœæµ‹å®ƒä»¬æ¥æ”¶ä»€ä¹ˆç±»å‹çš„å‚æ•°ã€‚&lt;/p>
&lt;p>è®©æˆ‘ä»¬æ¥å†™ä¸ªç¤ºä¾‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-js" data-lang="js">&lt;span class="kd">function&lt;/span> &lt;span class="nx">searchAction&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">options&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="k">return&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="nx">type&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="err">â€˜&lt;/span>&lt;span class="nx">SEARCH&lt;/span>&lt;span class="err">â€™&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="p">...&lt;/span>&lt;span class="nx">options&lt;/span>
&lt;span class="p">};&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>è¿™æ˜¯ä¸€ä¸ªç®€å•çš„ action ç”Ÿæˆå™¨ï¼Œå®ƒæ¥æ”¶ options å‚æ•°ç”Ÿæˆä¸€ä¸ª type ä¸º SEARCH çš„æ–° actionï¼Œä½ èƒ½å‘Šè¯‰æˆ‘å®ƒåˆ°åº•è¦æ¥æ”¶ä¸€ä¸ªä»€ä¹ˆæ ·çš„ options å—ï¼Ÿ&lt;/p>
&lt;p>æ²¡æœ‰ä»»ä½•æç¤ºæˆ‘ä»¬åˆ°åº•è¦ä¼ é€’ä»€ä¹ˆå‚æ•°ç»™å®ƒï¼Œä½ å¯èƒ½ä¼šæ‰¾éæ•´ä¸ªé¡¹ç›®æ¥ææ˜ç™½ options å¯¹è±¡åˆ°åº•æ˜¯ä¸ªä»€ä¹ˆï¼Œä½†æ˜¯å¾ˆæœ‰å¯èƒ½ä½ æ‰¾éæ•´ä¸ªé¡¹ç›®è¿˜æ˜¯ä¸çŸ¥é“åˆ°åº•è¦ä¼ ä»€ä¹ˆå‚æ•°ï¼ï¼ˆæ·±æœ‰ä½“ä¼šï¼Œæœ‰æ—¶å€™ç”šè‡³éœ€è¦æ‰“å¼€å¼€å‘è€…å·¥å…·æŸ¥çœ‹æ¥å£åˆ°åº•è¿”å›äº†ä»€ä¹ˆï¼Œç„¶åå†å»æ¨å¯¼æ•°æ®ç»“æ„ï¼‰&lt;/p>
&lt;p>ä¸‹é¢æ˜¯é‡å†™ä¸º Typescript çš„ç‰ˆæœ¬ï¼Œä¸€çœ¼çœ‹å»å¯èƒ½ä¼šè§‰å¾—æœ‰ç‚¹å¤æ‚ï¼Œä½†æ˜¯é™„åŠ çš„ interface æ¸…é™¤äº†æ‰€æœ‰æ··ä¹±ï¼Œä½¿ç”¨æ­¤ä»£ç ï¼Œä½ å¯ä»¥æ¸…æ™°çš„çœ‹åˆ°è¯¥å‡½æ•°éœ€è¦å”¯ä¸€çš„ä¸€ä¸ªåŒ…å«æœ‰å¿…è¦å±æ€§ text å’Œå¯é€‰å±æ€§ tagsï¼ˆç”±æ•°å­—æ„æˆçš„æ•°ç»„ï¼‰çš„å¯¹è±¡ã€‚&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-typescript" data-lang="typescript">&lt;span class="kr">interface&lt;/span> &lt;span class="nx">SearchActionOptions&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="nx">text&lt;/span>: &lt;span class="kt">string&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="nx">tags?&lt;/span>: &lt;span class="kt">number&lt;/span>&lt;span class="p">[];&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="kr">interface&lt;/span> &lt;span class="nx">ISearchAction&lt;/span> &lt;span class="kr">extends&lt;/span> &lt;span class="nx">SearchActionOptions&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="kr">type&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="kt">string&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="kd">function&lt;/span> &lt;span class="nx">searchAction&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">options&lt;/span>: &lt;span class="kt">SearchActionOptions&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="nx">ISearchAction&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="k">return&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="kr">type&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s2">&amp;#34;SEARCH&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="p">...&lt;/span>&lt;span class="nx">options&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="p">};&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>å¦‚æœæˆ‘ä»¬ä¸æ­£ç¡®çš„ä½¿ç”¨å®ƒï¼Œç¼–è¾‘å™¨ä¼šç»™å‡ºç›¸å…³æç¤ºï¼&lt;/p>
&lt;p>&lt;figure
>
&lt;a href="https://raw.githubusercontent.com/johnny19941216/storage-room/master/img/20190918203523.png" >
&lt;img src="https://raw.githubusercontent.com/johnny19941216/storage-room/master/img/20190918203523.png"
loading="lazy"
>
&lt;/a>
&lt;/figure>&lt;/p>
&lt;p>æˆªå›¾æ¥è‡ªäº VisualStudio Code&lt;/p>
&lt;h2 id="è®°äº‹æœ¬-app">è®°äº‹æœ¬ APP&lt;/h2>
&lt;p>æœ¬æ–‡ä¼šåˆ›å»ºä¸€ä¸ªç®€å•çš„è®°äº‹æœ¬ APPï¼Œä½ å¯ä»¥åœ¨&lt;a class="link" href="https://github.com/SwingDev/microconf-workshops" target="_blank" rel="noopener"
>GitHub&lt;/a>æ‰¾åˆ°è¿™ä¸ªä»“åº“ï¼Œå¦‚æœä½ æƒ³åœ¨å·²æœ‰ä»£ç çš„åŸºç¡€ä¸Šç¼–å†™ï¼Œä½ å¯ä»¥ä» master åˆ†æ”¯æ£€å‡ºä»£ç ã€‚&lt;/p>
&lt;p>åœ¨ä»“åº“é‡Œä½ å¯ä»¥æ‰¾åˆ°å·²é…ç½®çš„ React + TypeScript é¡¹ç›®ï¼Œå…¶ä¸­å®ç°äº†æ‰€æœ‰ç»„ä»¶å¹¶å®šä¹‰äº†æ‰€æœ‰åŸºæœ¬ actionï¼Œè™½ç„¶ç¼ºå°‘äº† storeã€‚&lt;/p>
&lt;p>åœ¨è¿™ä¸ªåº”ç”¨ä¸­æˆ‘ä»¬æœ‰ä¸‰ä¸ª actionï¼š&lt;/p>
&lt;ul>
&lt;li>&lt;em>NOTES_FETCH&lt;/em> åº”ç”¨å¼€å§‹è·å–æ•°æ®æ—¶è°ƒç”¨&lt;/li>
&lt;li>&lt;em>NOTES_FETCH_SUCCESS&lt;/em> åº”ç”¨è·å–æ•°æ®æˆåŠŸæ—¶è°ƒç”¨&lt;/li>
&lt;li>&lt;em>NOTES_FETCH_ERROR&lt;/em> åº”ç”¨è·å–æ•°æ®å‡ºé”™æ—¶è°ƒç”¨&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-typescript" data-lang="typescript">&lt;span class="kr">export&lt;/span> &lt;span class="kr">interface&lt;/span> &lt;span class="nx">IActionNotesFetch&lt;/span> &lt;span class="kr">extends&lt;/span> &lt;span class="nx">Action&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="kr">type&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s2">&amp;#34;NOTES_FETCH&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="kr">export&lt;/span> &lt;span class="kr">interface&lt;/span> &lt;span class="nx">IActionNotesFetchSuccess&lt;/span> &lt;span class="kr">extends&lt;/span> &lt;span class="nx">Action&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="kr">type&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s2">&amp;#34;NOTES_FETCH_SUCCESS&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="nx">notes&lt;/span>: &lt;span class="kt">NoteModel&lt;/span>&lt;span class="p">[];&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="kr">export&lt;/span> &lt;span class="kr">interface&lt;/span> &lt;span class="nx">IActionNotesFetchError&lt;/span> &lt;span class="kr">extends&lt;/span> &lt;span class="nx">Action&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="kr">type&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s2">&amp;#34;NOTES_FETCH_ERROR&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="nx">errorMessage&lt;/span>: &lt;span class="kt">string&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="kr">export&lt;/span> &lt;span class="kr">type&lt;/span> &lt;span class="nx">AppActions&lt;/span> &lt;span class="o">=&lt;/span>
&lt;span class="o">|&lt;/span> &lt;span class="nx">IActionNotesFetch&lt;/span>
&lt;span class="o">|&lt;/span> &lt;span class="nx">IActionNotesFetchSuccess&lt;/span>
&lt;span class="o">|&lt;/span> &lt;span class="nx">IActionNotesFetchError&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>æˆ‘ä»¬åº”è¯¥å¦‚ä½•æ„é€  store ä»¥æ–¹ä¾¿å‘ç”¨æˆ·å±•ç¤ºæ•°æ®ï¼Ÿ&lt;/p>
&lt;h2 id="å¸¸è§ä¸æ¨èæ–¹æ³•">å¸¸è§ï¼ˆä¸æ¨èï¼‰æ–¹æ³•&lt;/h2>
&lt;p>æœ€åŸºæœ¬çš„ store æ„é€ å¯èƒ½å¦‚ä¸‹æ‰€ç¤ºï¼š&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-typescript" data-lang="typescript">&lt;span class="kr">export&lt;/span> &lt;span class="kr">interface&lt;/span> &lt;span class="nx">NotesListState&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="nx">state&lt;/span>: &lt;span class="kt">string&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="c1">// &amp;#39;INIT&amp;#39;, &amp;#39;LOADING&amp;#39; | &amp;#39;LOADED&amp;#39; | &amp;#39;ERROR&amp;#39;,
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="nx">notes&lt;/span>: &lt;span class="kt">NoteModel&lt;/span>&lt;span class="p">[];&lt;/span>
&lt;span class="nx">errorMessage?&lt;/span>: &lt;span class="kt">string&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>æˆ‘ä»¬å­˜å‚¨è¿™ä¸ªåˆ—è¡¨çš„å½“å‰çŠ¶æ€ï¼š&lt;/p>
&lt;ul>
&lt;li>åˆå§‹çŠ¶æ€ - å‘æœåŠ¡å™¨å‘é€è¯·æ±‚ä¹‹å‰&lt;/li>
&lt;li>åŠ è½½ä¸­ - ç­‰å¾…æœåŠ¡å™¨è¿”å›&lt;/li>
&lt;li>åŠ è½½å®Œæ¯• - å·²ç»è·å–æ•°æ®åˆ°æœ¬åœ°&lt;/li>
&lt;li>é”™è¯¯ - æ— æ³•è¿æ¥æˆ–è€…æœåŠ¡å™¨é”™è¯¯&lt;/li>
&lt;/ul>
&lt;p>åœ¨æ­¤æ¶æ„ä¸­å¯¹åº”çš„ reducer å¯èƒ½å¦‚ä¸‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-typescript" data-lang="typescript">&lt;span class="kr">export&lt;/span> &lt;span class="kd">function&lt;/span> &lt;span class="nx">notesListReducer&lt;/span>&lt;span class="p">(&lt;/span>
&lt;span class="nx">state&lt;/span>: &lt;span class="kt">NotesListState&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="nx">action&lt;/span>: &lt;span class="kt">AppActions&lt;/span>
&lt;span class="p">)&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="nx">NotesListState&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">action&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="kr">type&lt;/span> &lt;span class="o">===&lt;/span> &lt;span class="s2">&amp;#34;NOTES_FETCH&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="k">return&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="p">...&lt;/span>&lt;span class="nx">state&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="nx">state&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s2">&amp;#34;LOADING&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="nx">notes&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="p">[],&lt;/span>
&lt;span class="p">};&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">action&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="kr">type&lt;/span> &lt;span class="o">===&lt;/span> &lt;span class="s2">&amp;#34;NOTES_FETCH_SUCCESS&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="k">return&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="p">...&lt;/span>&lt;span class="nx">state&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="nx">state&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s2">&amp;#34;LOADED&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="nx">notes&lt;/span>: &lt;span class="kt">action.notes&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="p">};&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">action&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="kr">type&lt;/span> &lt;span class="o">===&lt;/span> &lt;span class="s2">&amp;#34;NOTES_FETCH_ERROR&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="k">return&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="p">...&lt;/span>&lt;span class="nx">state&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="nx">state&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s2">&amp;#34;ERROR&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="nx">notes&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="p">[],&lt;/span>
&lt;span class="nx">errorMessage&lt;/span>: &lt;span class="kt">action.errorMessage&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="p">};&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="k">return&lt;/span> &lt;span class="nx">state&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>è¿™æ˜¯ä¸€ä¸ªç®€å•çš„å‡½æ•°ï¼Œåªæœ‰ä¸‰ä¸ªæ¡ä»¶è¯­å¥ï¼Œåˆ†åˆ«å¯¹æ¯ä¸ª action åšå‡ºååº”ã€‚&lt;/p>
&lt;p>æ¥ä¸‹æ¥å”¯ä¸€è¦åšçš„å°±æ˜¯æŠŠ store ä¸ React ç»„ä»¶è¿æ¥èµ·æ¥ï¼ŒRedux æœ‰ä¸€ä¸ªå‡½æ•° connect å¯ä»¥å¾ˆæ–¹ä¾¿çš„å¸®æˆ‘ä»¬å®ç°è¿™ä¸ªåŠŸèƒ½ï¼Œå®ƒæ¥æ”¶ä¸¤ä¸ªå›è°ƒå‡½æ•°ï¼Œç¬¬ä¸€ä¸ªå°†æˆ‘ä»¬çš„å…¨å±€ state è½¬æ¢ä¸ºç»„ä»¶çš„ propsï¼Œç¬¬äºŒä¸ªå›è°ƒå‡½æ•°å®šä¹‰ç»„ä»¶å¯ç”¨çš„ actionsï¼Œæˆ‘ä»¬æŠŠç¬¬ä¸€ä¸ªå‡½æ•°æ›´æ–°ä¸ºä»¥ä¸‹å½¢å¼ï¼š&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-typescript" data-lang="typescript">&lt;span class="kr">const&lt;/span> &lt;span class="nx">mapStateToProps&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">state&lt;/span>: &lt;span class="kt">AppState&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">ownProps&lt;/span>: &lt;span class="kt">HomeViewProps&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">=&amp;gt;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="k">return&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="nx">notes&lt;/span>: &lt;span class="kt">state.list.notes&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="nx">state&lt;/span>: &lt;span class="kt">state.list.state&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="nx">errorMessage&lt;/span>: &lt;span class="kt">state.list.errorMessage&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="p">};&lt;/span>
&lt;span class="p">};&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>ä½ å¯ä»¥åœ¨ github ä»“åº“ä¸­çš„&lt;em>sprint1-finish&lt;/em> tag ä¸‹æ‰¾åˆ°å¯ç”¨çš„ç‰ˆæœ¬ã€‚&lt;/p>
&lt;h2 id="é—®ä¸ç­”">é—®ä¸ç­”&lt;/h2>
&lt;p>è¿™ä¸ªç‰ˆæœ¬å¯ä»¥æˆåŠŸçš„åŠ è½½å’Œæ˜¾ç¤ºç¬”è®°ï¼ˆnotesï¼‰ã€‚ä½†æ˜¯è®©æˆ‘ä»¬æ€è€ƒä¸€ä¸‹ï¼ŒåŠ å…¥æˆ‘ä»¬éœ€è¦æ·»åŠ çš„ä¸‹ä¸€ä¸ªåŠŸèƒ½æ˜¯-æœç´¢ã€‚ç”±äºæˆ‘ä»¬çš„ store æ˜¯ä¸€ä¸ªå…¨å±€å•ä¸€æ•°æ®æºï¼Œæ‰€ä»¥å½“æˆ‘ä»¬è¿‡æ»¤æ‰æŸäº› note æ—¶ï¼Œå®ƒå°±ä¼šä»æˆ‘ä»¬çš„ store ç§»é™¤ï¼Œè¿™æ„å‘³ç€åœ¨æ¯æ¬¡ç”¨æˆ·æœç´¢æ—¶ï¼Œæˆ‘ä»¬éƒ½éœ€è¦ä»æœåŠ¡å™¨åŠ è½½æ•°æ®ï¼Œä»¥ä¾¿å‘ç”¨æˆ·å±•ç¤ºæ•°æ®ã€‚&lt;/p>
&lt;p>ä½†æ˜¯å¦‚æœæˆ‘ä»¬æƒ³è¦å±•ç¤ºå¦ä¸€ä¸ªå…·æœ‰ç›¸åŒæ•°æ®çš„åˆ—è¡¨ï¼Œé‚£ä¹ˆåŠ¿å¿…ä¼šæœ‰ä¸€äº›ç›¸åŒçš„æ¡ç›®åŒæ—¶å‡ºç°åœ¨ä¸¤ä¸ªåˆ—è¡¨ä¸­ï¼Œè¿™ä¼šäº§ç”Ÿä¸å¿…è¦çš„å†—ä½™ï¼Œå¦‚æœå®é™…çš„å†…å®¹å’Œç¬¬äºŒä¸ªåˆ—è¡¨çš„æ¡ç›®ä¸åŒï¼Œåˆä¼šäº§ç”Ÿæ­§ä¹‰ã€‚&lt;/p>
&lt;p>ä¸è¿‡ï¼Œæˆ‘ä»¬æœ‰ä¸€ä¸ªå«åš store è§„èŒƒåŒ–çš„æ–¹æ¡ˆå¯ä»¥å°†æˆ‘ä»¬çš„ React/Redux åº”ç”¨æå‡åˆ°ä¸€ä¸ªæ–°çš„æ°´å¹³ã€‚&lt;/p>
&lt;h2 id="store-è§„èŒƒåŒ–">store è§„èŒƒåŒ–&lt;/h2>
&lt;p>è¦ä½¿ç”¨è§„èŒƒåŒ–ï¼Œæˆ‘ä»¬éœ€è¦é‡æ–°æ„æ€ storeï¼Œåœ¨è¿™é‡Œæˆ‘ä»¬å°†å®ƒåˆ†ä¸ºä¸¤ç±»ï¼š&lt;/p>
&lt;ul>
&lt;li>ç¬¬ä¸€ä¸ªæ˜¯æˆ‘ä»¬å¯ä»¥è§†ä¸ºå‰ç«¯æ•°æ®åº“çš„æ•°æ® storeï¼Œå®ƒä¿å­˜ç€å¯ç”¨å®ä½“çš„ç›¸å…³ä¿¡æ¯ã€‚è¯¥ store å¿…é¡»ç‹¬ç«‹äºç”¨æˆ·æ­£åœ¨ä¸ä¹‹äº¤äº’çš„å®é™…è§†å›¾ã€‚&lt;/li>
&lt;li>ç¬¬äºŒä¸ªæ˜¯æˆ‘ä»¬çš„ UI storeï¼Œè¿™é‡ŒåŒ…å«æœ‰æ‰€æœ‰æœ‰å…³ç”¨æˆ· UI çŠ¶æ€çš„ä¿¡æ¯ï¼Œä½†æ˜¯æˆ‘çš„æ„æ€ä¸æ˜¯åœ¨ UI store å¦å¤–ä¿å­˜ä¸€ä»½å®ä½“æ•°æ®ï¼Œè€Œæ˜¯ä¿å­˜æ¡ç›®çš„ idã€‚&lt;/li>
&lt;/ul>
&lt;p>&lt;a class="link" href="https://redux.js.org/recipes/structuringreducers/normalizingstateshape" target="_blank" rel="noopener"
>Redux æœ¬èº«æ¨èçš„ç»“æ„&lt;/a>å¦‚ä¸‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-typescript" data-lang="typescript">&lt;span class="p">{&lt;/span>
&lt;span class="nx">entities&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="nx">notes&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="nx">byId&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="mi">1&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="nx">id&lt;/span>: &lt;span class="kt">1&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="nx">title&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s1">&amp;#39;First Note&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="nx">description&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s1">&amp;#39;Lorem Ipsum&amp;#39;&lt;/span>
&lt;span class="p">},&lt;/span>
&lt;span class="mi">3&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="nx">id&lt;/span>: &lt;span class="kt">3&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="nx">title&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s1">&amp;#39;Another Note&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="nx">description&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s1">&amp;#39;Dolor Sit Amet&amp;#39;&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="p">},&lt;/span>
&lt;span class="nx">allIds&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="p">]&lt;/span>
&lt;span class="p">},&lt;/span>
&lt;span class="p">},&lt;/span>
&lt;span class="nx">ui&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="nx">dashboardList&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="nx">state&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s1">&amp;#39;LOADED&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="nx">notes&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="p">]&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>æˆ‘ä»¬ä¸»è¦çš„ store åˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼šentities å’Œ uiï¼Œui å±æ€§ä¸‹çš„æ•°æ®ç»“æ„ç”±å¼€å‘è€…å†³å®šï¼Œä½†æ˜¯æœ€é‡è¦çš„æ˜¯æˆ‘ä»¬æ²¡æœ‰ä¿å­˜çœŸæ­£çš„ç¬”è®°æ•°æ®ï¼Œè€Œæ˜¯ä¿å­˜ç¬”è®°çš„ idã€‚&lt;/p>
&lt;p>æ•°æ®å­˜å‚¨æ›´åŠ ç»“æ„åŒ–ã€‚å¯¹äºæ¯ä¸ªå®ä½“ç±»å‹ï¼Œæˆ‘ä»¬ä¿æŒå¯¹è±¡åŒ…å«ä¸¤ä¸ªå±æ€§ï¼š&lt;/p>
&lt;ul>
&lt;li>byId:å°†å®ä½“çš„ id æ˜ å°„åˆ°å…¶å†…å®¹çš„å¯¹è±¡&lt;/li>
&lt;li>allIds æ˜¯æˆ‘ä»¬å½“å‰å•†åº—ä¸­æ‰€æœ‰ ID çš„æ•°ç»„&lt;/li>
&lt;/ul>
&lt;p>å¦‚æœä½ æƒ³äº†è§£æœ‰å…³ store è§„èŒƒåŒ–çš„æ›´å¤šä¿¡æ¯ï¼Œå»ºè®®å‚è€ƒ&lt;a class="link" href="https://hackernoon.com/shape-your-redux-store-like-your-database-98faa4754fd5" target="_blank" rel="noopener"
>Using the Redux Store Like a Database by Nick Sweeting&lt;/a> å’Œåœ¨ StackOverflow ä¸Šçš„è®¨è®º &lt;a class="link" href="https://stackoverflow.com/questions/38222312/redux-why-normalize" target="_blank" rel="noopener"
>Redux - Why normalize?&lt;/a>&lt;/p>
&lt;h2 id="æ”¹è‰¯ç‰ˆ">æ”¹è‰¯ç‰ˆ&lt;/h2>
&lt;p>è®©æˆ‘ä»¬ä½¿ç”¨è§„èŒƒåŒ–é‡å†™ä¸€ä¸‹ï¼Œé¦–å…ˆæˆ‘ä»¬éœ€è¦å°† reducer è½¬æ¢ä¸º UI storeï¼Œç„¶åä½¿ç”¨.map å‡½æ•°å°†ç¬”è®°æ˜ å°„åˆ° ID å±æ€§ä¸‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-typescript" data-lang="typescript">&lt;span class="kr">export&lt;/span> &lt;span class="kd">function&lt;/span> &lt;span class="nx">notesListReducer&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">state&lt;/span>: &lt;span class="kt">NotesListState&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">action&lt;/span>: &lt;span class="kt">AppActions&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="nx">NotesListState&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">action&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="kr">type&lt;/span> &lt;span class="o">===&lt;/span> &lt;span class="s1">&amp;#39;NOTES_FETCH&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="k">return&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="p">...&lt;/span>&lt;span class="nx">state&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="nx">state&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s1">&amp;#39;LOADING&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="nx">notes&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="p">[],&lt;/span>
&lt;span class="p">};&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">action&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="kr">type&lt;/span> &lt;span class="o">===&lt;/span> &lt;span class="s1">&amp;#39;NOTES_FETCH_SUCCESS&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="k">return&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="p">...&lt;/span>&lt;span class="nx">state&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="nx">state&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s1">&amp;#39;LOADED&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="nx">notes&lt;/span>: &lt;span class="kt">action.notes&lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">map&lt;/span>&lt;span class="p">((&lt;/span>&lt;span class="nx">n&lt;/span>: &lt;span class="kt">NoteModel&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">=&amp;gt;&lt;/span> &lt;span class="nx">n&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">id&lt;/span>&lt;span class="o">**&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="p">};&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">action&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="kr">type&lt;/span> &lt;span class="o">===&lt;/span> &lt;span class="s1">&amp;#39;NOTES_FETCH_ERROR&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="k">return&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="p">...&lt;/span>&lt;span class="nx">state&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="nx">state&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s1">&amp;#39;ERROR&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="nx">notes&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="p">[],&lt;/span>
&lt;span class="nx">errorMessage&lt;/span>: &lt;span class="kt">action.errorMessage&lt;/span>
&lt;span class="p">};&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="k">return&lt;/span> &lt;span class="nx">state&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>æ¥ä¸‹æ¥æˆ‘ä»¬éœ€è¦ä¸ºæ•°æ® store å®šä¹‰ typeï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼å®ç°ï¼š&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-typescript" data-lang="typescript">&lt;span class="kr">export&lt;/span> &lt;span class="kr">type&lt;/span> &lt;span class="nx">NotesDict&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="p">[&lt;/span>&lt;span class="nx">Key&lt;/span>: &lt;span class="kt">number&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="nx">NoteModel&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="p">};&lt;/span>
&lt;span class="kr">export&lt;/span> &lt;span class="kr">type&lt;/span> &lt;span class="nx">NotesDictState&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="nx">byId&lt;/span>: &lt;span class="kt">NotesDict&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="nx">allIds&lt;/span>: &lt;span class="kt">number&lt;/span>&lt;span class="p">[];&lt;/span>
&lt;span class="p">};&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>ç¬¬ä¸€ä¸ª interface æ˜¯ç”¨ Typescript çš„æ–¹å¼å£°æ˜ç‰¹å®šå½¢å¼çš„å¯¹è±¡ï¼Œåœ¨è¿™é‡Œæˆ‘ä»¬å®šä¹‰ ById ä¸ºä¸€ä¸ªå¯¹è±¡ï¼Œä»¥æ•°å­— id ä½œä¸ºé”®ï¼ŒNoteModel ä½œä¸ºå±æ€§ã€‚&lt;/p>
&lt;p>ç°åœ¨æˆ‘ä»¬é‡æ–°ç¼–å†™ä¸€ä¸ª reducer æ›´æ–° storeï¼š&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-typescript" data-lang="typescript">&lt;span class="kr">export&lt;/span> &lt;span class="kd">function&lt;/span> &lt;span class="nx">notesDictReducer&lt;/span>&lt;span class="p">(&lt;/span>
&lt;span class="nx">state&lt;/span>: &lt;span class="kt">NotesDictState&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="nx">action&lt;/span>: &lt;span class="kt">AppActions&lt;/span>
&lt;span class="p">)&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="nx">NotesDictState&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">action&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="kr">type&lt;/span> &lt;span class="o">===&lt;/span> &lt;span class="s2">&amp;#34;NOTES_FETCH_SUCCESS&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="k">return&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="nx">byId&lt;/span>: &lt;span class="kt">action.notes.reduce&lt;/span>&lt;span class="p">(&lt;/span>
&lt;span class="p">(&lt;/span>&lt;span class="nx">acc&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">note&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">=&amp;gt;&lt;/span> &lt;span class="p">({&lt;/span> &lt;span class="p">...&lt;/span>&lt;span class="nx">acc&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="nx">note&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">id&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="nx">note&lt;/span> &lt;span class="p">}),&lt;/span>
&lt;span class="nx">state&lt;/span>
&lt;span class="p">),&lt;/span>
&lt;span class="nx">allIds&lt;/span>: &lt;span class="kt">action.notes.map&lt;/span>&lt;span class="p">((&lt;/span>&lt;span class="nx">n&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">=&amp;gt;&lt;/span> &lt;span class="nx">n&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">id&lt;/span>&lt;span class="p">),&lt;/span>
&lt;span class="p">};&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="k">return&lt;/span> &lt;span class="nx">state&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>æˆ‘ä»¬åªå¯¹&lt;em>NOTES_FETCH_SUCCESS&lt;/em>è¿™ä¸ª action åšå‡ºååº”ï¼Œå› ä¸ºè¿™æ˜¯æä¾›æ–°æ•°æ®çš„å”¯ä¸€æ“ä½œï¼Œç„¶åæˆ‘ä»¬æ„å»ºä»¥ id ä½œä¸ºé”®çš„å¯¹è±¡å’ŒåŒ…å«æ‰€æœ‰ id çš„æ•°ç»„ã€‚&lt;/p>
&lt;p>ç°åœ¨æˆ‘ä»¬éœ€è¦åˆå¹¶æ‰€æœ‰çš„ reducer å¹¶ä¸”åˆ›å»ºä¸€ä¸ª main store æ¥ä¿å­˜è¿™äº›æ•°æ®ï¼š&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-typescript" data-lang="typescript">&lt;span class="kr">export&lt;/span> &lt;span class="kd">function&lt;/span> &lt;span class="nx">mainReducer&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">state&lt;/span>: &lt;span class="kt">AppState&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">defaultState&lt;/span>&lt;span class="p">(),&lt;/span> &lt;span class="nx">action&lt;/span>: &lt;span class="kt">Action&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="k">return&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="nx">entities&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="nx">notes&lt;/span>: &lt;span class="kt">notesDictReducer&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">state&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">entities&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">notes&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">action&lt;/span>&lt;span class="p">),&lt;/span>
&lt;span class="p">},&lt;/span>
&lt;span class="nx">ui&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="nx">list&lt;/span>: &lt;span class="kt">notesListReducer&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">state&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">ui&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">list&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">action&lt;/span>&lt;span class="p">),&lt;/span>
&lt;span class="p">},&lt;/span>
&lt;span class="p">};&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>åœ¨å®é™…é¡¹ç›®ä¸­ä½ å¯èƒ½ä¼šä½¿ç”¨&lt;em>combineReducers&lt;/em>æ¥ç®€åŒ–ä»£ç ã€‚&lt;/p>
&lt;p>æ¥ä¸‹æ¥å”¯ä¸€è¦åšçš„äº‹å°±æ˜¯æ›´æ–°æˆ‘ä»¬çš„è¿æ¥å™¨ï¼ˆconnectorï¼‰ï¼Œç°åœ¨æˆ‘ä»¬çš„ UI ç¬”è®°åˆ—è¡¨åªåŒ…å« idï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦å°†å®ƒæ˜ å°„åˆ°å®é™…çš„ç¬”è®°å¯¹è±¡ï¼š&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-typescript" data-lang="typescript">&lt;span class="kr">const&lt;/span> &lt;span class="nx">mapStateToProps&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">state&lt;/span>: &lt;span class="kt">AppState&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">ownProps&lt;/span>: &lt;span class="kt">HomeViewProps&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">=&amp;gt;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="k">return&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="nx">notes&lt;/span>: &lt;span class="kt">state.ui.list.notes.map&lt;/span>&lt;span class="p">(&lt;/span>
&lt;span class="p">(&lt;/span>&lt;span class="nx">noteId&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">=&amp;gt;&lt;/span> &lt;span class="nx">state&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">entities&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">notes&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">byId&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="nx">noteId&lt;/span>&lt;span class="p">]&lt;/span>
&lt;span class="p">),&lt;/span>
&lt;span class="nx">state&lt;/span>: &lt;span class="kt">state.ui.list.state&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="nx">errorMessage&lt;/span>: &lt;span class="kt">state.ui.list.errorMessage&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="p">};&lt;/span>
&lt;span class="p">};&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="æ·»åŠ æœç´¢">æ·»åŠ æœç´¢&lt;/h2>
&lt;p>ä½¿ç”¨æ–°æ¶æ„æ·»åŠ æœç´¢å®Œå…¨ä¸æ˜¯é—®é¢˜ï¼Œé¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦åˆ›å»ºä¸€ä¸ªæ–°çš„ action interfaceï¼Œçœ‹èµ·æ¥åƒä¸‹é¢è¿™æ ·ï¼š&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-typescript" data-lang="typescript">&lt;span class="kr">export&lt;/span> &lt;span class="kr">interface&lt;/span> &lt;span class="nx">IActionSearchNotes&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="kr">type&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s2">&amp;#34;NOTES_SEARCH&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="nx">options&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="nx">searchText&lt;/span>: &lt;span class="kt">string&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="p">};&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>æ¥ä¸‹é‡Œæˆ‘ä»¬éœ€è¦æ›´æ–° UI reducerï¼š&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-typescript" data-lang="typescript">&lt;span class="kr">export&lt;/span> &lt;span class="kd">function&lt;/span> &lt;span class="nx">notesListReducer&lt;/span>&lt;span class="p">(&lt;/span>
&lt;span class="nx">state&lt;/span>: &lt;span class="kt">NotesListState&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="nx">action&lt;/span>: &lt;span class="kt">AppActions&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="nx">notes&lt;/span>: &lt;span class="kt">NotesDictState&lt;/span>
&lt;span class="p">)&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="nx">NotesListState&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="cm">/* all other reducers */&lt;/span>
&lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">action&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="kr">type&lt;/span> &lt;span class="o">===&lt;/span> &lt;span class="s2">&amp;#34;NOTES_SEARCH&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="k">return&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="p">...&lt;/span>&lt;span class="nx">state&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="nx">notes&lt;/span>: &lt;span class="kt">notes.allIds&lt;/span>
&lt;span class="p">.&lt;/span>&lt;span class="nx">map&lt;/span>&lt;span class="p">((&lt;/span>&lt;span class="nx">id&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">=&amp;gt;&lt;/span> &lt;span class="nx">notes&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">byId&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="nx">id&lt;/span>&lt;span class="p">])&lt;/span>
&lt;span class="p">.&lt;/span>&lt;span class="nx">filter&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">filterByText&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">action&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">options&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">searchText&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">toLowerCase&lt;/span>&lt;span class="p">()))&lt;/span>
&lt;span class="p">.&lt;/span>&lt;span class="nx">map&lt;/span>&lt;span class="p">((&lt;/span>&lt;span class="nx">n&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">=&amp;gt;&lt;/span> &lt;span class="nx">n&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">id&lt;/span>&lt;span class="p">),&lt;/span>
&lt;span class="p">};&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="k">return&lt;/span> &lt;span class="nx">state&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>è¯·æ³¨æ„ï¼Œæˆ‘ä»¬éœ€è¦å°†æ•°æ® store ä¼ é€’åˆ° reducer ä¸­ï¼Œä»¥ä¾¿èƒ½å¤Ÿéå†æ‰€æœ‰å…ƒç´ å¹¶ä»…è¿‡æ»¤å‡ºä¸æœç´¢å­—ç¬¦åŒ¹é…çš„ç»“æœï¼Œä½ å¯ä»¥é€šè¿‡å„ç§æ–¹å¼å®ç° filterByText å‡½æ•°ï¼Œä¸‹é¢æ˜¯å…¶ä¸­ä¸€ç§å®ç°æ–¹å¼ï¼š&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-typescript" data-lang="typescript">&lt;span class="kd">function&lt;/span> &lt;span class="nx">filterByText&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">text&lt;/span>: &lt;span class="kt">string&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">n&lt;/span>: &lt;span class="kt">NoteModel&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">=&amp;gt;&lt;/span> &lt;span class="kr">boolean&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="k">return&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">note&lt;/span>: &lt;span class="kt">NoteModel&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="kr">boolean&lt;/span> &lt;span class="o">=&amp;gt;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="k">return&lt;/span> &lt;span class="p">(&lt;/span>
&lt;span class="nx">note&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">title&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">toLowerCase&lt;/span>&lt;span class="p">().&lt;/span>&lt;span class="nx">indexOf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">text&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">&amp;gt;&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="o">||&lt;/span>
&lt;span class="nx">note&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">content&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">toLowerCase&lt;/span>&lt;span class="p">().&lt;/span>&lt;span class="nx">indexOf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">text&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">&amp;gt;&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="mi">1&lt;/span>
&lt;span class="p">);&lt;/span>
&lt;span class="p">};&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>è¯¥å‡½æ•°æ£€æŸ¥äº†ç¬”è®°çš„æ ‡é¢˜æˆ–è€…å†…å®¹æ˜¯å¦èƒ½å¤Ÿä¸æœç´¢åŒ¹é…ã€‚&lt;/p>
&lt;p>å¥½äº†ï¼Œå°±æ˜¯è¿™ä¹ˆå¤šäº†ï¼Œæˆ‘ä»¬å·²ç»å®ç°äº†æœç´¢ï¼Œè¯·æ³¨æ„æˆ‘ä»¬äº‹å®ä¸Šå¹¶æ²¡æœ‰è§¦åŠè¿æ¥å™¨ï¼ˆconnectorï¼‰ï¼Œå› ä¸ºæˆ‘ä»¬çš„ store å·²ç»è§„èŒƒåŒ–ï¼Œæ‰€ä»¥æ— éœ€æ›´æ–°è§†å›¾ã€‚æ·»åŠ æ›´å¤šçš„æœç´¢åŠŸèƒ½æˆ–è€…æ’åºåŠŸèƒ½ä¹Ÿä¸éœ€è¦æœ‰å¤ªå¤šçš„æ›´æ”¹ã€‚å¦‚æœæˆ‘ä»¬éœ€è¦æ·»åŠ åˆ·æ–°åŠŸèƒ½ä¸åå°ä¿æŒåŒæ­¥ï¼Œæˆ‘ä»¬åº”ç”¨ä¸­çš„æ‰€æœ‰å®ä¾‹å°†è‡ªåŠ¨æ›´æ–°ã€‚&lt;/p>
&lt;h2 id="æ‘˜è¦">æ‘˜è¦&lt;/h2>
&lt;p>æˆ‘å¸Œæœ›æœ¬æ–‡èƒ½å¤Ÿè®©æ‚¨åŸºæœ¬äº†è§£ Redux store è§„èŒƒåŒ–çš„å·¥ä½œåŸç†ä»¥åŠå¦‚ä½•ä½¿ç”¨å®ƒæ¥æ”¹è¿›é¡¹ç›®ã€‚å¦‚æœæ‚¨æƒ³é€šè¿‡æ­¤ç¤ºä¾‹è¿›è¡Œæ›´å¤šæ“ä½œï¼Œæˆ‘å»ºè®®æ‚¨æ‰§è¡Œä»¥ä¸‹ä¸€é¡¹æˆ–æ‰€æœ‰ç»ƒä¹ ï¼š&lt;/p>
&lt;ul>
&lt;li>åˆ é™¤å…ƒç´ çš„åŠŸèƒ½&lt;/li>
&lt;li>æ·»åŠ æ ‡è®°åŠŸèƒ½&lt;/li>
&lt;li>æ·»åŠ æŒ‰æ ‡ç­¾æœç´¢çš„é€‰é¡¹&lt;/li>
&lt;/ul>
&lt;p>æœ¬æ–‡åŸºäº 2018 å¹´ 7 æœˆ 25 æ—¥åœ¨æ³¢å…°åæ²™ä¸¾è¡Œçš„ SwingDev microConfâ€œState of the State in Reactâ€ç ”è®¨ä¼šã€‚å¦‚æœæ‚¨æƒ³äº†è§£æœ‰å…³è¯¥æ´»åŠ¨çš„æ›´å¤šä¿¡æ¯ï¼Œè¯·è®¿é—®&lt;a class="link" href="https://www.microconf.io/" target="_blank" rel="noopener"
>www.microconf.io&lt;/a>ã€‚&lt;/p></description></item><item><title>Parcelç®€å•è¯•ç”¨</title><link>https://jo-hnny.github.io/p/parcel%E7%AE%80%E5%8D%95%E8%AF%95%E7%94%A8/</link><pubDate>Wed, 18 Sep 2019 21:11:32 +0800</pubDate><guid>https://jo-hnny.github.io/p/parcel%E7%AE%80%E5%8D%95%E8%AF%95%E7%94%A8/</guid><description>&lt;img src="https://picsum.photos/seed/0d93939eee4441478b76522c689dfce3/4096/2160" alt="Featured image of post Parcelç®€å•è¯•ç”¨" />&lt;h2 id="ä¸ºä»€ä¹ˆè¦ä½¿ç”¨">ä¸ºä»€ä¹ˆè¦ä½¿ç”¨&lt;/h2>
&lt;p>æœ‰æ—¶å€™æˆ‘æƒ³å†™ä¸ªç®€å•çš„ demoï¼Œä½†æ˜¯æˆ‘ä¾ç„¶æƒ³è¦ä½¿ç”¨ ES6+çš„è¯­æ³•ï¼Œè¿˜æœ‰ scss ä»¥ï¼Œnode modules åŒ…æ‹¬ä¸€äº›å…¶å®ƒçš„ä¾èµ–ï¼Œæ¯”å¦‚æˆ‘è¦å†™ webgl çš„ demoï¼Œæˆ‘å¯èƒ½è¿˜éœ€è¦å¼•å…¥ä¸€äº› shader æ–‡ä»¶ï¼Œè¿™ä¸ªæ—¶å€™æœ€å…ˆæƒ³åˆ°çš„è‚¯å®šæ˜¯ webpack äº†ï¼Œä½†æ˜¯ webpack çš„é…ç½®æ˜¯çœŸçš„éº»çƒ¦ï¼Œè€Œæˆ‘åªæ˜¯æƒ³å†™ä¸ª demo è€Œå·²ï¼Œæ‰€ä»¥æˆ‘æŠŠç›®å…‰æ”¾åˆ°äº† parcel ä¸Šï¼Œæˆ‘ 17 å¹´å°±çœ‹åˆ°è¿™è´§äº†ï¼Œä»¥ä¸ºå®ƒèƒ½é¢ è¦† webpack å‘¢ï¼Œç„¶å¹¶åµï¼Œæˆ‘ç°åœ¨å¼€å§‹æ–°é¡¹ç›®è¿˜æ˜¯å¾—é…ç½®ä¸€å¤§å †çš„ webpack å±æ€§ï¼Œä½†æ˜¯åœ¨è¿™ç§å†™ä¸ªå° demo çš„éœ€æ±‚ä¸‹ï¼Œæˆ‘æƒ³ parcel åº”è¯¥èƒ½å‘æŒ¥å®ƒçš„ä»·å€¼ã€‚&lt;/p>
&lt;h2 id="å¼€å§‹">å¼€å§‹&lt;/h2>
&lt;h3 id="æ–°å»ºé¡¹ç›®æ–‡ä»¶">æ–°å»ºé¡¹ç›®æ–‡ä»¶&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">mkdir webgl-demo
&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="åˆå§‹åŒ–é¡¹ç›®">åˆå§‹åŒ–é¡¹ç›®&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">npm init -y
&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="æ–°å»ºæ–‡ä»¶">æ–°å»ºæ–‡ä»¶&lt;/h3>
&lt;p>&lt;figure
>
&lt;a href="https://raw.githubusercontent.com/johnny19941216/storage-room/master/img/20190918203412.png" >
&lt;img src="https://raw.githubusercontent.com/johnny19941216/storage-room/master/img/20190918203412.png"
loading="lazy"
>
&lt;/a>
&lt;/figure>&lt;/p>
&lt;h3 id="åœ¨-indexhtml-æ–‡ä»¶ä¸­å¼•å…¥-indexjs-æ–‡ä»¶ç„¶åå…¶ä»–çš„ä¾èµ–æˆ‘ä»¬éƒ½ä¼šåœ¨-indexjs-æ–‡ä»¶ä¸­å¼•å…¥">åœ¨ index.html æ–‡ä»¶ä¸­å¼•å…¥ index.js æ–‡ä»¶ï¼Œç„¶åå…¶ä»–çš„ä¾èµ–æˆ‘ä»¬éƒ½ä¼šåœ¨ index.js æ–‡ä»¶ä¸­å¼•å…¥&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-html" data-lang="html">&lt;span class="cp">&amp;lt;!DOCTYPE html&amp;gt;&lt;/span>
&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">html&lt;/span> &lt;span class="na">lang&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;en&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">head&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">meta&lt;/span> &lt;span class="na">charset&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;UTF-8&amp;#34;&lt;/span> &lt;span class="p">/&amp;gt;&lt;/span>
&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">meta&lt;/span> &lt;span class="na">name&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;viewport&amp;#34;&lt;/span> &lt;span class="na">content&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;width=device-width, initial-scale=1.0&amp;#34;&lt;/span> &lt;span class="p">/&amp;gt;&lt;/span>
&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">meta&lt;/span> &lt;span class="na">http-equiv&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;X-UA-Compatible&amp;#34;&lt;/span> &lt;span class="na">content&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;ie=edge&amp;#34;&lt;/span> &lt;span class="p">/&amp;gt;&lt;/span>
&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">title&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>Document&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">title&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">head&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">body&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">canvas&lt;/span>&lt;span class="p">&amp;gt;&amp;lt;/&lt;/span>&lt;span class="nt">canvas&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">script&lt;/span> &lt;span class="na">src&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;./index.js&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&amp;lt;/&lt;/span>&lt;span class="nt">script&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">body&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">html&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="åœ¨-indexjs-ä¸­ç¼–å†™ä»£ç å¼•å…¥ä¾èµ–æˆ‘è¿™ä»£ç å°±ä¸å†™äº†å¼•å…¥ä¸€ä¸‹ä¾èµ–å§">åœ¨ index.js ä¸­ç¼–å†™ä»£ç ï¼Œå¼•å…¥ä¾èµ–,æˆ‘è¿™ä»£ç å°±ä¸å†™äº†ï¼Œå¼•å…¥ä¸€ä¸‹ä¾èµ–å§&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-javascript" data-lang="javascript">&lt;span class="kr">import&lt;/span> &lt;span class="nx">fragShader&lt;/span> &lt;span class="nx">from&lt;/span> &lt;span class="s2">&amp;#34;./index.frag&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="kr">import&lt;/span> &lt;span class="nx">vertShader&lt;/span> &lt;span class="nx">from&lt;/span> &lt;span class="s2">&amp;#34;./index.vert&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="kr">import&lt;/span> &lt;span class="s2">&amp;#34;./index.scss&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="å®‰è£…-parcelå¯ä»¥å…¨å±€å®‰è£…ä¹Ÿå¯ä»¥å®‰è£…åˆ°é¡¹ç›®æˆ‘è¿™å°±å®‰è£…åˆ°é¡¹ç›®äº†æ¨èå®‰è£…åˆ°é¡¹ç›®è¿™æ ·ä¸ä¼šåˆ«äººæ‹¿å»ä¸çŸ¥é“æ€ä¹ˆç”¨">å®‰è£… parcel,å¯ä»¥å…¨å±€å®‰è£…ï¼Œä¹Ÿå¯ä»¥å®‰è£…åˆ°é¡¹ç›®ï¼Œæˆ‘è¿™å°±å®‰è£…åˆ°é¡¹ç›®äº†,æ¨èå®‰è£…åˆ°é¡¹ç›®ï¼Œè¿™æ ·ä¸ä¼šåˆ«äººæ‹¿å»ä¸çŸ¥é“æ€ä¹ˆç”¨&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">npm i parcel-bundler -D
&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="å¯åŠ¨é¡¹ç›®å®é™…ä¸Šæˆ‘æŠŠå®ƒåŠ åˆ°-npm-script-é‡Œé¢äº†">å¯åŠ¨é¡¹ç›®ï¼Œå®é™…ä¸Šæˆ‘æŠŠå®ƒåŠ åˆ° npm script é‡Œé¢äº†&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-json" data-lang="json">&lt;span class="p">{&lt;/span>
&lt;span class="nt">&amp;#34;name&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;webgl-demo&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="nt">&amp;#34;version&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;1.0.0&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="nt">&amp;#34;description&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="nt">&amp;#34;main&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;index.js&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="nt">&amp;#34;scripts&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="nt">&amp;#34;start&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;parcel index.html&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="nt">&amp;#34;test&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;echo \&amp;#34;Error: no test specified\&amp;#34; &amp;amp;&amp;amp; exit 1&amp;#34;&lt;/span>
&lt;span class="p">},&lt;/span>
&lt;span class="nt">&amp;#34;keywords&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[],&lt;/span>
&lt;span class="nt">&amp;#34;author&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="nt">&amp;#34;license&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;ISC&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="nt">&amp;#34;dependencies&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="nt">&amp;#34;parcel-bundler&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;^1.12.3&amp;#34;&lt;/span>
&lt;span class="p">},&lt;/span>
&lt;span class="nt">&amp;#34;devDependencies&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="nt">&amp;#34;glslify-bundle&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;^5.1.1&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="nt">&amp;#34;glslify-deps&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;^1.3.1&amp;#34;&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>æ¥ç€å¯åŠ¨é¡¹ç›®&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">npm start
&lt;/code>&lt;/pre>&lt;/div>&lt;p>å®ƒå°±è¿™ä¹ˆè·‘èµ·æ¥äº†ï¼Œæˆ‘çœŸçš„æ˜¯æœ‰ç‚¹æƒŠè®¶ï¼Œæˆ‘ä»¥ä¸ºèµ·ç è¦è‡ªå·±å®‰è£…ä¸€ä¸‹å…¶ä»–çš„ loader ä»€ä¹ˆçš„ï¼Œä½†æ˜¯å®Œå…¨ä¸éœ€è¦ï¼Œå®ƒä¼šè‡ªå·±æ ¹æ®æ–‡ä»¶åç¼€ï¼Œè‡ªåŠ¨å®‰è£… loader ä»€ä¹ˆçš„ï¼Œåæ­£ä½ æ˜¯çœŸçš„ä»€ä¹ˆé…ç½®æ–‡ä»¶éƒ½ä¸ç”¨å†™ã€‚&lt;/p>
&lt;h2 id="ç»“æŸ">ç»“æŸ&lt;/h2>
&lt;p>parcel æ˜¯çœŸçš„å¼ºå¤§ï¼Œæˆ‘ä»¥åç»ˆäºå¯ä»¥éšå¿ƒæ‰€æ¬²çš„å†™ demo äº†ï¼Œç”¨æˆ‘è‡ªå·±æœ€å–œæ¬¢çš„æ–¹å¼ã€‚&lt;/p></description></item><item><title>å®ç°æ‹‰æ ¼æœ—æ—¥æ’å€¼ç®—æ³•</title><link>https://jo-hnny.github.io/p/%E5%AE%9E%E7%8E%B0%E6%8B%89%E6%A0%BC%E6%9C%97%E6%97%A5%E6%8F%92%E5%80%BC%E7%AE%97%E6%B3%95/</link><pubDate>Wed, 18 Sep 2019 21:10:50 +0800</pubDate><guid>https://jo-hnny.github.io/p/%E5%AE%9E%E7%8E%B0%E6%8B%89%E6%A0%BC%E6%9C%97%E6%97%A5%E6%8F%92%E5%80%BC%E7%AE%97%E6%B3%95/</guid><description>&lt;img src="https://picsum.photos/seed/a06caa46404f48529f7fd8cba609add4/4096/2160" alt="Featured image of post å®ç°æ‹‰æ ¼æœ—æ—¥æ’å€¼ç®—æ³•" />&lt;h1 id="å®ç°æ‹‰æ ¼æœ—æ—¥æ’å€¼ç®—æ³•">å®ç°æ‹‰æ ¼æœ—æ—¥æ’å€¼ç®—æ³•&lt;/h1>
&lt;p>ä¹‹å‰åšå›¾ç‰‡æ›²çº¿è°ƒèŠ‚çš„æ—¶å€™ä½¿ç”¨åˆ°äº†æ‹‰æ ¼æœ—æ—¥æ’å€¼ç®—æ³•ï¼Œä¸»è¦å‚è€ƒäº†&lt;a class="link" href="https://zh.wikipedia.org/wiki/%E6%8B%89%E6%A0%BC%E6%9C%97%E6%97%A5%E6%8F%92%E5%80%BC%E6%B3%95" target="_blank" rel="noopener"
>ç»´åŸºç™¾ç§‘&lt;/a>ï¼Œè¿™é‡Œç®€å•è®°å½•ä¸€ä¸‹&lt;/p>
&lt;h2 id="ä»€ä¹ˆæ˜¯æ‹‰æ ¼æœ—æ—¥æ’å€¼ç®—æ³•">ä»€ä¹ˆæ˜¯æ‹‰æ ¼æœ—æ—¥æ’å€¼ç®—æ³•&lt;/h2>
&lt;p>&lt;figure
>
&lt;a href="https://raw.githubusercontent.com/johnny19941216/storage-room/master/img/20190918203302.png" >
&lt;img src="https://raw.githubusercontent.com/johnny19941216/storage-room/master/img/20190918203302.png"
loading="lazy"
>
&lt;/a>
&lt;/figure>&lt;/p>
&lt;h2 id="å¦‚ä½•é€šè¿‡ç»™å®šçš„æœ‰é™ç‚¹å¾—åˆ°æ‹‰æ ¼æœ—æ—¥æ’å€¼å‡½æ•°">å¦‚ä½•é€šè¿‡ç»™å®šçš„æœ‰é™ç‚¹å¾—åˆ°æ‹‰æ ¼æœ—æ—¥æ’å€¼å‡½æ•°&lt;/h2>
&lt;p>&lt;figure
>
&lt;a href="https://raw.githubusercontent.com/johnny19941216/storage-room/master/img/20190918203320.png" >
&lt;img src="https://raw.githubusercontent.com/johnny19941216/storage-room/master/img/20190918203320.png"
loading="lazy"
>
&lt;/a>
&lt;/figure>&lt;/p>
&lt;h2 id="ç¤ºä¾‹">ç¤ºä¾‹&lt;/h2>
&lt;p>&lt;figure
>
&lt;a href="https://raw.githubusercontent.com/johnny19941216/storage-room/master/img/20190918203341.png" >
&lt;img src="https://raw.githubusercontent.com/johnny19941216/storage-room/master/img/20190918203341.png"
loading="lazy"
>
&lt;/a>
&lt;/figure>&lt;/p>
&lt;h2 id="ç»´åŸºç™¾ç§‘ä¸Šäº¤ä»£çš„ç®—æ˜¯æ¯”è¾ƒæ˜ç™½äº†ç„¶åæˆ‘ä»¬è¦åšçš„å°±æ˜¯ç”¨ä»£ç å»å®ç°è¿™ä¸ªç®—æ³•äº†ä¸‹é¢ç»™å‡ºæˆ‘çš„å®ç°">ç»´åŸºç™¾ç§‘ä¸Šäº¤ä»£çš„ç®—æ˜¯æ¯”è¾ƒæ˜ç™½äº†ï¼Œç„¶åæˆ‘ä»¬è¦åšçš„å°±æ˜¯ç”¨ä»£ç å»å®ç°è¿™ä¸ªç®—æ³•äº†ï¼Œä¸‹é¢ç»™å‡ºæˆ‘çš„å®ç°&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-javascript" data-lang="javascript">&lt;span class="kr">const&lt;/span> &lt;span class="nx">points&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[&lt;/span>
&lt;span class="p">[&lt;/span>&lt;span class="mi">4&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">10&lt;/span>&lt;span class="p">],&lt;/span>
&lt;span class="p">[&lt;/span>&lt;span class="mi">5&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mf">5.25&lt;/span>&lt;span class="p">],&lt;/span>
&lt;span class="p">[&lt;/span>&lt;span class="mi">6&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">],&lt;/span>
&lt;span class="p">];&lt;/span>
&lt;span class="kr">const&lt;/span> &lt;span class="nx">getLa&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">points&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="k">return&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">i&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="kd">function&lt;/span> &lt;span class="nx">la&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">points&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">index&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">index&lt;/span> &lt;span class="o">===&lt;/span> &lt;span class="nx">points&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">length&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="k">return&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="kr">const&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="nx">x&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">y&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">points&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="nx">index&lt;/span>&lt;span class="p">];&lt;/span>
&lt;span class="kr">const&lt;/span> &lt;span class="nx">up&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">points&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">reduce&lt;/span>&lt;span class="p">(&lt;/span>
&lt;span class="p">(&lt;/span>&lt;span class="nx">pre&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="nx">xn&lt;/span>&lt;span class="p">],&lt;/span> &lt;span class="nx">upIndex&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">upIndex&lt;/span> &lt;span class="o">===&lt;/span> &lt;span class="nx">index&lt;/span> &lt;span class="o">?&lt;/span> &lt;span class="nx">pre&lt;/span> &lt;span class="o">:&lt;/span> &lt;span class="nx">pre&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">i&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="nx">xn&lt;/span>&lt;span class="p">)),&lt;/span>
&lt;span class="mi">1&lt;/span>
&lt;span class="p">);&lt;/span>
&lt;span class="kr">const&lt;/span> &lt;span class="nx">down&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">points&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">reduce&lt;/span>&lt;span class="p">(&lt;/span>
&lt;span class="p">(&lt;/span>&lt;span class="nx">pre&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="nx">xn&lt;/span>&lt;span class="p">],&lt;/span> &lt;span class="nx">downIndex&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">downIndex&lt;/span> &lt;span class="o">===&lt;/span> &lt;span class="nx">index&lt;/span> &lt;span class="o">?&lt;/span> &lt;span class="nx">pre&lt;/span> &lt;span class="o">:&lt;/span> &lt;span class="nx">pre&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">x&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="nx">xn&lt;/span>&lt;span class="p">)),&lt;/span>
&lt;span class="mi">1&lt;/span>
&lt;span class="p">);&lt;/span>
&lt;span class="k">return&lt;/span> &lt;span class="nx">y&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">up&lt;/span> &lt;span class="o">/&lt;/span> &lt;span class="nx">down&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="nx">la&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">points&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">index&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="k">return&lt;/span> &lt;span class="nx">la&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">points&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="p">};&lt;/span>
&lt;span class="p">};&lt;/span>
&lt;span class="kr">const&lt;/span> &lt;span class="nx">laFn&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">getLa&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">points&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">laFn&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">18&lt;/span>&lt;span class="p">));&lt;/span> &lt;span class="c1">// -11
&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>æˆ‘å†™è¿™ä¸ªçš„æ—¶å€™æ„Ÿè§‰éš¾ç‚¹å€’æ˜¯ä¸åœ¨ç®—æ³•ä¸Šï¼Œè€Œæ˜¯å¦‚ä½•æŠŠç®—æ³•è½¬æ¢ä¸ºæˆ‘ä»¬åœ¨ç¨‹åºä¸­å¯ç”¨çš„å‡½æ•°&lt;/p></description></item><item><title>å†’æ³¡æ’åºä¸å¿«æ’ä»¥åŠç®—æ³•çš„æ—¶é—´å¤æ‚åº¦</title><link>https://jo-hnny.github.io/p/%E5%86%92%E6%B3%A1%E6%8E%92%E5%BA%8F%E4%B8%8E%E5%BF%AB%E6%8E%92%E4%BB%A5%E5%8F%8A%E7%AE%97%E6%B3%95%E7%9A%84%E6%97%B6%E9%97%B4%E5%A4%8D%E6%9D%82%E5%BA%A6/</link><pubDate>Wed, 18 Sep 2019 21:10:17 +0800</pubDate><guid>https://jo-hnny.github.io/p/%E5%86%92%E6%B3%A1%E6%8E%92%E5%BA%8F%E4%B8%8E%E5%BF%AB%E6%8E%92%E4%BB%A5%E5%8F%8A%E7%AE%97%E6%B3%95%E7%9A%84%E6%97%B6%E9%97%B4%E5%A4%8D%E6%9D%82%E5%BA%A6/</guid><description>&lt;img src="https://picsum.photos/seed/2b71bb853ecf406b9f615b4d6f90b521/4096/2160" alt="Featured image of post å†’æ³¡æ’åºä¸å¿«æ’ä»¥åŠç®—æ³•çš„æ—¶é—´å¤æ‚åº¦" />&lt;h1 id="ç®€å•çš„æ’åºæ€»æ˜¯è¦ä¼šçš„å˜›">ç®€å•çš„æ’åºæ€»æ˜¯è¦ä¼šçš„å˜›&lt;/h1>
&lt;p>æ¨èä¸€ä¸ªå¾ˆå¥½çš„ APP - ç®—æ³•åŠ¨ç”»å›¾è§£ï¼Œä»¥ä¸‹è§£æ³•éƒ½æ˜¯å‚è€ƒè¯¥ APP å®ç°&lt;/p>
&lt;h2 id="å†’æ³¡æ’åº">å†’æ³¡æ’åº&lt;/h2>
&lt;p>æˆ‘ä¸å¤ªå¥½æŠŠ APP çš„åŠ¨ç”»è´´ä¸Šæ¥ï¼Œå¤§å®¶å¯ä»¥è‡ªå·±æœç´¢ä¸€ä¸‹ï¼Œä½†æ˜¯ä¸»è¦çš„æ€æƒ³å°±æ˜¯ï¼Œä»æ•°ç»„æœ«ä½å¼€å§‹ï¼Œä¾æ¬¡å’Œä¸Šä¸€ä½ä¸¤ä¸¤æ¯”è¾ƒï¼Œå°†è¾ƒå°çš„æ•°äº¤æ¢åˆ°å·¦è¾¹ï¼Œé‚£ä¹ˆç¬¬ä¸€è½®ä¸‹æ¥ä¹‹åï¼Œæœ€å·¦ä¾§å°±æ˜¯è¯¥æ•°ç»„æœ€å°çš„å€¼ï¼Œæ¥ä¸‹æ¥é‡å¤ä¹‹å‰çš„åŠ¨ä½œï¼Œå°†ç¬¬äºŒå°çš„æ•°å­—æ’åœ¨å·¦ä¾§å€’æ•°ç¬¬äºŒä¸ªï¼Œé‡å¤æ•°ç»„é•¿åº¦çš„æ¬¡æ•°ä¹‹åå³å®Œæˆæ’åºï¼Œä¸‹é¢æ˜¯æˆ‘çš„å®ç°ï¼š&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-javascript" data-lang="javascript">&lt;span class="c1">// å®šä¹‰ä¸€ä¸ªå·¥å…·å‡½æ•°ï¼Œç”¨äºäº¤æ¢æ•°ç»„ä¸­ä¸¤ä¸ªä½ç½®çš„å€¼
&lt;/span>&lt;span class="c1">&lt;/span>&lt;span class="kd">function&lt;/span> &lt;span class="nx">exchange&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">list&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">index1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">index2&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="p">[&lt;/span>&lt;span class="nx">list&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="nx">index1&lt;/span>&lt;span class="p">],&lt;/span> &lt;span class="nx">list&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="nx">index2&lt;/span>&lt;span class="p">]]&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="nx">list&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="nx">index2&lt;/span>&lt;span class="p">],&lt;/span> &lt;span class="nx">list&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="nx">index1&lt;/span>&lt;span class="p">]];&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="kd">function&lt;/span> &lt;span class="nx">bubbleSort&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">list&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="kd">let&lt;/span> &lt;span class="nx">position&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="kr">const&lt;/span> &lt;span class="nx">len&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">list&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">length&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="k">while&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">position&lt;/span> &lt;span class="o">&amp;lt;&lt;/span> &lt;span class="nx">len&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="k">for&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="kd">let&lt;/span> &lt;span class="nx">i&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">len&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="nx">i&lt;/span> &lt;span class="o">&amp;gt;&lt;/span> &lt;span class="nx">position&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="nx">i&lt;/span>&lt;span class="o">--&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">list&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="nx">i&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">&amp;lt;&lt;/span> &lt;span class="nx">list&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="nx">i&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">])&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="nx">exchange&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">list&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">i&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">i&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="nx">position&lt;/span>&lt;span class="o">++&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="k">return&lt;/span> &lt;span class="nx">list&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="å¿«é€Ÿæ’åº">å¿«é€Ÿæ’åº&lt;/h2>
&lt;p>é¡¾åæ€ä¹‰ï¼Œè¯¥æ’åºçš„ç‰¹ç‚¹å°±æ˜¯å¿«ï¼Œä¸»è¦æ€æƒ³å°±æ˜¯ä»åŸå§‹æ•°ç»„ä¸­å–ä¸€ä¸ªåŸºå‡†å€¼ï¼Œç„¶åæ¯”æ­¤å€¼å¤§çš„éƒ½æ”¾åˆ°å³è¾¹ï¼Œå°çš„éƒ½æ”¾å·¦è¾¹ï¼Œç„¶åå–åŸºå‡†å€¼å·¦è¾¹çš„å’Œå³è¾¹çš„å„ä¸ºæ–°æ•°ç»„ï¼Œé‡å¤ä¹‹å‰çš„æ­¥éª¤ï¼Œä¹Ÿå°±æ˜¯ä¸€ç§é€’å½’ï¼Œæœ€åç›´è‡³å·¦ä¾§ã€å³ä¾§éƒ½åªæœ‰ä¸€ä¸ªå…ƒç´ æˆ–è€… 0 ä¸ªå…ƒç´ ï¼Œæˆ‘çš„å®ç°å¦‚ä¸‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-javascript" data-lang="javascript">&lt;span class="kd">function&lt;/span> &lt;span class="nx">quickSort&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">list&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="kr">const&lt;/span> &lt;span class="nx">len&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">list&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">length&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">len&lt;/span> &lt;span class="o">&amp;lt;&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="k">return&lt;/span> &lt;span class="nx">list&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="kr">const&lt;/span> &lt;span class="nx">left&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[];&lt;/span>
&lt;span class="kr">const&lt;/span> &lt;span class="nx">right&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[];&lt;/span>
&lt;span class="kr">const&lt;/span> &lt;span class="nx">basic&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">list&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">];&lt;/span>
&lt;span class="nx">list&lt;/span>
&lt;span class="p">.&lt;/span>&lt;span class="nx">slice&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="p">.&lt;/span>&lt;span class="nx">forEach&lt;/span>&lt;span class="p">((&lt;/span>&lt;span class="nx">item&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">item&lt;/span> &lt;span class="o">&amp;gt;=&lt;/span> &lt;span class="nx">basic&lt;/span> &lt;span class="o">?&lt;/span> &lt;span class="nx">right&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">push&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">item&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">:&lt;/span> &lt;span class="nx">left&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">push&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">item&lt;/span>&lt;span class="p">)));&lt;/span>
&lt;span class="k">return&lt;/span> &lt;span class="nx">quickSort&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">left&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nx">concat&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">basic&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">quickSort&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">right&lt;/span>&lt;span class="p">));&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="ç®—æ³•æ—¶é—´å¤æ‚åº¦">ç®—æ³•æ—¶é—´å¤æ‚åº¦&lt;/h2>
&lt;p>ç®—æ³•æœ‰å¥½æœ‰åï¼Œé‚£ä¹ˆæˆ‘ä»¬æ€ä¹ˆè¡¡é‡ç®—æ³•çš„å¥½æ€€å‘¢ï¼Ÿè¿™é‡Œå°±å¼•å…¥äº†æ—¶é—´å¤æ‚åº¦çš„æ¦‚å¿µï¼Œæ¯”å¦‚ä¸Šè¾¹çš„å†’æ³¡æ’åºçš„æ—¶é—´å¤æ‚åº¦ä¸º O(n^2),è€Œå¿«æ’çš„æ—¶é—´å¤æ‚åº¦åˆ™ä¸º O(n*Logn),é‚£ä¹ˆè¿™ä¸ªå¤æ‚åº¦åˆ°åº•æ˜¯å¦‚ä½•å¾—æ¥çš„,æˆ‘åœ¨çŸ¥ä¹ä¸Šè¾¹æ‰¾åˆ°ä¸€ç¯‡&lt;a class="link" href="https://www.zhihu.com/question/21387264/answer/422323594" target="_blank" rel="noopener"
>å›ç­”&lt;/a>è®²çš„å¾ˆå¥½&lt;/p></description></item><item><title>æ¨¡æ‹Ÿå®ç°callå’Œapplyä»¥åŠbind</title><link>https://jo-hnny.github.io/p/%E6%A8%A1%E6%8B%9F%E5%AE%9E%E7%8E%B0call%E5%92%8Capply%E4%BB%A5%E5%8F%8Abind/</link><pubDate>Wed, 18 Sep 2019 21:08:52 +0800</pubDate><guid>https://jo-hnny.github.io/p/%E6%A8%A1%E6%8B%9F%E5%AE%9E%E7%8E%B0call%E5%92%8Capply%E4%BB%A5%E5%8F%8Abind/</guid><description>&lt;img src="https://picsum.photos/seed/42a9af59d3a34710adcf0d7b8bf521d9/4096/2160" alt="Featured image of post æ¨¡æ‹Ÿå®ç°callå’Œapplyä»¥åŠbind" />&lt;h2 id="æ¨¡æ‹Ÿå®ç°-callapply-æˆ‘å°±ä¸å†™äº†å¾ˆç›¸ä¼¼">æ¨¡æ‹Ÿå®ç° callï¼Œapply æˆ‘å°±ä¸å†™äº†ï¼Œå¾ˆç›¸ä¼¼&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-javascript" data-lang="javascript">&lt;span class="nb">Function&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">prototype&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">callMe&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kd">function&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">that&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="p">...&lt;/span>&lt;span class="nx">args&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="nx">that&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">name&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">this&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="nx">that&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">name&lt;/span>&lt;span class="p">](...&lt;/span>&lt;span class="nx">args&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="p">};&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="æ¨¡æ‹Ÿå®ç°-bind">æ¨¡æ‹Ÿå®ç° bind&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-javascript" data-lang="javascript">&lt;span class="nb">Function&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">prototype&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">bindMe&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kd">function&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">that&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="p">...&lt;/span>&lt;span class="nx">args&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="nx">that&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">name&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">this&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="k">return&lt;/span> &lt;span class="kd">function&lt;/span> &lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="nx">that&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">name&lt;/span>&lt;span class="p">](...&lt;/span>&lt;span class="nx">args&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="p">};&lt;/span>
&lt;span class="p">};&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="æ€»ç»“">æ€»ç»“&lt;/h2>
&lt;p>call å’Œ apply éƒ½æ˜¯ä¸ºäº†æ”¹å˜å‡½æ•°åœ¨å®šä¹‰æ—¶åŸæœ¬çš„ this æŒ‡å‘ï¼Œé‚£ä¹ˆæƒ³æƒ³ this çš„è¡¨ç°ï¼Œå§‹ç»ˆæŒ‡å‘è°ƒç”¨è‡ªå·±çš„å¯¹è±¡ï¼Œæˆ‘ä»¬è¦åšçš„å°±æ˜¯ç”¨ call å’Œ bind æä¾›çš„å¯¹è±¡ä½œä¸ºè°ƒç”¨è¯¥å‡½æ•°çš„å¯¹è±¡ï¼Œå³æŠŠè¯¥å‡½æ•°æŒ‚è½½ä¸ºæ‰€æä¾›å¯¹è±¡çš„ä¸€ä¸ªå±æ€§ã€‚&lt;/p></description></item><item><title>è®°ä¸€æ¬¡webglæ–‡æœ¬ç‰¹æ•ˆæ‰€è¸©çš„å‘</title><link>https://jo-hnny.github.io/p/%E8%AE%B0%E4%B8%80%E6%AC%A1webgl%E6%96%87%E6%9C%AC%E7%89%B9%E6%95%88%E6%89%80%E8%B8%A9%E7%9A%84%E5%9D%91/</link><pubDate>Wed, 18 Sep 2019 21:06:15 +0800</pubDate><guid>https://jo-hnny.github.io/p/%E8%AE%B0%E4%B8%80%E6%AC%A1webgl%E6%96%87%E6%9C%AC%E7%89%B9%E6%95%88%E6%89%80%E8%B8%A9%E7%9A%84%E5%9D%91/</guid><description>&lt;img src="https://picsum.photos/seed/8b427e54cff84b0fbdfdce68b842a094/4096/2160" alt="Featured image of post è®°ä¸€æ¬¡webglæ–‡æœ¬ç‰¹æ•ˆæ‰€è¸©çš„å‘" />&lt;h2 id="å‰æƒ…">å‰æƒ…&lt;/h2>
&lt;p>é¡¹ç›®åšçš„æ˜¯è§†é¢‘æ¸²æŸ“ï¼Œä¹Ÿå°±æ˜¯è§†é¢‘æ¸²æŸ“åˆ° webgl ä¸Šï¼ŒåŒæ—¶åŠ ä¸Šä¸€äº›è½¬åœºç‰¹æ•ˆï¼Œæ–‡æœ¬æ•ˆæœï¼Œä¹‹å‰çš„æ–‡æœ¬æ•ˆæœæˆ‘æ˜¯ç”¨ DIV æ ‡ç­¾åŠ ä¸Š css3 çš„ animation å®šä½åˆ° canvas åŒºåŸŸå®ç°çš„ï¼Œæœ¬ç€èƒ½ç”¨ webgl å®ç°å°±ç”¨ webgl å®ç°çš„åˆè¡·æœ€åå†³å®šæ–‡æœ¬æ•ˆæœä¹Ÿç”¨ webgl å®ç°ï¼Œå¤§è‡´æ€è·¯å°±æ˜¯å¾—åˆ°æ–‡æœ¬çš„çº¹ç†ï¼Œç„¶åç”¨ shader å¤„ç†çº¹ç†å®ç°åŠ¨æ•ˆ,é‡åˆ°çš„å‘ä¸»è¦æ¥è‡ªå¾—åˆ°çº¹ç†æ—¶çš„å­—ä½“æ•ˆæœã€‚&lt;/p>
&lt;h2 id="ä½¿ç”¨-svg-å¾—åˆ°æ–‡æœ¬çº¹ç†">ä½¿ç”¨ svg å¾—åˆ°æ–‡æœ¬çº¹ç†&lt;/h2>
&lt;p>ç”±äº svg å‰åç«¯é€šç”¨ï¼Œèƒ½å¤Ÿä¿æŒä¸€è‡´ï¼Œæ•…åˆæ­¥å†³å®šä½¿ç”¨ svg å®ç°æ–‡æœ¬çº¹ç†ï¼Œæ­¥éª¤ä¹Ÿå°±æ˜¯æ‹¼æ¥ä¸Šé¢œè‰²ã€å­—ä½“ã€å­—å·çš„å±æ€§å¾—åˆ°ä¸€ä¸ª svg å­—ç¬¦ä¸²ï¼Œç„¶åå°†å­—ç¬¦ä¸²è½¬ä¸ºä¸€ä¸ª blob åœ°å€ï¼ŒæŠŠè¿™ä¸ªåœ°å€ç»™å›¾ç‰‡ï¼Œä»¥æ­¤å¾—åˆ°çº¹ç†ã€‚&lt;/p>
&lt;h2 id="å­—ä½“ä¸ç”Ÿæ•ˆ">å­—ä½“ä¸ç”Ÿæ•ˆ&lt;/h2>
&lt;p>è¿™ä¹ˆåšäº†ä¹‹åå‘ç°å…¶ä½™çš„æ–‡æœ¬å¤§å°ã€é¢œè‰²éƒ½æ²¡é—®é¢˜ï¼Œå°±æ˜¯å­—ä½“ä¸ç”Ÿæ•ˆï¼Œæœ€åç»è¿‡ç ”ç©¶å¾—å‡ºåˆæ­¥ç»“è®ºï¼Œæˆ‘ä»¬ä½¿ç”¨çš„åªæ˜¯ä¸€ä¸ª svg å­—ç¬¦ï¼Œå¹¶ä¸èƒ½å’Œé¡¹ç›®ä¸­ css å£°æ˜çš„ font-face å…³è”èµ·æ¥ï¼Œè¦æƒ³å­—ä½“ç”Ÿæ•ˆï¼Œå¿…é¡»æŠŠå­—ä½“ç”¨ base64 çš„å½¢å¼å†…è”åˆ° svg ä¸­ã€‚&lt;/p>
&lt;h2 id="è¯´å¹²å°±å¹²">è¯´å¹²å°±å¹²&lt;/h2>
&lt;p>ä¸å°±æ˜¯ base64 å˜›ï¼Œç»è¿‡æˆ‘ä¿®æ”¹ webpack loader é…ç½®ï¼Œå­—ä½“æ–‡ä»¶æˆåŠŸå†…è”åˆ° svg ä¸­ï¼Œä½†æ˜¯å¦ˆå‘€ï¼Œè¿™ä¸ª svg çœŸä»–ä¹ˆçš„å¤§ï¼Œå‡ å M çš„å­—ç¬¦ï¼Œé¡µé¢åŠ è½½è¦è½¬è€åŠå¤©ï¼Œå¦‚æœä»¥åæ”¯æŒå­—ä½“è¶Šæ¥è¶Šå¤šï¼Œé‚£è¿™ä¸ªè‚¯å®šä¸è¡Œçš„ï¼Œå¾—æ”¹ä¸€ä¸‹ï¼Œæˆ‘è§‰å¾— ajax åŠ¨æ€è¯·æ±‚å­—ä½“ä¸º blobï¼Œç„¶åè½¬ base64ï¼Œæœç„¶è¿™ä¸ªæ–¹æ¡ˆå¥½å¤šäº†ï¼Œé¡µé¢åŠ è½½å¾ˆå¿«ï¼Œæ²¡æœ‰å½±å“ï¼Œäºæ˜¯æ¥ç€å¼€æï¼Œç»“æœåˆ°äº†ä»å›¾ç‰‡åˆ°çº¹ç†è¿™ä¸€æ­¥çš„æ—¶å€™çº¿ç¨‹ç›´æ¥é˜»å¡äº†ï¼Œè§†é¢‘æ’­æ”¾åˆ°è¿™çš„æ—¶å€™ï¼Œæˆ‘çš„è¿›åº¦æŒ‡é’ˆæ€»ä¼šå¡ä¸Šä¸€ç§’å·¦å³ï¼Œéå¸¸å½±å“ä½“éªŒï¼Œåº”è¯¥æ˜¯è¿™ä¸ªå›¾ç‰‡ä½“ç§¯å¤ªå¤§äº†ï¼Œè¿™å°±æ— è§£äº†å•Šï¼Œåˆè¦å­—ä½“ç”Ÿæ•ˆï¼Œåˆè¦æ–‡ä»¶å°ï¼ŒåŠä¸åˆ°å•Šã€‚&lt;/p>
&lt;h2 id="æ¢æ–¹æ¡ˆ">æ¢æ–¹æ¡ˆ&lt;/h2>
&lt;p>æ²¡åŠæ³•è¿™ä¸ªæ˜¯è¡Œä¸é€šäº†ï¼Œæ¢æ–¹æ¡ˆå§ï¼Œå¥½åƒä¹Ÿæ²¡ä»€ä¹ˆèƒ½æ¢çš„äº†ï¼Œåªå‰© canvas äº†ï¼Œé‚£å°±ä¸Šå§ï¼Œç”Ÿæˆä¸€ä¸ª canvas å…ƒç´ ï¼Œç”»ä¸Šæ–‡æœ¬ï¼Œè®¾ç½®å­—ä½“é¢œè‰²ï¼Œå—¯ï¼Œå®Œç¾ã€‚&lt;/p>
&lt;h2 id="ç¦»å®Œç¾è¿˜å·®ä¸€æ ¹å¤´å‘ä¸çš„è·ç¦»">ç¦»å®Œç¾è¿˜å·®ä¸€æ ¹å¤´å‘ä¸çš„è·ç¦»&lt;/h2>
&lt;p>æœ€åè¿˜æ˜¯å‘ç°äº†ä¸€ç‚¹é—®é¢˜ï¼Œé‚£å°±æ˜¯ä¸€å¼€å§‹åˆ‡æ¢å­—ä½“çš„æ—¶å€™å¹¶æ²¡æœ‰ç”Ÿæ•ˆï¼Œä½†æ˜¯åˆ‡ä¸Šå‡ æ¬¡å°±åˆç”Ÿæ•ˆäº†ï¼Œç»è¿‡æˆ‘å¤šå¹´å‰ç«¯ç»éªŒçŒœæµ‹ï¼Œæµè§ˆå™¨æœ¬ç€ä¸ºç”¨æˆ·èŠ‚çº¦èµ„æºçš„ç¾å¥½æƒ³æ³•ï¼Œæ€»æ˜¯ç­‰ä½ ç¡®å®ç”¨åˆ°äº†è¿™ä¸ªå­—ä½“çš„æ—¶å€™æ‰å»åŠ è½½å­—ä½“ï¼Œä¹Ÿå°±æ˜¯ canvas ä¸Šç”¨åˆ°è¿™ä¸ªå­—ä½“çš„æ—¶å€™æ‰å»åŠ è½½å­—ä½“ï¼Œä½†æ˜¯ canvas æ˜¯è¦é©¬ä¸Šç”Ÿæˆçº¹ç†çš„ï¼Œå®ƒå¯ç­‰ä¸äº†ä½ ï¼Œäºæ˜¯å°±å‡ºç°äº†ä¸€å¼€å§‹ä¸ç”Ÿæ•ˆï¼Œåé¢åˆç”Ÿæ•ˆçš„çŠ¶å†µï¼Œé‚£å°±æå‰ä½¿ç”¨å­—ä½“å§ï¼Œäºæ˜¯æˆ‘åœ¨æœ€å¤–å±‚çš„ html ä¸ŠåŠ äº†ä¸€äº›æ–‡æœ¬ï¼Œåˆ†åˆ«æŒ‡å®šäº†ä½¿ç”¨çš„å­—ä½“ï¼Œç„¶å displayï¼šnoneï¼Œç»“æœå±…ç„¶è¿˜æ˜¯ä¸ç®¡ç”¨ï¼Œå¦ˆçš„ï¼Œæµè§ˆå™¨æƒ³å¤ªå¤šäº†ï¼Œç”±äº displayï¼šnone ä½ ä¹Ÿçœ‹ä¸åˆ°ï¼Œæ‰€ä»¥æµè§ˆå™¨è¿˜æ˜¯æ²¡å»åŠ è½½èµ„æºï¼Œsoï¼Œæ”¹æˆäº†ç»å¯¹å®šä½ï¼Œtopï¼š -1000pxï¼Œå†ä¸€è¯•ï¼Œå“ˆå“ˆï¼Œå¥½äº†ã€‚&lt;/p>
&lt;h2 id="æ€»ç»“">æ€»ç»“&lt;/h2>
&lt;p>svg å‘æ¯”è¾ƒå¤šï¼Œè€Œä¸”æˆ‘å¯¹ä»–å¹¶ä¸ç†Ÿæ‚‰ï¼Œè¿˜æ˜¯ canvas æ¯”è¾ƒå¯çˆ±&lt;/p></description></item><item><title>åŸºäºmochaçš„nodejså•å…ƒæµ‹è¯•</title><link>https://jo-hnny.github.io/p/%E5%9F%BA%E4%BA%8Emocha%E7%9A%84nodejs%E5%8D%95%E5%85%83%E6%B5%8B%E8%AF%95/</link><pubDate>Wed, 18 Sep 2019 21:01:55 +0800</pubDate><guid>https://jo-hnny.github.io/p/%E5%9F%BA%E4%BA%8Emocha%E7%9A%84nodejs%E5%8D%95%E5%85%83%E6%B5%8B%E8%AF%95/</guid><description>&lt;img src="https://picsum.photos/seed/ccbd0034a97a40f299bb27b18bf93999/4096/2160" alt="Featured image of post åŸºäºmochaçš„nodejså•å…ƒæµ‹è¯•" />&lt;p>ä¸ºäº†å­¦ä¹ è¿™ä¸ªï¼Œæˆ‘å†™äº†ä¸€ä¸ªä¾‹å­ï¼Œä¸»è¦æ˜¯ä¸€ä¸ªåŸºäº koa çš„ restful æœåŠ¡ï¼Œç„¶åæ˜¯åŸºäº mochaã€supertest çš„æµ‹è¯•æ–‡ä»¶ã€‚&lt;/p>
&lt;h2 id="1é¦–å…ˆéœ€è¦å®‰è£…ä¾èµ–">1ã€é¦–å…ˆéœ€è¦å®‰è£…ä¾èµ–&lt;/h2>
&lt;p>&lt;code>npm i supertest mocha chai --save-dev&lt;/code>&lt;/p>
&lt;h2 id="2npm-script">2ã€npm script&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-json" data-lang="json">&lt;span class="p">[&lt;/span>
&lt;span class="s2">&amp;#34;scripts&amp;#34;&lt;/span>&lt;span class="err">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="nt">&amp;#34;start&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;nodemon app.js&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="nt">&amp;#34;test&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;mocha&amp;#34;&lt;/span>
&lt;span class="p">},&lt;/span>
&lt;span class="p">]&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="3ç›®å½•ç»“æ„">3ã€ç›®å½•ç»“æ„&lt;/h2>
&lt;p>Mocha é»˜è®¤è¿è¡Œ test å­ç›®å½•é‡Œé¢çš„æµ‹è¯•è„šæœ¬ã€‚æ‰€ä»¥ï¼Œä¸€èˆ¬éƒ½ä¼šæŠŠæµ‹è¯•è„šæœ¬æ”¾åœ¨ test ç›®å½•é‡Œé¢ï¼Œç„¶åæ‰§è¡Œ mocha å°±ä¸éœ€è¦å‚æ•°äº†&lt;/p>
&lt;h2 id="4ç¼–å†™æµ‹è¯•æ–‡ä»¶">4ã€ç¼–å†™æµ‹è¯•æ–‡ä»¶&lt;/h2>
&lt;p>åœ¨æˆ‘çš„é¡¹ç›®ä¸­æœ‰ä¸€ä¸ªå…³äº user çš„ rest æ¥å£ï¼Œuser çš„æ•°æ®æ¨¡å‹å¤§è‡´å¦‚ä¸‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-json" data-lang="json">&lt;span class="p">{&lt;/span>
&lt;span class="nt">&amp;#34;name&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;wu&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="nt">&amp;#34;age&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">24&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="nt">&amp;#34;likes&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="s2">&amp;#34;movie&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;music&amp;#34;&lt;/span>&lt;span class="p">]&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="41å¼•å…¥éœ€è¦çš„æ¨¡å—">4.1ã€å¼•å…¥éœ€è¦çš„æ¨¡å—&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-js" data-lang="js">&lt;span class="kr">const&lt;/span> &lt;span class="nx">request&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">require&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;supertest&amp;#34;&lt;/span>&lt;span class="p">)(&lt;/span>&lt;span class="s2">&amp;#34;http://127.0.0.1:3000&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span> &lt;span class="c1">//åˆå§‹åŒ–supertest
&lt;/span>&lt;span class="c1">&lt;/span>&lt;span class="kr">const&lt;/span> &lt;span class="nx">DB&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">require&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;../db&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="kr">const&lt;/span> &lt;span class="nx">USERS&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="nx">DB&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;users&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="kr">const&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="nx">expect&lt;/span> &lt;span class="p">}&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">require&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;chai&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span> &lt;span class="c1">// å¼•å…¥chaiçš„expectæ–­è¨€
&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>å…³äº&lt;code>chai&lt;/code>çš„ä½¿ç”¨å¯ä»¥å»å®˜ç½‘æŸ¥çœ‹ï¼Œæ¯”è¾ƒç®€å•&lt;/p>
&lt;h3 id="42describe">4.2ã€describe&lt;/h3>
&lt;p>å¯¹æµ‹è¯•è¿›è¡Œæè¿°,å¯ä»¥è¿›è¡ŒåµŒå¥—&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-js" data-lang="js">&lt;span class="nx">describe&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;users api&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="p">()&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="nx">describe&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;post: æ–°å¢ä¸€ä¸ªç”¨æˆ·&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="p">()&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="p">})&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="43é’©å­">4.3ã€é’©å­&lt;/h3>
&lt;p>&lt;code>mocha&lt;/code>æä¾›äº†å››ä¸ªé’©å­å‡½æ•°&lt;code>beforeã€ afterã€afterEach å’Œ beforeEach&lt;/code>ã€‚&lt;br>
å…¶ä¸­&lt;code>before&lt;/code>é’©å­ä¼šåœ¨æœ¬åŒºå—çš„æ‰€æœ‰æµ‹è¯•ç”¨ä¾‹ä¹‹å‰æ‰§è¡Œï¼Œ&lt;code>beforeEach&lt;/code>é’©å­ä¼šåœ¨æœ¬åŒºå¿«çš„æ¯ä¸ªæµ‹è¯•ç”¨ä¾‹ä¹‹å‰æ‰§è¡Œï¼Œ&lt;code>after&lt;/code>ä¸&lt;code>afterEach&lt;/code>åŒç†ã€‚&lt;br>
æ¯”å¦‚æˆ‘æƒ³åœ¨æ‰€æœ‰æµ‹è¯•ç”¨ä¾‹å¼€å§‹ä¹‹å‰æ¸…ç©ºæ•°æ®åº“ä¸­ USERS çš„æ•°æ®ã€‚&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-js" data-lang="js">&lt;span class="nx">describe&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;users api&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="p">()&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="nx">before&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kr">async&lt;/span> &lt;span class="p">()&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">user&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="nx">name&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s1">&amp;#39;walala&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="nx">age&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="mi">8&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="nx">likes&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="p">[]&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="kr">await&lt;/span> &lt;span class="nx">USERS&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">clear&lt;/span>&lt;span class="p">()&lt;/span>
&lt;span class="p">})&lt;/span>
&lt;span class="p">)&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>åœ¨è¿™ä¸ªé’©å­ä¸­æˆ‘ä½¿ç”¨äº†&lt;code>async&lt;/code>å‡½æ•°ï¼Œä½ åœ¨ä¸‹è¾¹ä¹Ÿä¼šçœ‹åˆ°ä½¿ç”¨ done æ–¹æ³•é€šçŸ¥è¿™ä¸ªå¼‚æ­¥å›è°ƒå®Œæˆçš„æ–¹å¼ï¼Œ
Mocha å†…ç½®å¯¹ Promise çš„æ”¯æŒï¼Œå…è®¸ç›´æ¥è¿”å› Promiseï¼Œç­‰åˆ°å®ƒçš„çŠ¶æ€æ”¹å˜ï¼Œå†æ‰§è¡Œæ–­è¨€ï¼Œè€Œä¸ç”¨æ˜¾å¼è°ƒç”¨ done æ–¹æ³•&lt;/p>
&lt;h3 id="44it">4.4ã€it&lt;/h3>
&lt;p>&lt;code>it&lt;/code>ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯å¯¹é¢„æœŸç»“æœçš„æè¿°ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯ä¸€ä¸ª callbackï¼Œæ˜¯è¯¦ç»†çš„æµ‹è¯•è¡Œä¸ºã€‚&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-js" data-lang="js">&lt;span class="nx">describe&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;users api&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="p">()&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="nx">before&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kr">async&lt;/span> &lt;span class="p">()&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">user&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="nx">name&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s2">&amp;#34;walala&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="nx">age&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="mi">8&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="nx">likes&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="p">[],&lt;/span>
&lt;span class="p">};&lt;/span>
&lt;span class="kr">await&lt;/span> &lt;span class="nx">USERS&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">clear&lt;/span>&lt;span class="p">();&lt;/span>
&lt;span class="p">});&lt;/span>
&lt;span class="nx">describe&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;post: æ–°å¢ä¸€ä¸ªç”¨æˆ·&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="p">()&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="nx">it&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;è¿”å›200çŠ¶æ€ç ï¼Œä»¥åŠä¸€ä¸ªåŒ…å«æ–°å¢ç”¨æˆ·idçš„å¯¹è±¡&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">done&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="nx">request&lt;/span>
&lt;span class="p">.&lt;/span>&lt;span class="nx">post&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;/user&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="p">.&lt;/span>&lt;span class="nx">send&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">user&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="p">.&lt;/span>&lt;span class="nx">expect&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">200&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="p">.&lt;/span>&lt;span class="nx">end&lt;/span>&lt;span class="p">((&lt;/span>&lt;span class="nx">err&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">res&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">err&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="nx">done&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">err&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="nx">expect&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">res&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">body&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nx">to&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">have&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">property&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;id&amp;#34;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nx">equal&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">id&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">res&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">body&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">id&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="nx">done&lt;/span>&lt;span class="p">();&lt;/span>
&lt;span class="p">});&lt;/span>
&lt;span class="p">});&lt;/span>
&lt;span class="p">});&lt;/span>
&lt;span class="nx">describe&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;get: è·å–ç”¨æˆ·&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="p">()&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="nx">it&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;è¿”å›çŠ¶æ€ç 200ï¼Œ ä»¥åŠç”¨æˆ·å¯¹è±¡&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">done&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="nx">request&lt;/span>
&lt;span class="p">.&lt;/span>&lt;span class="nx">get&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="sb">`/user/&lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">id&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="sb">`&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="p">.&lt;/span>&lt;span class="nx">expect&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">200&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="p">.&lt;/span>&lt;span class="nx">end&lt;/span>&lt;span class="p">((&lt;/span>&lt;span class="nx">err&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">res&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">err&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="nx">done&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">err&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="nx">expect&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">res&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">body&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nx">to&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">be&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">deep&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">equal&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">user&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="nx">done&lt;/span>&lt;span class="p">();&lt;/span>
&lt;span class="p">});&lt;/span>
&lt;span class="p">});&lt;/span>
&lt;span class="p">});&lt;/span>
&lt;span class="nx">describe&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;put: ä¿®æ”¹&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="p">()&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="nx">before&lt;/span>&lt;span class="p">((&lt;/span>&lt;span class="nx">done&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">user&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="nx">name&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s2">&amp;#34;walala&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="nx">age&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="mi">28&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="nx">likes&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="p">[],&lt;/span>
&lt;span class="p">};&lt;/span>
&lt;span class="nx">done&lt;/span>&lt;span class="p">();&lt;/span>
&lt;span class="p">});&lt;/span>
&lt;span class="nx">it&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;è¿”å›çŠ¶æ€ç 200&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">done&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="nx">request&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">put&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="sb">`/user/&lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">id&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="sb">`&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nx">send&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">user&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nx">expect&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">200&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nx">end&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">done&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="p">});&lt;/span>
&lt;span class="p">});&lt;/span>
&lt;span class="nx">describe&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;getAll: è·å–æ‰€æœ‰ç”¨æˆ·&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="p">()&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="nx">it&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;è¿”å›çŠ¶æ€ç 200ï¼Œä»¥åŠåŒ…å«ç”¨æˆ·å¯¹è±¡çš„æ•°ç»„&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">done&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="nx">request&lt;/span>
&lt;span class="p">.&lt;/span>&lt;span class="nx">get&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="sb">`/user`&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="p">.&lt;/span>&lt;span class="nx">expect&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">200&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="p">.&lt;/span>&lt;span class="nx">end&lt;/span>&lt;span class="p">((&lt;/span>&lt;span class="nx">err&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">res&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">err&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="nx">done&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">err&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="nx">expect&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">res&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">body&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nx">to&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">be&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">deep&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">include&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">user&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="nx">done&lt;/span>&lt;span class="p">();&lt;/span>
&lt;span class="p">});&lt;/span>
&lt;span class="p">});&lt;/span>
&lt;span class="p">});&lt;/span>
&lt;span class="nx">describe&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;delete: åˆ é™¤ç”¨æˆ·&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="p">()&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="nx">it&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;è¿”å›çŠ¶æ€ç 200&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">done&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="nx">request&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">get&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="sb">`/user`&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nx">expect&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">200&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nx">end&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">done&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="p">});&lt;/span>
&lt;span class="p">});&lt;/span>
&lt;span class="p">});&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="5è¿è¡Œæµ‹è¯•">5ã€è¿è¡Œæµ‹è¯•&lt;/h2>
&lt;p>&lt;code>npm start&lt;/code>&lt;br>
&lt;code>npm test&lt;/code>&lt;br>
æµ‹è¯•å°±å®Œæˆäº†&lt;br>
&lt;figure
>
&lt;a href="https://jo-hnny.github.io/images/mocha-end.png" >
&lt;img src="https://jo-hnny.github.io/images/mocha-end.png"
loading="lazy"
alt="æµ‹è¯•å®Œæˆ">
&lt;/a>
&lt;figcaption>æµ‹è¯•å®Œæˆ&lt;/figcaption>
&lt;/figure>&lt;/p></description></item><item><title>ç±»çš„å®ç°åœ¨es5ä¸es6ä¸‹çš„åŒºåˆ«</title><link>https://jo-hnny.github.io/p/%E7%B1%BB%E7%9A%84%E5%AE%9E%E7%8E%B0%E5%9C%A8es5%E4%B8%8Ees6%E4%B8%8B%E7%9A%84%E5%8C%BA%E5%88%AB/</link><pubDate>Wed, 18 Sep 2019 21:00:58 +0800</pubDate><guid>https://jo-hnny.github.io/p/%E7%B1%BB%E7%9A%84%E5%AE%9E%E7%8E%B0%E5%9C%A8es5%E4%B8%8Ees6%E4%B8%8B%E7%9A%84%E5%8C%BA%E5%88%AB/</guid><description>&lt;img src="https://picsum.photos/seed/064c5fca816c45068b6c3cd7fa82dcf2/4096/2160" alt="Featured image of post ç±»çš„å®ç°åœ¨es5ä¸es6ä¸‹çš„åŒºåˆ«" />&lt;p>å†™å®Œæ ‡é¢˜å°±åæ‚”äº†ï¼Œes6 çš„ class åªæ˜¯è¯­æ³•ç³–ï¼Œé‚£ä¹ˆæˆ‘è¦æƒ³çŸ¥é“ es5 çš„ç±»çš„å®ç°ä¸æ˜¯åº”è¯¥å»çœ‹ es6 çš„æºç å—ï¼Ÿè™½ç„¶è¿™æ ·ï¼Œä½†æ˜¯æˆ‘çš„ä¾‹å­éƒ½å·²ç»å†™å®Œäº†ï¼Œæˆ‘è¿˜æ˜¯ po ä¸Šæ¥å§ï¼Œå›å¤´å†çœ‹çœ‹ es6 æ˜¯æ€ä¹ˆå®ç°çš„ã€‚&lt;/p>
&lt;h2 id="é¦–å…ˆçœ‹çœ‹-es6-çš„-class">é¦–å…ˆçœ‹çœ‹ ES6 çš„ class&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-js" data-lang="js">&lt;span class="kr">class&lt;/span> &lt;span class="nx">A&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="nx">constructor&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">x&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="c1">// æ„é€ å‡½æ•°
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">x&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">x&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="c1">// ä¸ºAçš„å®ä¾‹æ·»åŠ propså±æ€§
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="p">}&lt;/span>
&lt;span class="nx">test&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="c1">// ç»™Açš„å®ä¾‹æ·»åŠ æ–¹æ³•
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;test å®ä¾‹æ–¹æ³•&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="kr">static&lt;/span> &lt;span class="nx">test&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="c1">// ç»™Aæ·»åŠ é™æ€æ–¹æ³•
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;test é™æ€æ–¹æ³•&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="nx">A&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">som&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">123&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="c1">// ç»™Aæ·»åŠ é™æ€å±æ€§ï¼Œè¿™ä¸ªæœ‰ç‚¹low,ä¸ºä»€ä¹ˆä¸æ˜¯static som = 123
&lt;/span>&lt;span class="c1">&lt;/span>
&lt;span class="c1">// å®ç°ç»§æ‰¿
&lt;/span>&lt;span class="c1">&lt;/span>&lt;span class="kr">class&lt;/span> &lt;span class="nx">B&lt;/span> &lt;span class="kr">extends&lt;/span> &lt;span class="nx">A&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="nx">constructor&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">x&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">y&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="kr">super&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">x&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">y&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">y&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="kr">const&lt;/span> &lt;span class="nx">b&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="nx">B&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="nx">B&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">test&lt;/span>&lt;span class="p">();&lt;/span> &lt;span class="c1">// test é™æ€æ–¹æ³•
&lt;/span>&lt;span class="c1">&lt;/span>&lt;span class="nx">b&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">test&lt;/span>&lt;span class="p">();&lt;/span> &lt;span class="c1">// test å®ä¾‹æ–¹æ³•
&lt;/span>&lt;span class="c1">&lt;/span>&lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">B&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">som&lt;/span>&lt;span class="p">);&lt;/span> &lt;span class="c1">// 123
&lt;/span>&lt;span class="c1">&lt;/span>&lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">b&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">x&lt;/span>&lt;span class="p">);&lt;/span> &lt;span class="c1">// 1
&lt;/span>&lt;span class="c1">&lt;/span>&lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">b&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">y&lt;/span>&lt;span class="p">);&lt;/span> &lt;span class="c1">// 2
&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>å†™èµ·æ¥å¾ˆç®€å•&lt;/p>
&lt;h2 id="es5-çš„å®ç°">es5 çš„å®ç°&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-js" data-lang="js">&lt;span class="kd">function&lt;/span> &lt;span class="nx">A&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">x&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="c1">// æ„é€ æ–¹æ³•
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">x&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">x&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="c1">// ä¸ºAçš„å®ä¾‹æ·»åŠ propså±æ€§
&lt;/span>&lt;span class="c1">&lt;/span>&lt;span class="p">}&lt;/span>
&lt;span class="nx">A&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">prototype&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">test&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kd">function&lt;/span> &lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="c1">// ç»™Açš„å®ä¾‹æ·»åŠ æ–¹æ³•
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;test å®ä¾‹æ–¹æ³•&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="p">};&lt;/span>
&lt;span class="nx">A&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">test&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kd">function&lt;/span> &lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="c1">// ç»™Aæ·»åŠ é™æ€æ–¹æ³•
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;test é™æ€æ–¹æ³•&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="p">};&lt;/span>
&lt;span class="nx">A&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">som&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">123&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="c1">// ç»™Aæ·»åŠ é™æ€å±æ€§
&lt;/span>&lt;span class="c1">&lt;/span>
&lt;span class="c1">// å®ç°ç»§æ‰¿
&lt;/span>&lt;span class="c1">&lt;/span>&lt;span class="kd">function&lt;/span> &lt;span class="nx">B&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">x&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">y&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="nx">A&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">apply&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="k">this&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="nx">x&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">y&lt;/span>&lt;span class="p">]);&lt;/span> &lt;span class="c1">// æ‰§è¡ŒAçš„æ„é€ å‡½æ•°
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">y&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">y&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="c1">// B.__proto__ = A // ç»§æ‰¿Açš„é™æ€æ–¹æ³•,è¿™æ ·å†™eslintä¼šæŠ¥é”™ï¼Œmdnè¯´æ˜¯ä¼šå¸¦æ¥æ€§èƒ½é—®é¢˜ï¼Œä½†æ˜¯æˆ‘è§‰å¾—å¥½åƒä¸ä¼šï¼Œå…¶å®ƒçš„èµ„æ–™éƒ½ç”¨çš„æ˜¯å¯¹è±¡éå†æ·»åŠ ï¼Œæ„Ÿè§‰æœ‰ç‚¹éº»çƒ¦
&lt;/span>&lt;span class="c1">&lt;/span>
&lt;span class="c1">// B.prototype.__proto__ = A.prototype // ç»§æ‰¿Açš„å®ä¾‹æ–¹æ³•ï¼Œprototypeä¹Ÿæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œä»–ä¹Ÿæœ‰__proto__
&lt;/span>&lt;span class="c1">&lt;/span>
&lt;span class="c1">// æ‰¾åˆ°ä¸€ä¸ªæ–°æ–¹æ³•ï¼Œå®è´¨æ˜¯ä¸€æ ·çš„ï¼Œä½†æ˜¯eslintä¸æŠ¥é”™ï¼Œä½†æ˜¯çœ‹äº†ä¸€ä¸‹å…¼å®¹æ€§ï¼Œsafariä¸æ”¯æŒ
&lt;/span>&lt;span class="c1">&lt;/span>
&lt;span class="nb">Object&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">setPrototypeOf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">B&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">A&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="nb">Object&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">setPrototypeOf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">B&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">prototype&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">A&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">prototype&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="kr">const&lt;/span> &lt;span class="nx">b&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="nx">B&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="nx">B&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">test&lt;/span>&lt;span class="p">();&lt;/span> &lt;span class="c1">// test é™æ€æ–¹æ³•
&lt;/span>&lt;span class="c1">&lt;/span>&lt;span class="nx">b&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">test&lt;/span>&lt;span class="p">();&lt;/span> &lt;span class="c1">// test å®ä¾‹æ–¹æ³•
&lt;/span>&lt;span class="c1">&lt;/span>&lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">B&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">som&lt;/span>&lt;span class="p">);&lt;/span> &lt;span class="c1">// 123
&lt;/span>&lt;span class="c1">&lt;/span>&lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">b&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">x&lt;/span>&lt;span class="p">);&lt;/span> &lt;span class="c1">// 1
&lt;/span>&lt;span class="c1">&lt;/span>&lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">b&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">y&lt;/span>&lt;span class="p">);&lt;/span> &lt;span class="c1">// 2
&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ç•¥æ˜¾å¤æ‚&lt;/p></description></item><item><title>é¢è¯•è®°å½•</title><link>https://jo-hnny.github.io/p/%E9%9D%A2%E8%AF%95%E8%AE%B0%E5%BD%95/</link><pubDate>Wed, 18 Sep 2019 21:00:11 +0800</pubDate><guid>https://jo-hnny.github.io/p/%E9%9D%A2%E8%AF%95%E8%AE%B0%E5%BD%95/</guid><description>&lt;img src="https://picsum.photos/seed/dced38d5da1f47a591d1011c5276f6b4/4096/2160" alt="Featured image of post é¢è¯•è®°å½•" />&lt;p>è¿™é‡Œä¸»è¦è®°å½•ä¸€äº›æˆ‘æ²¡æœ‰å›ç­”ä¸Šæ¥çš„é¢è¯•é¢˜&lt;/p>
&lt;h2 id="1ä½œç”¨åŸŸé“¾">1ã€ä½œç”¨åŸŸé“¾&lt;/h2>
&lt;p>ä»Šå¤©æ¥åˆ°äº†ä¸€ä¸ªç”µè¯é¢è¯•ï¼Œæ„Ÿè§‰å›ç­”çš„å¾ˆä¸å¥½ï¼Œæˆ‘å¯¹ css å°¤å…¶ä¸å¤ªæ“…é•¿ï¼ŒBFC è¿™ä¸ªæ²¡ç­”ä¸Šæ¥ï¼Œå…¶å®ä¹‹å‰æ˜¯æœ‰çœ‹åˆ°è¿‡çš„ï¼Œä½†æ˜¯ç”±äºè‡ªå·±å¯¹ css çš„ä¸é‡è§†ï¼Œå¯¼è‡´æ²¡æœ‰å…³æ³¨ã€‚&lt;br>
ä½†æ˜¯è¿™ç¯‡æ–‡ç« è¦è¯´çš„æ˜¯ä½œç”¨åŸŸé“¾ï¼Œæœ¬æ¥ js ç®—æ˜¯æˆ‘æ“…é•¿çš„ï¼Œè¿™ä¸ªæ²¡ç­”ä¸Šæ¥å®å±ä¸åº”è¯¥ï¼Œå°±ç®—æˆ‘æ²¡å…³æ³¨è¿™ä¸ªæ¦‚å¿µï¼Œä½†æ˜¯æˆ‘åº”è¯¥çŸ¥é“å®ƒçš„æ­£ç¡®æƒ…å†µçš„ï¼Œå°±è¿™ä¹ˆä¸€ä¸ªå¹³æ—¶å†™ä»£ç è§‰å¾—ç†æ‰€åº”å½“çš„ä¸œè¥¿ï¼Œè¢«é—®èµ·æ¥çš„æ—¶å€™æˆ‘ç«Ÿç„¶ç­”é”™äº†ã€‚&lt;/p>
&lt;h3 id="11æ‰§è¡Œç¯å¢ƒ">1.1ã€æ‰§è¡Œç¯å¢ƒ&lt;/h3>
&lt;p>æ‰§è¡Œç¯å¢ƒå®šä¹‰äº†å˜é‡æˆ–å‡½æ•°æœ‰æƒè®¿é—®çš„å…¶ä»–æ•°æ®ï¼Œæ¯ä¸ªæ‰§è¡Œç¯å¢ƒéƒ½æœ‰ä¸€ä¸ªä¸ä¹‹å…³è”çš„å˜é‡å¯¹è±¡ï¼ˆvariable objectï¼‰ï¼Œç¯å¢ƒä¸­å®šä¹‰çš„å˜é‡å’Œå‡½æ•°éƒ½ä¿å­˜åœ¨è¿™ä¸ªå¯¹è±¡ä¸­ï¼Œå…¨å±€æ‰§è¡Œç¯å¢ƒæ˜¯æœ€å¤–å±‚çš„ä¸€ä¸ªæ‰§è¡Œç¯å¢ƒï¼Œæ¯ä¸ªå‡½æ•°éƒ½æœ‰è‡ªå·±çš„æ‰§è¡Œç¯å¢ƒï¼Œå½“æ‰§è¡Œæµè¿›å…¥ä¸€ä¸ªå‡½æ•°æ—¶ï¼Œå‡½æ•°çš„ç¯å¢ƒå°±ä¼šè¢«æ¨å…¥åˆ°ä¸€ä¸ªç¯å¢ƒæ ˆä¸­ï¼Œå½“å‡½æ•°æ‰§è¡Œå®Œæ¯•ï¼Œè¿™ä¸ªç¯å¢ƒå°±ä¼šå‡ºæ ˆå¹¶é”€æ¯ï¼ŒåŒæ—¶ä¿å­˜åœ¨å…¶ä¸­çš„å˜é‡å’Œå‡½æ•°ä¹Ÿéšä¹‹é”€æ¯ï¼Œæ§åˆ¶æƒäº¤è¿˜ç»™ä¹‹å‰çš„æ‰§è¡Œç¯å¢ƒã€‚&lt;/p>
&lt;h3 id="12ä½œç”¨åŸŸé“¾">1.2ã€ä½œç”¨åŸŸé“¾&lt;/h3>
&lt;p>å½“ä»£ç åœ¨ä¸€ä¸ªç¯å¢ƒä¸­æ‰§è¡Œæ—¶ï¼Œä¼šåˆ›å»ºå˜é‡å¯¹è±¡çš„ä¸€ä¸ªä½œç”¨åŸŸé“¾ï¼Œä½œç”¨åŸŸé“¾çš„æœ€å‰ç«¯ï¼Œå§‹ç»ˆæ˜¯å½“å‰æ‰§è¡Œçš„ä»£ç æ‰€åœ¨ç¯å¢ƒçš„å˜é‡å¯¹è±¡ï¼Œå¦‚æœè¿™ä¸ªç¯å¢ƒæ˜¯å‡½æ•°ï¼Œåˆ™å°†å…¶æ´»åŠ¨å¯¹è±¡ï¼ˆactivation objectï¼‰ä½œä¸ºå˜é‡å¯¹è±¡ï¼Œï¼Œæ´»åŠ¨å¯¹è±¡æœ€å¼€å§‹åªæœ‰ä¸€ä¸ªå˜é‡ï¼Œå³ arguments å¯¹è±¡ï¼Œä½œç”¨åŸŸé“¾ä¸­çš„ä¸‹ä¸€ä¸ªå˜é‡å¯¹è±¡æ¥è‡ªå¤–éƒ¨ç¯å¢ƒï¼Œå†ä¸‹ä¸€ä¸ªåˆ™æ¥è‡ªå¤–éƒ¨ç¯å¢ƒçš„å¤–éƒ¨ç¯å¢ƒï¼Œç›´åˆ°æœ«ç«¯å…¨å±€æ‰§è¡Œç¯å¢ƒï¼Œè¿™å°±å½¢æˆäº†ä¸€ä¸ªä½œç”¨åŸŸé“¾ã€‚&lt;/p>
&lt;h3 id="13æ´»åŠ¨å¯¹è±¡">1.3ã€æ´»åŠ¨å¯¹è±¡&lt;/h3>
&lt;p>1ã€å½“è°ƒç”¨å‡½æ•°æ—¶ï¼Œé¦–å…ˆåˆ›å»ºä¸€ä¸ªæ´»åŠ¨å¯¹è±¡
2ã€ä¸ºæ´»åŠ¨å¯¹è±¡æ·»åŠ ä¸€ä¸ªç±»ä¼¼æ•°ç»„çš„ arguments å¯¹è±¡&lt;br>
3ã€å°†å®šä¹‰å‡½æ•°æ—¶æ‰€åœ¨çš„æ‰§è¡Œç¯å¢ƒå¯¹åº”çš„ä½œç”¨åŸŸé“¾å¤åˆ¶åˆ°å‡½æ•°å†…éƒ¨çš„&lt;code>[[scope]]&lt;/code>å±æ€§ä¸Šï¼ŒæŠŠè‡ªå·±çš„æ´»åŠ¨å¯¹è±¡æ¨å…¥ä½œç”¨åŸŸé“¾çš„é¡¶ç«¯&lt;br>
4ã€ä¹‹åå‘ç”Ÿç”± ECMA-262 ä¸­æ‰€è°“â€™æ´»åŠ¨å¯¹è±¡â€™å®Œæˆçš„â€™å˜é‡å®ä¾‹åŒ–â€™(Variable Instatiation)çš„è¿‡ç¨‹&lt;/p>
&lt;pre tabindex="0">&lt;code>(1)ã€æ­¤æ—¶å°†å‡½æ•°çš„å½¢å‚åˆ›å»ºä¸ºæ´»åŠ¨å¯¹è±¡(å˜é‡å¯¹è±¡)çš„å±æ€§ï¼Œå¦‚æœè°ƒç”¨å‡½æ•°æ—¶ä¼ é€’çš„å‚æ•°ä¸å½¢å¼å‚æ•°ä¸€è‡´ï¼Œåˆ™å°†ç›¸åº”å‚æ•°å€¼èµ‹ç»™è¿™äº›å±æ€§ï¼Œå¦åˆ™ï¼Œä¼šç»™å±æ€§èµ‹ undefined å€¼ã€‚
(2)ã€å°†å‡½æ•°å†…éƒ¨å£°æ˜çš„æ‰€æœ‰å±€éƒ¨å˜é‡åˆ›å»ºä¸ºæ´»åŠ¨å¯¹è±¡(å˜é‡å¯¹è±¡)çš„å±æ€§ï¼Œå…¶å€¼éƒ½è¢«'é¢„è§£æ'ä¸ºundefinedå€¼ï¼Œä»¥ä¸Šä¸¤æ­¥å®Œæˆæ´»åŠ¨å¯¹è±¡(å˜é‡å¯¹è±¡)ä¿å­˜å˜é‡çš„è¿‡ç¨‹ã€‚
(3)ã€å¯¹äºå®šä¹‰çš„å†…éƒ¨å‡½æ•°ï¼Œç”¨å£°æ˜çš„å‡½æ•°åinnerMethodï¼Œä¸ºæ´»åŠ¨å¯¹è±¡(å˜é‡å¯¹è±¡)åˆ›å»ºåŒåå±æ€§ï¼Œè€Œå®šä¹‰çš„å†…éƒ¨å‡½æ•°åˆ™è¢«åˆ›å»ºä¸ºå‡½æ•°å¯¹è±¡å¹¶æŒ‡å®šç»™è¯¥å±æ€§ï¼Œå®Œæˆæ´»åŠ¨å¯¹è±¡(å˜é‡å¯¹è±¡)ä¿å­˜å‡½æ•°çš„è¿‡ç¨‹ã€‚
æ³¨ï¼šåœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œé™¤äº†å®é™…å‚æ•°å’Œå‡½æ•°å£°æ˜æœ‰å€¼å¤–ï¼Œå…¶å®ƒéƒ½è¢«'é¢„è§£æ'ä¸ºundefinedå€¼ã€‚
æ³¨ï¼šå¯¹äº(1)ã€(2)ã€(3)æ­¥éª¤çš„é¡ºåºï¼Œå› ä¸ºå˜é‡å£°æ˜æ¯”å‡½æ•°å£°æ˜çš„ä¼˜å…ˆçº§é«˜ï¼Œå˜é‡å£°æ˜ä¼˜å…ˆäºå‡½æ•°å£°æ˜è¢«æå‡ï¼Œå¦‚æœä¸¤è€…åŒååŒæ—¶å­˜åœ¨ï¼Œåè¢«æå‡çš„å‡½æ•°å£°æ˜ä¼šè¦†ç›–å…ˆè¢«æå‡çš„å˜é‡å£°æ˜**(å¼•ç”¨æ¥æºä½œè€…(2)ã€(3)é¡ºåºåäº†)**ã€‚
æ³¨ï¼šå¯¹äº(2)ï¼Œå‡½æ•°è¢«èµ‹å€¼ä¸ºå‡½æ•°å®šä¹‰çš„å­—ç¬¦ä¸²ï¼Œå¹¶ä¸ä¼šå¯¹å‡½æ•°ä½“ä¸­çš„JSä»£ç åšç‰¹æ®Šå¤„ç†(å¦‚è¿ç®—ç­‰)ï¼Œåªæ˜¯å°†å‡½æ•°ä½“JSä»£ç çš„æ‰«æç»“æœ(å­—ç¬¦ä¸²)ä¿å­˜åœ¨æ´»åŠ¨å¯¹è±¡(å˜é‡å¯¹è±¡)çš„ä¸æ­¤å‡½æ•°åå¯¹åº”çš„å±æ€§ä¸Šï¼Œåœ¨å‡½æ•°æ‰§è¡Œæ—¶å†åšè¿›ä¸€æ­¥å¤„ç†ã€‚
&lt;/code>&lt;/pre>&lt;h2 id="2æ•°ç»„å»é‡">2ã€æ•°ç»„å»é‡&lt;/h2>
&lt;p>è¿™æ˜¯ä¸€ä¸ªå¾ˆç»å…¸çš„é—®é¢˜ï¼Œå½“ç„¶æœ€ç®€å•çš„å›ç­”å°±æ˜¯ä½¿ç”¨ Set&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-js" data-lang="js">&lt;span class="kr">const&lt;/span> &lt;span class="nx">array&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">3&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">4&lt;/span>&lt;span class="p">]&lt;/span>
&lt;span class="p">[...&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="nx">Set&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">array&lt;/span>&lt;span class="p">)]&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>å¾ˆæ˜æ˜¾é¢è¯•å®˜ä¸æƒ³å†å¬åˆ°è¿™ä¸ªå›ç­”ï¼Œç„¶åæˆ‘è¯´äº†å¦ä¸€ç§æ–¹å¼&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-js" data-lang="js">&lt;span class="kr">const&lt;/span> &lt;span class="nx">array&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">4&lt;/span>&lt;span class="p">];&lt;/span>
&lt;span class="nx">array&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">reduce&lt;/span>&lt;span class="p">((&lt;/span>&lt;span class="nx">targetAarr&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">item&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="o">!&lt;/span>&lt;span class="nx">targetAarr&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">includes&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">item&lt;/span>&lt;span class="p">))&lt;/span> &lt;span class="nx">targetAarr&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">push&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">item&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="k">return&lt;/span> &lt;span class="nx">targetAarr&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="p">},&lt;/span> &lt;span class="p">[]);&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>ç„¶åé¢è¯•å®˜è¿˜æƒ³å¬åˆ°å…¶ä»–çš„æ–¹æ³•ï¼Œæˆ‘å°±åˆè¯´äº†ä¸€ä¸ªå¯¹è±¡é”®å€¼å¯¹çš„æ–¹å¼&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-js" data-lang="js">&lt;span class="kr">const&lt;/span> &lt;span class="nx">array&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">4&lt;/span>&lt;span class="p">];&lt;/span>
&lt;span class="kr">const&lt;/span> &lt;span class="nx">targetObject&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">{};&lt;/span>
&lt;span class="nx">array&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">forEach&lt;/span>&lt;span class="p">((&lt;/span>&lt;span class="nx">item&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">targetObject&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="nx">item&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">item&lt;/span>&lt;span class="p">));&lt;/span>
&lt;span class="nb">Object&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">keys&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">targetObject&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>å¾ˆæ˜æ˜¾è¿™ç§æ–¹å¼æœ‰ä¸ªé—®é¢˜ï¼Œä¸èƒ½åŒºåˆ†&lt;code>'1'&lt;/code>å’Œ&lt;code>1&lt;/code>
å†é—®æˆ‘ï¼Œæˆ‘è¯´äº†å¯ä»¥å…ˆæ’åºï¼Œå†æŸ¥çœ‹ç›¸é‚»é¡¹æ˜¯å¦ç›¸åŒï¼Œä»£ç å®ç°å¤§æ¦‚æ˜¯è¿™ä¸ªæ ·å­ï¼Œè¿™å„¿ä¸å¾—ä¸è¯´åˆ° sort æ–¹æ³•ä¼ å‚çš„é—®é¢˜ï¼Œæˆ‘ä¹‹å‰ä¸€ç›´æ˜¯æœ‰è‡ªå®šä¹‰ callback æ¥æ’åºçš„ï¼Œé¢è¯•å®˜é—®æˆ‘å¦‚æœä¸ä¼ å‚æ˜¯ä»€ä¹ˆæƒ…å†µï¼Œè¿™ä¸ªæˆ‘è¿˜æ­£æ²¡æ³¨æ„åˆ°åŸæ¥å¯ä»¥ä¸ä¼ å‚ï¼Œå½“ç„¶æˆ‘ç›´è§‰æ˜¯å¦‚æœä¸ä¼ å‚ï¼Œåº”è¯¥æ˜¯ä»å°åˆ°å¤§æ’åºï¼Œä½†æ˜¯æˆ‘ä¸çŸ¥é“çš„ä¸œè¥¿å½“ç„¶ä¸æ•¢èƒ¡è¯´ï¼Œå°±ç›´æ¥å›ç­”äº†ä¸çŸ¥é“ï¼Œå›æ¥ä¸€çœ‹ï¼Œä¸ä¼ å‚çš„è¯ï¼Œå…ƒç´ æŒ‰ç…§è½¬æ¢ä¸ºçš„å­—ç¬¦ä¸²çš„å„ä¸ªå­—ç¬¦çš„ Unicode ä½ç‚¹è¿›è¡Œæ’åºã€‚&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-js" data-lang="js">&lt;span class="kr">const&lt;/span> &lt;span class="nx">array&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">4&lt;/span>&lt;span class="p">];&lt;/span>
&lt;span class="kr">const&lt;/span> &lt;span class="nx">targetArr&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">array&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">sort&lt;/span>&lt;span class="p">();&lt;/span>
&lt;span class="nx">targetArr&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">forEach&lt;/span>&lt;span class="p">((&lt;/span>&lt;span class="nx">item&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">index&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">arr&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">item&lt;/span> &lt;span class="o">===&lt;/span> &lt;span class="nx">arr&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="nx">index&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">])&lt;/span> &lt;span class="nx">arr&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">splice&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">index&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="p">});&lt;/span>
&lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">targetArr&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>è¯´åˆ°è¿™äº†ï¼Œæˆ‘å†è®°å½•ä¸€ä¸‹æ•°ç»„å’Œå­—ç¬¦ä¸²å¸¸å¸¸å¼„æ··çš„å‡ ä¸ªæ–¹æ³•ï¼Œä¹‹å‰æ¯æ¬¡ç”¨åˆ°è¿™å‡ ä¸ªæ–¹æ³•éƒ½ä¼šæ‰“å¼€ mdn çš„æ–‡æ¡£ï¼Œè™½ç„¶æˆ‘è§‰å¾—è¿™æ ·æ²¡ä»€ä¹ˆï¼Œä½†æ˜¯ä¸‡ä¸€è¢«é—®åˆ°äº†å‘¢ï¼Œæˆ‘æ„Ÿè§‰æˆ‘å›ç­”çš„æ—¶å€™å¥½åƒå°±æœ‰è¯´æ··äº†çš„ã€‚&lt;br>
1ã€&lt;code>Array.prototype.slice&lt;/code>:æ–¹æ³•è¿”å›ä¸€ä¸ªä»å¼€å§‹åˆ°ç»“æŸï¼ˆä¸åŒ…æ‹¬ç»“æŸï¼‰é€‰æ‹©çš„æ•°ç»„çš„ä¸€éƒ¨åˆ†æµ…æ‹·è´åˆ°ä¸€ä¸ªæ–°æ•°ç»„å¯¹è±¡ã€‚ä¸”åŸå§‹æ•°ç»„ä¸ä¼šè¢«ä¿®æ”¹ã€‚&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-js" data-lang="js">&lt;span class="nx">arr&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">slice&lt;/span>&lt;span class="p">();&lt;/span>
&lt;span class="c1">// [0, end]
&lt;/span>&lt;span class="c1">&lt;/span>
&lt;span class="nx">arr&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">slice&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">begin&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="c1">// [begin, end]
&lt;/span>&lt;span class="c1">&lt;/span>
&lt;span class="nx">arr&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">slice&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">begin&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">end&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="c1">// [begin, end)
&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>2ã€&lt;code>Aarray.prototype.splice&lt;/code>:æ–¹æ³•é€šè¿‡åˆ é™¤ç°æœ‰å…ƒç´ å’Œ/æˆ–æ·»åŠ æ–°å…ƒç´ æ¥æ›´æ”¹ä¸€ä¸ªæ•°ç»„çš„å†…å®¹ã€‚&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-js" data-lang="js">&lt;span class="nx">array&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">splice&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">start&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="c1">// åˆ é™¤start - end
&lt;/span>&lt;span class="c1">&lt;/span>&lt;span class="nx">array&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">splice&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">start&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">deleteCount&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="c1">// ä»startå¼€å§‹ï¼ŒåŒ…æ‹¬startï¼Œåˆ é™¤deletecountä¸ªå…ƒç´ 
&lt;/span>&lt;span class="c1">&lt;/span>
&lt;span class="nx">array&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">splice&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">start&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">deleteCount&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">item1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">item2&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="p">...)&lt;/span>
&lt;span class="c1">// åˆ é™¤å…ƒç´ ï¼Œå¹¶ä¸”ä»startä½ç½®å¼€å§‹æ·»åŠ è‹¥å¹²ä¸ªå…ƒç´ 
&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>3ã€&lt;code>String.prototype.slice&lt;/code>:æ–¹æ³•æå–ä¸€ä¸ªå­—ç¬¦ä¸²çš„ä¸€éƒ¨åˆ†ï¼Œå¹¶è¿”å›ä¸€æ–°çš„å­—ç¬¦ä¸²ã€‚ä¸ä¿®æ”¹åŸå­—ç¬¦ä¸²ã€‚&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-js" data-lang="js">&lt;span class="nx">str&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">slice&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">beginSlice&lt;/span>&lt;span class="p">[,&lt;/span> &lt;span class="nx">endSlice&lt;/span>&lt;span class="p">])&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;code>beginSlice&lt;/code>&lt;br>
ä»è¯¥ç´¢å¼•ï¼ˆä»¥ 0 ä¸ºåŸºæ•°ï¼‰å¤„å¼€å§‹æå–åŸå­—ç¬¦ä¸²ä¸­çš„å­—ç¬¦ã€‚å¦‚æœå€¼ä¸ºè´Ÿæ•°ï¼Œä¼šè¢«å½“åš sourceLength + beginSlice çœ‹å¾…ï¼Œè¿™é‡Œçš„ sourceLength æ˜¯å­—ç¬¦ä¸²çš„é•¿åº¦ (ä¾‹å¦‚ï¼Œ å¦‚æœ beginSlice æ˜¯ -3 åˆ™çœ‹ä½œæ˜¯: sourceLength - 3)&lt;br>
&lt;code>endSlice&lt;/code>&lt;br>
å¯é€‰ã€‚åœ¨è¯¥ç´¢å¼•ï¼ˆä»¥ 0 ä¸ºåŸºæ•°ï¼‰å¤„ç»“æŸæå–å­—ç¬¦ä¸²ã€‚å¦‚æœçœç•¥è¯¥å‚æ•°ï¼Œslice ä¼šä¸€ç›´æå–åˆ°å­—ç¬¦ä¸²æœ«å°¾ã€‚å¦‚æœè¯¥å‚æ•°ä¸ºè´Ÿæ•°ï¼Œåˆ™è¢«çœ‹ä½œæ˜¯ sourceLength + endSliceï¼Œè¿™é‡Œçš„ sourceLength å°±æ˜¯å­—ç¬¦ä¸²çš„é•¿åº¦(ä¾‹å¦‚ï¼Œå¦‚æœ endSlice æ˜¯ -3ï¼Œåˆ™æ˜¯, sourceLength - 3)ã€‚&lt;br>
è¿™ä¹ˆçœ‹çš„è¯å…¶å®ä»–å’Œ Array çš„ç”¨æ³•åŸºæœ¬ä¸€æ ·&lt;br>
4ã€&lt;code>String.prototype.split&lt;/code>:æ–¹æ³•ä½¿ç”¨æŒ‡å®šçš„åˆ†éš”ç¬¦å­—ç¬¦ä¸²å°†ä¸€ä¸ª String å¯¹è±¡åˆ†å‰²æˆå­—ç¬¦ä¸²æ•°ç»„ï¼Œä»¥å°†å­—ç¬¦ä¸²åˆ†éš”ä¸ºå­å­—ç¬¦ä¸²ï¼Œä»¥ç¡®å®šæ¯ä¸ªæ‹†åˆ†çš„ä½ç½®ã€‚&lt;br>
&lt;code>æœ€åæ€»ç»“ä¸€ä¸‹ï¼ŒArrayå’ŒStringéƒ½æœ‰sliceæ–¹æ³•ï¼Œä¸»è¦ç”¨æ¥æˆªå–æŒ‡å®šé•¿åº¦ï¼ŒArrayæœ‰ä¸€ä¸ªspliceæ–¹æ³•ç”¨æ¥åˆ é™¤ã€æ·»åŠ å…ƒç´ ï¼Œè€ŒStringæœ‰ä¸€ä¸ªslitæ–¹æ³•ç”¨æ¥æŠŠå­—ç¬¦ä¸²åˆ†å‰²æˆæ•°ç»„ã€‚&lt;/code>&lt;/p>
&lt;h2 id="update-20180323">update 2018.03.23&lt;/h2>
&lt;h2 id="3promise-è¿”å›å€¼çš„é—®é¢˜">3ã€Promise è¿”å›å€¼çš„é—®é¢˜&lt;/h2>
&lt;p>è¢«é¢è¯•å®˜é—®åˆ° promise è¿ç»­ç‚¹ thenï¼Œç¬¬äºŒä¸ªç‚¹ then ä¼šè¿”å›ä»€ä¹ˆï¼Œæˆ‘å¾ˆè‡ªä¿¡çš„è¯´å¦‚æœè‡ªå·±ä¸æŒ‡å®šè¿”å›å€¼çš„è¯æ˜¯ resolve çš„å€¼ï¼Œäº‹å®ä¸Šæˆ‘é”™äº†ï¼š&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-js" data-lang="js">&lt;span class="nb">Promise&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">resolve&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="p">.&lt;/span>&lt;span class="nx">then&lt;/span>&lt;span class="p">((&lt;/span>&lt;span class="nx">rsp&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">rsp&lt;/span>&lt;span class="p">))&lt;/span> &lt;span class="c1">// 1
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="p">.&lt;/span>&lt;span class="nx">then&lt;/span>&lt;span class="p">((&lt;/span>&lt;span class="nx">rsp&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">rsp&lt;/span>&lt;span class="p">));&lt;/span> &lt;span class="c1">// undefined
&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>so then å‡½æ•° callback æ¥æ”¶çš„å€¼åº”è¯¥æ˜¯ä¸Šä¸€ä¸ª thencallback è¿”å›çš„å€¼ã€‚&lt;/p>
&lt;h2 id="4è‡ªå·±å®ç°ä¸€ä¸ª-co">4ã€è‡ªå·±å®ç°ä¸€ä¸ª co&lt;/h2>
&lt;p>ä¸‹é¢æ˜¯æˆ‘ä¸€ä¸ªç®€å•çš„å®ç°ï¼Œä¸»è¦å°±æ˜¯è¦åšåˆ°ä¸æ–­çš„é€’å½’è°ƒç”¨ï¼š&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-js" data-lang="js">&lt;span class="kd">function&lt;/span> &lt;span class="nx">co&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">gn&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="nx">gn&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">gn&lt;/span>&lt;span class="p">();&lt;/span>
&lt;span class="k">return&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="nb">Promise&lt;/span>&lt;span class="p">((&lt;/span>&lt;span class="nx">resolve&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">reject&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="nx">next&lt;/span>&lt;span class="p">();&lt;/span>
&lt;span class="kd">function&lt;/span> &lt;span class="nx">next&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">data&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="kr">const&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="nx">done&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">value&lt;/span> &lt;span class="p">}&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">gn&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">next&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">data&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">done&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="k">return&lt;/span> &lt;span class="nx">resolve&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">value&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="nx">value&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">then&lt;/span>&lt;span class="p">((&lt;/span>&lt;span class="nx">rsp&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="nx">next&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">rsp&lt;/span>&lt;span class="p">)).&lt;/span>&lt;span class="k">catch&lt;/span>&lt;span class="p">((&lt;/span>&lt;span class="nx">err&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="nx">reject&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">err&lt;/span>&lt;span class="p">));&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="p">});&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="kd">function&lt;/span>&lt;span class="o">*&lt;/span> &lt;span class="nx">test&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="kr">const&lt;/span> &lt;span class="nx">a&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">yield&lt;/span> &lt;span class="nb">Promise&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">resolve&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="kr">const&lt;/span> &lt;span class="nx">b&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">yield&lt;/span> &lt;span class="nb">Promise&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">resolve&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="k">return&lt;/span> &lt;span class="nx">a&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="nx">b&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="nx">co&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">test&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="p">.&lt;/span>&lt;span class="nx">then&lt;/span>&lt;span class="p">((&lt;/span>&lt;span class="nx">rsp&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">rsp&lt;/span>&lt;span class="p">))&lt;/span> &lt;span class="c1">// 3
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="p">.&lt;/span>&lt;span class="k">catch&lt;/span>&lt;span class="p">((&lt;/span>&lt;span class="nx">err&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">err&lt;/span>&lt;span class="p">));&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>å»ºè®®è¿™ç§é—®é¢˜æœ€å¥½èƒ½è®©ä¸Šæœºå†™ä¸€ä¸‹ä»£ç ï¼Œè®©æˆ‘å¹²æƒ³å’Œåœ¨çº¸ä¸Šå†™å®åœ¨æ˜¯æœ‰ç‚¹å›°éš¾ã€‚&lt;/p>
&lt;h2 id="5prototype-çš„é—®é¢˜">5ã€prototype çš„é—®é¢˜&lt;/h2>
&lt;p>ç°åœ¨æ‰å›æƒ³èµ·æ¥è‡ªå·±å…¨è¯´é”™äº†ï¼Œå½“æ—¶è¿˜ä¿¡èª“æ—¦æ—¦ï¼ŒçœŸæ˜¯ç¾æ„§,éƒ½æ˜¯è‡ªå·±çš„æƒ¯æ€§æ€ç»´ï¼Œæ²¡æœ‰æ³¨æ„åˆ°è¿™æ¬¡æ˜¯ç›´æ¥ä¿®æ”¹äº† prototype çš„æŒ‡å‘,è¯´åˆ°åº•è¿˜æ˜¯å¯¹è±¡å¼•ç”¨çš„é—®é¢˜&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-js" data-lang="js">&lt;span class="kd">function&lt;/span> &lt;span class="nx">A&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{}&lt;/span>
&lt;span class="kd">function&lt;/span> &lt;span class="nx">B&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">hello&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;hello&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="kd">var&lt;/span> &lt;span class="nx">a&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="nx">A&lt;/span>&lt;span class="p">();&lt;/span>
&lt;span class="nx">A&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">prototype&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="nx">B&lt;/span>&lt;span class="p">();&lt;/span>
&lt;span class="kd">var&lt;/span> &lt;span class="nx">a1&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="nx">A&lt;/span>&lt;span class="p">();&lt;/span>
&lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">a&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">hello&lt;/span>&lt;span class="p">);&lt;/span> &lt;span class="c1">// undefined
&lt;/span>&lt;span class="c1">&lt;/span>&lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">a1&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">hello&lt;/span>&lt;span class="p">);&lt;/span> &lt;span class="c1">// hello
&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ç°åœ¨ä¸€çœ‹ï¼Œæ„Ÿè§‰è¿™æ¬¡é¢è¯•åˆå‡‰äº†ã€‚&lt;/p>
&lt;h2 id="6å¦‚ä½•å®šä¹‰ä¸€ä¸ªçœŸæ­£çš„å¸¸é‡">6ã€å¦‚ä½•å®šä¹‰ä¸€ä¸ªçœŸæ­£çš„å¸¸é‡&lt;/h2>
&lt;p>å¤§å®¶éƒ½çŸ¥é“ ES6 å¼•å…¥äº† const è¡¨ç¤ºå¸¸é‡ï¼Œä½†æ˜¯å¤§å®¶ä¹ŸçŸ¥é“ const å¹¶ä¸èƒ½é˜²æ­¢ç”¨æˆ·ä¿®æ”¹å¯¹è±¡çš„å±æ€§ï¼Œæ·»åŠ ã€åˆ é™¤å±æ€§ï¼Œé‚£ä¹ˆå¦‚ä½•å®šä¹‰ä¸€ä¸ªçœŸæ­£æ„ä¹‰ä¸Šçš„å¸¸é‡ï¼Œè¿™ä¸ªå¹¶æ²¡æœ‰ä»€ä¹ˆæŠ€æœ¯ä¸Šçš„å«é‡ï¼ˆå½“ç„¶æˆ‘ä¹Ÿè¯•ç€ä»å…¶ä»–æ–¹é¢å»å®ç°ï¼Œåƒæ˜¯ä»£ç†ä¹‹ç±»çš„ï¼Œç°åœ¨å…ˆä¸è¯´ï¼‰ï¼Œæ‰“å¼€çº¢å®ä¹¦ï¼Œç¿»åˆ°é«˜çº§æŠ€å·§-é˜²ç¯¡æ”¹å¯¹è±¡ï¼Œåœ¨è¿™é‡Œç»™å¤§å®¶ä»‹ç»äº†å‡ ä¸ªå¯¹è±¡çš„æ–¹æ³•ï¼š&lt;/p>
&lt;h3 id="61ä¸å¯æ‰©å±•å¯¹è±¡-å³æ— æ³•ä¸ºå¯¹è±¡æ·»åŠ å±æ€§">6.1ã€ä¸å¯æ‰©å±•å¯¹è±¡-å³æ— æ³•ä¸ºå¯¹è±¡æ·»åŠ å±æ€§ï¼›&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-js" data-lang="js">&lt;span class="kd">var&lt;/span> &lt;span class="nx">a&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="nx">name&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s2">&amp;#34;johnny&amp;#34;&lt;/span> &lt;span class="p">};&lt;/span>
&lt;span class="nb">Object&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">preventExtensions&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">a&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="nx">a&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">age&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">10&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">a&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">age&lt;/span>&lt;span class="p">);&lt;/span> &lt;span class="c1">// undefined
&lt;/span>&lt;span class="c1">&lt;/span>
&lt;span class="nx">a&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">name&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;saber&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">a&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">name&lt;/span>&lt;span class="p">);&lt;/span> &lt;span class="c1">// saber
&lt;/span>&lt;span class="c1">&lt;/span>
&lt;span class="k">delete&lt;/span> &lt;span class="nx">a&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">name&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">a&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">name&lt;/span>&lt;span class="p">);&lt;/span> &lt;span class="c1">// undefined
&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="62å¯†å°çš„å¯¹è±¡-ä¸èƒ½æ·»åŠ åˆ é™¤å±æ€§">6.2ã€å¯†å°çš„å¯¹è±¡-ä¸èƒ½æ·»åŠ ã€åˆ é™¤å±æ€§ï¼š&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-js" data-lang="js">&lt;span class="kd">var&lt;/span> &lt;span class="nx">a&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="nx">name&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s2">&amp;#34;johnny&amp;#34;&lt;/span> &lt;span class="p">};&lt;/span>
&lt;span class="nb">Object&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">seal&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">a&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="nx">a&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">age&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">10&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">a&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">age&lt;/span>&lt;span class="p">);&lt;/span> &lt;span class="c1">// undefined
&lt;/span>&lt;span class="c1">&lt;/span>
&lt;span class="nx">a&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">name&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;saber&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">a&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">name&lt;/span>&lt;span class="p">);&lt;/span> &lt;span class="c1">// saber
&lt;/span>&lt;span class="c1">&lt;/span>
&lt;span class="k">delete&lt;/span> &lt;span class="nx">a&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">name&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">a&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">name&lt;/span>&lt;span class="p">);&lt;/span> &lt;span class="c1">// saber
&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="63å†»ç»“çš„å¯¹è±¡-æ— æ³•æ·»åŠ åˆ é™¤ä¿®æ”¹å±æ€§çœŸæ­£çš„å¸¸é‡">6.3ã€å†»ç»“çš„å¯¹è±¡-æ— æ³•æ·»åŠ ã€åˆ é™¤ã€ä¿®æ”¹å±æ€§ï¼ŒçœŸæ­£çš„å¸¸é‡ï¼š&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-js" data-lang="js">&lt;span class="kd">var&lt;/span> &lt;span class="nx">a&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="nx">name&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s2">&amp;#34;johnny&amp;#34;&lt;/span> &lt;span class="p">};&lt;/span>
&lt;span class="nb">Object&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">freeze&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">a&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="nx">a&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">age&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">10&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">a&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">age&lt;/span>&lt;span class="p">);&lt;/span> &lt;span class="c1">// undefined
&lt;/span>&lt;span class="c1">&lt;/span>
&lt;span class="nx">a&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">name&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;saber&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">a&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">name&lt;/span>&lt;span class="p">);&lt;/span> &lt;span class="c1">// johnny
&lt;/span>&lt;span class="c1">&lt;/span>
&lt;span class="k">delete&lt;/span> &lt;span class="nx">a&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">name&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">a&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">name&lt;/span>&lt;span class="p">);&lt;/span> &lt;span class="c1">// johnny
&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ä¸Šé¢æ·»åŠ ã€åˆ é™¤ã€ä¿®æ”¹æ“ä½œåœ¨éä¸¥æ ¼æ¨¡å¼ä¸‹ä¸ºä¸ç”Ÿæ•ˆï¼Œåœ¨ä¸¥æ ¼æ¨¡å¼ä¸‹ä¼šæŠ¥é”™ï¼Œå»ºè®®å¤§å®¶å¼€å¯ä¸¥æ ¼æ¨¡å¼ã€‚&lt;/p></description></item><item><title>å­¦ä¹ RxJS</title><link>https://jo-hnny.github.io/p/%E5%AD%A6%E4%B9%A0rxjs/</link><pubDate>Wed, 18 Sep 2019 20:58:39 +0800</pubDate><guid>https://jo-hnny.github.io/p/%E5%AD%A6%E4%B9%A0rxjs/</guid><description>&lt;img src="https://picsum.photos/seed/b950dc5fee90419792f927c90bc40a88/4096/2160" alt="Featured image of post å­¦ä¹ RxJS" />&lt;p>ä¸€ç›´æƒ³å­¦ä¹ ä¸€ä¸‹ RxJSï¼Œä»ä¸€å¼€å§‹å­¦ä¹  android çš„æ—¶å€™å°±å¬è¯´è¿‡ RxJAVAï¼Œä½†æ˜¯ä¹‹å‰æ¯æ¬¡éƒ½çœ‹ä¸ä¸‹å»ï¼Œä¸å¤ªæ¸…æ¥šè¿™ä¸ªæ˜¯å¹²ä»€ä¹ˆçš„ã€‚ä»Šå¤©ä¸‹å®šå†³å¿ƒè¦å¥½å¥½çœ‹ä¸€çœ‹ã€‚&lt;/p>
&lt;h2 id="1observable-å¯è§‚å¯Ÿå¯¹è±¡">1ã€Observable (å¯è§‚å¯Ÿå¯¹è±¡)&lt;/h2>
&lt;p>RxJS çš„æ ¸å¿ƒæ¦‚å¿µå°±æ˜¯è§‚å¯Ÿè€…æ¨¡å¼ï¼Œä¹Ÿå°±æ˜¯ä¸€ä¸ªå¯è§‚å¯Ÿå¯¹è±¡ä¼šæ¨é€æ•°æ®ï¼Œä¸€ä¸ªè§‚å¯Ÿè€…é€šè¿‡è®¢é˜…æ¥å—è¿™äº›æ•°æ®ï¼Œ&lt;br>
åˆ›å»ºä¸€ä¸ªå¯è§‚å¯Ÿå¯¹è±¡&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-js" data-lang="js">&lt;span class="kd">var&lt;/span> &lt;span class="nx">observable&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">Rx&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Observable&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">create&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kd">function&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">observer&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="nx">observer&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">next&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="nx">observer&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">next&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="nx">observer&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">next&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">3&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="nx">setTimeout&lt;/span>&lt;span class="p">(()&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="nx">observer&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">next&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">4&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="nx">observer&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">complete&lt;/span>&lt;span class="p">();&lt;/span>
&lt;span class="p">},&lt;/span> &lt;span class="mi">1000&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="p">});&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>æ¯ä¸ª next()ä¼šå‘å¤–æŠ›å‡ºä¸€ä¸ªæ•°æ®&lt;/p>
&lt;h2 id="2observer-è§‚å¯Ÿè€…">2ã€Observer (è§‚å¯Ÿè€…)&lt;/h2>
&lt;p>è§‚å¯Ÿè€…é€šè¿‡è®¢é˜…æ¥æ‹‰å–å¯è§‚å¯Ÿå¯¹è±¡çš„æ•°æ®ã€‚&lt;br>
åˆ›å»ºä¸€ä¸ªè§‚å¯Ÿè€…&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-js" data-lang="js">&lt;span class="kd">var&lt;/span> &lt;span class="nx">observer&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="nx">next&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">x&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;Observer got a next value: &amp;#34;&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="nx">x&lt;/span>&lt;span class="p">),&lt;/span>
&lt;span class="nx">error&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">err&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">error&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;Observer got an error: &amp;#34;&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="nx">err&lt;/span>&lt;span class="p">),&lt;/span>
&lt;span class="nx">complete&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="p">()&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;Observer got a complete notification&amp;#34;&lt;/span>&lt;span class="p">),&lt;/span>
&lt;span class="p">};&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>è§‚å¯Ÿè€…å¯¹è±¡ä¸­ä½ å¯ä»¥çœç•¥æŸä¸€ä¸ªå‡½æ•°ï¼Œå¦å¤–è§‚å¯Ÿè€…ä¹Ÿå¯ä»¥åªæ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œé‚£ä¹ˆå®ƒå¯¹åº”çš„å°±æ˜¯ next é€šçŸ¥çš„å¤„ç†æ–¹æ³•ã€‚&lt;/p>
&lt;h2 id="3subscription-è®¢é˜…">3ã€Subscription (è®¢é˜…)&lt;/h2>
&lt;p>ä¸Šè¾¹æˆ‘ä»¬æœ‰äº†ä¸€ä¸ªå¯è§‚å¯Ÿå¯¹è±¡å’Œä»¥ä¸€ä¸ªå¯è§‚å¯Ÿè€…ï¼Œé‚£ä¹ˆç°åœ¨æˆ‘ä»¬å°±éœ€è¦ä½¿ç”¨è®¢é˜…å°†ä»–ä»¬è”ç³»èµ·æ¥&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-js" data-lang="js">&lt;span class="kd">var&lt;/span> &lt;span class="nx">subscription&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">observable&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">subscribe&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">observer&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="c1">// Observer got a next value: 1
&lt;/span>&lt;span class="c1">// Observer got a next value: 2
&lt;/span>&lt;span class="c1">// Observer got a next value: 3
&lt;/span>&lt;span class="c1">// Observer got a next value: 4
&lt;/span>&lt;span class="c1">// Observer got a complete notification
&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>å½“ä½ è®¢é˜…çš„æ—¶å€™ï¼Œè§‚å¯Ÿè€…å°±å¼€å§‹æ‹‰å–æ•°æ®äº†ï¼ŒåŒæ—¶ä¼šå¾—åˆ°ä¸€ä¸ª Subscription å¯¹è±¡,å®ƒæœ‰ä¸€ä¸ª&lt;code>unsubscribe()&lt;/code>å‡½æ•°å¯ä»¥å–æ¶ˆè®¢é˜…ï¼Œè¿˜æœ‰ä¸€ä¸ª&lt;code>add()&lt;/code>æ–¹æ³•å¯ä»¥æŠŠå¦ä¸€ä¸ª Subscription å¯¹è±¡åˆå¹¶åˆ°è‡ªå·±èº«ä¸Šï¼Œä»¥åŠä¸€ä¸ª&lt;code>remove(otherSubscription)&lt;/code> æ–¹æ³•ï¼Œç”¨æ¥æ’¤é”€ä¸€ä¸ªå·²æ·»åŠ çš„å­ Subscriptionã€‚&lt;/p>
&lt;p>ä¸Šè¾¹å°±æ˜¯ RxJS çš„åŸºæœ¬æ¦‚å¿µäº†ï¼Œä¸‹è¾¹ä¼šè®²ä¸€äº›å…¶å®ƒçš„æ‰©å±•&lt;/p>
&lt;h2 id="4subject-ä¸»ä½“">4ã€Subject (ä¸»ä½“)&lt;/h2>
&lt;p>subject å³æ˜¯ Observableï¼Œåˆæ˜¯ Observer&lt;/p>
&lt;h3 id="ä½œä¸º-observableå¯è§‚å¯Ÿå¯¹è±¡">ä½œä¸º Observableï¼ˆå¯è§‚å¯Ÿå¯¹è±¡ï¼‰&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-js" data-lang="js">&lt;span class="kd">var&lt;/span> &lt;span class="nx">subject&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="nx">Rx&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Subject&lt;/span>&lt;span class="p">();&lt;/span>
&lt;span class="nx">subject&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">subscribe&lt;/span>&lt;span class="p">({&lt;/span>
&lt;span class="nx">next&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">v&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;observerA: &amp;#34;&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="nx">v&lt;/span>&lt;span class="p">),&lt;/span>
&lt;span class="p">});&lt;/span>
&lt;span class="nx">subject&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">subscribe&lt;/span>&lt;span class="p">({&lt;/span>
&lt;span class="nx">next&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">v&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;observerB: &amp;#34;&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="nx">v&lt;/span>&lt;span class="p">),&lt;/span>
&lt;span class="p">});&lt;/span>
&lt;span class="nx">subject&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">next&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="nx">subject&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">next&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="c1">// æ‰“å°ç»“æœ:
&lt;/span>&lt;span class="c1">&lt;/span>
&lt;span class="cm">/*
&lt;/span>&lt;span class="cm">observerA: 1
&lt;/span>&lt;span class="cm">observerB: 1
&lt;/span>&lt;span class="cm">observerA: 2
&lt;/span>&lt;span class="cm">observerB: 2
&lt;/span>&lt;span class="cm">*/&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="ä½œä¸º-observerè§‚å¯Ÿè€…">ä½œä¸º Observerï¼ˆè§‚å¯Ÿè€…ï¼‰&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-js" data-lang="js">&lt;span class="kd">var&lt;/span> &lt;span class="nx">subject&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="nx">Rx&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Subject&lt;/span>&lt;span class="p">();&lt;/span>
&lt;span class="nx">subject&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">subscribe&lt;/span>&lt;span class="p">({&lt;/span>
&lt;span class="nx">next&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">v&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;observerA: &amp;#34;&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="nx">v&lt;/span>&lt;span class="p">),&lt;/span>
&lt;span class="p">});&lt;/span>
&lt;span class="nx">subject&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">subscribe&lt;/span>&lt;span class="p">({&lt;/span>
&lt;span class="nx">next&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">v&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;observerB: &amp;#34;&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="nx">v&lt;/span>&lt;span class="p">),&lt;/span>
&lt;span class="p">});&lt;/span>
&lt;span class="kd">var&lt;/span> &lt;span class="nx">observable&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">Rx&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Observable&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">from&lt;/span>&lt;span class="p">([&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="p">]);&lt;/span>
&lt;span class="nx">observable&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">subscribe&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">subject&lt;/span>&lt;span class="p">);&lt;/span> &lt;span class="c1">// ä½ å¯ä»¥æä¾›ä¸€ä¸ª Subject è¿›è¡Œè®¢é˜…
&lt;/span>&lt;span class="c1">&lt;/span>
&lt;span class="c1">// æ‰“å°ç»“æœ
&lt;/span>&lt;span class="c1">&lt;/span>
&lt;span class="cm">/*
&lt;/span>&lt;span class="cm">observerA: 1
&lt;/span>&lt;span class="cm">observerB: 1
&lt;/span>&lt;span class="cm">observerA: 2
&lt;/span>&lt;span class="cm">observerB: 2
&lt;/span>&lt;span class="cm">observerA: 3
&lt;/span>&lt;span class="cm">observerB: 3
&lt;/span>&lt;span class="cm">*/&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="subject-çš„å¤šæ’­">subject çš„å¤šæ’­&lt;/h3>
&lt;p>å¤šæ’­è¿™ä¸ªæˆ‘æœ‰ç‚¹ä¸çŸ¥é“æ€ä¹ˆè¯´ï¼Œæ™®é€šçš„ observable æ˜¯å•æ’­çš„ï¼Œæ„æ€å°±æ˜¯ä¸¤ä¸ªè®¢é˜…æ˜¯äº’ä¸å½±å“ã€ç‹¬ç«‹çš„ï¼Œä¸€ä¸ªè®¢é˜…å®Œæ¯•ä¹‹åå†è¿›è¡Œä¸‹ä¸€ä¸ªè®¢é˜…ï¼Œä½†æ˜¯ subject æ˜¯å¤šæ’­çš„ï¼Œä¸‹è¾¹é€šè¿‡ä»£ç çœ‹ä¸€ä¸‹ä»–ä»¬çš„åŒºåˆ«ï¼š&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-js" data-lang="js">&lt;span class="c1">// æ™®é€šobservableå•æ’­
&lt;/span>&lt;span class="c1">&lt;/span>&lt;span class="kr">const&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="nx">Observable&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">Subject&lt;/span> &lt;span class="p">}&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">require&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;rxjs&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="kr">const&lt;/span> &lt;span class="nx">observable&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">Observable&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">create&lt;/span>&lt;span class="p">((&lt;/span>&lt;span class="nx">observer&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="nx">observer&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">next&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="nx">observer&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">next&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="p">});&lt;/span>
&lt;span class="nx">observable&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">subscribe&lt;/span>&lt;span class="p">((&lt;/span>&lt;span class="nx">k&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;from observer a:&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">k&lt;/span>&lt;span class="p">));&lt;/span>
&lt;span class="nx">observable&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">subscribe&lt;/span>&lt;span class="p">((&lt;/span>&lt;span class="nx">k&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;from observer b:&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">k&lt;/span>&lt;span class="p">));&lt;/span>
&lt;span class="c1">// from observer a: 1
&lt;/span>&lt;span class="c1">// from observer a: 2
&lt;/span>&lt;span class="c1">// from observer b: 1
&lt;/span>&lt;span class="c1">// from observer b: 2
&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>å¯ä»¥é€šè¿‡æ‰“å°ç»“æœçœ‹å‡ºæ¥ï¼Œä¸¤ä¸ªè®¢é˜…æ˜¯ç‹¬ç«‹çš„ï¼Œå…ˆæ‰“å°å®Œäº† aï¼Œå†æ‰“å°å®Œäº† bã€‚&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-js" data-lang="js">&lt;span class="kr">const&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="nx">Observable&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">Subject&lt;/span> &lt;span class="p">}&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">require&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;rxjs&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="kr">const&lt;/span> &lt;span class="nx">subject&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="nx">Subject&lt;/span>&lt;span class="p">();&lt;/span>
&lt;span class="kr">const&lt;/span> &lt;span class="nx">observable&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">Observable&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">create&lt;/span>&lt;span class="p">((&lt;/span>&lt;span class="nx">observer&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="nx">observer&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">next&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="nx">observer&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">next&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="p">});&lt;/span>
&lt;span class="nx">subject&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">subscribe&lt;/span>&lt;span class="p">((&lt;/span>&lt;span class="nx">k&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;from observer a:&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">k&lt;/span>&lt;span class="p">));&lt;/span>
&lt;span class="nx">subject&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">subscribe&lt;/span>&lt;span class="p">((&lt;/span>&lt;span class="nx">k&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;from observer b:&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">k&lt;/span>&lt;span class="p">));&lt;/span>
&lt;span class="nx">observable&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">subscribe&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">subject&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="c1">// from observer a: 1
&lt;/span>&lt;span class="c1">// from observer b: 1
&lt;/span>&lt;span class="c1">// from observer a: 2
&lt;/span>&lt;span class="c1">// from observer b: 2
&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ä¸¤ä¸ªè®¢é˜…æ˜¯åŒæ—¶æ‰§è¡Œçš„ã€‚&lt;/p>
&lt;p>å¦å¤– subject è¿˜æœ‰å‡ ä¸ªå˜ç§ï¼Œæˆ‘å›å¤´å†è¡¥å……ã€‚&lt;/p>
&lt;p>è¿™ä¸€æ¬¡çš„å…ˆè®²åˆ°è¿™å§ï¼Œrxjs çš„ä¸œè¥¿å¥½å¤šï¼Œå¤´ç—›ï¼Œä¸‹æ¬¡æ›´æ–° observable çš„å‡ ç§åˆ›å»ºæ–¹æ³•ä»¥åŠå¸¸ç”¨çš„æ“ä½œç¬¦&lt;/p>
&lt;h2 id="5ä»Šå¤©è¡¥å……-observable-çš„å‡ ç§åˆ›å»ºæ–¹æ³•">5ã€ä»Šå¤©è¡¥å…… observable çš„å‡ ç§åˆ›å»ºæ–¹æ³•&lt;/h2>
&lt;h3 id="æ¥è‡ªä¸€ä¸ªæˆ–å¤šä¸ªå€¼">æ¥è‡ªä¸€ä¸ªæˆ–å¤šä¸ªå€¼&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-js" data-lang="js">&lt;span class="nx">Rx&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Observable&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="k">of&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;foo&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;bar&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="æ¥è‡ªæ•°ç»„">æ¥è‡ªæ•°ç»„&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-js" data-lang="js">&lt;span class="nx">Rx&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Observable&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">from&lt;/span>&lt;span class="p">([&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="p">]);&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="æ¥è‡ªäº‹ä»¶">æ¥è‡ªäº‹ä»¶&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-js" data-lang="js">&lt;span class="nx">Rx&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Observable&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">fromEvent&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nb">document&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">querySelector&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;button&amp;#34;&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="s2">&amp;#34;click&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="æ¥è‡ª-promise">æ¥è‡ª promise&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-js" data-lang="js">&lt;span class="nx">Rx&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Observable&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">fromPromise&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">fetch&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;/users&amp;#34;&lt;/span>&lt;span class="p">));&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="æ¥è‡ªå›è°ƒå‡½æ•°">æ¥è‡ªå›è°ƒå‡½æ•°&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-js" data-lang="js">&lt;span class="c1">// fs.exists = (path, cb(exists))
&lt;/span>&lt;span class="c1">&lt;/span>&lt;span class="kr">const&lt;/span> &lt;span class="nx">exists&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">Rx&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Observable&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">bindCallback&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">fs&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">exists&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="nx">exists&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;file.txt&amp;#34;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nx">subscribe&lt;/span>&lt;span class="p">((&lt;/span>&lt;span class="nx">exists&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span>
&lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;Does file exist?&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">exists&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="p">);&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="è‡ªå·±åˆ›å»º">è‡ªå·±åˆ›å»º&lt;/h3>
&lt;p>ä¸€å¼€å§‹è®²åˆ°å¾— observable éƒ½æ˜¯è¿™ç§è‡ªå·±åˆ›å»ºå¾—ã€‚&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-js" data-lang="js">&lt;span class="kd">var&lt;/span> &lt;span class="nx">myObservable&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="nx">Rx&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Subject&lt;/span>&lt;span class="p">();&lt;/span>
&lt;span class="nx">myObservable&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">subscribe&lt;/span>&lt;span class="p">((&lt;/span>&lt;span class="nx">value&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">value&lt;/span>&lt;span class="p">));&lt;/span>
&lt;span class="nx">myObservable&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">next&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;foo&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-js" data-lang="js">&lt;span class="kd">var&lt;/span> &lt;span class="nx">myObservable&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">Rx&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Observable&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">create&lt;/span>&lt;span class="p">((&lt;/span>&lt;span class="nx">observer&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="nx">observer&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">next&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;foo&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="nx">setTimeout&lt;/span>&lt;span class="p">(()&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="nx">observer&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">next&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;bar&amp;#34;&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="mi">1000&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="p">});&lt;/span>
&lt;span class="nx">myObservable&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">subscribe&lt;/span>&lt;span class="p">((&lt;/span>&lt;span class="nx">value&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">value&lt;/span>&lt;span class="p">));&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="6æ“ä½œç¬¦">6ã€æ“ä½œç¬¦&lt;/h2>
&lt;p>&lt;code>æ“ä½œç¬¦æ˜¯ Observable ç±»å‹ä¸Šçš„æ–¹æ³•ï¼Œæ¯”å¦‚ .map(...)ã€.filter(...)ã€.merge(...)ï¼Œç­‰ç­‰ã€‚å½“æ“ä½œç¬¦è¢«è°ƒç”¨æ—¶ï¼Œå®ƒä»¬ä¸ä¼šæ”¹å˜å·²ç»å­˜åœ¨çš„ Observable å®ä¾‹ã€‚ç›¸åï¼Œå®ƒä»¬è¿”å›ä¸€ä¸ªæ–°çš„ Observable ï¼Œå®ƒçš„ subscription é€»è¾‘åŸºäºç¬¬ä¸€ä¸ª Observable ã€‚&lt;/code>&lt;br>
çœ‹ç€çœ‹ç€å‘ç°å…¶å® RxJS çš„æ“ä½œç¬¦çš„æ¦‚å¿µå¾ˆå®½ï¼Œå¹¶ä¸æ­¢æˆ‘ä¸€å¼€å§‹ä»¥ä¸ºçš„&lt;code>map&lt;/code>ã€&lt;code>filter&lt;/code>è¿™äº›ä¸œè¥¿ï¼Œæ€»çš„æ¥è¯´å®ƒæŠŠæ“ä½œç¬¦åˆ†ä¸ºäº†å®ä¾‹æ“ä½œç¬¦å’Œé™æ€æ“ä½œç¬¦ï¼Œå’Œ js ä¸­çš„å®ä¾‹æ–¹æ³•ä¸é™æ€æ–¹æ³•çš„æ„æ€å·®ä¸å¤šã€‚&lt;br>
ç®€å•æ¥è¯´å®ä¾‹æ“ä½œç¬¦å°±æ˜¯&lt;code>Observable&lt;/code>å®ä¾‹ä¸Šçš„æ–¹æ³•ï¼Œæ¯”å¦‚&lt;code>map&lt;/code>ã€&lt;code>filter&lt;/code>ï¼Œè€Œé™æ€æ“ä½œç¬¦å°±æ˜¯&lt;code>Observable&lt;/code>ä¸ŠæŒ‚è½½çš„æ–¹æ³•ï¼Œæ¯”å¦‚å„ç§åˆ›å»º Observable å®ä¾‹çš„æ–¹æ³•&lt;code>create&lt;/code>ã€&lt;code>of&lt;/code>ã€&lt;code>from&lt;/code>&lt;/p></description></item><item><title>Nodejsè®²è§£åŒºå—é“¾åŸç†</title><link>https://jo-hnny.github.io/p/nodejs%E8%AE%B2%E8%A7%A3%E5%8C%BA%E5%9D%97%E9%93%BE%E5%8E%9F%E7%90%86/</link><pubDate>Wed, 18 Sep 2019 20:53:59 +0800</pubDate><guid>https://jo-hnny.github.io/p/nodejs%E8%AE%B2%E8%A7%A3%E5%8C%BA%E5%9D%97%E9%93%BE%E5%8E%9F%E7%90%86/</guid><description>&lt;img src="https://picsum.photos/seed/c6a1438cfc9d4682b65330ff7573994d/4096/2160" alt="Featured image of post Nodejsè®²è§£åŒºå—é“¾åŸç†" />&lt;h2 id="å‰è¨€">å‰è¨€&lt;/h2>
&lt;p>ä»Šå¤©åœ¨&lt;a class="link" href="https://www.youtube.com/watch?v=zVqczFZr124&amp;amp;feature=youtu.be" target="_blank" rel="noopener"
>YouTube&lt;/a>ä¸Šçœ‹åˆ°äº†ä¸€ä¸ªç³»åˆ—è§†é¢‘ï¼Œæ€»å…±ä¸‰é›†ï¼Œè®²è§£äº†æ€ä¹ˆç”¨ js å®ç°åŒºå—é“¾ï¼Œæ„Ÿè§‰æµ…æ˜¾æ˜“æ‡‚ï¼Œä¸ºäº†åŠ æ·±ç†è§£ï¼Œå‡­ç€è®°å¿†å’Œè‡ªå·±çš„ç†è§£å†æ¬¡è‡ªå·±å®ç°ä¸€éã€‚&lt;br>
ä»£ç æ€»å…±å®ç°äº†ä¸‰ä¸ªç±»ï¼Œ&lt;br>
1ã€&lt;code>Block&lt;/code>ç±»ç”¨äºç”ŸæˆåŒºå—å®ä¾‹ï¼Œä¸»è¦æ˜¯å­˜å‚¨ä¿¡æ¯ï¼Œç”Ÿæˆ hashï¼›&lt;br>
2ã€&lt;code>BlockChain&lt;/code>ç±»ç”¨äºå°†åŒºå—æ·»åŠ åˆ°é“¾ä¸Šï¼Œä»¥åŠæš´éœ²æ·»åŠ äº¤æ˜“è®°å½•ã€æŒ–çŸ¿ã€è·å–ç”¨æˆ·è´¦æˆ·èµ„é‡‘ã€æ ¡éªŒåŒºå—é“¾å®‰å…¨æ€§ç­‰æ–¹æ³•ã€‚&lt;br>
3ã€&lt;code>Transaction&lt;/code>ç±»ç”¨äºç”Ÿæˆäº¤æ˜“ä¿¡æ¯.&lt;/p>
&lt;h2 id="1block-ç±»">1ã€Block ç±»&lt;/h2>
&lt;p>åŒºå—é“¾å­—é¢æ„æ€ä¸Šç†è§£å°±æ˜¯åŒºå—æ„æˆçš„é“¾ï¼ŒåŒºå—ä¸»è¦æ˜¯å­˜å‚¨ç€ä¸€äº›ä¿¡æ¯ï¼Œå…¶ä¸­ä¸å¯æˆ–ç¼ºçš„æœ‰ä¸»ä½“ï¼Œå³äº¤æ˜“ä¿¡æ¯ï¼ˆå½“ç„¶æœ¬ç¯‡ä¸»è¦è®²çš„æ˜¯åŒºå—é“¾è´§å¸ï¼ŒåŒºå—é“¾ä¹Ÿå¯èƒ½ç”¨äºå…¶ä»–æ–¹é¢ï¼‰ï¼Œ
æ—¶é—´æˆ³ï¼Œå³åŒºå—ç”Ÿæˆæ—¶é—´ï¼Œä¸Šä¸€ä¸ªåŒºå—çš„å“ˆå¸Œå€¼ï¼Œæœ¬åŒºå—çš„å“ˆå¸Œå€¼ï¼ˆç”±ä¸Šä¸€ä¸ªåŒºå—çš„å“ˆå¸Œä¸æœ¬åŒºå—çš„æ•°æ®å…±åŒç”Ÿæˆï¼Œè¿™æ ·ï¼Œå½“ä¸Šä¸€ä¸ªåŒºå—è¢«ä¿®æ”¹ï¼Œé‚£ä¹ˆæœ¬åŒºå—çš„å“ˆå¸Œä¹Ÿéœ€è¦è¢«ä¿®æ”¹ï¼Œæ‰èƒ½ä¸ä¸Šä¸€ä¸ªåŒºå—çš„å“ˆå¸Œå¯¹åº”èµ·æ¥ï¼Œè¿™æ ·çš„è¯ä¿®æ”¹ä¿¡æ¯çš„äººéœ€è¦ä¿®æ”¹å¾€åæ‰€æœ‰åŒºå—çš„ä¿¡æ¯ï¼‰ã€‚&lt;br>
&lt;code>å…¶ä¸­å€¼å¾—æ³¨æ„çš„æ˜¯åœ¨åŒºå—é“¾ä¸­æœ‰ä¸€ä¸ªæŒ–çŸ¿çš„æ¦‚å¿µï¼Œè¿™ä¸ªæŒ–çŸ¿å°±æ˜¯é€šè¿‡è®¡ç®—ä½¿å¾—æœ¬åŒºå¿«çš„å“ˆå¸Œå€¼æ»¡è¶³é¢„è®¾çš„è¦æ±‚ï¼Œæ¯”å¦‚è¯´æ¯”ç‰¹å¸å°±æ˜¯è¦æ±‚ç”Ÿæˆçš„åŒºå—çš„å“ˆå¸Œå€¼çš„å‰å‡ ä½æ˜¯nä¸ª0ï¼Œè¿™ä¸ªnå°±ä»£è¡¨äº†æŒ–çŸ¿çš„éš¾åº¦ç³»æ•°ï¼Œæ¯”ç‰¹å¸ä¼šéšç€æ¯”ç‰¹å¸çš„äº§å‡ºä¸æ–­åŠ å¤§è¿™ä¸ªéš¾åº¦ç³»æ•°ï¼Œä½¿å¾—æŒ–çŸ¿å˜çš„è¶Šæ¥è¶Šéš¾&lt;/code>&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-js" data-lang="js">&lt;span class="kr">class&lt;/span> &lt;span class="nx">Block&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="cm">/**
&lt;/span>&lt;span class="cm"> *
&lt;/span>&lt;span class="cm"> * @param {Number} timestamp æ—¶é—´æˆ³
&lt;/span>&lt;span class="cm"> * @param {Array} transactions äº¤æ˜“ä¿¡æ¯
&lt;/span>&lt;span class="cm"> * @param {String} preHash ä¸Šä¸€ä¸ªåŒºå—çš„å“ˆå¸Œå€¼
&lt;/span>&lt;span class="cm"> * @param {Number} difficulty éš¾åº¦ç³»æ•°
&lt;/span>&lt;span class="cm"> */&lt;/span>
&lt;span class="nx">constructor&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">timestamp&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">transactions&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">preHash&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">difficulty&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="nb">Object&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">assign&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="k">this&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="nx">timestamp&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="nx">transactions&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="nx">preHash&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="nx">hash&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">getHash&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">difficulty&lt;/span>&lt;span class="p">),&lt;/span>
&lt;span class="p">});&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="nx">getHash&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">difficulty&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="kd">let&lt;/span> &lt;span class="nx">hash&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="kd">let&lt;/span> &lt;span class="nx">nonce&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="k">do&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="kr">const&lt;/span> &lt;span class="nx">msg&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="sb">`&lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">timestamp&lt;/span>&lt;span class="si">}${&lt;/span>&lt;span class="nx">JSON&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">stringify&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">data&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="si">}${&lt;/span>&lt;span class="nx">nonce&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="sb">`&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="nx">hash&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">crypto&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">createHash&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;sha256&amp;#34;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nx">update&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">msg&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nx">digest&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;hex&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="nx">nonce&lt;/span>&lt;span class="o">++&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="p">}&lt;/span> &lt;span class="k">while&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">hash&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">substr&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">difficulty&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">!==&lt;/span> &lt;span class="nb">Array&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">difficulty&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nx">fill&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nx">join&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;&amp;#34;&lt;/span>&lt;span class="p">));&lt;/span>
&lt;span class="k">return&lt;/span> &lt;span class="nx">hash&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="2blockchain-ç±»">2ã€BlockChain ç±»&lt;/h2>
&lt;p>BlockChain ç±»åœ¨ç”Ÿæˆå®ä¾‹çš„æ—¶å€™ä¼šæŠŠç¬¬ä¸€ä¸ªå…ƒåŒºå—æ”¾å…¥åˆ°é“¾ä¸­ï¼Œè¿™ä¸ªåŒºå—ä¸å­˜å‚¨ä»»ä½•æœ‰ç”¨çš„ä¿¡æ¯ï¼Œ
ä½¿ç”¨è€…å¯ä»¥å‘å®ä¾‹ä¸­æ·»åŠ äº¤æ˜“ä¿¡æ¯ï¼Œå®ä¾‹ä¼šæŠŠè¿™äº›äº¤æ˜“ä¿¡æ¯æš‚å­˜èµ·æ¥ï¼Œç›´åˆ°çŸ¿å·¥å¼€å§‹æŒ–çŸ¿ï¼ŒæŒ–çŸ¿æˆåŠŸåæ‰€æš‚å­˜çš„äº¤æ˜“ä¿¡æ¯å°±è¢«å†™å…¥äº†æ–°ç”Ÿæˆçš„åŒºå—ä¸­ï¼ŒåŒæ—¶ç»™äºˆçŸ¿å·¥çš„å¥–åŠ±ä¼šæš‚å­˜èµ·æ¥ï¼Œç›´åˆ°ä¸‹ä¸€ä¸ªåŒºå—ç”Ÿæˆï¼ŒçŸ¿å·¥å°±ç®—çœŸçš„æ”¶åˆ°äº†å¥–åŠ±ã€‚&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-js" data-lang="js">&lt;span class="kr">class&lt;/span> &lt;span class="nx">BlockChain&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="nx">constructor&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">chain&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">createGenesisBlock&lt;/span>&lt;span class="p">()];&lt;/span>
&lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">pendingTransactions&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[];&lt;/span> &lt;span class="c1">// æš‚å­˜äº¤æ˜“ä¿¡æ¯çš„åœ°æ–¹
&lt;/span>&lt;span class="c1">&lt;/span>
&lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">miningReward&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">100&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="c1">// ç»™ä¸çŸ¿å·¥çš„å¥–åŠ±
&lt;/span>&lt;span class="c1">&lt;/span>
&lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">difficulty&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="c1">// éš¾åº¦ç³»æ•°
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="p">}&lt;/span>
&lt;span class="nx">createGenesisBlock&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="k">return&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="nx">Block&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nb">Date&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">now&lt;/span>&lt;span class="p">(),&lt;/span> &lt;span class="p">[],&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="nx">lastBlock&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="k">return&lt;/span> &lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">chain&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">chain&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">length&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">];&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="nx">mine&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">miningRewardAddress&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="kr">const&lt;/span> &lt;span class="nx">preHash&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">lastBlock&lt;/span>&lt;span class="p">().&lt;/span>&lt;span class="nx">hash&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="kr">const&lt;/span> &lt;span class="nx">block&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="nx">Block&lt;/span>&lt;span class="p">(&lt;/span>
&lt;span class="nb">Date&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">now&lt;/span>&lt;span class="p">(),&lt;/span>
&lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">pendingTransactions&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="nx">preHash&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">difficulty&lt;/span>
&lt;span class="p">);&lt;/span>
&lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">chain&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">push&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">block&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">pendingTransactions&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[&lt;/span>
&lt;span class="k">new&lt;/span> &lt;span class="nx">Transaction&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kc">null&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">miningRewardAddress&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">miningReward&lt;/span>&lt;span class="p">),&lt;/span>
&lt;span class="p">];&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="nx">createTransactions&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">transaction&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="o">!&lt;/span>&lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">isChainValid&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="k">return&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">pendingTransactions&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">push&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">transaction&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="nx">isChainValid&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="c1">// æ ¡éªŒåŒºå—é“¾æ˜¯å¦æœªè¢«ä¿®æ”¹
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="kr">const&lt;/span> &lt;span class="nx">len&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">chain&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">length&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="k">for&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="kd">let&lt;/span> &lt;span class="nx">i&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="nx">i&lt;/span> &lt;span class="o">&amp;lt;&lt;/span> &lt;span class="nx">len&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="nx">i&lt;/span>&lt;span class="o">++&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="kr">const&lt;/span> &lt;span class="nx">curBlock&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">chain&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="nx">i&lt;/span>&lt;span class="p">];&lt;/span>
&lt;span class="kr">const&lt;/span> &lt;span class="nx">preBlock&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">chain&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="nx">i&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">];&lt;/span>
&lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">curBlock&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">hash&lt;/span> &lt;span class="o">!==&lt;/span> &lt;span class="nx">curBlock&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">getHash&lt;/span>&lt;span class="p">())&lt;/span> &lt;span class="k">return&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">curBlock&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">preHash&lt;/span> &lt;span class="o">!==&lt;/span> &lt;span class="nx">preBlock&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">hash&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="k">return&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="k">return&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="nx">getBalanceOfAddress&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">address&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="c1">// è·å¾—æŸä¸ªè´¦æˆ·çš„ä½™é¢
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="kd">let&lt;/span> &lt;span class="nx">balance&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">chain&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">forEach&lt;/span>&lt;span class="p">(({&lt;/span> &lt;span class="nx">transactions&lt;/span> &lt;span class="p">})&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="nx">transactions&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">forEach&lt;/span>&lt;span class="p">(({&lt;/span> &lt;span class="nx">fromAddress&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">toAddress&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">amount&lt;/span> &lt;span class="p">})&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">fromAddress&lt;/span> &lt;span class="o">===&lt;/span> &lt;span class="nx">address&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="nx">balance&lt;/span> &lt;span class="o">-=&lt;/span> &lt;span class="nx">amount&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">toAddress&lt;/span> &lt;span class="o">===&lt;/span> &lt;span class="nx">address&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="nx">balance&lt;/span> &lt;span class="o">+=&lt;/span> &lt;span class="nx">amount&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="p">});&lt;/span>
&lt;span class="p">});&lt;/span>
&lt;span class="k">return&lt;/span> &lt;span class="nx">balance&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="3transaction-ç±»">3ã€Transaction ç±»&lt;/h2>
&lt;p>Transaction ç±»æ²¡ä»€ä¹ˆå¥½è¯´çš„ï¼Œå°±æ˜¯ç”Ÿæˆäº¤æ˜“ä¿¡æ¯ã€‚&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-js" data-lang="js">&lt;span class="kr">class&lt;/span> &lt;span class="nx">Transaction&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="nx">constructor&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">fromAddress&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">toAddress&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">amount&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="nb">Object&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">assign&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="k">this&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="nx">fromAddress&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="nx">toAddress&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="nx">amount&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="p">});&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="åè¯­">åè¯­&lt;/h2>
&lt;p>å‰è¨€è¿˜æ˜¯è¦æ­ä¸€ä¸‹åè¯­çš„ï¼Œä¸Šé¢åªæ˜¯ç”¨ä»£ç æ¥è®²äº†ä¸€ä¸‹åŒºå—é“¾çš„åŸç†ï¼ŒçœŸæ­£çš„åŒºå—é“¾ç»†èŠ‚è¦æ›´åŠ å¤æ‚ï¼Œä¹Ÿè¿˜æœ‰å…¶å®ƒçš„ä¸œè¥¿ï¼Œæ¯”å¦‚è¯´å¾ˆé‡è¦çš„ p2pï¼Œå¯¹ p2p è¿˜æ˜¯å¾ˆæœ‰å…´è¶£çš„ï¼Œåé¢æœ‰æ—¶é—´äº†å†å­¦ä¹ ä¸€ä¸‹ã€‚&lt;br>
å¦å¤–ï¼Œæˆ‘è¿˜æ˜¯å¾ˆçœ‹å¥½åŒºå—é“¾çš„ï¼Œå®ƒçš„ä½œç”¨è¿œä¸æ­¢è¢«ç”¨æ¥åœˆé’±å‰²éŸ­èœï¼Œæˆ‘ä¹Ÿä¹°è¿‡ EOSï¼Œå½“ç„¶æ˜¯äºäº†ï¼Œä½†æ˜¯æˆ‘è¿˜æ˜¯å¾ˆçœ‹å¥½å®ƒä½œä¸ºåŒºå—é“¾å¹³å°çš„å‡ºå‘ç‚¹ã€‚&lt;/p>
&lt;h2 id="æ·»ä¸€ä¸ªæ‰€æœ‰ä»£ç ä»£ç ä¸å¤šå°±ä¸æ–°å»ºä»“åº“äº†">æ·»ä¸€ä¸ªæ‰€æœ‰ä»£ç ï¼ˆä»£ç ä¸å¤šå°±ä¸æ–°å»ºä»“åº“äº†ï¼‰&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-js" data-lang="js">&lt;span class="kr">const&lt;/span> &lt;span class="nx">crypto&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">require&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;crypto&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="kr">class&lt;/span> &lt;span class="nx">Block&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="cm">/**
&lt;/span>&lt;span class="cm"> *
&lt;/span>&lt;span class="cm"> * @param {Number} timestamp æ—¶é—´æˆ³
&lt;/span>&lt;span class="cm"> * @param {Array} transactions äº¤æ˜“ä¿¡æ¯
&lt;/span>&lt;span class="cm"> * @param {String} preHash ä¸Šä¸€ä¸ªåŒºå—çš„å“ˆå¸Œå€¼
&lt;/span>&lt;span class="cm"> * @param {Number} difficulty éš¾åº¦ç³»æ•°
&lt;/span>&lt;span class="cm"> */&lt;/span>
&lt;span class="nx">constructor&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">timestamp&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">transactions&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">preHash&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">difficulty&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="nb">Object&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">assign&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="k">this&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="nx">timestamp&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="nx">transactions&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="nx">preHash&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="nx">hash&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">getHash&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">difficulty&lt;/span>&lt;span class="p">),&lt;/span>
&lt;span class="p">});&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="nx">getHash&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">difficulty&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="c1">// è®¡ç®—å“ˆå¸Œç›´åˆ°æ»¡è¶³è¦æ±‚
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="kd">let&lt;/span> &lt;span class="nx">hash&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="kd">let&lt;/span> &lt;span class="nx">nonce&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="k">do&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="kr">const&lt;/span> &lt;span class="nx">msg&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="sb">`&lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">timestamp&lt;/span>&lt;span class="si">}${&lt;/span>&lt;span class="nx">JSON&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">stringify&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">data&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="si">}${&lt;/span>&lt;span class="nx">nonce&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="sb">`&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="nx">hash&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">crypto&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">createHash&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;sha256&amp;#34;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nx">update&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">msg&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nx">digest&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;hex&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="nx">nonce&lt;/span>&lt;span class="o">++&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="p">}&lt;/span> &lt;span class="k">while&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">hash&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">substr&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">difficulty&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">!==&lt;/span> &lt;span class="nb">Array&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">difficulty&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nx">fill&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nx">join&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;&amp;#34;&lt;/span>&lt;span class="p">));&lt;/span>
&lt;span class="k">return&lt;/span> &lt;span class="nx">hash&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="kr">class&lt;/span> &lt;span class="nx">BlockChain&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="nx">constructor&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">chain&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">createGenesisBlock&lt;/span>&lt;span class="p">()];&lt;/span>
&lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">pendingTransactions&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[];&lt;/span> &lt;span class="c1">// æš‚å­˜äº¤æ˜“ä¿¡æ¯çš„åœ°æ–¹
&lt;/span>&lt;span class="c1">&lt;/span>
&lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">miningReward&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">100&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="c1">// ç»™ä¸çŸ¿å·¥çš„å¥–åŠ±
&lt;/span>&lt;span class="c1">&lt;/span>
&lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">difficulty&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="c1">// éš¾åº¦ç³»æ•°
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="p">}&lt;/span>
&lt;span class="nx">createGenesisBlock&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="k">return&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="nx">Block&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nb">Date&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">now&lt;/span>&lt;span class="p">(),&lt;/span> &lt;span class="p">[],&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="nx">lastBlock&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="k">return&lt;/span> &lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">chain&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">chain&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">length&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">];&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="nx">mine&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">miningRewardAddress&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="kr">const&lt;/span> &lt;span class="nx">preHash&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">lastBlock&lt;/span>&lt;span class="p">().&lt;/span>&lt;span class="nx">hash&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="kr">const&lt;/span> &lt;span class="nx">block&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="nx">Block&lt;/span>&lt;span class="p">(&lt;/span>
&lt;span class="nb">Date&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">now&lt;/span>&lt;span class="p">(),&lt;/span>
&lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">pendingTransactions&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="nx">preHash&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">difficulty&lt;/span>
&lt;span class="p">);&lt;/span>
&lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">chain&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">push&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">block&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">pendingTransactions&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[&lt;/span>
&lt;span class="k">new&lt;/span> &lt;span class="nx">Transaction&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kc">null&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">miningRewardAddress&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">miningReward&lt;/span>&lt;span class="p">),&lt;/span>
&lt;span class="p">];&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="nx">createTransactions&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">transaction&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="o">!&lt;/span>&lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">isChainValid&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="k">return&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">pendingTransactions&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">push&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">transaction&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="nx">isChainValid&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="c1">// æ ¡éªŒåŒºå—é“¾æ˜¯å¦æœªè¢«ä¿®æ”¹
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="kr">const&lt;/span> &lt;span class="nx">len&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">chain&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">length&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="k">for&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="kd">let&lt;/span> &lt;span class="nx">i&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="nx">i&lt;/span> &lt;span class="o">&amp;lt;&lt;/span> &lt;span class="nx">len&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="nx">i&lt;/span>&lt;span class="o">++&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="kr">const&lt;/span> &lt;span class="nx">curBlock&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">chain&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="nx">i&lt;/span>&lt;span class="p">];&lt;/span>
&lt;span class="kr">const&lt;/span> &lt;span class="nx">preBlock&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">chain&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="nx">i&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">];&lt;/span>
&lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">curBlock&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">hash&lt;/span> &lt;span class="o">!==&lt;/span> &lt;span class="nx">curBlock&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">getHash&lt;/span>&lt;span class="p">())&lt;/span> &lt;span class="k">return&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">curBlock&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">preHash&lt;/span> &lt;span class="o">!==&lt;/span> &lt;span class="nx">preBlock&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">hash&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="k">return&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="k">return&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="nx">getBalanceOfAddress&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">address&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="c1">// è·å¾—æŸä¸ªè´¦æˆ·çš„ä½™é¢
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="kd">let&lt;/span> &lt;span class="nx">balance&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">chain&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">forEach&lt;/span>&lt;span class="p">(({&lt;/span> &lt;span class="nx">transactions&lt;/span> &lt;span class="p">})&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="nx">transactions&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">forEach&lt;/span>&lt;span class="p">(({&lt;/span> &lt;span class="nx">fromAddress&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">toAddress&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">amount&lt;/span> &lt;span class="p">})&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">fromAddress&lt;/span> &lt;span class="o">===&lt;/span> &lt;span class="nx">address&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="nx">balance&lt;/span> &lt;span class="o">-=&lt;/span> &lt;span class="nx">amount&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">toAddress&lt;/span> &lt;span class="o">===&lt;/span> &lt;span class="nx">address&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="nx">balance&lt;/span> &lt;span class="o">+=&lt;/span> &lt;span class="nx">amount&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="p">});&lt;/span>
&lt;span class="p">});&lt;/span>
&lt;span class="k">return&lt;/span> &lt;span class="nx">balance&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="kr">class&lt;/span> &lt;span class="nx">Transaction&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="nx">constructor&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">fromAddress&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">toAddress&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">amount&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="nb">Object&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">assign&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="k">this&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="nx">fromAddress&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="nx">toAddress&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="nx">amount&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="p">});&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="kr">const&lt;/span> &lt;span class="nx">myChain&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="nx">BlockChain&lt;/span>&lt;span class="p">();&lt;/span>
&lt;span class="kr">const&lt;/span> &lt;span class="nx">tran1&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="nx">Transaction&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;addr1&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;addr2&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">10&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="nx">myChain&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">createTransactions&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">tran1&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="kr">const&lt;/span> &lt;span class="nx">tran2&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="nx">Transaction&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;addr1&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;addr2&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="nx">myChain&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">createTransactions&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">tran2&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="nx">myChain&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">mine&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;myAddr&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="nx">myChain&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">mine&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;myAddr&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">myChain&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">getBalanceOfAddress&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;myAddr&amp;#34;&lt;/span>&lt;span class="p">));&lt;/span>
&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>__Proto__ä¸prototype</title><link>https://jo-hnny.github.io/p/__proto__%E4%B8%8Eprototype/</link><pubDate>Wed, 18 Sep 2019 20:52:35 +0800</pubDate><guid>https://jo-hnny.github.io/p/__proto__%E4%B8%8Eprototype/</guid><description>&lt;img src="https://picsum.photos/seed/7a25d1e14d8d44d08048f21ffe09c5fe/4096/2160" alt="Featured image of post __Proto__ä¸prototype" />&lt;p>ä¹‹å‰ä¹Ÿæœ‰çœ‹è¿‡èµ„æ–™ï¼Œå½“æ—¶è§‰å¾—æ˜ç™½äº†ï¼Œä½†æ˜¯æ—¶é—´ä¸€ä¹…å°±å¿˜è®°äº†ï¼Œä¸€æ–¹é¢æ˜¯å¹³æ—¶å·¥ä½œä¸­æ²¡æœ‰ä½¿ç”¨ï¼Œå¦ä¸€æ–¹é¢æ˜¯åªæ˜¯çœ‹ï¼Œæ²¡æœ‰è‡ªå·±å»æ€è€ƒï¼Œæ‰€ä»¥è¿™æ¬¡å†³å®šè‡ªå·±ç†ä¸€ç†ã€‚&lt;/p>
&lt;h2 id="é¦–å…ˆçœ‹å‡ ä¸ªæ¦‚å¿µ">é¦–å…ˆçœ‹å‡ ä¸ªæ¦‚å¿µ&lt;/h2>
&lt;h3 id="1__proto__åŸå‹å¯¹è±¡">1ã€&lt;code>__proto__&lt;/code>åŸå‹å¯¹è±¡&lt;/h3>
&lt;p>å¯¹è±¡çš„&lt;code>__proto__&lt;/code>æŒ‡å‘åˆ›å»ºå®ƒçš„æ„é€ å‡½æ•°çš„&lt;code>prototype&lt;/code>,å½“ä½ è°ƒç”¨è¯¥å¯¹è±¡çš„å±æ€§çš„æ—¶å€™ï¼Œå¦‚æœå®ƒè‡ªèº«æ²¡æœ‰è¿™ä¸ªå±æ€§ï¼Œå®ƒä¼šå»&lt;code>__proto__&lt;/code>ä¸Šæ‰¾è¿™ä¸ªå±æ€§&lt;/p>
&lt;h3 id="2prototype">2ã€&lt;code>prototype&lt;/code>&lt;/h3>
&lt;p>åªæœ‰å‡½æ•°æ‰æœ‰&lt;code>prototype&lt;/code>å±æ€§ï¼Œå½“ä½ åˆ›å»ºä¸€ä¸ªå‡½æ•°çš„æ—¶å€™ï¼ŒJS ä¼šä¸ºè¿™ä¸ªå‡½æ•°æ·»åŠ &lt;code>prototype&lt;/code>å±æ€§ï¼Œå€¼æ˜¯ä¸€ä¸ªæœ‰&lt;code>constructor&lt;/code>å±æ€§çš„&lt;code>å¯¹è±¡&lt;/code>,(å¯¹è±¡ä¸¤ä¸ªå­—å¾ˆå…³é”®ï¼Œè¿™æ„å‘³ç€è¿™ä¸ªå¯¹è±¡ä¹Ÿæœ‰&lt;code>__proto__&lt;/code>å±æ€§,å®ƒæŒ‡å‘åˆ›å»ºå®ƒçš„æ„é€ å‡½æ•°å³&lt;code>Object&lt;/code>çš„&lt;code>prototype&lt;/code>ã€‚)&lt;/p>
&lt;h2 id="æ¥ä¸‹æ¥çœ‹çœ‹ä»£ç ">æ¥ä¸‹æ¥çœ‹çœ‹ä»£ç &lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-js" data-lang="js">&lt;span class="kd">function&lt;/span> &lt;span class="nx">A&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{}&lt;/span>
&lt;span class="kd">var&lt;/span> &lt;span class="nx">a&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="nx">A&lt;/span>&lt;span class="p">();&lt;/span>
&lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">A&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">__proto__&lt;/span> &lt;span class="o">===&lt;/span> &lt;span class="nb">Function&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">prototype&lt;/span>&lt;span class="p">);&lt;/span> &lt;span class="c1">// true
&lt;/span>&lt;span class="c1">&lt;/span>
&lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">a&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">__proto__&lt;/span> &lt;span class="o">===&lt;/span> &lt;span class="nx">A&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">prototype&lt;/span>&lt;span class="p">);&lt;/span> &lt;span class="c1">// true
&lt;/span>&lt;span class="c1">&lt;/span>
&lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">a&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">__proto__&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">__proto__&lt;/span> &lt;span class="o">===&lt;/span> &lt;span class="nb">Object&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">prototype&lt;/span>&lt;span class="p">);&lt;/span> &lt;span class="c1">// true
&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ç„¶ååŒç†æˆ‘è§‰å¾—ä¸‹è¾¹çš„ä¹Ÿåº”è¯¥æˆç«‹&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-js" data-lang="js">&lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nb">Object&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">prototype&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">__proto__&lt;/span> &lt;span class="o">===&lt;/span> &lt;span class="nb">Object&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">prototype&lt;/span>&lt;span class="p">);&lt;/span> &lt;span class="c1">// false
&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ä½†æ˜¯äº‹å®å¾ˆä¸å¹¸ï¼Œå¾—åˆ°çš„æ˜¯ false.&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-js" data-lang="js">&lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nb">Object&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">prototype&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">__proto__&lt;/span>&lt;span class="p">);&lt;/span> &lt;span class="c1">// null
&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>æ‰“å°ä¸€çœ‹æ˜¯ nullï¼Œç„¶åå†æƒ³æƒ³ï¼Œå…¶å® js å°±æ˜¯è¿™æ ·è®¾è®¡çš„è€Œå·²ï¼Œè¦ä¸è¿™ä¸ªåŸå‹é“¾ä¸å¾—æ²¡å®Œæ²¡äº†äº†å˜›,ä½ æƒ³æƒ³æœ‰ä¸ªå¯¹è±¡æ‰¾ä¸€ä¸ªå±æ€§ï¼Œå®ƒæ‰¾åˆ°&lt;code>Object.prototype&lt;/code>å°±åº”è¯¥åˆ°å¤´äº†ï¼Œè¦ä¸å®ƒå°±ä¼šä¸€ç›´æ‰¾ä¸‹å»ï¼Œæ— å°½å¾ªç¯ã€‚&lt;/p>
&lt;h2 id="ç„¶åæˆ‘ä»¬çœ‹ä¸€ä¸ªé—®é¢˜å°±æ˜¯functionä¸objectçš„é—®é¢˜">ç„¶åæˆ‘ä»¬çœ‹ä¸€ä¸ªé—®é¢˜ï¼Œå°±æ˜¯&lt;code>Function&lt;/code>ä¸&lt;code>Object&lt;/code>çš„é—®é¢˜&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-js" data-lang="js">&lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nb">Object&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">__proto__&lt;/span> &lt;span class="o">===&lt;/span> &lt;span class="nb">Function&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">prototype&lt;/span>&lt;span class="p">);&lt;/span> &lt;span class="c1">// true
&lt;/span>&lt;span class="c1">&lt;/span>
&lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nb">Function&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">__proto__&lt;/span> &lt;span class="o">===&lt;/span> &lt;span class="nb">Function&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">prototype&lt;/span>&lt;span class="p">);&lt;/span> &lt;span class="c1">// true
&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>å¯ä»¥çœ‹å‡º&lt;code>Object&lt;/code>æ˜¯ç”±&lt;code>Function&lt;/code>æ„é€ å‡ºæ¥çš„ï¼Œè€Œ&lt;code>Function&lt;/code>æ˜¯ç”±&lt;code>Function&lt;/code>è‡ªå·±æ„é€ å‡ºæ¥çš„ï¼Œè¿™ä¸ªå¬èµ·æ¥å¥½å¥‡æ€ªï¼Œè‡ªå·±æ„é€ è‡ªå·±ã€‚&lt;/p>
&lt;h2 id="constructor">&lt;code>constructor&lt;/code>&lt;/h2>
&lt;p>ä¸‹é¢å†çœ‹çœ‹&lt;code>prototype.constructor&lt;/code>&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-js" data-lang="js">&lt;span class="kd">function&lt;/span> &lt;span class="nx">A&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{}&lt;/span>
&lt;span class="kd">var&lt;/span> &lt;span class="nx">a&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="nx">A&lt;/span>&lt;span class="p">();&lt;/span>
&lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">A&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">prototype&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">constructor&lt;/span> &lt;span class="o">===&lt;/span> &lt;span class="nx">A&lt;/span>&lt;span class="p">);&lt;/span> &lt;span class="c1">// true
&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>å‡½æ•°çš„&lt;code>prototype.constructor&lt;/code>æŒ‡å‘äº†è‡ªå·±ï¼Œé™¤æ­¤ä¹‹å¤–ï¼Œæˆ‘ç›®å‰è¿˜æ²¡å‘ç°è¿™ä¸ªæœ‰ä»€ä¹ˆç”¨ã€‚&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-js" data-lang="js">&lt;span class="kd">function&lt;/span> &lt;span class="nx">A&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{}&lt;/span>
&lt;span class="kd">var&lt;/span> &lt;span class="nx">a&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="nx">A&lt;/span>&lt;span class="p">();&lt;/span>
&lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">A&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">prototype&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">constructor&lt;/span> &lt;span class="o">===&lt;/span> &lt;span class="nx">A&lt;/span>&lt;span class="p">);&lt;/span> &lt;span class="c1">// true
&lt;/span>&lt;span class="c1">&lt;/span>
&lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">a&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">constructor&lt;/span> &lt;span class="o">===&lt;/span> &lt;span class="nx">A&lt;/span>&lt;span class="p">);&lt;/span> &lt;span class="c1">// true
&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>æ‰¾åˆ°ä¸€ä¸ªè¯´æ³•&lt;/p>
&lt;pre tabindex="0">&lt;code>constructorå±æ€§ä¸å½±å“ä»»ä½•JavaScriptçš„å†…éƒ¨å±æ€§ã€‚instanceofæ£€æµ‹å¯¹è±¡çš„åŸå‹é“¾ï¼Œé€šå¸¸ä½ æ˜¯æ— æ³•ä¿®æ”¹çš„ï¼ˆä¸è¿‡æŸäº›å¼•æ“é€šè¿‡ç§æœ‰çš„__proto__å±æ€§æš´éœ²å‡ºæ¥ï¼‰ã€‚constructorå…¶å®æ²¡æœ‰ä»€ä¹ˆç”¨å¤„ï¼Œåªæ˜¯JavaScriptè¯­è¨€è®¾è®¡çš„å†å²é—ç•™ç‰©ã€‚ç”±äºconstructorå±æ€§æ˜¯å¯ä»¥å˜æ›´çš„ï¼Œæ‰€ä»¥æœªå¿…çœŸçš„æŒ‡å‘å¯¹è±¡çš„æ„é€ å‡½æ•°ï¼Œåªæ˜¯ä¸€ä¸ªæç¤ºã€‚ä¸è¿‡ï¼Œä»ç¼–ç¨‹ä¹ æƒ¯ä¸Šï¼Œæˆ‘ä»¬åº”è¯¥å°½é‡è®©å¯¹è±¡çš„constructoræŒ‡å‘å…¶æ„é€ å‡½æ•°ï¼Œä»¥ç»´æŒè¿™ä¸ªæƒ¯ä¾‹ã€‚
ä½œè€…ï¼šè´ºå¸ˆä¿Š
é“¾æ¥ï¼šhttps://www.zhihu.com/question/19951896/answer/13457869
æ¥æºï¼šçŸ¥ä¹
è‘—ä½œæƒå½’ä½œè€…æ‰€æœ‰ã€‚å•†ä¸šè½¬è½½è¯·è”ç³»ä½œè€…è·å¾—æˆæƒï¼Œéå•†ä¸šè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚
&lt;/code>&lt;/pre></description></item><item><title>åˆæ¢react Native</title><link>https://jo-hnny.github.io/p/%E5%88%9D%E6%8E%A2react-native/</link><pubDate>Wed, 18 Sep 2019 20:51:20 +0800</pubDate><guid>https://jo-hnny.github.io/p/%E5%88%9D%E6%8E%A2react-native/</guid><description>&lt;img src="https://picsum.photos/seed/c2c7c029452b45aa8117a63cd653cdb4/4096/2160" alt="Featured image of post åˆæ¢react Native" />&lt;p>æœ¬æ–‡ä¸ä»‹ç» React Native çš„ APIï¼ŒAPI å¯ä»¥å‚è€ƒå®˜ç½‘æˆ–è€… react native ä¸­æ–‡ç½‘ï¼Œä¸»è¦æ˜¯ä»ç¯å¢ƒæ­å»ºå¼€å§‹ï¼Œåˆ©ç”¨è±†ç“£çš„å¼€æ”¾ api æ­å»ºä¸€ä¸ªè±†ç“£ç”µå½±çš„åº”ç”¨ã€‚
&lt;figure
>
&lt;a href="https://raw.githubusercontent.com/johnny19941216/storage-room/master/img/Screenshot_2018-01-02-16-02-39-091_host.exp.expon.png" >
&lt;img src="https://raw.githubusercontent.com/johnny19941216/storage-room/master/img/Screenshot_2018-01-02-16-02-39-091_host.exp.expon.png"
loading="lazy"
alt="appæˆªå›¾">
&lt;/a>
&lt;figcaption>appæˆªå›¾&lt;/figcaption>
&lt;/figure>&lt;/p>
&lt;h2 id="ä¸€ç¯å¢ƒæ­å»º">ä¸€ã€ç¯å¢ƒæ­å»º&lt;/h2>
&lt;p>ç¯å¢ƒæ­å»ºå¯ä»¥å‚è€ƒ&lt;a class="link" href="https://reactnative.cn/docs/0.50/getting-started.html" target="_blank" rel="noopener"
>å®˜ç½‘&lt;/a>&lt;br>
å¿…è¦çš„ä¾èµ–&lt;br>
â‘ ã€Python 2&lt;br>
â‘¡ã€Node&lt;br>
â‘¢ã€yarn&lt;br>
â‘£ã€Android Studio&lt;br>
â‘¤ã€Expo&lt;/p>
&lt;h2 id="äºŒhello-world">äºŒã€Hello World&lt;/h2>
&lt;p>&lt;code>npm install -g create-react-native-app&lt;/code>&lt;br>
é€‰æ‹©ä¸€ä¸ªæ–‡ä»¶å¤¹ä½œä¸ºä½ çš„é¡¹ç›®åœ°å€&lt;br>
&lt;code>create-react-native-app douban_movie&lt;/code>&lt;br>
&lt;code>cd douban_movie&lt;/code>&lt;br>
&lt;code>npm start&lt;/code>&lt;br>
ç­‰å¾…å‘½ä»¤è¡Œå‡ºç°ä¸€ä¸ªäºŒç»´ç ï¼Œç„¶ååœ¨æ‰‹æœºä¸Šæ‰“å¼€ expo æ‰«é¢è¿™ä¸ªäºŒç»´ç ï¼Œå°±å¯ä»¥å®æ—¶é¢„è§ˆ app æ•ˆæœäº†ã€‚&lt;/p>
&lt;h2 id="ä¸‰é¡¹ç›®æ„æ€">ä¸‰ã€é¡¹ç›®æ„æ€&lt;/h2>
&lt;p>ç›®å‰åœ¨
&lt;a class="link" href="https://developers.douban.com/wiki/title=movie_v2#subject" target="_blank" rel="noopener"
>è±†ç“£ç”µå½± API&lt;/a>
ä¸­ç¡®è®¤ä¸ç”¨æ³¨å†Œå¯ä»¥ç›´æ¥ä½¿ç”¨çš„æ¥å£æœ‰è¿™äº›&lt;br>
&lt;figure
>
&lt;a href="https://raw.githubusercontent.com/johnny19941216/storage-room/master/img/20190918202412.png" >
&lt;img src="https://raw.githubusercontent.com/johnny19941216/storage-room/master/img/20190918202412.png"
loading="lazy"
alt="è±†ç“£ç”µå½±apiæˆªå›¾">
&lt;/a>
&lt;figcaption>è±†ç“£ç”µå½±apiæˆªå›¾&lt;/figcaption>
&lt;/figure>&lt;br>
æŒ‰ç…§è¿™äº› api æä¾›çš„ä¿¡æ¯å¤§è‡´ç¡®å®šé¡µé¢ç»“æ„ä¸ºï¼š&lt;br>
1ã€tab å¯¼èˆªé¡µï¼šåŒ…æ‹¬æœç´¢é¡µé¢ã€top250ã€åŒ—ç¾ç¥¨æˆ¿æ¦œé¡µé¢ã€æ­£åœ¨ä¸Šæ˜ é¡µé¢ã€å³å°†ä¸Šæ˜ é¡µé¢&lt;br>
2ã€è¯¦æƒ…é¡µé¢ï¼šåŒ…æ‹¬ç”µå½±è¯¦æƒ…å’Œæ¼”å‘˜è¯¦æƒ…&lt;/p>
&lt;h2 id="å››å¼€å·¥">å››ã€å¼€å·¥&lt;/h2>
&lt;h3 id="1é¡¹ç›®ç›®å½•ç»“æ„">1ã€é¡¹ç›®ç›®å½•ç»“æ„ï¼š&lt;/h3>
&lt;pre tabindex="0">&lt;code>|------components
|
|------http
|
|------views
|
App.js
|
package.json
&lt;/code>&lt;/pre>&lt;h3 id="2è·å–æ¥å£æ•°æ®">2ã€è·å–æ¥å£æ•°æ®&lt;/h3>
&lt;h4 id="åœ¨-react-native-ä¸­è¿›è¡Œ-http-è¯·æ±‚ä½¿ç”¨çš„-api-æ˜¯fetchhttpsdevelopermozillaorgzh-cndocswebapifetch_apiusing_fetch">åœ¨ react native ä¸­è¿›è¡Œ http è¯·æ±‚ä½¿ç”¨çš„ api æ˜¯&lt;a class="link" href="https://developer.mozilla.org/zh-CN/docs/Web/API/Fetch_API/Using_Fetch" target="_blank" rel="noopener"
>fetch&lt;/a>&lt;/h4>
&lt;p>&lt;code>fetchæ˜¯ä¸€ç§æ–°çš„web HTTPè¯·æ±‚apiï¼Œç°åœ¨å·²ç»å†…ç½®åœ¨äº†å¤§å¤šæ•°çš„æµè§ˆå™¨ä¸­ï¼Œåœ¨æ­¤ä¹‹å‰web HTTPè¯·æ±‚éƒ½æ˜¯é€šè¿‡ XMLHttpRequestå®ç°çš„&lt;/code>&lt;/p>
&lt;h4 id="è¯·æ³¨æ„fetch-è§„èŒƒä¸-jqueryajax-ä¸»è¦æœ‰ä¸¤ç§æ–¹å¼çš„ä¸åŒç‰¢è®°">è¯·æ³¨æ„ï¼Œfetch è§„èŒƒä¸ jQuery.ajax() ä¸»è¦æœ‰ä¸¤ç§æ–¹å¼çš„ä¸åŒï¼Œç‰¢è®°ï¼š&lt;/h4>
&lt;p>å½“æ¥æ”¶åˆ°ä¸€ä¸ªä»£è¡¨é”™è¯¯çš„ HTTP çŠ¶æ€ç æ—¶ï¼Œä» fetch()è¿”å›çš„ Promise ä¸ä¼šè¢«æ ‡è®°ä¸º rejectï¼Œ å³ä½¿è¯¥ HTTP å“åº”çš„çŠ¶æ€ç æ˜¯ 404 æˆ– 500ã€‚ç›¸åï¼Œå®ƒä¼šå°† Promise çŠ¶æ€æ ‡è®°ä¸º resolve ï¼ˆä½†æ˜¯ä¼šå°† resolve çš„è¿”å›å€¼çš„ ok å±æ€§è®¾ç½®ä¸º false ï¼‰ï¼Œ ä»…å½“ç½‘ç»œæ•…éšœæ—¶æˆ–è¯·æ±‚è¢«é˜»æ­¢æ—¶ï¼Œæ‰ä¼šæ ‡è®°ä¸º rejectã€‚
é»˜è®¤æƒ…å†µä¸‹, fetch ä¸ä¼šä»æœåŠ¡ç«¯å‘é€æˆ–æ¥æ”¶ä»»ä½• cookies, å¦‚æœç«™ç‚¹ä¾èµ–äºç”¨æˆ· sessionï¼Œåˆ™ä¼šå¯¼è‡´æœªç»è®¤è¯çš„è¯·æ±‚ï¼ˆè¦å‘é€ cookiesï¼Œå¿…é¡»è®¾ç½® credentials é€‰é¡¹ï¼‰.&lt;/p>
&lt;h4 id="å„æµè§ˆå™¨å¯¹-fetch-çš„æ”¯æŒæƒ…å†µ">å„æµè§ˆå™¨å¯¹ fetch çš„æ”¯æŒæƒ…å†µï¼š&lt;/h4>
&lt;p>&lt;figure
>
&lt;a href="https://raw.githubusercontent.com/johnny19941216/storage-room/master//img/can_i_use_fetch.png" >
&lt;img src="https://raw.githubusercontent.com/johnny19941216/storage-room/master//img/can_i_use_fetch.png"
loading="lazy"
alt="can i use fetch">
&lt;/a>
&lt;figcaption>can i use fetch&lt;/figcaption>
&lt;/figure>&lt;/p>
&lt;h4 id="httpfetchapijs">/http/fetchApi.js&lt;/h4>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-js" data-lang="js">&lt;span class="kr">export&lt;/span> &lt;span class="k">default&lt;/span> &lt;span class="nx">fetchApi&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">url&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="k">return&lt;/span> &lt;span class="nx">fetch&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">url&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nx">then&lt;/span>&lt;span class="p">((&lt;/span>&lt;span class="nx">rsp&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">rsp&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">ok&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="k">return&lt;/span> &lt;span class="nx">rsp&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">json&lt;/span>&lt;span class="p">();&lt;/span>
&lt;span class="k">return&lt;/span> &lt;span class="nb">Promise&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">reject&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">rsp&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">json&lt;/span>&lt;span class="p">());&lt;/span>
&lt;span class="p">});&lt;/span>
&lt;span class="p">};&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;h4 id="httpapijs">/http/api.js&lt;/h4>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-js" data-lang="js">&lt;span class="kr">import&lt;/span> &lt;span class="nx">fetchApi&lt;/span> &lt;span class="nx">from&lt;/span> &lt;span class="s2">&amp;#34;./fetchApi&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="kr">const&lt;/span> &lt;span class="nx">baseUrl&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;https://api.douban.com/v2/movie/&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="nx">exports&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">movieInfo&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">id&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="nx">fetchApi&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="sb">`&lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="nx">baseUrl&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="sb">subject/&lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="nx">id&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="sb">`&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="nx">exports&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">actorInfo&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">id&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="nx">fetchApi&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="sb">`&lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="nx">baseUrl&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="sb">celebrity/&lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="nx">id&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="sb">`&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="nx">exports&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">search&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">q&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">start&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">count&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">10&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span>
&lt;span class="nx">fetchApi&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="sb">`&lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="nx">baseUrl&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="sb">search?q=&lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="nx">q&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="sb">&amp;amp;start=&lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="nx">start&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="sb">&amp;amp;count=&lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="nx">count&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="sb">`&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="nx">exports&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">top250&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">start&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">count&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">10&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span>
&lt;span class="nx">fetchApi&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="sb">`&lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="nx">baseUrl&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="sb">top250?start=&lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="nx">start&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="sb">&amp;amp;count=&lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="nx">count&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="sb">`&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="nx">exports&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">usBox&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">()&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="nx">fetchApi&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="sb">`&lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="nx">baseUrl&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="sb">us_box`&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="nx">exports&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">showing&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">()&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="nx">fetchApi&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="sb">`&lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="nx">baseUrl&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="sb">in_theaters`&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="nx">exports&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">comingSoon&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">start&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">count&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">10&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span>
&lt;span class="nx">fetchApi&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="sb">`&lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="nx">baseUrl&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="sb">coming_soon?start=&lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="nx">start&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="sb">&amp;amp;count=&lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="nx">count&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="sb">`&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="3åŸºç¡€ç»„ä»¶-components">3ã€åŸºç¡€ç»„ä»¶ /components&lt;/h3>
&lt;h4 id="é¦–å…ˆéœ€è¦ä¸€ä¸ªå¡ç‰‡ç»„ä»¶æ¥å±•ç¤ºæœ€åŸºæœ¬çš„ç”µå½±ä¿¡æ¯---ç”µå½±åç§°æµ·æŠ¥è¯„åˆ†-componentsmoviecardjs">é¦–å…ˆéœ€è¦ä¸€ä¸ªå¡ç‰‡ç»„ä»¶æ¥å±•ç¤ºæœ€åŸºæœ¬çš„ç”µå½±ä¿¡æ¯&amp;mdash;ç”µå½±åç§°ã€æµ·æŠ¥ã€è¯„åˆ† /components/MovieCard.js&lt;/h4>
&lt;p>è¿™é‡Œç”¨åˆ°äº†ä¸€ä¸ªç»„ä»¶åº“&lt;a class="link" href="https://react-native-training.github.io/react-native-elements/" target="_blank" rel="noopener"
>react-native-elements&lt;/a>&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-jsx" data-lang="jsx">&lt;span class="kr">import&lt;/span> &lt;span class="nx">React&lt;/span> &lt;span class="nx">from&lt;/span> &lt;span class="s2">&amp;#34;react&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="kr">import&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="nx">StyleSheet&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">Text&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">Image&lt;/span> &lt;span class="p">}&lt;/span> &lt;span class="nx">from&lt;/span> &lt;span class="s2">&amp;#34;react-native&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="kr">import&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="nx">Card&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">Rating&lt;/span> &lt;span class="p">}&lt;/span> &lt;span class="nx">from&lt;/span> &lt;span class="s2">&amp;#34;react-native-elements&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="kr">export&lt;/span> &lt;span class="k">default&lt;/span> &lt;span class="kr">class&lt;/span> &lt;span class="nx">MovieCard&lt;/span> &lt;span class="kr">extends&lt;/span> &lt;span class="nx">React&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Component&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="nx">constructor&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">props&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="kr">super&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">props&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="nx">render&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="k">return&lt;/span> &lt;span class="p">(&lt;/span>
&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">Card&lt;/span>
&lt;span class="na">title&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">props&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">title&lt;/span>&lt;span class="p">}&lt;/span>
&lt;span class="na">image&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="p">{{&lt;/span> &lt;span class="nx">uri&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">props&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">img&lt;/span> &lt;span class="p">}}&lt;/span>
&lt;span class="na">containerStyle&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="nx">styles&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">card&lt;/span>&lt;span class="p">}&lt;/span>
&lt;span class="p">&amp;gt;&lt;/span>
&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">Rating&lt;/span>
&lt;span class="na">type&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;star&amp;#34;&lt;/span>
&lt;span class="na">fractions&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">}&lt;/span>
&lt;span class="na">startingValue&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">props&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">rating&lt;/span>&lt;span class="p">}&lt;/span>
&lt;span class="na">readonly&lt;/span>
&lt;span class="na">imageSize&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="mi">25&lt;/span>&lt;span class="p">}&lt;/span>
&lt;span class="p">/&amp;gt;&lt;/span>
&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">Card&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;span class="p">);&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="kr">const&lt;/span> &lt;span class="nx">styles&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">StyleSheet&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">create&lt;/span>&lt;span class="p">({&lt;/span>
&lt;span class="nx">card&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="nx">width&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="mi">150&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="nx">height&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="mi">240&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="nx">justifyContent&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s2">&amp;#34;space-around&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="nx">alignItems&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s2">&amp;#34;center&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="p">},&lt;/span>
&lt;span class="p">});&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;h4 id="å¡ç‰‡åˆ—è¡¨ç»„ä»¶-componentslistpagejs">å¡ç‰‡åˆ—è¡¨ç»„ä»¶ /components/ListPage.js&lt;/h4>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-jsx" data-lang="jsx">&lt;span class="kr">import&lt;/span> &lt;span class="nx">React&lt;/span> &lt;span class="nx">from&lt;/span> &lt;span class="s2">&amp;#34;react&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="kr">import&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="nx">FlatList&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">TouchableHighlight&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">View&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">StyleSheet&lt;/span> &lt;span class="p">}&lt;/span> &lt;span class="nx">from&lt;/span> &lt;span class="s2">&amp;#34;react-native&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="kr">import&lt;/span> &lt;span class="nx">MovieCard&lt;/span> &lt;span class="nx">from&lt;/span> &lt;span class="s2">&amp;#34;./MovieCard&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="kr">export&lt;/span> &lt;span class="k">default&lt;/span> &lt;span class="kr">class&lt;/span> &lt;span class="nx">ListPage&lt;/span> &lt;span class="kr">extends&lt;/span> &lt;span class="nx">React&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Component&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="nx">constructor&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">props&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="kr">super&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">props&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="nx">render&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="kr">const&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="nx">navigate&lt;/span> &lt;span class="p">}&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">props&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">navigation&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="o">!&lt;/span>&lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">props&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">movies&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">length&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="k">return&lt;/span> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">View&lt;/span>&lt;span class="p">&amp;gt;&amp;lt;/&lt;/span>&lt;span class="nt">View&lt;/span>&lt;span class="p">&amp;gt;;&lt;/span>
&lt;span class="k">return&lt;/span> &lt;span class="p">(&lt;/span>
&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">FlatList&lt;/span>
&lt;span class="na">data&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">props&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">movies&lt;/span>&lt;span class="p">}&lt;/span>
&lt;span class="na">renderItem&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="p">{({&lt;/span> &lt;span class="nx">item&lt;/span> &lt;span class="p">})&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="p">(&lt;/span>
&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">TouchableHighlight&lt;/span>
&lt;span class="na">onPress&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="p">{()&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="nx">navigate&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;MovieInfo&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="nx">id&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="nx">item&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">id&lt;/span> &lt;span class="p">})}&lt;/span>
&lt;span class="p">&amp;gt;&lt;/span>
&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">View&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">MovieCard&lt;/span>
&lt;span class="na">img&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="nx">item&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">images&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">small&lt;/span>&lt;span class="p">}&lt;/span>
&lt;span class="na">rating&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="nx">item&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">rating&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">average&lt;/span>&lt;span class="p">}&lt;/span>
&lt;span class="na">title&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="nx">item&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">title&lt;/span>&lt;span class="p">}&lt;/span>
&lt;span class="p">/&amp;gt;&lt;/span>
&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">View&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">TouchableHighlight&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;span class="p">)}&lt;/span>
&lt;span class="na">keyExtractor&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="p">{(&lt;/span>&lt;span class="nx">item&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="nx">item&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">id&lt;/span>&lt;span class="p">}&lt;/span>
&lt;span class="na">numColumns&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">}&lt;/span>
&lt;span class="na">onEndReachedThreshold&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="mf">0.5&lt;/span>&lt;span class="p">}&lt;/span>
&lt;span class="na">onEndReached&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">props&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">loadData&lt;/span>&lt;span class="p">}&lt;/span>
&lt;span class="p">/&amp;gt;&lt;/span>
&lt;span class="p">);&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="4é¡µé¢-views">4ã€é¡µé¢ /views&lt;/h3>
&lt;h4 id="viewstop250-viewsusboxjs-viewsshowingjs-viewscomingsoonjs-è¿™å‡ ä¸ªé¡µé¢çš„é€»è¾‘æ˜¯ç›¸ä¼¼çš„åªæ˜¯æ•°æ®ä¸ä¸€æ ·è€Œå·²å°±åªçœ‹ä¸€ä¸‹-top250js-çš„ä»£ç ">/views/Top250 /views/UsBox.js /views/Showing.js /views/ComingSoon.js è¿™å‡ ä¸ªé¡µé¢çš„é€»è¾‘æ˜¯ç›¸ä¼¼çš„ï¼Œåªæ˜¯æ•°æ®ä¸ä¸€æ ·è€Œå·²,å°±åªçœ‹ä¸€ä¸‹ Top250.js çš„ä»£ç &lt;/h4>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-jsx" data-lang="jsx">&lt;span class="kr">import&lt;/span> &lt;span class="nx">React&lt;/span> &lt;span class="nx">from&lt;/span> &lt;span class="s2">&amp;#34;react&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="kr">import&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="nx">top250&lt;/span> &lt;span class="p">}&lt;/span> &lt;span class="nx">from&lt;/span> &lt;span class="s2">&amp;#34;../http/api&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="kr">import&lt;/span> &lt;span class="nx">ListPage&lt;/span> &lt;span class="nx">from&lt;/span> &lt;span class="s2">&amp;#34;../components/ListPage&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="kr">export&lt;/span> &lt;span class="k">default&lt;/span> &lt;span class="kr">class&lt;/span> &lt;span class="nx">Top250&lt;/span> &lt;span class="kr">extends&lt;/span> &lt;span class="nx">React&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Component&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="nx">constructor&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="kr">super&lt;/span>&lt;span class="p">();&lt;/span>
&lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">state&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="nx">movies&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="p">[],&lt;/span>
&lt;span class="p">};&lt;/span>
&lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">getTop250&lt;/span>&lt;span class="p">();&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="kr">static&lt;/span> &lt;span class="nx">navigationOptions&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="nx">tabBarLabel&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s2">&amp;#34;Top 250&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="p">};&lt;/span>
&lt;span class="nx">getTop250&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">()&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="nx">top250&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">state&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">movies&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">length&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="p">.&lt;/span>&lt;span class="nx">then&lt;/span>&lt;span class="p">((&lt;/span>&lt;span class="nx">rsp&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">setState&lt;/span>&lt;span class="p">((&lt;/span>&lt;span class="nx">preSate&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="p">({&lt;/span>
&lt;span class="nx">movies&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="nx">preSate&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">movies&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">concat&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">rsp&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">subjects&lt;/span>&lt;span class="p">),&lt;/span>
&lt;span class="p">}));&lt;/span>
&lt;span class="p">})&lt;/span>
&lt;span class="p">.&lt;/span>&lt;span class="k">catch&lt;/span>&lt;span class="p">((&lt;/span>&lt;span class="nx">err&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;getTop250 error&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="p">});&lt;/span>
&lt;span class="p">};&lt;/span>
&lt;span class="nx">render&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="k">return&lt;/span> &lt;span class="p">(&lt;/span>
&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">ListPage&lt;/span>
&lt;span class="na">movies&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">state&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">movies&lt;/span>&lt;span class="p">}&lt;/span>
&lt;span class="na">loadData&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">getTop250&lt;/span>&lt;span class="p">}&lt;/span>
&lt;span class="na">navigation&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">props&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">navigation&lt;/span>&lt;span class="p">}&lt;/span>
&lt;span class="p">/&amp;gt;&lt;/span>
&lt;span class="p">);&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;h4 id="æœç´¢é¡µé¢-viewshomejs">æœç´¢é¡µé¢ /views/Home.js&lt;/h4>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-jsx" data-lang="jsx">&lt;span class="kr">import&lt;/span> &lt;span class="nx">React&lt;/span> &lt;span class="nx">from&lt;/span> &lt;span class="s2">&amp;#34;react&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="kr">import&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="nx">StyleSheet&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">View&lt;/span> &lt;span class="p">}&lt;/span> &lt;span class="nx">from&lt;/span> &lt;span class="s2">&amp;#34;react-native&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="kr">import&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="nx">SearchBar&lt;/span> &lt;span class="p">}&lt;/span> &lt;span class="nx">from&lt;/span> &lt;span class="s2">&amp;#34;react-native-elements&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="kr">import&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="nx">search&lt;/span> &lt;span class="p">}&lt;/span> &lt;span class="nx">from&lt;/span> &lt;span class="s2">&amp;#34;../http/api&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="kr">import&lt;/span> &lt;span class="nx">ListPage&lt;/span> &lt;span class="nx">from&lt;/span> &lt;span class="s2">&amp;#34;../components/ListPage&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="kr">export&lt;/span> &lt;span class="k">default&lt;/span> &lt;span class="kr">class&lt;/span> &lt;span class="nx">Home&lt;/span> &lt;span class="kr">extends&lt;/span> &lt;span class="nx">React&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Component&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="nx">constructor&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="kr">super&lt;/span>&lt;span class="p">();&lt;/span>
&lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">state&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="nx">movies&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="p">[],&lt;/span>
&lt;span class="nx">key&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s2">&amp;#34;&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="p">};&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="kr">static&lt;/span> &lt;span class="nx">navigationOptions&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="nx">tabBarLabel&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s2">&amp;#34;ä¸»é¡µ&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="p">};&lt;/span>
&lt;span class="nx">keyChange&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">key&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">setState&lt;/span>&lt;span class="p">({&lt;/span>
&lt;span class="nx">key&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="p">});&lt;/span>
&lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">getSearch&lt;/span>&lt;span class="p">();&lt;/span>
&lt;span class="p">};&lt;/span>
&lt;span class="nx">getSearch&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">()&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="nx">search&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">state&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">key&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nx">then&lt;/span>&lt;span class="p">((&lt;/span>&lt;span class="nx">rsp&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">setState&lt;/span>&lt;span class="p">({&lt;/span>
&lt;span class="nx">movies&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="nx">rsp&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">subjects&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="p">});&lt;/span>
&lt;span class="p">});&lt;/span>
&lt;span class="p">};&lt;/span>
&lt;span class="nx">render&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="k">return&lt;/span> &lt;span class="p">(&lt;/span>
&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">View&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">SearchBar&lt;/span> &lt;span class="na">onChangeText&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">keyChange&lt;/span>&lt;span class="p">}&lt;/span> &lt;span class="na">placeholder&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;è¾“å…¥å…³é”®å­—æœç´¢&amp;#34;&lt;/span> &lt;span class="p">/&amp;gt;&lt;/span>
&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">ListPage&lt;/span>
&lt;span class="na">movies&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">state&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">movies&lt;/span>&lt;span class="p">}&lt;/span>
&lt;span class="na">loadData&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">getSearch&lt;/span>&lt;span class="p">}&lt;/span>
&lt;span class="na">navigation&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">props&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">navigation&lt;/span>&lt;span class="p">}&lt;/span>
&lt;span class="p">/&amp;gt;&lt;/span>
&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">View&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;span class="p">);&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="5å¯¼èˆªå®ç°">5ã€å¯¼èˆªå®ç°&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-jsx" data-lang="jsx">&lt;span class="kr">import&lt;/span> &lt;span class="nx">React&lt;/span> &lt;span class="nx">from&lt;/span> &lt;span class="s2">&amp;#34;react&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="kr">import&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="nx">TabNavigator&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">StackNavigator&lt;/span> &lt;span class="p">}&lt;/span> &lt;span class="nx">from&lt;/span> &lt;span class="s2">&amp;#34;react-navigation&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="kr">import&lt;/span> &lt;span class="nx">Home&lt;/span> &lt;span class="nx">from&lt;/span> &lt;span class="s2">&amp;#34;./views/Home&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="kr">import&lt;/span> &lt;span class="nx">Top250&lt;/span> &lt;span class="nx">from&lt;/span> &lt;span class="s2">&amp;#34;./views/Top250&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="kr">import&lt;/span> &lt;span class="nx">UsBox&lt;/span> &lt;span class="nx">from&lt;/span> &lt;span class="s2">&amp;#34;./views/UsBox&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="kr">import&lt;/span> &lt;span class="nx">Showing&lt;/span> &lt;span class="nx">from&lt;/span> &lt;span class="s2">&amp;#34;./views/Showing&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="kr">import&lt;/span> &lt;span class="nx">ComingSoon&lt;/span> &lt;span class="nx">from&lt;/span> &lt;span class="s2">&amp;#34;./views/ComingSoon&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="kr">import&lt;/span> &lt;span class="nx">MovieInfo&lt;/span> &lt;span class="nx">from&lt;/span> &lt;span class="s2">&amp;#34;./views/MovieInfo&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="kr">import&lt;/span> &lt;span class="nx">ActorInfo&lt;/span> &lt;span class="nx">from&lt;/span> &lt;span class="s2">&amp;#34;./views/ActorInfo&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="kr">export&lt;/span> &lt;span class="k">default&lt;/span> &lt;span class="nx">MyApp&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">StackNavigator&lt;/span>&lt;span class="p">(&lt;/span>
&lt;span class="p">{&lt;/span>
&lt;span class="nx">FirstScreen&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="nx">screen&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="nx">TabNavigator&lt;/span>&lt;span class="p">(&lt;/span>
&lt;span class="p">{&lt;/span>
&lt;span class="nx">Top250&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="nx">screen&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="nx">Top250&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="p">},&lt;/span>
&lt;span class="nx">UsBox&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="nx">screen&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="nx">UsBox&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="p">},&lt;/span>
&lt;span class="nx">Home&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="nx">screen&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="nx">Home&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="p">},&lt;/span>
&lt;span class="nx">Showing&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="nx">screen&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="nx">Showing&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="p">},&lt;/span>
&lt;span class="nx">ComingSoon&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="nx">screen&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="nx">ComingSoon&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="p">},&lt;/span>
&lt;span class="p">},&lt;/span>
&lt;span class="p">{&lt;/span>
&lt;span class="nx">tabBarPosition&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s2">&amp;#34;bottom&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="nx">animationEnabled&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="nx">lazy&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="nx">initialRouteName&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s2">&amp;#34;Home&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="p">),&lt;/span>
&lt;span class="p">},&lt;/span>
&lt;span class="nx">MovieInfo&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="nx">screen&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="nx">MovieInfo&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="p">},&lt;/span>
&lt;span class="nx">ActorInfo&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="nx">screen&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="nx">ActorInfo&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="p">},&lt;/span>
&lt;span class="p">},&lt;/span>
&lt;span class="p">{&lt;/span>
&lt;span class="nx">headerMode&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s2">&amp;#34;none&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="p">);&lt;/span>
&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>éšç¬”</title><link>https://jo-hnny.github.io/p/%E9%9A%8F%E7%AC%94/</link><pubDate>Wed, 18 Sep 2019 20:50:02 +0800</pubDate><guid>https://jo-hnny.github.io/p/%E9%9A%8F%E7%AC%94/</guid><description>&lt;img src="https://picsum.photos/seed/a0fe4c2dd95249899623f35136c16e97/4096/2160" alt="Featured image of post éšç¬”" />&lt;h2 id="1å¾—åˆ°ä¸€ä¸ªå›ºå®šé•¿åº¦çš„éç©ºçš„æ•°ç»„">1ã€å¾—åˆ°ä¸€ä¸ªå›ºå®šé•¿åº¦çš„éç©ºçš„æ•°ç»„&lt;/h2>
&lt;p>æ¯”å¦‚æˆ‘éœ€è¦ä¸€ä¸ªæ•°ç»„ï¼Œå…ƒç´ æ˜¯ 1-10ï¼Œé¦–å…ˆæˆ‘ä¸æƒ³ç”¨ç›´æ¥æ‰‹å†™ä¸€ä¸ªæ•°ç»„ï¼Œä»¥å‰çš„å®ç°æ–¹å¼:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-js" data-lang="js">&lt;span class="k">new&lt;/span> &lt;span class="nb">Array&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">10&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nx">fill&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nx">map&lt;/span>&lt;span class="p">((&lt;/span>&lt;span class="nx">_&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">index&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="o">++&lt;/span>&lt;span class="nx">index&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>ä¸ºä»€ä¹ˆè¦åŠ ä¸ª fill å‘¢ï¼Œæ˜¯å› ä¸º Array æ„é€ å‡½æ•°è¿”å›çš„æ•°ç»„éƒ½æ˜¯ç©ºä½ï¼Œå°±æ˜¯ä»€ä¹ˆéƒ½æ²¡æœ‰ï¼Œè¿ undefined éƒ½ä¸æ˜¯ï¼Œmap æ–¹æ³•ä¸ç”Ÿæ•ˆã€‚
es6 æ‰©å±•è¿ç®—ç¬¦çš„å†™æ³•ï¼š&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-js" data-lang="js">&lt;span class="p">[...&lt;/span>&lt;span class="k">new&lt;/span> &lt;span class="nb">Array&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">10&lt;/span>&lt;span class="p">)].&lt;/span>&lt;span class="nx">map&lt;/span>&lt;span class="p">((&lt;/span>&lt;span class="nx">_&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">index&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="o">++&lt;/span>&lt;span class="nx">index&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>æ‰©å±•è¿ç®—ç¬¦ä¼šå°†ç©ºä½éƒ½å˜æˆ undefinedã€‚&lt;/p>
&lt;h2 id="2es6---symbol">2ã€es6 - Symbol&lt;/h2>
&lt;p>å¥½åƒæ²¡ä»€ä¹ˆå¥½è¯´çš„ï¼Œæœ€å¤§çš„ç‰¹ç‚¹å°±æ˜¯å”¯ä¸€æ€§ï¼Œä½†æ˜¯ä¹Ÿæ„Ÿè§‰åˆ°äº†ä¸€ä¸ªé—®é¢˜ï¼Œç”¨å®ƒä½œä¸ºå±æ€§åçš„æ—¶å€™ï¼Œè¦æƒ³å–å‡ºæ¥å¿…é¡»ä½¿ç”¨è¿™ä¸ª Symbol å€¼ï¼Œé‚£ä¹ˆè·¨æ¨¡å—çš„æ—¶å€™ï¼Œå…¶å®ƒæ¨¡å—æƒ³å–å‡ºè¿™ä¸ªå€¼ï¼Œè¿˜å¿…é¡»æŠŠè¿™ä¸ª Symbol å€¼æŠ›å‡ºå»ã€‚&lt;br>
åˆçœ‹åˆ°äº†&lt;code>Symbol.for()&lt;/code>ï¼Œå¥½åƒèƒ½è§£å†³é—®é¢˜ï¼Œä½†æ˜¯æ€»æ„Ÿè§‰å“ªä¸å¯¹&lt;/p>
&lt;h2 id="3getter-ä¸-setter">3ã€getter ä¸ setter&lt;/h2>
&lt;h3 id="getter">getter&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-js" data-lang="js">&lt;span class="kd">var&lt;/span> &lt;span class="nx">obj&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="nx">log&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="s2">&amp;#34;example&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;test&amp;#34;&lt;/span>&lt;span class="p">],&lt;/span>
&lt;span class="nx">get&lt;/span> &lt;span class="nx">latest&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">length&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="k">return&lt;/span> &lt;span class="kc">undefined&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="k">return&lt;/span> &lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">length&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">];&lt;/span>
&lt;span class="p">},&lt;/span>
&lt;span class="p">};&lt;/span>
&lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">obj&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">latest&lt;/span>&lt;span class="p">);&lt;/span> &lt;span class="c1">// &amp;#34;test&amp;#34;.
&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-js" data-lang="js">&lt;span class="kd">var&lt;/span> &lt;span class="nx">obj&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="nx">log&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="s2">&amp;#34;example&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;test&amp;#34;&lt;/span>&lt;span class="p">],&lt;/span>
&lt;span class="nx">latest&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">length&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="k">return&lt;/span> &lt;span class="kc">undefined&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="k">return&lt;/span> &lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">length&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">];&lt;/span>
&lt;span class="p">},&lt;/span>
&lt;span class="p">};&lt;/span>
&lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">obj&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">latest&lt;/span>&lt;span class="p">());&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="setter">setter&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-js" data-lang="js">&lt;span class="kd">var&lt;/span> &lt;span class="nx">language&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="nx">set&lt;/span> &lt;span class="nx">current&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">name&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">push&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">name&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="p">},&lt;/span>
&lt;span class="nx">log&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="p">[],&lt;/span>
&lt;span class="p">};&lt;/span>
&lt;span class="nx">language&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">current&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;EN&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">language&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">);&lt;/span> &lt;span class="c1">// [&amp;#39;EN&amp;#39;]
&lt;/span>&lt;span class="c1">&lt;/span>
&lt;span class="nx">language&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">current&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;FA&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">language&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">);&lt;/span> &lt;span class="c1">// [&amp;#39;EN&amp;#39;, &amp;#39;FA&amp;#39;]
&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-js" data-lang="js">&lt;span class="kd">var&lt;/span> &lt;span class="nx">language&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="nx">current&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">name&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">push&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">name&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="p">},&lt;/span>
&lt;span class="nx">log&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="p">[],&lt;/span>
&lt;span class="p">};&lt;/span>
&lt;span class="nx">language&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">current&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;EN&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">language&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">);&lt;/span> &lt;span class="c1">// [&amp;#39;EN&amp;#39;]
&lt;/span>&lt;span class="c1">&lt;/span>
&lt;span class="nx">language&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">current&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;FA&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">language&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">);&lt;/span> &lt;span class="c1">// [&amp;#39;EN&amp;#39;, &amp;#39;FA&amp;#39;]
&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>é‡è¦çš„æ˜¯å½“å–å€¼ã€èµ‹å€¼æ—¶ä½ å¯ä»¥é€šè¿‡&lt;code>get&lt;/code>å‡½æ•°ä»¥åŠ&lt;code>set&lt;/code>å‡½æ•°åšä¸€äº›å…¶å®ƒçš„äº‹ã€‚&lt;/p>
&lt;h2 id="4è¿ç»­èµ‹å€¼å­˜åœ¨çš„é—®é¢˜">4ã€è¿ç»­èµ‹å€¼å­˜åœ¨çš„é—®é¢˜&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-js" data-lang="js">&lt;span class="kd">let&lt;/span> &lt;span class="nx">a&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">{};&lt;/span>
&lt;span class="kd">let&lt;/span> &lt;span class="nx">b&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">a&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="nx">a&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">x&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">a&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="nx">n&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="mi">1&lt;/span> &lt;span class="p">};&lt;/span>
&lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">a&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">x&lt;/span>&lt;span class="p">);&lt;/span> &lt;span class="c1">// undefined
&lt;/span>&lt;span class="c1">&lt;/span>&lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">b&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">x&lt;/span>&lt;span class="p">);&lt;/span> &lt;span class="c1">// {n: 1}
&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ä¸çŸ¥é“è¿™æ®µä»£ç çš„ç»“æœæœ‰æ²¡æœ‰ä¸€ç‚¹å‡ºäººæ„æ–™ï¼ŒåŸå› å°±æ˜¯åœ¨èµ‹å€¼ä¹‹å‰ï¼Œå°±å·²ç»ç¡®å®šäº†å†…å­˜ä¸­çš„åœ°å€ï¼Œç„¶åæ‰å¼€å§‹èµ‹å€¼&lt;/p>
&lt;h2 id="5yieldçš„ç”¨æ³•">5ã€&lt;code>yield*&lt;/code>çš„ç”¨æ³•&lt;/h2>
&lt;p>çœ‹åˆ°äº†ä¸€ä¸ªæ•°ç»„æ‹å¹³çš„é—®é¢˜,å…¶ä¸­&lt;code>yield*&lt;/code>çš„ä½œç”¨å°±åƒæ˜¯ä¸€ä¸ªå¯¹å…¶å®ƒ generator å‡½æ•°çš„ä»£ç†ã€‚&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-js" data-lang="js">&lt;span class="kr">const&lt;/span> &lt;span class="nx">a&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="p">[[&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">],&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">4&lt;/span>&lt;span class="p">],&lt;/span> &lt;span class="mi">5&lt;/span>&lt;span class="p">];&lt;/span>
&lt;span class="kd">function&lt;/span>&lt;span class="o">*&lt;/span> &lt;span class="nx">flatten2&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">arr&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="k">for&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">item&lt;/span> &lt;span class="k">of&lt;/span> &lt;span class="nx">arr&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="nb">Array&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">isArray&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">item&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">?&lt;/span> &lt;span class="k">yield&lt;/span>&lt;span class="o">*&lt;/span> &lt;span class="nx">flatten2&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">item&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">:&lt;/span> &lt;span class="k">yield&lt;/span> &lt;span class="nx">item&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="kr">const&lt;/span> &lt;span class="nx">numbers&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">flatten2&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">a&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">numbers&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">next&lt;/span>&lt;span class="p">());&lt;/span> &lt;span class="c1">// 1
&lt;/span>&lt;span class="c1">&lt;/span>
&lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">numbers&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">next&lt;/span>&lt;span class="p">());&lt;/span> &lt;span class="c1">// 2
&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="6å®ç°è‡ªå·±çš„é˜²æŠ–å‡½æ•°">6ã€å®ç°è‡ªå·±çš„é˜²æŠ–å‡½æ•°&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-js" data-lang="js">&lt;span class="kr">const&lt;/span> &lt;span class="nx">a&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">()&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;a&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="kr">const&lt;/span> &lt;span class="nx">choke&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">fn&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">timeout&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="kd">let&lt;/span> &lt;span class="nx">start&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="k">return&lt;/span> &lt;span class="p">()&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="kr">const&lt;/span> &lt;span class="nx">now&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nb">Date&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">now&lt;/span>&lt;span class="p">();&lt;/span>
&lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">now&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="nx">start&lt;/span> &lt;span class="o">&amp;gt;&lt;/span> &lt;span class="nx">timeout&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="nx">start&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">now&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="k">return&lt;/span> &lt;span class="nx">fn&lt;/span>&lt;span class="p">();&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="p">};&lt;/span>
&lt;span class="p">};&lt;/span>
&lt;span class="kr">const&lt;/span> &lt;span class="nx">b&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">choke&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">a&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">1000&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="nx">b&lt;/span>&lt;span class="p">();&lt;/span>
&lt;span class="nx">b&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="7è‡ªå®šä¹‰ä¸€ä¸ªäº‹ä»¶ç±»">7ã€è‡ªå®šä¹‰ä¸€ä¸ªäº‹ä»¶ç±»&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-js" data-lang="js">&lt;span class="kr">class&lt;/span> &lt;span class="nx">Event&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="nx">constructor&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">stack&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">{};&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="nx">emit&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">eName&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="p">...&lt;/span>&lt;span class="nx">args&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">stack&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="nx">eName&lt;/span>&lt;span class="p">])&lt;/span> &lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">stack&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="nx">eName&lt;/span>&lt;span class="p">].&lt;/span>&lt;span class="nx">forEach&lt;/span>&lt;span class="p">((&lt;/span>&lt;span class="nx">cb&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="nx">cb&lt;/span>&lt;span class="p">(...&lt;/span>&lt;span class="nx">args&lt;/span>&lt;span class="p">));&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="nx">on&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">eName&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">cb&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">stack&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="nx">eName&lt;/span>&lt;span class="p">])&lt;/span> &lt;span class="k">return&lt;/span> &lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">stack&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="nx">eName&lt;/span>&lt;span class="p">].&lt;/span>&lt;span class="nx">push&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">cb&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">stack&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="nx">eName&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="nx">cb&lt;/span>&lt;span class="p">];&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="nx">off&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">eName&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">cb&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="o">!&lt;/span>&lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">stack&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="nx">eName&lt;/span>&lt;span class="p">])&lt;/span> &lt;span class="k">return&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="o">!&lt;/span>&lt;span class="nx">cb&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="k">return&lt;/span> &lt;span class="k">delete&lt;/span> &lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">stack&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="nx">eName&lt;/span>&lt;span class="p">];&lt;/span>
&lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">stack&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="nx">eName&lt;/span>&lt;span class="p">].&lt;/span>&lt;span class="nx">forEach&lt;/span>&lt;span class="p">((&lt;/span>&lt;span class="nx">acb&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">index&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">acb&lt;/span> &lt;span class="o">===&lt;/span> &lt;span class="nx">cb&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="k">delete&lt;/span> &lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">stack&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="nx">eName&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="nx">index&lt;/span>&lt;span class="p">];&lt;/span>
&lt;span class="p">});&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="kr">const&lt;/span> &lt;span class="nx">e&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="nx">Event&lt;/span>&lt;span class="p">();&lt;/span>
&lt;span class="nx">e&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">on&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;click&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">a&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">a&lt;/span>&lt;span class="p">));&lt;/span>
&lt;span class="nx">e&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">emit&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;click&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">123&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="8egg-é…åˆ-dockers-ä½¿ç”¨æ—¶è¦æŠŠ-scripts-start-ä¸­çš„--demon-å»æ‰">8ã€egg é…åˆ dockers ä½¿ç”¨æ—¶è¦æŠŠ scripts start ä¸­çš„&amp;ndash;demon å»æ‰ã€‚&lt;/h2></description></item><item><title>Webå±å¹•å–è¯å®ç°æ–¹å¼</title><link>https://jo-hnny.github.io/p/web%E5%B1%8F%E5%B9%95%E5%8F%96%E8%AF%8D%E5%AE%9E%E7%8E%B0%E6%96%B9%E5%BC%8F/</link><pubDate>Wed, 18 Sep 2019 20:47:53 +0800</pubDate><guid>https://jo-hnny.github.io/p/web%E5%B1%8F%E5%B9%95%E5%8F%96%E8%AF%8D%E5%AE%9E%E7%8E%B0%E6%96%B9%E5%BC%8F/</guid><description>&lt;img src="https://picsum.photos/seed/72184b95064c4307b47f42fcf2c85619/4096/2160" alt="Featured image of post Webå±å¹•å–è¯å®ç°æ–¹å¼" />&lt;p>å‰äº›å¤©é¡¹ç›®éœ€æ±‚è¦å®ç°å±å¹•å–è¯ï¼Œé€šè¿‡æˆ‘çš„è°ƒç ”ä½¿ç”¨ range api å®ç°äº†è¿™ä¸ªåŠŸèƒ½ï¼Œåæ¥æˆ‘åˆåˆ†æäº†æ‰‡è´çš„å¼€æ”¾ apiï¼Œäº†è§£äº†æ‰‡è´çš„å±å¹•å–è¯å®ç°æ–¹å¼ï¼Œåœ¨è¿™é‡Œæ€»ç»“ä¸€ä¸‹ã€‚&lt;/p>
&lt;h2 id="range-æ–¹å¼">Range æ–¹å¼&lt;/h2>
&lt;p>è¿™æ˜¯æˆ‘åœ¨é¡¹ç›®ä¸­å®ç°å±å¹•å–è¯çš„æ–¹å¼ï¼Œå…¶å…³é”®åœ¨äº&lt;code>document.caretRangeFromPoint(float x, float y)&lt;/code>æ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•æ¥æ”¶ä¸€ä¸ªåæ ‡ï¼Œé€šè¿‡è¿™ä¸ªåæ ‡ç”Ÿæˆä¸€ä¸ª range å¯¹è±¡ï¼Œé€šè¿‡è¿™ä¸ª range å¯¹è±¡å¯ä»¥è·å–åˆ°å½“å‰ç‚¹å‡»çš„æ–‡æœ¬å†…å®¹ï¼Œä»¥åŠå½“å‰ç‚¹å‡»çš„æ–‡æœ¬ä½ç½®ï¼Œæˆ‘æŠŠè¿™ä¸ªå®ç°æ–¹å¼å°è£…æˆäº†ä¸€ä¸ªåŒ…&lt;a class="link" href="https://www.npmjs.com/package/theword" target="_blank" rel="noopener"
>theword&lt;/a>ï¼Œå·²ç»ä¸Šä¼ åˆ°äº† npm ä»“åº“ï¼Œä¸‹è¾¹é€šè¿‡ä»£ç åˆ†æä¸€ä¸‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-js" data-lang="js">&lt;span class="kr">export&lt;/span> &lt;span class="k">default&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">event&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">regexp&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="sr">/[a-zA-Z&amp;#39;â€™]/&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="c1">// ç›‘æµ‹ä¸€ä¸ªå­—ç¬¦æ˜¯å¦æ˜¯æ„æˆå•è¯çš„å­—ç¬¦
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="kr">const&lt;/span> &lt;span class="nx">isWord&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">str&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="nx">str&lt;/span> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> &lt;span class="nx">regexp&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">test&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">str&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="kr">const&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="nx">clientX&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">clientY&lt;/span> &lt;span class="p">}&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">event&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="c1">// é€šè¿‡ä¸€ä¸ªç‚¹ç”Ÿæˆrange
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="kr">const&lt;/span> &lt;span class="nx">range&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nb">document&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">caretRangeFromPoint&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">clientX&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">clientY&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="c1">// ç‚¹å‡»çš„domeèŠ‚ç‚¹çš„æ–‡æœ¬å†…å®¹
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="kr">const&lt;/span> &lt;span class="nx">data&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">range&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">startContainer&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">data&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="c1">// ç‚¹å‡»çš„å­—ç¬¦åœ¨æ–‡æœ¬ä¸­çš„ä½ç½®
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="kr">const&lt;/span> &lt;span class="nx">point&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">range&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">startOffset&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="o">!&lt;/span>&lt;span class="nx">isWord&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">data&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="nx">point&lt;/span>&lt;span class="p">]))&lt;/span> &lt;span class="k">return&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="kd">let&lt;/span> &lt;span class="nx">j&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">point&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="kd">let&lt;/span> &lt;span class="nx">k&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">point&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="kd">let&lt;/span> &lt;span class="nx">wordArr&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="nx">data&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="nx">point&lt;/span>&lt;span class="p">]];&lt;/span>
&lt;span class="c1">// ä»ç‚¹å‡»ä½ç½®å‘å‰å¯»æ‰¾ç¬¦åˆæ„æˆå•è¯æ¡ä»¶çš„å­—ç¬¦ï¼Œç›´åˆ°é‡åˆ°éæ„æˆå•è¯çš„å­—ç¬¦
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="k">while&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">isWord&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">data&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="nx">j&lt;/span>&lt;span class="p">]))&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="nx">wordArr&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">unshift&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">data&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="nx">j&lt;/span>&lt;span class="p">]);&lt;/span>
&lt;span class="nx">j&lt;/span>&lt;span class="o">--&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="c1">// é‡æ–°è®¾ç½®rangeå¼€å§‹çš„ä½ç½®
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="nx">range&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">setStart&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">range&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">startContainer&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">j&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="c1">// // ä»ç‚¹å‡»ä½ç½®å‘åå¯»æ‰¾ç¬¦åˆæ„æˆå•è¯æ¡ä»¶çš„å­—ç¬¦ï¼Œç›´åˆ°é‡åˆ°éæ„æˆå•è¯çš„å­—ç¬¦
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="k">while&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">isWord&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">data&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="nx">k&lt;/span>&lt;span class="p">]))&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="nx">wordArr&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">push&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">data&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="nx">k&lt;/span>&lt;span class="p">]);&lt;/span>
&lt;span class="nx">k&lt;/span>&lt;span class="o">++&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="c1">// é‡æ–°è®¾ç½®rangeç»“æŸçš„ä½ç½®
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="nx">range&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">setEnd&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">range&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">endContainer&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">k&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="c1">// è·å–å½“å‰windowä¸‹çš„é€‰åŒºï¼Œå¹¶ä¸”æ¸…ç©ºæ‰€æœ‰é€‰åŒº
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="kr">const&lt;/span> &lt;span class="nx">s&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nb">window&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">getSelection&lt;/span>&lt;span class="p">();&lt;/span>
&lt;span class="nx">s&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">removeAllRanges&lt;/span>&lt;span class="p">();&lt;/span>
&lt;span class="c1">// ä¸€å¼€å§‹ä½¿ç”¨äº†åŸå§‹æ‹–è“æ•ˆæœè¡¨ç¤ºé€‰ä¸­ï¼Œä½†æ˜¯å¯å®šåˆ¶æ€§å·®ï¼Œè¾¾ä¸åˆ°UIæƒ³è¦çš„æ•ˆæœï¼Œæ‰€ä»¥æ³¨é‡Šæ‰äº†
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="c1">// s.addRange(range)
&lt;/span>&lt;span class="c1">&lt;/span>
&lt;span class="kr">const&lt;/span> &lt;span class="nx">word&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">wordArr&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">join&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="c1">// è·å–rangeçš„ä½ç½®ä¿¡æ¯
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="kr">const&lt;/span> &lt;span class="nx">rect&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">range&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">getBoundingClientRect&lt;/span>&lt;span class="p">();&lt;/span>
&lt;span class="k">return&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="nx">word&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="nx">rect&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="p">};&lt;/span>
&lt;span class="p">};&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>æœ€åé€šè¿‡è¿™ä¸ªæ–¹æ³•ï¼Œæˆ‘ä»¬æˆåŠŸçš„è·å–åˆ°äº†ç‚¹å‡»çš„å•è¯ï¼Œä»¥åŠè¯¥å•è¯çš„ä½ç½®ä¿¡æ¯ï¼ŒåŒ…æ‹¬å®½é«˜ã€è·ç¦»å±å¹•çš„ä½ç½®ï¼Œæœ€åé€šè¿‡ä¸€ä¸ªå®šä½çš„ div è¦†ç›–æ‰åŸå…ˆçš„å•è¯ï¼Œå®ç°äº†é€‰ä¸­æ•ˆæœã€‚&lt;/p>
&lt;h2 id="åˆ†å‰²æ–‡ç« çš„æ–¹å¼">åˆ†å‰²æ–‡ç« çš„æ–¹å¼&lt;/h2>
&lt;p>è¿™ä¸ªå…¶å®å°±æ˜¯æ‹¿åˆ°å…¨ç¯‡æ–‡ç« ï¼Œç”¨ç©ºæ ¼å°†å…¨æ–‡åˆ†å‰²æˆå•è¯æ„æˆçš„æ•°ç»„ï¼Œç„¶åå¾ªç¯ç”Ÿæˆ domï¼Œç»™æ¯ä¸ª dom ç»‘å®šç‚¹å‡»äº‹ä»¶ï¼›æˆ‘ä¸€å¼€å§‹ä¹Ÿæ˜¯è¿™ä¹ˆæƒ³çš„ï¼Œä½†æ˜¯å½“æ—¶è§‰å¾—è¿™ä¸ªæ–¹æ³•å¤ªæš´åŠ›äº†ï¼Œå¹¶ä¸”å¯èƒ½å¸¦æ¥æ€§èƒ½é—®é¢˜ï¼Œå½“ç„¶æˆ‘ç°åœ¨è¿˜æ˜¯è§‰å¾—å®ƒå¾ˆæš´åŠ›ï¼Œä½†æ˜¯å®ƒè¶³å¤Ÿç®€å•ã€‚&lt;/p>
&lt;h2 id="è¯ç»„æŸ¥è¯¢">è¯ç»„æŸ¥è¯¢&lt;/h2>
&lt;p>æ‰‡è´çš„å®ç°æ–¹å¼æ˜¯è¿˜æœ‰ä¸€ä¸ªæ¥å£ä¼šè¿”å›è¯ç»„åœ¨æ–‡ç« ä¸­çš„ä½ç½®ï¼Œä½ç½®çš„è¡¨ç¤ºæ˜¯ä»¥è¯¥è¯ç»„çš„èµ·å§‹å•è¯å’Œç»“æŸå•è¯åˆ†åˆ«æ˜¯ç¬¬å‡ ä¸ªå•è¯ç¡®å®šçš„ï¼ŒæŒ‰ç…§æˆ‘çš„æ–¹æ³•å‡å¦‚è¦å®ç°è¯ç»„æŸ¥è¯¢åŠŸèƒ½ï¼Œä¹Ÿæ˜¯éœ€è¦è¿™ä¹ˆä¸€ä¸ªè¯ç»„çš„æ¥å£ï¼Œä½†æ˜¯ä½ç½®ä¿¡æ¯å°±åº”è¯¥æ˜¯å­—ç¬¦ä½ç½®äº†ã€‚&lt;/p></description></item></channel></rss>