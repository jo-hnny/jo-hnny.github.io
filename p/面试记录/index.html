<!doctype html><html lang=zh-cn><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="è¿™é‡Œä¸»è¦è®°å½•ä¸€äº›æˆ‘æ²¡æœ‰å›ç­”ä¸Šæ¥çš„é¢è¯•é¢˜
1ã€ä½œç”¨åŸŸé“¾ ä»Šå¤©æ¥åˆ°äº†ä¸€ä¸ªç”µè¯é¢è¯•ï¼Œæ„Ÿè§‰å›ç­”çš„å¾ˆä¸å¥½ï¼Œæˆ‘å¯¹ css å°¤å…¶ä¸å¤ªæ“…é•¿ï¼ŒBFC è¿™ä¸ªæ²¡ç­”ä¸Šæ¥ï¼Œå…¶å®ä¹‹å‰æ˜¯æœ‰çœ‹åˆ°è¿‡çš„ï¼Œä½†æ˜¯ç”±äºè‡ªå·±å¯¹ css çš„ä¸é‡è§†ï¼Œå¯¼è‡´æ²¡æœ‰å…³æ³¨ã€‚
ä½†æ˜¯è¿™ç¯‡æ–‡ç« è¦è¯´çš„æ˜¯ä½œç”¨åŸŸé“¾ï¼Œæœ¬æ¥ js ç®—æ˜¯æˆ‘æ“…é•¿çš„ï¼Œè¿™ä¸ªæ²¡ç­”ä¸Šæ¥å®å±ä¸åº”è¯¥ï¼Œå°±ç®—æˆ‘æ²¡å…³æ³¨è¿™ä¸ªæ¦‚å¿µï¼Œä½†æ˜¯æˆ‘åº”è¯¥çŸ¥é“å®ƒçš„æ­£ç¡®æƒ…å†µçš„ï¼Œå°±è¿™ä¹ˆä¸€ä¸ªå¹³æ—¶å†™ä»£ç è§‰å¾—ç†æ‰€åº”å½“çš„ä¸œè¥¿ï¼Œè¢«é—®èµ·æ¥çš„æ—¶å€™æˆ‘ç«Ÿç„¶ç­”é”™äº†ã€‚
1.1ã€æ‰§è¡Œç¯å¢ƒ æ‰§è¡Œç¯å¢ƒå®šä¹‰äº†å˜é‡æˆ–å‡½æ•°æœ‰æƒè®¿é—®çš„å…¶ä»–æ•°æ®ï¼Œæ¯ä¸ªæ‰§è¡Œç¯å¢ƒéƒ½æœ‰ä¸€ä¸ªä¸ä¹‹å…³è”çš„å˜é‡å¯¹è±¡ï¼ˆvariable objectï¼‰ï¼Œç¯å¢ƒä¸­å®šä¹‰çš„å˜é‡å’Œå‡½æ•°éƒ½ä¿å­˜åœ¨è¿™ä¸ªå¯¹è±¡ä¸­ï¼Œå…¨å±€æ‰§è¡Œç¯å¢ƒæ˜¯æœ€å¤–å±‚çš„ä¸€ä¸ªæ‰§è¡Œç¯å¢ƒï¼Œæ¯ä¸ªå‡½æ•°éƒ½æœ‰è‡ªå·±çš„æ‰§è¡Œç¯å¢ƒï¼Œå½“æ‰§è¡Œæµè¿›å…¥ä¸€ä¸ªå‡½æ•°æ—¶ï¼Œå‡½æ•°çš„ç¯å¢ƒå°±ä¼šè¢«æ¨å…¥åˆ°ä¸€ä¸ªç¯å¢ƒæ ˆä¸­ï¼Œå½“å‡½æ•°æ‰§è¡Œå®Œæ¯•ï¼Œè¿™ä¸ªç¯å¢ƒå°±ä¼šå‡ºæ ˆå¹¶é”€æ¯ï¼ŒåŒæ—¶ä¿å­˜åœ¨å…¶ä¸­çš„å˜é‡å’Œå‡½æ•°ä¹Ÿéšä¹‹é”€æ¯ï¼Œæ§åˆ¶æƒäº¤è¿˜ç»™ä¹‹å‰çš„æ‰§è¡Œç¯å¢ƒã€‚
1.2ã€ä½œç”¨åŸŸé“¾ å½“ä»£ç åœ¨ä¸€ä¸ªç¯å¢ƒä¸­æ‰§è¡Œæ—¶ï¼Œä¼šåˆ›å»ºå˜é‡å¯¹è±¡çš„ä¸€ä¸ªä½œç”¨åŸŸé“¾ï¼Œä½œç”¨åŸŸé“¾çš„æœ€å‰ç«¯ï¼Œå§‹ç»ˆæ˜¯å½“å‰æ‰§è¡Œçš„ä»£ç æ‰€åœ¨ç¯å¢ƒçš„å˜é‡å¯¹è±¡ï¼Œå¦‚æœè¿™ä¸ªç¯å¢ƒæ˜¯å‡½æ•°ï¼Œåˆ™å°†å…¶æ´»åŠ¨å¯¹è±¡ï¼ˆactivation objectï¼‰ä½œä¸ºå˜é‡å¯¹è±¡ï¼Œï¼Œæ´»åŠ¨å¯¹è±¡æœ€å¼€å§‹åªæœ‰ä¸€ä¸ªå˜é‡ï¼Œå³ arguments å¯¹è±¡ï¼Œä½œç”¨åŸŸé“¾ä¸­çš„ä¸‹ä¸€ä¸ªå˜é‡å¯¹è±¡æ¥è‡ªå¤–éƒ¨ç¯å¢ƒï¼Œå†ä¸‹ä¸€ä¸ªåˆ™æ¥è‡ªå¤–éƒ¨ç¯å¢ƒçš„å¤–éƒ¨ç¯å¢ƒï¼Œç›´åˆ°æœ«ç«¯å…¨å±€æ‰§è¡Œç¯å¢ƒï¼Œè¿™å°±å½¢æˆäº†ä¸€ä¸ªä½œç”¨åŸŸé“¾ã€‚
1.3ã€æ´»åŠ¨å¯¹è±¡ 1ã€å½“è°ƒç”¨å‡½æ•°æ—¶ï¼Œé¦–å…ˆåˆ›å»ºä¸€ä¸ªæ´»åŠ¨å¯¹è±¡ 2ã€ä¸ºæ´»åŠ¨å¯¹è±¡æ·»åŠ ä¸€ä¸ªç±»ä¼¼æ•°ç»„çš„ arguments å¯¹è±¡
3ã€å°†å®šä¹‰å‡½æ•°æ—¶æ‰€åœ¨çš„æ‰§è¡Œç¯å¢ƒå¯¹åº”çš„ä½œç”¨åŸŸé“¾å¤åˆ¶åˆ°å‡½æ•°å†…éƒ¨çš„[[scope]]å±æ€§ä¸Šï¼ŒæŠŠè‡ªå·±çš„æ´»åŠ¨å¯¹è±¡æ¨å…¥ä½œç”¨åŸŸé“¾çš„é¡¶ç«¯
4ã€ä¹‹åå‘ç”Ÿç”± ECMA-262 ä¸­æ‰€è°“â€™æ´»åŠ¨å¯¹è±¡â€™å®Œæˆçš„â€™å˜é‡å®ä¾‹åŒ–â€™(Variable Instatiation)çš„è¿‡ç¨‹
(1)ã€æ­¤æ—¶å°†å‡½æ•°çš„å½¢å‚åˆ›å»ºä¸ºæ´»åŠ¨å¯¹è±¡(å˜é‡å¯¹è±¡)çš„å±æ€§ï¼Œå¦‚æœè°ƒç”¨å‡½æ•°æ—¶ä¼ é€’çš„å‚æ•°ä¸å½¢å¼å‚æ•°ä¸€è‡´ï¼Œåˆ™å°†ç›¸åº”å‚æ•°å€¼èµ‹ç»™è¿™äº›å±æ€§ï¼Œå¦åˆ™ï¼Œä¼šç»™å±æ€§èµ‹ undefined å€¼ã€‚ (2)ã€å°†å‡½æ•°å†…éƒ¨å£°æ˜çš„æ‰€æœ‰å±€éƒ¨å˜é‡åˆ›å»ºä¸ºæ´»åŠ¨å¯¹è±¡(å˜é‡å¯¹è±¡)çš„å±æ€§ï¼Œå…¶å€¼éƒ½è¢«'é¢„è§£æ'ä¸ºundefinedå€¼ï¼Œä»¥ä¸Šä¸¤æ­¥å®Œæˆæ´»åŠ¨å¯¹è±¡(å˜é‡å¯¹è±¡)ä¿å­˜å˜é‡çš„è¿‡ç¨‹ã€‚ (3)ã€å¯¹äºå®šä¹‰çš„å†…éƒ¨å‡½æ•°ï¼Œç”¨å£°æ˜çš„å‡½æ•°åinnerMethodï¼Œä¸ºæ´»åŠ¨å¯¹è±¡(å˜é‡å¯¹è±¡)åˆ›å»ºåŒåå±æ€§ï¼Œè€Œå®šä¹‰çš„å†…éƒ¨å‡½æ•°åˆ™è¢«åˆ›å»ºä¸ºå‡½æ•°å¯¹è±¡å¹¶æŒ‡å®šç»™è¯¥å±æ€§ï¼Œå®Œæˆæ´»åŠ¨å¯¹è±¡(å˜é‡å¯¹è±¡)ä¿å­˜å‡½æ•°çš„è¿‡ç¨‹ã€‚ æ³¨ï¼šåœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œé™¤äº†å®é™…å‚æ•°å’Œå‡½æ•°å£°æ˜æœ‰å€¼å¤–ï¼Œå…¶å®ƒéƒ½è¢«'é¢„è§£æ'ä¸ºundefinedå€¼ã€‚ æ³¨ï¼šå¯¹äº(1)ã€(2)ã€(3)æ­¥éª¤çš„é¡ºåºï¼Œå› ä¸ºå˜é‡å£°æ˜æ¯”å‡½æ•°å£°æ˜çš„ä¼˜å…ˆçº§é«˜ï¼Œå˜é‡å£°æ˜ä¼˜å…ˆäºå‡½æ•°å£°æ˜è¢«æå‡ï¼Œå¦‚æœä¸¤è€…åŒååŒæ—¶å­˜åœ¨ï¼Œåè¢«æå‡çš„å‡½æ•°å£°æ˜ä¼šè¦†ç›–å…ˆè¢«æå‡çš„å˜é‡å£°æ˜**(å¼•ç”¨æ¥æºä½œè€…(2)ã€(3)é¡ºåºåäº†)**ã€‚ æ³¨ï¼šå¯¹äº(2)ï¼Œå‡½æ•°è¢«èµ‹å€¼ä¸ºå‡½æ•°å®šä¹‰çš„å­—ç¬¦ä¸²ï¼Œå¹¶ä¸ä¼šå¯¹å‡½æ•°ä½“ä¸­çš„JSä»£ç åšç‰¹æ®Šå¤„ç†(å¦‚è¿ç®—ç­‰)ï¼Œåªæ˜¯å°†å‡½æ•°ä½“JSä»£ç çš„æ‰«æç»“æœ(å­—ç¬¦ä¸²)ä¿å­˜åœ¨æ´»åŠ¨å¯¹è±¡(å˜é‡å¯¹è±¡)çš„ä¸æ­¤å‡½æ•°åå¯¹åº”çš„å±æ€§ä¸Šï¼Œåœ¨å‡½æ•°æ‰§è¡Œæ—¶å†åšè¿›ä¸€æ­¥å¤„ç†ã€‚ 2ã€æ•°ç»„å»é‡ è¿™æ˜¯ä¸€ä¸ªå¾ˆç»å…¸çš„é—®é¢˜ï¼Œå½“ç„¶æœ€ç®€å•çš„å›ç­”å°±æ˜¯ä½¿ç”¨ Set
const array = [1,2,3,2,4] [... new Set(array)] å¾ˆæ˜æ˜¾é¢è¯•å®˜ä¸æƒ³å†å¬åˆ°è¿™ä¸ªå›ç­”ï¼Œç„¶åæˆ‘è¯´äº†å¦ä¸€ç§æ–¹å¼
const array = [1, 2, 3, 2, 4]; array.reduce((targetAarr, item) =&amp;gt; { if (!targetAarr.includes(item)) targetAarr.push(item); return targetAarr; }, []); ç„¶åé¢è¯•å®˜è¿˜æƒ³å¬åˆ°å…¶ä»–çš„æ–¹æ³•ï¼Œæˆ‘å°±åˆè¯´äº†ä¸€ä¸ªå¯¹è±¡é”®å€¼å¯¹çš„æ–¹å¼
const array = [1, 2, 3, 2, 4]; const targetObject = {}; array."><title>é¢è¯•è®°å½•</title><link rel=canonical href=https://jo-hnny.github.io/p/%E9%9D%A2%E8%AF%95%E8%AE%B0%E5%BD%95/><link rel=stylesheet href=/scss/style.min.css><meta property="og:title" content="é¢è¯•è®°å½•"><meta property="og:description" content="è¿™é‡Œä¸»è¦è®°å½•ä¸€äº›æˆ‘æ²¡æœ‰å›ç­”ä¸Šæ¥çš„é¢è¯•é¢˜
1ã€ä½œç”¨åŸŸé“¾ ä»Šå¤©æ¥åˆ°äº†ä¸€ä¸ªç”µè¯é¢è¯•ï¼Œæ„Ÿè§‰å›ç­”çš„å¾ˆä¸å¥½ï¼Œæˆ‘å¯¹ css å°¤å…¶ä¸å¤ªæ“…é•¿ï¼ŒBFC è¿™ä¸ªæ²¡ç­”ä¸Šæ¥ï¼Œå…¶å®ä¹‹å‰æ˜¯æœ‰çœ‹åˆ°è¿‡çš„ï¼Œä½†æ˜¯ç”±äºè‡ªå·±å¯¹ css çš„ä¸é‡è§†ï¼Œå¯¼è‡´æ²¡æœ‰å…³æ³¨ã€‚
ä½†æ˜¯è¿™ç¯‡æ–‡ç« è¦è¯´çš„æ˜¯ä½œç”¨åŸŸé“¾ï¼Œæœ¬æ¥ js ç®—æ˜¯æˆ‘æ“…é•¿çš„ï¼Œè¿™ä¸ªæ²¡ç­”ä¸Šæ¥å®å±ä¸åº”è¯¥ï¼Œå°±ç®—æˆ‘æ²¡å…³æ³¨è¿™ä¸ªæ¦‚å¿µï¼Œä½†æ˜¯æˆ‘åº”è¯¥çŸ¥é“å®ƒçš„æ­£ç¡®æƒ…å†µçš„ï¼Œå°±è¿™ä¹ˆä¸€ä¸ªå¹³æ—¶å†™ä»£ç è§‰å¾—ç†æ‰€åº”å½“çš„ä¸œè¥¿ï¼Œè¢«é—®èµ·æ¥çš„æ—¶å€™æˆ‘ç«Ÿç„¶ç­”é”™äº†ã€‚
1.1ã€æ‰§è¡Œç¯å¢ƒ æ‰§è¡Œç¯å¢ƒå®šä¹‰äº†å˜é‡æˆ–å‡½æ•°æœ‰æƒè®¿é—®çš„å…¶ä»–æ•°æ®ï¼Œæ¯ä¸ªæ‰§è¡Œç¯å¢ƒéƒ½æœ‰ä¸€ä¸ªä¸ä¹‹å…³è”çš„å˜é‡å¯¹è±¡ï¼ˆvariable objectï¼‰ï¼Œç¯å¢ƒä¸­å®šä¹‰çš„å˜é‡å’Œå‡½æ•°éƒ½ä¿å­˜åœ¨è¿™ä¸ªå¯¹è±¡ä¸­ï¼Œå…¨å±€æ‰§è¡Œç¯å¢ƒæ˜¯æœ€å¤–å±‚çš„ä¸€ä¸ªæ‰§è¡Œç¯å¢ƒï¼Œæ¯ä¸ªå‡½æ•°éƒ½æœ‰è‡ªå·±çš„æ‰§è¡Œç¯å¢ƒï¼Œå½“æ‰§è¡Œæµè¿›å…¥ä¸€ä¸ªå‡½æ•°æ—¶ï¼Œå‡½æ•°çš„ç¯å¢ƒå°±ä¼šè¢«æ¨å…¥åˆ°ä¸€ä¸ªç¯å¢ƒæ ˆä¸­ï¼Œå½“å‡½æ•°æ‰§è¡Œå®Œæ¯•ï¼Œè¿™ä¸ªç¯å¢ƒå°±ä¼šå‡ºæ ˆå¹¶é”€æ¯ï¼ŒåŒæ—¶ä¿å­˜åœ¨å…¶ä¸­çš„å˜é‡å’Œå‡½æ•°ä¹Ÿéšä¹‹é”€æ¯ï¼Œæ§åˆ¶æƒäº¤è¿˜ç»™ä¹‹å‰çš„æ‰§è¡Œç¯å¢ƒã€‚
1.2ã€ä½œç”¨åŸŸé“¾ å½“ä»£ç åœ¨ä¸€ä¸ªç¯å¢ƒä¸­æ‰§è¡Œæ—¶ï¼Œä¼šåˆ›å»ºå˜é‡å¯¹è±¡çš„ä¸€ä¸ªä½œç”¨åŸŸé“¾ï¼Œä½œç”¨åŸŸé“¾çš„æœ€å‰ç«¯ï¼Œå§‹ç»ˆæ˜¯å½“å‰æ‰§è¡Œçš„ä»£ç æ‰€åœ¨ç¯å¢ƒçš„å˜é‡å¯¹è±¡ï¼Œå¦‚æœè¿™ä¸ªç¯å¢ƒæ˜¯å‡½æ•°ï¼Œåˆ™å°†å…¶æ´»åŠ¨å¯¹è±¡ï¼ˆactivation objectï¼‰ä½œä¸ºå˜é‡å¯¹è±¡ï¼Œï¼Œæ´»åŠ¨å¯¹è±¡æœ€å¼€å§‹åªæœ‰ä¸€ä¸ªå˜é‡ï¼Œå³ arguments å¯¹è±¡ï¼Œä½œç”¨åŸŸé“¾ä¸­çš„ä¸‹ä¸€ä¸ªå˜é‡å¯¹è±¡æ¥è‡ªå¤–éƒ¨ç¯å¢ƒï¼Œå†ä¸‹ä¸€ä¸ªåˆ™æ¥è‡ªå¤–éƒ¨ç¯å¢ƒçš„å¤–éƒ¨ç¯å¢ƒï¼Œç›´åˆ°æœ«ç«¯å…¨å±€æ‰§è¡Œç¯å¢ƒï¼Œè¿™å°±å½¢æˆäº†ä¸€ä¸ªä½œç”¨åŸŸé“¾ã€‚
1.3ã€æ´»åŠ¨å¯¹è±¡ 1ã€å½“è°ƒç”¨å‡½æ•°æ—¶ï¼Œé¦–å…ˆåˆ›å»ºä¸€ä¸ªæ´»åŠ¨å¯¹è±¡ 2ã€ä¸ºæ´»åŠ¨å¯¹è±¡æ·»åŠ ä¸€ä¸ªç±»ä¼¼æ•°ç»„çš„ arguments å¯¹è±¡
3ã€å°†å®šä¹‰å‡½æ•°æ—¶æ‰€åœ¨çš„æ‰§è¡Œç¯å¢ƒå¯¹åº”çš„ä½œç”¨åŸŸé“¾å¤åˆ¶åˆ°å‡½æ•°å†…éƒ¨çš„[[scope]]å±æ€§ä¸Šï¼ŒæŠŠè‡ªå·±çš„æ´»åŠ¨å¯¹è±¡æ¨å…¥ä½œç”¨åŸŸé“¾çš„é¡¶ç«¯
4ã€ä¹‹åå‘ç”Ÿç”± ECMA-262 ä¸­æ‰€è°“â€™æ´»åŠ¨å¯¹è±¡â€™å®Œæˆçš„â€™å˜é‡å®ä¾‹åŒ–â€™(Variable Instatiation)çš„è¿‡ç¨‹
(1)ã€æ­¤æ—¶å°†å‡½æ•°çš„å½¢å‚åˆ›å»ºä¸ºæ´»åŠ¨å¯¹è±¡(å˜é‡å¯¹è±¡)çš„å±æ€§ï¼Œå¦‚æœè°ƒç”¨å‡½æ•°æ—¶ä¼ é€’çš„å‚æ•°ä¸å½¢å¼å‚æ•°ä¸€è‡´ï¼Œåˆ™å°†ç›¸åº”å‚æ•°å€¼èµ‹ç»™è¿™äº›å±æ€§ï¼Œå¦åˆ™ï¼Œä¼šç»™å±æ€§èµ‹ undefined å€¼ã€‚ (2)ã€å°†å‡½æ•°å†…éƒ¨å£°æ˜çš„æ‰€æœ‰å±€éƒ¨å˜é‡åˆ›å»ºä¸ºæ´»åŠ¨å¯¹è±¡(å˜é‡å¯¹è±¡)çš„å±æ€§ï¼Œå…¶å€¼éƒ½è¢«'é¢„è§£æ'ä¸ºundefinedå€¼ï¼Œä»¥ä¸Šä¸¤æ­¥å®Œæˆæ´»åŠ¨å¯¹è±¡(å˜é‡å¯¹è±¡)ä¿å­˜å˜é‡çš„è¿‡ç¨‹ã€‚ (3)ã€å¯¹äºå®šä¹‰çš„å†…éƒ¨å‡½æ•°ï¼Œç”¨å£°æ˜çš„å‡½æ•°åinnerMethodï¼Œä¸ºæ´»åŠ¨å¯¹è±¡(å˜é‡å¯¹è±¡)åˆ›å»ºåŒåå±æ€§ï¼Œè€Œå®šä¹‰çš„å†…éƒ¨å‡½æ•°åˆ™è¢«åˆ›å»ºä¸ºå‡½æ•°å¯¹è±¡å¹¶æŒ‡å®šç»™è¯¥å±æ€§ï¼Œå®Œæˆæ´»åŠ¨å¯¹è±¡(å˜é‡å¯¹è±¡)ä¿å­˜å‡½æ•°çš„è¿‡ç¨‹ã€‚ æ³¨ï¼šåœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œé™¤äº†å®é™…å‚æ•°å’Œå‡½æ•°å£°æ˜æœ‰å€¼å¤–ï¼Œå…¶å®ƒéƒ½è¢«'é¢„è§£æ'ä¸ºundefinedå€¼ã€‚ æ³¨ï¼šå¯¹äº(1)ã€(2)ã€(3)æ­¥éª¤çš„é¡ºåºï¼Œå› ä¸ºå˜é‡å£°æ˜æ¯”å‡½æ•°å£°æ˜çš„ä¼˜å…ˆçº§é«˜ï¼Œå˜é‡å£°æ˜ä¼˜å…ˆäºå‡½æ•°å£°æ˜è¢«æå‡ï¼Œå¦‚æœä¸¤è€…åŒååŒæ—¶å­˜åœ¨ï¼Œåè¢«æå‡çš„å‡½æ•°å£°æ˜ä¼šè¦†ç›–å…ˆè¢«æå‡çš„å˜é‡å£°æ˜**(å¼•ç”¨æ¥æºä½œè€…(2)ã€(3)é¡ºåºåäº†)**ã€‚ æ³¨ï¼šå¯¹äº(2)ï¼Œå‡½æ•°è¢«èµ‹å€¼ä¸ºå‡½æ•°å®šä¹‰çš„å­—ç¬¦ä¸²ï¼Œå¹¶ä¸ä¼šå¯¹å‡½æ•°ä½“ä¸­çš„JSä»£ç åšç‰¹æ®Šå¤„ç†(å¦‚è¿ç®—ç­‰)ï¼Œåªæ˜¯å°†å‡½æ•°ä½“JSä»£ç çš„æ‰«æç»“æœ(å­—ç¬¦ä¸²)ä¿å­˜åœ¨æ´»åŠ¨å¯¹è±¡(å˜é‡å¯¹è±¡)çš„ä¸æ­¤å‡½æ•°åå¯¹åº”çš„å±æ€§ä¸Šï¼Œåœ¨å‡½æ•°æ‰§è¡Œæ—¶å†åšè¿›ä¸€æ­¥å¤„ç†ã€‚ 2ã€æ•°ç»„å»é‡ è¿™æ˜¯ä¸€ä¸ªå¾ˆç»å…¸çš„é—®é¢˜ï¼Œå½“ç„¶æœ€ç®€å•çš„å›ç­”å°±æ˜¯ä½¿ç”¨ Set
const array = [1,2,3,2,4] [... new Set(array)] å¾ˆæ˜æ˜¾é¢è¯•å®˜ä¸æƒ³å†å¬åˆ°è¿™ä¸ªå›ç­”ï¼Œç„¶åæˆ‘è¯´äº†å¦ä¸€ç§æ–¹å¼
const array = [1, 2, 3, 2, 4]; array.reduce((targetAarr, item) =&amp;gt; { if (!targetAarr.includes(item)) targetAarr.push(item); return targetAarr; }, []); ç„¶åé¢è¯•å®˜è¿˜æƒ³å¬åˆ°å…¶ä»–çš„æ–¹æ³•ï¼Œæˆ‘å°±åˆè¯´äº†ä¸€ä¸ªå¯¹è±¡é”®å€¼å¯¹çš„æ–¹å¼
const array = [1, 2, 3, 2, 4]; const targetObject = {}; array."><meta property="og:url" content="https://jo-hnny.github.io/p/%E9%9D%A2%E8%AF%95%E8%AE%B0%E5%BD%95/"><meta property="og:site_name" content="å†·å®«"><meta property="og:type" content="article"><meta property="article:section" content="Post"><meta property="article:published_time" content="2019-09-18T21:00:11+08:00"><meta property="article:modified_time" content="2019-09-18T21:00:11+08:00"><meta name=twitter:site content="johnnyN70389377"><meta name=twitter:title content="é¢è¯•è®°å½•"><meta name=twitter:description content="è¿™é‡Œä¸»è¦è®°å½•ä¸€äº›æˆ‘æ²¡æœ‰å›ç­”ä¸Šæ¥çš„é¢è¯•é¢˜
1ã€ä½œç”¨åŸŸé“¾ ä»Šå¤©æ¥åˆ°äº†ä¸€ä¸ªç”µè¯é¢è¯•ï¼Œæ„Ÿè§‰å›ç­”çš„å¾ˆä¸å¥½ï¼Œæˆ‘å¯¹ css å°¤å…¶ä¸å¤ªæ“…é•¿ï¼ŒBFC è¿™ä¸ªæ²¡ç­”ä¸Šæ¥ï¼Œå…¶å®ä¹‹å‰æ˜¯æœ‰çœ‹åˆ°è¿‡çš„ï¼Œä½†æ˜¯ç”±äºè‡ªå·±å¯¹ css çš„ä¸é‡è§†ï¼Œå¯¼è‡´æ²¡æœ‰å…³æ³¨ã€‚
ä½†æ˜¯è¿™ç¯‡æ–‡ç« è¦è¯´çš„æ˜¯ä½œç”¨åŸŸé“¾ï¼Œæœ¬æ¥ js ç®—æ˜¯æˆ‘æ“…é•¿çš„ï¼Œè¿™ä¸ªæ²¡ç­”ä¸Šæ¥å®å±ä¸åº”è¯¥ï¼Œå°±ç®—æˆ‘æ²¡å…³æ³¨è¿™ä¸ªæ¦‚å¿µï¼Œä½†æ˜¯æˆ‘åº”è¯¥çŸ¥é“å®ƒçš„æ­£ç¡®æƒ…å†µçš„ï¼Œå°±è¿™ä¹ˆä¸€ä¸ªå¹³æ—¶å†™ä»£ç è§‰å¾—ç†æ‰€åº”å½“çš„ä¸œè¥¿ï¼Œè¢«é—®èµ·æ¥çš„æ—¶å€™æˆ‘ç«Ÿç„¶ç­”é”™äº†ã€‚
1.1ã€æ‰§è¡Œç¯å¢ƒ æ‰§è¡Œç¯å¢ƒå®šä¹‰äº†å˜é‡æˆ–å‡½æ•°æœ‰æƒè®¿é—®çš„å…¶ä»–æ•°æ®ï¼Œæ¯ä¸ªæ‰§è¡Œç¯å¢ƒéƒ½æœ‰ä¸€ä¸ªä¸ä¹‹å…³è”çš„å˜é‡å¯¹è±¡ï¼ˆvariable objectï¼‰ï¼Œç¯å¢ƒä¸­å®šä¹‰çš„å˜é‡å’Œå‡½æ•°éƒ½ä¿å­˜åœ¨è¿™ä¸ªå¯¹è±¡ä¸­ï¼Œå…¨å±€æ‰§è¡Œç¯å¢ƒæ˜¯æœ€å¤–å±‚çš„ä¸€ä¸ªæ‰§è¡Œç¯å¢ƒï¼Œæ¯ä¸ªå‡½æ•°éƒ½æœ‰è‡ªå·±çš„æ‰§è¡Œç¯å¢ƒï¼Œå½“æ‰§è¡Œæµè¿›å…¥ä¸€ä¸ªå‡½æ•°æ—¶ï¼Œå‡½æ•°çš„ç¯å¢ƒå°±ä¼šè¢«æ¨å…¥åˆ°ä¸€ä¸ªç¯å¢ƒæ ˆä¸­ï¼Œå½“å‡½æ•°æ‰§è¡Œå®Œæ¯•ï¼Œè¿™ä¸ªç¯å¢ƒå°±ä¼šå‡ºæ ˆå¹¶é”€æ¯ï¼ŒåŒæ—¶ä¿å­˜åœ¨å…¶ä¸­çš„å˜é‡å’Œå‡½æ•°ä¹Ÿéšä¹‹é”€æ¯ï¼Œæ§åˆ¶æƒäº¤è¿˜ç»™ä¹‹å‰çš„æ‰§è¡Œç¯å¢ƒã€‚
1.2ã€ä½œç”¨åŸŸé“¾ å½“ä»£ç åœ¨ä¸€ä¸ªç¯å¢ƒä¸­æ‰§è¡Œæ—¶ï¼Œä¼šåˆ›å»ºå˜é‡å¯¹è±¡çš„ä¸€ä¸ªä½œç”¨åŸŸé“¾ï¼Œä½œç”¨åŸŸé“¾çš„æœ€å‰ç«¯ï¼Œå§‹ç»ˆæ˜¯å½“å‰æ‰§è¡Œçš„ä»£ç æ‰€åœ¨ç¯å¢ƒçš„å˜é‡å¯¹è±¡ï¼Œå¦‚æœè¿™ä¸ªç¯å¢ƒæ˜¯å‡½æ•°ï¼Œåˆ™å°†å…¶æ´»åŠ¨å¯¹è±¡ï¼ˆactivation objectï¼‰ä½œä¸ºå˜é‡å¯¹è±¡ï¼Œï¼Œæ´»åŠ¨å¯¹è±¡æœ€å¼€å§‹åªæœ‰ä¸€ä¸ªå˜é‡ï¼Œå³ arguments å¯¹è±¡ï¼Œä½œç”¨åŸŸé“¾ä¸­çš„ä¸‹ä¸€ä¸ªå˜é‡å¯¹è±¡æ¥è‡ªå¤–éƒ¨ç¯å¢ƒï¼Œå†ä¸‹ä¸€ä¸ªåˆ™æ¥è‡ªå¤–éƒ¨ç¯å¢ƒçš„å¤–éƒ¨ç¯å¢ƒï¼Œç›´åˆ°æœ«ç«¯å…¨å±€æ‰§è¡Œç¯å¢ƒï¼Œè¿™å°±å½¢æˆäº†ä¸€ä¸ªä½œç”¨åŸŸé“¾ã€‚
1.3ã€æ´»åŠ¨å¯¹è±¡ 1ã€å½“è°ƒç”¨å‡½æ•°æ—¶ï¼Œé¦–å…ˆåˆ›å»ºä¸€ä¸ªæ´»åŠ¨å¯¹è±¡ 2ã€ä¸ºæ´»åŠ¨å¯¹è±¡æ·»åŠ ä¸€ä¸ªç±»ä¼¼æ•°ç»„çš„ arguments å¯¹è±¡
3ã€å°†å®šä¹‰å‡½æ•°æ—¶æ‰€åœ¨çš„æ‰§è¡Œç¯å¢ƒå¯¹åº”çš„ä½œç”¨åŸŸé“¾å¤åˆ¶åˆ°å‡½æ•°å†…éƒ¨çš„[[scope]]å±æ€§ä¸Šï¼ŒæŠŠè‡ªå·±çš„æ´»åŠ¨å¯¹è±¡æ¨å…¥ä½œç”¨åŸŸé“¾çš„é¡¶ç«¯
4ã€ä¹‹åå‘ç”Ÿç”± ECMA-262 ä¸­æ‰€è°“â€™æ´»åŠ¨å¯¹è±¡â€™å®Œæˆçš„â€™å˜é‡å®ä¾‹åŒ–â€™(Variable Instatiation)çš„è¿‡ç¨‹
(1)ã€æ­¤æ—¶å°†å‡½æ•°çš„å½¢å‚åˆ›å»ºä¸ºæ´»åŠ¨å¯¹è±¡(å˜é‡å¯¹è±¡)çš„å±æ€§ï¼Œå¦‚æœè°ƒç”¨å‡½æ•°æ—¶ä¼ é€’çš„å‚æ•°ä¸å½¢å¼å‚æ•°ä¸€è‡´ï¼Œåˆ™å°†ç›¸åº”å‚æ•°å€¼èµ‹ç»™è¿™äº›å±æ€§ï¼Œå¦åˆ™ï¼Œä¼šç»™å±æ€§èµ‹ undefined å€¼ã€‚ (2)ã€å°†å‡½æ•°å†…éƒ¨å£°æ˜çš„æ‰€æœ‰å±€éƒ¨å˜é‡åˆ›å»ºä¸ºæ´»åŠ¨å¯¹è±¡(å˜é‡å¯¹è±¡)çš„å±æ€§ï¼Œå…¶å€¼éƒ½è¢«'é¢„è§£æ'ä¸ºundefinedå€¼ï¼Œä»¥ä¸Šä¸¤æ­¥å®Œæˆæ´»åŠ¨å¯¹è±¡(å˜é‡å¯¹è±¡)ä¿å­˜å˜é‡çš„è¿‡ç¨‹ã€‚ (3)ã€å¯¹äºå®šä¹‰çš„å†…éƒ¨å‡½æ•°ï¼Œç”¨å£°æ˜çš„å‡½æ•°åinnerMethodï¼Œä¸ºæ´»åŠ¨å¯¹è±¡(å˜é‡å¯¹è±¡)åˆ›å»ºåŒåå±æ€§ï¼Œè€Œå®šä¹‰çš„å†…éƒ¨å‡½æ•°åˆ™è¢«åˆ›å»ºä¸ºå‡½æ•°å¯¹è±¡å¹¶æŒ‡å®šç»™è¯¥å±æ€§ï¼Œå®Œæˆæ´»åŠ¨å¯¹è±¡(å˜é‡å¯¹è±¡)ä¿å­˜å‡½æ•°çš„è¿‡ç¨‹ã€‚ æ³¨ï¼šåœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œé™¤äº†å®é™…å‚æ•°å’Œå‡½æ•°å£°æ˜æœ‰å€¼å¤–ï¼Œå…¶å®ƒéƒ½è¢«'é¢„è§£æ'ä¸ºundefinedå€¼ã€‚ æ³¨ï¼šå¯¹äº(1)ã€(2)ã€(3)æ­¥éª¤çš„é¡ºåºï¼Œå› ä¸ºå˜é‡å£°æ˜æ¯”å‡½æ•°å£°æ˜çš„ä¼˜å…ˆçº§é«˜ï¼Œå˜é‡å£°æ˜ä¼˜å…ˆäºå‡½æ•°å£°æ˜è¢«æå‡ï¼Œå¦‚æœä¸¤è€…åŒååŒæ—¶å­˜åœ¨ï¼Œåè¢«æå‡çš„å‡½æ•°å£°æ˜ä¼šè¦†ç›–å…ˆè¢«æå‡çš„å˜é‡å£°æ˜**(å¼•ç”¨æ¥æºä½œè€…(2)ã€(3)é¡ºåºåäº†)**ã€‚ æ³¨ï¼šå¯¹äº(2)ï¼Œå‡½æ•°è¢«èµ‹å€¼ä¸ºå‡½æ•°å®šä¹‰çš„å­—ç¬¦ä¸²ï¼Œå¹¶ä¸ä¼šå¯¹å‡½æ•°ä½“ä¸­çš„JSä»£ç åšç‰¹æ®Šå¤„ç†(å¦‚è¿ç®—ç­‰)ï¼Œåªæ˜¯å°†å‡½æ•°ä½“JSä»£ç çš„æ‰«æç»“æœ(å­—ç¬¦ä¸²)ä¿å­˜åœ¨æ´»åŠ¨å¯¹è±¡(å˜é‡å¯¹è±¡)çš„ä¸æ­¤å‡½æ•°åå¯¹åº”çš„å±æ€§ä¸Šï¼Œåœ¨å‡½æ•°æ‰§è¡Œæ—¶å†åšè¿›ä¸€æ­¥å¤„ç†ã€‚ 2ã€æ•°ç»„å»é‡ è¿™æ˜¯ä¸€ä¸ªå¾ˆç»å…¸çš„é—®é¢˜ï¼Œå½“ç„¶æœ€ç®€å•çš„å›ç­”å°±æ˜¯ä½¿ç”¨ Set
const array = [1,2,3,2,4] [... new Set(array)] å¾ˆæ˜æ˜¾é¢è¯•å®˜ä¸æƒ³å†å¬åˆ°è¿™ä¸ªå›ç­”ï¼Œç„¶åæˆ‘è¯´äº†å¦ä¸€ç§æ–¹å¼
const array = [1, 2, 3, 2, 4]; array.reduce((targetAarr, item) =&amp;gt; { if (!targetAarr.includes(item)) targetAarr.push(item); return targetAarr; }, []); ç„¶åé¢è¯•å®˜è¿˜æƒ³å¬åˆ°å…¶ä»–çš„æ–¹æ³•ï¼Œæˆ‘å°±åˆè¯´äº†ä¸€ä¸ªå¯¹è±¡é”®å€¼å¯¹çš„æ–¹å¼
const array = [1, 2, 3, 2, 4]; const targetObject = {}; array."><link rel="shortcut icon" href=/img/favicon.ico><script async src="https://www.googletagmanager.com/gtag/js?id=G-TFV4P906GT"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments);}
gtag("js",new Date());gtag("config","G-TFV4P906GT");</script></head><body><script>(function(){const colorSchemeKey='StackColorScheme';if(!localStorage.getItem(colorSchemeKey)){localStorage.setItem(colorSchemeKey,"auto");}})();</script><script>(function(){const colorSchemeKey='StackColorScheme';const colorSchemeItem=localStorage.getItem(colorSchemeKey);const supportDarkMode=window.matchMedia('(prefers-color-scheme: dark)').matches===true;if(colorSchemeItem=='dark'||colorSchemeItem==='auto'&&supportDarkMode){document.body.dataset.scheme='dark';}else{document.body.dataset.scheme='light';}})();</script><div class="container main-container flex on-phone--column extended article-page with-toolbar"><aside class="sidebar left-sidebar sticky"><button class="hamburger hamburger--spin" type=button id=toggle-menu aria-label=åˆ‡æ¢èœå•>
<span class=hamburger-box><span class=hamburger-inner></span></span></button><header class=site-info><figure class=site-avatar><img src=/img/avatar_hud170f2c6bd12f3a098a294aad792bf80_1699879_300x0_resize_box_2.png width=300 height=195 class=site-logo loading=lazy alt=Avatar>
<span class=emoji>ğŸ‚ğŸ»</span></figure><h1 class=site-name><a href=https://jo-hnny.github.io/>å†·å®«</a></h1><h2 class=site-description>å¥¹ä»¬éƒ½è¢«æˆ‘æ‰“å…¥äº†å†·å®«ï¼Œä½†æ˜¯å¶å°”è¿˜æ˜¯ä¼šè¿‡æ¥çœ‹ä¸€ä¸‹</h2></header><ol class=menu id=main-menu><li><a href=/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><polyline points="5 12 3 12 12 3 21 12 19 12"/><path d="M5 12v7a2 2 0 002 2h10a2 2 0 002-2v-7"/><path d="M9 21v-6a2 2 0 012-2h2a2 2 0 012 2v6"/></svg><span>Home</span></a></li><li><a href=/about><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-user" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="7" r="4"/><path d="M6 21v-2a4 4 0 014-4h4a4 4 0 014 4v2"/></svg><span>About</span></a></li><li><a href=/talks><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-hipchat" width="44" height="44" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M17.802 17.292s.077-.055.2-.149c1.843-1.425 2.998-3.49 2.998-5.789.0-4.286-4.03-7.764-8.998-7.764-4.97.0-9.002 3.478-9.002 7.764.0 4.288 4.03 7.646 9 7.646.424.0 1.12-.028 2.088-.084 1.262.82 3.104 1.493 4.716 1.493.499.0.734-.41.414-.828-.486-.596-1.156-1.551-1.416-2.29z"/><path d="M7.5 13.5c2.5 2.5 6.5 2.5 9 0"/></svg><span>Talks</span></a></li><li><a href=/archives><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><rect x="3" y="4" width="18" height="4" rx="2"/><path d="M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8"/><line x1="10" y1="12" x2="14" y2="12"/></svg><span>Archives</span></a></li><li><a href=/search><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="10" cy="10" r="7"/><line x1="21" y1="21" x2="15" y2="15"/></svg><span>Search</span></a></li><li><a href=/index.xml><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-rss" width="44" height="44" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><circle cx="5" cy="19" r="1"/><path d="M4 4a16 16 0 0116 16"/><path d="M4 11a9 9 0 019 9"/></svg><span>Feed</span></a></li><li id=dark-mode-toggle><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="8" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="16" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg><span>æš—è‰²æ¨¡å¼</span></li></ol></aside><main class="main full-width"><div id=article-toolbar><a href=https://jo-hnny.github.io/ class=back-home><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-chevron-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><polyline points="15 6 9 12 15 18"/></svg><span>Back</span></a></div><article class=main-article><header class=article-header><div class=article-details><h2 class=article-title><a href=/p/%E9%9D%A2%E8%AF%95%E8%AE%B0%E5%BD%95/>é¢è¯•è®°å½•</a></h2><footer class=article-time><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg><time class=article-time--published>Sep 18, 2019</time></footer></div></header><section class=article-content><p>è¿™é‡Œä¸»è¦è®°å½•ä¸€äº›æˆ‘æ²¡æœ‰å›ç­”ä¸Šæ¥çš„é¢è¯•é¢˜</p><h2 id=1ä½œç”¨åŸŸé“¾>1ã€ä½œç”¨åŸŸé“¾</h2><p>ä»Šå¤©æ¥åˆ°äº†ä¸€ä¸ªç”µè¯é¢è¯•ï¼Œæ„Ÿè§‰å›ç­”çš„å¾ˆä¸å¥½ï¼Œæˆ‘å¯¹ css å°¤å…¶ä¸å¤ªæ“…é•¿ï¼ŒBFC è¿™ä¸ªæ²¡ç­”ä¸Šæ¥ï¼Œå…¶å®ä¹‹å‰æ˜¯æœ‰çœ‹åˆ°è¿‡çš„ï¼Œä½†æ˜¯ç”±äºè‡ªå·±å¯¹ css çš„ä¸é‡è§†ï¼Œå¯¼è‡´æ²¡æœ‰å…³æ³¨ã€‚<br>ä½†æ˜¯è¿™ç¯‡æ–‡ç« è¦è¯´çš„æ˜¯ä½œç”¨åŸŸé“¾ï¼Œæœ¬æ¥ js ç®—æ˜¯æˆ‘æ“…é•¿çš„ï¼Œè¿™ä¸ªæ²¡ç­”ä¸Šæ¥å®å±ä¸åº”è¯¥ï¼Œå°±ç®—æˆ‘æ²¡å…³æ³¨è¿™ä¸ªæ¦‚å¿µï¼Œä½†æ˜¯æˆ‘åº”è¯¥çŸ¥é“å®ƒçš„æ­£ç¡®æƒ…å†µçš„ï¼Œå°±è¿™ä¹ˆä¸€ä¸ªå¹³æ—¶å†™ä»£ç è§‰å¾—ç†æ‰€åº”å½“çš„ä¸œè¥¿ï¼Œè¢«é—®èµ·æ¥çš„æ—¶å€™æˆ‘ç«Ÿç„¶ç­”é”™äº†ã€‚</p><h3 id=11æ‰§è¡Œç¯å¢ƒ>1.1ã€æ‰§è¡Œç¯å¢ƒ</h3><p>æ‰§è¡Œç¯å¢ƒå®šä¹‰äº†å˜é‡æˆ–å‡½æ•°æœ‰æƒè®¿é—®çš„å…¶ä»–æ•°æ®ï¼Œæ¯ä¸ªæ‰§è¡Œç¯å¢ƒéƒ½æœ‰ä¸€ä¸ªä¸ä¹‹å…³è”çš„å˜é‡å¯¹è±¡ï¼ˆvariable objectï¼‰ï¼Œç¯å¢ƒä¸­å®šä¹‰çš„å˜é‡å’Œå‡½æ•°éƒ½ä¿å­˜åœ¨è¿™ä¸ªå¯¹è±¡ä¸­ï¼Œå…¨å±€æ‰§è¡Œç¯å¢ƒæ˜¯æœ€å¤–å±‚çš„ä¸€ä¸ªæ‰§è¡Œç¯å¢ƒï¼Œæ¯ä¸ªå‡½æ•°éƒ½æœ‰è‡ªå·±çš„æ‰§è¡Œç¯å¢ƒï¼Œå½“æ‰§è¡Œæµè¿›å…¥ä¸€ä¸ªå‡½æ•°æ—¶ï¼Œå‡½æ•°çš„ç¯å¢ƒå°±ä¼šè¢«æ¨å…¥åˆ°ä¸€ä¸ªç¯å¢ƒæ ˆä¸­ï¼Œå½“å‡½æ•°æ‰§è¡Œå®Œæ¯•ï¼Œè¿™ä¸ªç¯å¢ƒå°±ä¼šå‡ºæ ˆå¹¶é”€æ¯ï¼ŒåŒæ—¶ä¿å­˜åœ¨å…¶ä¸­çš„å˜é‡å’Œå‡½æ•°ä¹Ÿéšä¹‹é”€æ¯ï¼Œæ§åˆ¶æƒäº¤è¿˜ç»™ä¹‹å‰çš„æ‰§è¡Œç¯å¢ƒã€‚</p><h3 id=12ä½œç”¨åŸŸé“¾>1.2ã€ä½œç”¨åŸŸé“¾</h3><p>å½“ä»£ç åœ¨ä¸€ä¸ªç¯å¢ƒä¸­æ‰§è¡Œæ—¶ï¼Œä¼šåˆ›å»ºå˜é‡å¯¹è±¡çš„ä¸€ä¸ªä½œç”¨åŸŸé“¾ï¼Œä½œç”¨åŸŸé“¾çš„æœ€å‰ç«¯ï¼Œå§‹ç»ˆæ˜¯å½“å‰æ‰§è¡Œçš„ä»£ç æ‰€åœ¨ç¯å¢ƒçš„å˜é‡å¯¹è±¡ï¼Œå¦‚æœè¿™ä¸ªç¯å¢ƒæ˜¯å‡½æ•°ï¼Œåˆ™å°†å…¶æ´»åŠ¨å¯¹è±¡ï¼ˆactivation objectï¼‰ä½œä¸ºå˜é‡å¯¹è±¡ï¼Œï¼Œæ´»åŠ¨å¯¹è±¡æœ€å¼€å§‹åªæœ‰ä¸€ä¸ªå˜é‡ï¼Œå³ arguments å¯¹è±¡ï¼Œä½œç”¨åŸŸé“¾ä¸­çš„ä¸‹ä¸€ä¸ªå˜é‡å¯¹è±¡æ¥è‡ªå¤–éƒ¨ç¯å¢ƒï¼Œå†ä¸‹ä¸€ä¸ªåˆ™æ¥è‡ªå¤–éƒ¨ç¯å¢ƒçš„å¤–éƒ¨ç¯å¢ƒï¼Œç›´åˆ°æœ«ç«¯å…¨å±€æ‰§è¡Œç¯å¢ƒï¼Œè¿™å°±å½¢æˆäº†ä¸€ä¸ªä½œç”¨åŸŸé“¾ã€‚</p><h3 id=13æ´»åŠ¨å¯¹è±¡>1.3ã€æ´»åŠ¨å¯¹è±¡</h3><p>1ã€å½“è°ƒç”¨å‡½æ•°æ—¶ï¼Œé¦–å…ˆåˆ›å»ºä¸€ä¸ªæ´»åŠ¨å¯¹è±¡
2ã€ä¸ºæ´»åŠ¨å¯¹è±¡æ·»åŠ ä¸€ä¸ªç±»ä¼¼æ•°ç»„çš„ arguments å¯¹è±¡<br>3ã€å°†å®šä¹‰å‡½æ•°æ—¶æ‰€åœ¨çš„æ‰§è¡Œç¯å¢ƒå¯¹åº”çš„ä½œç”¨åŸŸé“¾å¤åˆ¶åˆ°å‡½æ•°å†…éƒ¨çš„<code>[[scope]]</code>å±æ€§ä¸Šï¼ŒæŠŠè‡ªå·±çš„æ´»åŠ¨å¯¹è±¡æ¨å…¥ä½œç”¨åŸŸé“¾çš„é¡¶ç«¯<br>4ã€ä¹‹åå‘ç”Ÿç”± ECMA-262 ä¸­æ‰€è°“â€™æ´»åŠ¨å¯¹è±¡â€™å®Œæˆçš„â€™å˜é‡å®ä¾‹åŒ–â€™(Variable Instatiation)çš„è¿‡ç¨‹</p><pre><code>(1)ã€æ­¤æ—¶å°†å‡½æ•°çš„å½¢å‚åˆ›å»ºä¸ºæ´»åŠ¨å¯¹è±¡(å˜é‡å¯¹è±¡)çš„å±æ€§ï¼Œå¦‚æœè°ƒç”¨å‡½æ•°æ—¶ä¼ é€’çš„å‚æ•°ä¸å½¢å¼å‚æ•°ä¸€è‡´ï¼Œåˆ™å°†ç›¸åº”å‚æ•°å€¼èµ‹ç»™è¿™äº›å±æ€§ï¼Œå¦åˆ™ï¼Œä¼šç»™å±æ€§èµ‹ undefined å€¼ã€‚

(2)ã€å°†å‡½æ•°å†…éƒ¨å£°æ˜çš„æ‰€æœ‰å±€éƒ¨å˜é‡åˆ›å»ºä¸ºæ´»åŠ¨å¯¹è±¡(å˜é‡å¯¹è±¡)çš„å±æ€§ï¼Œå…¶å€¼éƒ½è¢«'é¢„è§£æ'ä¸ºundefinedå€¼ï¼Œä»¥ä¸Šä¸¤æ­¥å®Œæˆæ´»åŠ¨å¯¹è±¡(å˜é‡å¯¹è±¡)ä¿å­˜å˜é‡çš„è¿‡ç¨‹ã€‚

(3)ã€å¯¹äºå®šä¹‰çš„å†…éƒ¨å‡½æ•°ï¼Œç”¨å£°æ˜çš„å‡½æ•°åinnerMethodï¼Œä¸ºæ´»åŠ¨å¯¹è±¡(å˜é‡å¯¹è±¡)åˆ›å»ºåŒåå±æ€§ï¼Œè€Œå®šä¹‰çš„å†…éƒ¨å‡½æ•°åˆ™è¢«åˆ›å»ºä¸ºå‡½æ•°å¯¹è±¡å¹¶æŒ‡å®šç»™è¯¥å±æ€§ï¼Œå®Œæˆæ´»åŠ¨å¯¹è±¡(å˜é‡å¯¹è±¡)ä¿å­˜å‡½æ•°çš„è¿‡ç¨‹ã€‚

æ³¨ï¼šåœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œé™¤äº†å®é™…å‚æ•°å’Œå‡½æ•°å£°æ˜æœ‰å€¼å¤–ï¼Œå…¶å®ƒéƒ½è¢«'é¢„è§£æ'ä¸ºundefinedå€¼ã€‚

æ³¨ï¼šå¯¹äº(1)ã€(2)ã€(3)æ­¥éª¤çš„é¡ºåºï¼Œå› ä¸ºå˜é‡å£°æ˜æ¯”å‡½æ•°å£°æ˜çš„ä¼˜å…ˆçº§é«˜ï¼Œå˜é‡å£°æ˜ä¼˜å…ˆäºå‡½æ•°å£°æ˜è¢«æå‡ï¼Œå¦‚æœä¸¤è€…åŒååŒæ—¶å­˜åœ¨ï¼Œåè¢«æå‡çš„å‡½æ•°å£°æ˜ä¼šè¦†ç›–å…ˆè¢«æå‡çš„å˜é‡å£°æ˜**(å¼•ç”¨æ¥æºä½œè€…(2)ã€(3)é¡ºåºåäº†)**ã€‚

æ³¨ï¼šå¯¹äº(2)ï¼Œå‡½æ•°è¢«èµ‹å€¼ä¸ºå‡½æ•°å®šä¹‰çš„å­—ç¬¦ä¸²ï¼Œå¹¶ä¸ä¼šå¯¹å‡½æ•°ä½“ä¸­çš„JSä»£ç åšç‰¹æ®Šå¤„ç†(å¦‚è¿ç®—ç­‰)ï¼Œåªæ˜¯å°†å‡½æ•°ä½“JSä»£ç çš„æ‰«æç»“æœ(å­—ç¬¦ä¸²)ä¿å­˜åœ¨æ´»åŠ¨å¯¹è±¡(å˜é‡å¯¹è±¡)çš„ä¸æ­¤å‡½æ•°åå¯¹åº”çš„å±æ€§ä¸Šï¼Œåœ¨å‡½æ•°æ‰§è¡Œæ—¶å†åšè¿›ä¸€æ­¥å¤„ç†ã€‚

</code></pre><h2 id=2æ•°ç»„å»é‡>2ã€æ•°ç»„å»é‡</h2><p>è¿™æ˜¯ä¸€ä¸ªå¾ˆç»å…¸çš„é—®é¢˜ï¼Œå½“ç„¶æœ€ç®€å•çš„å›ç­”å°±æ˜¯ä½¿ç”¨ Set</p><div class=highlight><pre class=chroma><code class=language-js data-lang=js><span class=kr>const</span> <span class=nx>array</span> <span class=o>=</span> <span class=p>[</span><span class=mi>1</span><span class=p>,</span><span class=mi>2</span><span class=p>,</span><span class=mi>3</span><span class=p>,</span><span class=mi>2</span><span class=p>,</span><span class=mi>4</span><span class=p>]</span>
<span class=p>[...</span> <span class=k>new</span> <span class=nx>Set</span><span class=p>(</span><span class=nx>array</span><span class=p>)]</span>
</code></pre></div><p>å¾ˆæ˜æ˜¾é¢è¯•å®˜ä¸æƒ³å†å¬åˆ°è¿™ä¸ªå›ç­”ï¼Œç„¶åæˆ‘è¯´äº†å¦ä¸€ç§æ–¹å¼</p><div class=highlight><pre class=chroma><code class=language-js data-lang=js><span class=kr>const</span> <span class=nx>array</span> <span class=o>=</span> <span class=p>[</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>4</span><span class=p>];</span>
<span class=nx>array</span><span class=p>.</span><span class=nx>reduce</span><span class=p>((</span><span class=nx>targetAarr</span><span class=p>,</span> <span class=nx>item</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
  <span class=k>if</span> <span class=p>(</span><span class=o>!</span><span class=nx>targetAarr</span><span class=p>.</span><span class=nx>includes</span><span class=p>(</span><span class=nx>item</span><span class=p>))</span> <span class=nx>targetAarr</span><span class=p>.</span><span class=nx>push</span><span class=p>(</span><span class=nx>item</span><span class=p>);</span>
  <span class=k>return</span> <span class=nx>targetAarr</span><span class=p>;</span>
<span class=p>},</span> <span class=p>[]);</span>
</code></pre></div><p>ç„¶åé¢è¯•å®˜è¿˜æƒ³å¬åˆ°å…¶ä»–çš„æ–¹æ³•ï¼Œæˆ‘å°±åˆè¯´äº†ä¸€ä¸ªå¯¹è±¡é”®å€¼å¯¹çš„æ–¹å¼</p><div class=highlight><pre class=chroma><code class=language-js data-lang=js><span class=kr>const</span> <span class=nx>array</span> <span class=o>=</span> <span class=p>[</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>4</span><span class=p>];</span>
<span class=kr>const</span> <span class=nx>targetObject</span> <span class=o>=</span> <span class=p>{};</span>
<span class=nx>array</span><span class=p>.</span><span class=nx>forEach</span><span class=p>((</span><span class=nx>item</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>(</span><span class=nx>targetObject</span><span class=p>[</span><span class=nx>item</span><span class=p>]</span> <span class=o>=</span> <span class=nx>item</span><span class=p>));</span>
<span class=nb>Object</span><span class=p>.</span><span class=nx>keys</span><span class=p>(</span><span class=nx>targetObject</span><span class=p>);</span>
</code></pre></div><p>å¾ˆæ˜æ˜¾è¿™ç§æ–¹å¼æœ‰ä¸ªé—®é¢˜ï¼Œä¸èƒ½åŒºåˆ†<code>'1'</code>å’Œ<code>1</code>
å†é—®æˆ‘ï¼Œæˆ‘è¯´äº†å¯ä»¥å…ˆæ’åºï¼Œå†æŸ¥çœ‹ç›¸é‚»é¡¹æ˜¯å¦ç›¸åŒï¼Œä»£ç å®ç°å¤§æ¦‚æ˜¯è¿™ä¸ªæ ·å­ï¼Œè¿™å„¿ä¸å¾—ä¸è¯´åˆ° sort æ–¹æ³•ä¼ å‚çš„é—®é¢˜ï¼Œæˆ‘ä¹‹å‰ä¸€ç›´æ˜¯æœ‰è‡ªå®šä¹‰ callback æ¥æ’åºçš„ï¼Œé¢è¯•å®˜é—®æˆ‘å¦‚æœä¸ä¼ å‚æ˜¯ä»€ä¹ˆæƒ…å†µï¼Œè¿™ä¸ªæˆ‘è¿˜æ­£æ²¡æ³¨æ„åˆ°åŸæ¥å¯ä»¥ä¸ä¼ å‚ï¼Œå½“ç„¶æˆ‘ç›´è§‰æ˜¯å¦‚æœä¸ä¼ å‚ï¼Œåº”è¯¥æ˜¯ä»å°åˆ°å¤§æ’åºï¼Œä½†æ˜¯æˆ‘ä¸çŸ¥é“çš„ä¸œè¥¿å½“ç„¶ä¸æ•¢èƒ¡è¯´ï¼Œå°±ç›´æ¥å›ç­”äº†ä¸çŸ¥é“ï¼Œå›æ¥ä¸€çœ‹ï¼Œä¸ä¼ å‚çš„è¯ï¼Œå…ƒç´ æŒ‰ç…§è½¬æ¢ä¸ºçš„å­—ç¬¦ä¸²çš„å„ä¸ªå­—ç¬¦çš„ Unicode ä½ç‚¹è¿›è¡Œæ’åºã€‚</p><div class=highlight><pre class=chroma><code class=language-js data-lang=js><span class=kr>const</span> <span class=nx>array</span> <span class=o>=</span> <span class=p>[</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>4</span><span class=p>];</span>
<span class=kr>const</span> <span class=nx>targetArr</span> <span class=o>=</span> <span class=nx>array</span><span class=p>.</span><span class=nx>sort</span><span class=p>();</span>
<span class=nx>targetArr</span><span class=p>.</span><span class=nx>forEach</span><span class=p>((</span><span class=nx>item</span><span class=p>,</span> <span class=nx>index</span><span class=p>,</span> <span class=nx>arr</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
  <span class=k>if</span> <span class=p>(</span><span class=nx>item</span> <span class=o>===</span> <span class=nx>arr</span><span class=p>[</span><span class=nx>index</span> <span class=o>+</span> <span class=mi>1</span><span class=p>])</span> <span class=nx>arr</span><span class=p>.</span><span class=nx>splice</span><span class=p>(</span><span class=nx>index</span><span class=p>,</span> <span class=mi>1</span><span class=p>);</span>
<span class=p>});</span>

<span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>targetArr</span><span class=p>);</span>
</code></pre></div><p>è¯´åˆ°è¿™äº†ï¼Œæˆ‘å†è®°å½•ä¸€ä¸‹æ•°ç»„å’Œå­—ç¬¦ä¸²å¸¸å¸¸å¼„æ··çš„å‡ ä¸ªæ–¹æ³•ï¼Œä¹‹å‰æ¯æ¬¡ç”¨åˆ°è¿™å‡ ä¸ªæ–¹æ³•éƒ½ä¼šæ‰“å¼€ mdn çš„æ–‡æ¡£ï¼Œè™½ç„¶æˆ‘è§‰å¾—è¿™æ ·æ²¡ä»€ä¹ˆï¼Œä½†æ˜¯ä¸‡ä¸€è¢«é—®åˆ°äº†å‘¢ï¼Œæˆ‘æ„Ÿè§‰æˆ‘å›ç­”çš„æ—¶å€™å¥½åƒå°±æœ‰è¯´æ··äº†çš„ã€‚<br>1ã€<code>Array.prototype.slice</code>:æ–¹æ³•è¿”å›ä¸€ä¸ªä»å¼€å§‹åˆ°ç»“æŸï¼ˆä¸åŒ…æ‹¬ç»“æŸï¼‰é€‰æ‹©çš„æ•°ç»„çš„ä¸€éƒ¨åˆ†æµ…æ‹·è´åˆ°ä¸€ä¸ªæ–°æ•°ç»„å¯¹è±¡ã€‚ä¸”åŸå§‹æ•°ç»„ä¸ä¼šè¢«ä¿®æ”¹ã€‚</p><div class=highlight><pre class=chroma><code class=language-js data-lang=js><span class=nx>arr</span><span class=p>.</span><span class=nx>slice</span><span class=p>();</span>
<span class=c1>// [0, end]
</span><span class=c1></span>
<span class=nx>arr</span><span class=p>.</span><span class=nx>slice</span><span class=p>(</span><span class=nx>begin</span><span class=p>);</span>
<span class=c1>// [begin, end]
</span><span class=c1></span>
<span class=nx>arr</span><span class=p>.</span><span class=nx>slice</span><span class=p>(</span><span class=nx>begin</span><span class=p>,</span> <span class=nx>end</span><span class=p>);</span>
<span class=c1>// [begin, end)
</span></code></pre></div><p>2ã€<code>Aarray.prototype.splice</code>:æ–¹æ³•é€šè¿‡åˆ é™¤ç°æœ‰å…ƒç´ å’Œ/æˆ–æ·»åŠ æ–°å…ƒç´ æ¥æ›´æ”¹ä¸€ä¸ªæ•°ç»„çš„å†…å®¹ã€‚</p><div class=highlight><pre class=chroma><code class=language-js data-lang=js><span class=nx>array</span><span class=p>.</span><span class=nx>splice</span><span class=p>(</span><span class=nx>start</span><span class=p>)</span>
<span class=c1>// åˆ é™¤start - end
</span><span class=c1></span><span class=nx>array</span><span class=p>.</span><span class=nx>splice</span><span class=p>(</span><span class=nx>start</span><span class=p>,</span> <span class=nx>deleteCount</span><span class=p>)</span>
<span class=c1>// ä»startå¼€å§‹ï¼ŒåŒ…æ‹¬startï¼Œåˆ é™¤deletecountä¸ªå…ƒç´ 
</span><span class=c1></span>
<span class=nx>array</span><span class=p>.</span><span class=nx>splice</span><span class=p>(</span><span class=nx>start</span><span class=p>,</span> <span class=nx>deleteCount</span><span class=p>,</span> <span class=nx>item1</span><span class=p>,</span> <span class=nx>item2</span><span class=p>,</span> <span class=p>...)</span>
<span class=c1>// åˆ é™¤å…ƒç´ ï¼Œå¹¶ä¸”ä»startä½ç½®å¼€å§‹æ·»åŠ è‹¥å¹²ä¸ªå…ƒç´ 
</span></code></pre></div><p>3ã€<code>String.prototype.slice</code>:æ–¹æ³•æå–ä¸€ä¸ªå­—ç¬¦ä¸²çš„ä¸€éƒ¨åˆ†ï¼Œå¹¶è¿”å›ä¸€æ–°çš„å­—ç¬¦ä¸²ã€‚ä¸ä¿®æ”¹åŸå­—ç¬¦ä¸²ã€‚</p><div class=highlight><pre class=chroma><code class=language-js data-lang=js><span class=nx>str</span><span class=p>.</span><span class=nx>slice</span><span class=p>(</span><span class=nx>beginSlice</span><span class=p>[,</span> <span class=nx>endSlice</span><span class=p>])</span>
</code></pre></div><p><code>beginSlice</code><br>ä»è¯¥ç´¢å¼•ï¼ˆä»¥ 0 ä¸ºåŸºæ•°ï¼‰å¤„å¼€å§‹æå–åŸå­—ç¬¦ä¸²ä¸­çš„å­—ç¬¦ã€‚å¦‚æœå€¼ä¸ºè´Ÿæ•°ï¼Œä¼šè¢«å½“åš sourceLength + beginSlice çœ‹å¾…ï¼Œè¿™é‡Œçš„ sourceLength æ˜¯å­—ç¬¦ä¸²çš„é•¿åº¦ (ä¾‹å¦‚ï¼Œ å¦‚æœ beginSlice æ˜¯ -3 åˆ™çœ‹ä½œæ˜¯: sourceLength - 3)<br><code>endSlice</code><br>å¯é€‰ã€‚åœ¨è¯¥ç´¢å¼•ï¼ˆä»¥ 0 ä¸ºåŸºæ•°ï¼‰å¤„ç»“æŸæå–å­—ç¬¦ä¸²ã€‚å¦‚æœçœç•¥è¯¥å‚æ•°ï¼Œslice ä¼šä¸€ç›´æå–åˆ°å­—ç¬¦ä¸²æœ«å°¾ã€‚å¦‚æœè¯¥å‚æ•°ä¸ºè´Ÿæ•°ï¼Œåˆ™è¢«çœ‹ä½œæ˜¯ sourceLength + endSliceï¼Œè¿™é‡Œçš„ sourceLength å°±æ˜¯å­—ç¬¦ä¸²çš„é•¿åº¦(ä¾‹å¦‚ï¼Œå¦‚æœ endSlice æ˜¯ -3ï¼Œåˆ™æ˜¯, sourceLength - 3)ã€‚<br>è¿™ä¹ˆçœ‹çš„è¯å…¶å®ä»–å’Œ Array çš„ç”¨æ³•åŸºæœ¬ä¸€æ ·<br>4ã€<code>String.prototype.split</code>:æ–¹æ³•ä½¿ç”¨æŒ‡å®šçš„åˆ†éš”ç¬¦å­—ç¬¦ä¸²å°†ä¸€ä¸ª String å¯¹è±¡åˆ†å‰²æˆå­—ç¬¦ä¸²æ•°ç»„ï¼Œä»¥å°†å­—ç¬¦ä¸²åˆ†éš”ä¸ºå­å­—ç¬¦ä¸²ï¼Œä»¥ç¡®å®šæ¯ä¸ªæ‹†åˆ†çš„ä½ç½®ã€‚<br><code>æœ€åæ€»ç»“ä¸€ä¸‹ï¼ŒArrayå’ŒStringéƒ½æœ‰sliceæ–¹æ³•ï¼Œä¸»è¦ç”¨æ¥æˆªå–æŒ‡å®šé•¿åº¦ï¼ŒArrayæœ‰ä¸€ä¸ªspliceæ–¹æ³•ç”¨æ¥åˆ é™¤ã€æ·»åŠ å…ƒç´ ï¼Œè€ŒStringæœ‰ä¸€ä¸ªslitæ–¹æ³•ç”¨æ¥æŠŠå­—ç¬¦ä¸²åˆ†å‰²æˆæ•°ç»„ã€‚</code></p><h2 id=update-20180323>update 2018.03.23</h2><h2 id=3promise-è¿”å›å€¼çš„é—®é¢˜>3ã€Promise è¿”å›å€¼çš„é—®é¢˜</h2><p>è¢«é¢è¯•å®˜é—®åˆ° promise è¿ç»­ç‚¹ thenï¼Œç¬¬äºŒä¸ªç‚¹ then ä¼šè¿”å›ä»€ä¹ˆï¼Œæˆ‘å¾ˆè‡ªä¿¡çš„è¯´å¦‚æœè‡ªå·±ä¸æŒ‡å®šè¿”å›å€¼çš„è¯æ˜¯ resolve çš„å€¼ï¼Œäº‹å®ä¸Šæˆ‘é”™äº†ï¼š</p><div class=highlight><pre class=chroma><code class=language-js data-lang=js><span class=nb>Promise</span><span class=p>.</span><span class=nx>resolve</span><span class=p>(</span><span class=mi>1</span><span class=p>)</span>
  <span class=p>.</span><span class=nx>then</span><span class=p>((</span><span class=nx>rsp</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>rsp</span><span class=p>))</span> <span class=c1>// 1
</span><span class=c1></span>  <span class=p>.</span><span class=nx>then</span><span class=p>((</span><span class=nx>rsp</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>rsp</span><span class=p>));</span> <span class=c1>// undefined
</span></code></pre></div><p>so then å‡½æ•° callback æ¥æ”¶çš„å€¼åº”è¯¥æ˜¯ä¸Šä¸€ä¸ª thencallback è¿”å›çš„å€¼ã€‚</p><h2 id=4è‡ªå·±å®ç°ä¸€ä¸ª-co>4ã€è‡ªå·±å®ç°ä¸€ä¸ª co</h2><p>ä¸‹é¢æ˜¯æˆ‘ä¸€ä¸ªç®€å•çš„å®ç°ï¼Œä¸»è¦å°±æ˜¯è¦åšåˆ°ä¸æ–­çš„é€’å½’è°ƒç”¨ï¼š</p><div class=highlight><pre class=chroma><code class=language-js data-lang=js><span class=kd>function</span> <span class=nx>co</span><span class=p>(</span><span class=nx>gn</span><span class=p>)</span> <span class=p>{</span>
  <span class=nx>gn</span> <span class=o>=</span> <span class=nx>gn</span><span class=p>();</span>

  <span class=k>return</span> <span class=k>new</span> <span class=nb>Promise</span><span class=p>((</span><span class=nx>resolve</span><span class=p>,</span> <span class=nx>reject</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
    <span class=nx>next</span><span class=p>();</span>

    <span class=kd>function</span> <span class=nx>next</span><span class=p>(</span><span class=nx>data</span><span class=p>)</span> <span class=p>{</span>
      <span class=kr>const</span> <span class=p>{</span> <span class=nx>done</span><span class=p>,</span> <span class=nx>value</span> <span class=p>}</span> <span class=o>=</span> <span class=nx>gn</span><span class=p>.</span><span class=nx>next</span><span class=p>(</span><span class=nx>data</span><span class=p>);</span>
      <span class=k>if</span> <span class=p>(</span><span class=nx>done</span><span class=p>)</span> <span class=k>return</span> <span class=nx>resolve</span><span class=p>(</span><span class=nx>value</span><span class=p>);</span>
      <span class=nx>value</span><span class=p>.</span><span class=nx>then</span><span class=p>((</span><span class=nx>rsp</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=nx>next</span><span class=p>(</span><span class=nx>rsp</span><span class=p>)).</span><span class=k>catch</span><span class=p>((</span><span class=nx>err</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=nx>reject</span><span class=p>(</span><span class=nx>err</span><span class=p>));</span>
    <span class=p>}</span>
  <span class=p>});</span>
<span class=p>}</span>

<span class=kd>function</span><span class=o>*</span> <span class=nx>test</span><span class=p>()</span> <span class=p>{</span>
  <span class=kr>const</span> <span class=nx>a</span> <span class=o>=</span> <span class=k>yield</span> <span class=nb>Promise</span><span class=p>.</span><span class=nx>resolve</span><span class=p>(</span><span class=mi>1</span><span class=p>);</span>
  <span class=kr>const</span> <span class=nx>b</span> <span class=o>=</span> <span class=k>yield</span> <span class=nb>Promise</span><span class=p>.</span><span class=nx>resolve</span><span class=p>(</span><span class=mi>2</span><span class=p>);</span>
  <span class=k>return</span> <span class=nx>a</span> <span class=o>+</span> <span class=nx>b</span><span class=p>;</span>
<span class=p>}</span>

<span class=nx>co</span><span class=p>(</span><span class=nx>test</span><span class=p>)</span>
  <span class=p>.</span><span class=nx>then</span><span class=p>((</span><span class=nx>rsp</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>rsp</span><span class=p>))</span> <span class=c1>// 3
</span><span class=c1></span>  <span class=p>.</span><span class=k>catch</span><span class=p>((</span><span class=nx>err</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>err</span><span class=p>));</span>
</code></pre></div><p>å»ºè®®è¿™ç§é—®é¢˜æœ€å¥½èƒ½è®©ä¸Šæœºå†™ä¸€ä¸‹ä»£ç ï¼Œè®©æˆ‘å¹²æƒ³å’Œåœ¨çº¸ä¸Šå†™å®åœ¨æ˜¯æœ‰ç‚¹å›°éš¾ã€‚</p><h2 id=5prototype-çš„é—®é¢˜>5ã€prototype çš„é—®é¢˜</h2><p>ç°åœ¨æ‰å›æƒ³èµ·æ¥è‡ªå·±å…¨è¯´é”™äº†ï¼Œå½“æ—¶è¿˜ä¿¡èª“æ—¦æ—¦ï¼ŒçœŸæ˜¯ç¾æ„§,éƒ½æ˜¯è‡ªå·±çš„æƒ¯æ€§æ€ç»´ï¼Œæ²¡æœ‰æ³¨æ„åˆ°è¿™æ¬¡æ˜¯ç›´æ¥ä¿®æ”¹äº† prototype çš„æŒ‡å‘,è¯´åˆ°åº•è¿˜æ˜¯å¯¹è±¡å¼•ç”¨çš„é—®é¢˜</p><div class=highlight><pre class=chroma><code class=language-js data-lang=js><span class=kd>function</span> <span class=nx>A</span><span class=p>()</span> <span class=p>{}</span>

<span class=kd>function</span> <span class=nx>B</span><span class=p>()</span> <span class=p>{</span>
  <span class=k>this</span><span class=p>.</span><span class=nx>hello</span> <span class=o>=</span> <span class=s2>&#34;hello&#34;</span><span class=p>;</span>
<span class=p>}</span>

<span class=kd>var</span> <span class=nx>a</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>A</span><span class=p>();</span>
<span class=nx>A</span><span class=p>.</span><span class=nx>prototype</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>B</span><span class=p>();</span>
<span class=kd>var</span> <span class=nx>a1</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>A</span><span class=p>();</span>

<span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>a</span><span class=p>.</span><span class=nx>hello</span><span class=p>);</span> <span class=c1>// undefined
</span><span class=c1></span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>a1</span><span class=p>.</span><span class=nx>hello</span><span class=p>);</span> <span class=c1>// hello
</span></code></pre></div><p>ç°åœ¨ä¸€çœ‹ï¼Œæ„Ÿè§‰è¿™æ¬¡é¢è¯•åˆå‡‰äº†ã€‚</p><h2 id=6å¦‚ä½•å®šä¹‰ä¸€ä¸ªçœŸæ­£çš„å¸¸é‡>6ã€å¦‚ä½•å®šä¹‰ä¸€ä¸ªçœŸæ­£çš„å¸¸é‡</h2><p>å¤§å®¶éƒ½çŸ¥é“ ES6 å¼•å…¥äº† const è¡¨ç¤ºå¸¸é‡ï¼Œä½†æ˜¯å¤§å®¶ä¹ŸçŸ¥é“ const å¹¶ä¸èƒ½é˜²æ­¢ç”¨æˆ·ä¿®æ”¹å¯¹è±¡çš„å±æ€§ï¼Œæ·»åŠ ã€åˆ é™¤å±æ€§ï¼Œé‚£ä¹ˆå¦‚ä½•å®šä¹‰ä¸€ä¸ªçœŸæ­£æ„ä¹‰ä¸Šçš„å¸¸é‡ï¼Œè¿™ä¸ªå¹¶æ²¡æœ‰ä»€ä¹ˆæŠ€æœ¯ä¸Šçš„å«é‡ï¼ˆå½“ç„¶æˆ‘ä¹Ÿè¯•ç€ä»å…¶ä»–æ–¹é¢å»å®ç°ï¼Œåƒæ˜¯ä»£ç†ä¹‹ç±»çš„ï¼Œç°åœ¨å…ˆä¸è¯´ï¼‰ï¼Œæ‰“å¼€çº¢å®ä¹¦ï¼Œç¿»åˆ°é«˜çº§æŠ€å·§-é˜²ç¯¡æ”¹å¯¹è±¡ï¼Œåœ¨è¿™é‡Œç»™å¤§å®¶ä»‹ç»äº†å‡ ä¸ªå¯¹è±¡çš„æ–¹æ³•ï¼š</p><h3 id=61ä¸å¯æ‰©å±•å¯¹è±¡-å³æ— æ³•ä¸ºå¯¹è±¡æ·»åŠ å±æ€§>6.1ã€ä¸å¯æ‰©å±•å¯¹è±¡-å³æ— æ³•ä¸ºå¯¹è±¡æ·»åŠ å±æ€§ï¼›</h3><div class=highlight><pre class=chroma><code class=language-js data-lang=js><span class=kd>var</span> <span class=nx>a</span> <span class=o>=</span> <span class=p>{</span> <span class=nx>name</span><span class=o>:</span> <span class=s2>&#34;johnny&#34;</span> <span class=p>};</span>

<span class=nb>Object</span><span class=p>.</span><span class=nx>preventExtensions</span><span class=p>(</span><span class=nx>a</span><span class=p>);</span>

<span class=nx>a</span><span class=p>.</span><span class=nx>age</span> <span class=o>=</span> <span class=mi>10</span><span class=p>;</span>

<span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>a</span><span class=p>.</span><span class=nx>age</span><span class=p>);</span> <span class=c1>// undefined
</span><span class=c1></span>
<span class=nx>a</span><span class=p>.</span><span class=nx>name</span> <span class=o>=</span> <span class=s2>&#34;saber&#34;</span><span class=p>;</span>

<span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>a</span><span class=p>.</span><span class=nx>name</span><span class=p>);</span> <span class=c1>// saber
</span><span class=c1></span>
<span class=k>delete</span> <span class=nx>a</span><span class=p>.</span><span class=nx>name</span><span class=p>;</span>
<span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>a</span><span class=p>.</span><span class=nx>name</span><span class=p>);</span> <span class=c1>// undefined
</span></code></pre></div><h3 id=62å¯†å°çš„å¯¹è±¡-ä¸èƒ½æ·»åŠ åˆ é™¤å±æ€§>6.2ã€å¯†å°çš„å¯¹è±¡-ä¸èƒ½æ·»åŠ ã€åˆ é™¤å±æ€§ï¼š</h3><div class=highlight><pre class=chroma><code class=language-js data-lang=js><span class=kd>var</span> <span class=nx>a</span> <span class=o>=</span> <span class=p>{</span> <span class=nx>name</span><span class=o>:</span> <span class=s2>&#34;johnny&#34;</span> <span class=p>};</span>

<span class=nb>Object</span><span class=p>.</span><span class=nx>seal</span><span class=p>(</span><span class=nx>a</span><span class=p>);</span>

<span class=nx>a</span><span class=p>.</span><span class=nx>age</span> <span class=o>=</span> <span class=mi>10</span><span class=p>;</span>

<span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>a</span><span class=p>.</span><span class=nx>age</span><span class=p>);</span> <span class=c1>// undefined
</span><span class=c1></span>
<span class=nx>a</span><span class=p>.</span><span class=nx>name</span> <span class=o>=</span> <span class=s2>&#34;saber&#34;</span><span class=p>;</span>

<span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>a</span><span class=p>.</span><span class=nx>name</span><span class=p>);</span> <span class=c1>// saber
</span><span class=c1></span>
<span class=k>delete</span> <span class=nx>a</span><span class=p>.</span><span class=nx>name</span><span class=p>;</span>
<span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>a</span><span class=p>.</span><span class=nx>name</span><span class=p>);</span> <span class=c1>// saber
</span></code></pre></div><h3 id=63å†»ç»“çš„å¯¹è±¡-æ— æ³•æ·»åŠ åˆ é™¤ä¿®æ”¹å±æ€§çœŸæ­£çš„å¸¸é‡>6.3ã€å†»ç»“çš„å¯¹è±¡-æ— æ³•æ·»åŠ ã€åˆ é™¤ã€ä¿®æ”¹å±æ€§ï¼ŒçœŸæ­£çš„å¸¸é‡ï¼š</h3><div class=highlight><pre class=chroma><code class=language-js data-lang=js><span class=kd>var</span> <span class=nx>a</span> <span class=o>=</span> <span class=p>{</span> <span class=nx>name</span><span class=o>:</span> <span class=s2>&#34;johnny&#34;</span> <span class=p>};</span>

<span class=nb>Object</span><span class=p>.</span><span class=nx>freeze</span><span class=p>(</span><span class=nx>a</span><span class=p>);</span>

<span class=nx>a</span><span class=p>.</span><span class=nx>age</span> <span class=o>=</span> <span class=mi>10</span><span class=p>;</span>

<span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>a</span><span class=p>.</span><span class=nx>age</span><span class=p>);</span> <span class=c1>// undefined
</span><span class=c1></span>
<span class=nx>a</span><span class=p>.</span><span class=nx>name</span> <span class=o>=</span> <span class=s2>&#34;saber&#34;</span><span class=p>;</span>

<span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>a</span><span class=p>.</span><span class=nx>name</span><span class=p>);</span> <span class=c1>// johnny
</span><span class=c1></span>
<span class=k>delete</span> <span class=nx>a</span><span class=p>.</span><span class=nx>name</span><span class=p>;</span>
<span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>a</span><span class=p>.</span><span class=nx>name</span><span class=p>);</span> <span class=c1>// johnny
</span></code></pre></div><p>ä¸Šé¢æ·»åŠ ã€åˆ é™¤ã€ä¿®æ”¹æ“ä½œåœ¨éä¸¥æ ¼æ¨¡å¼ä¸‹ä¸ºä¸ç”Ÿæ•ˆï¼Œåœ¨ä¸¥æ ¼æ¨¡å¼ä¸‹ä¼šæŠ¥é”™ï¼Œå»ºè®®å¤§å®¶å¼€å¯ä¸¥æ ¼æ¨¡å¼ã€‚</p></section><footer class=article-footer><section class=article-copyright><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><path d="M14.5 9a3.5 4 0 100 6"/></svg><span>Licensed under CC BY-NC-SA 4.0</span></section></footer></article><aside class=related-contents--wrapper></aside><div class=disqus-container><div id=disqus_thread></div><script type=application/javascript>var disqus_config=function(){};(function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById('disqus_thread').innerHTML='Disqus comments not available by default when the website is previewed locally.';return;}
var d=document,s=d.createElement('script');s.async=true;s.src='//'+"jo-hnny"+'.disqus.com/embed.js';s.setAttribute('data-timestamp',+new Date());(d.head||d.body).appendChild(s);})();</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></div><style>.disqus-container{background-color:var(--card-background);border-radius:var(--card-border-radius);box-shadow:var(--shadow-l1);padding:var(--card-padding)}</style><footer class=site-footer><section class=copyright>&copy;
2020 å†·å®«</section><section class=powerby>Built with <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a><br>Theme <b><a href=https://github.com/CaiJimmy/hugo-theme-stack target=_blank rel=noopener data-version=2.0.1>Stack</a></b> designed by <a href=https://jimmycai.com target=_blank rel=noopener>Jimmy</a></section></footer><div class=pswp tabindex=-1 role=dialog aria-hidden=true><div class=pswp__bg></div><div class=pswp__scroll-wrap><div class=pswp__container><div class=pswp__item></div><div class=pswp__item></div><div class=pswp__item></div></div><div class="pswp__ui pswp__ui--hidden"><div class=pswp__top-bar><div class=pswp__counter></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class=pswp__preloader><div class=pswp__preloader__icn><div class=pswp__preloader__cut><div class=pswp__preloader__donut></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class=pswp__share-tooltip></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)"></button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class=pswp__caption><div class=pswp__caption__center></div></div></div></div></div><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js></script><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.css><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.css></main></div><script src=https://cdn.jsdelivr.net/npm/node-vibrant@3.1.5/dist/vibrant.min.js integrity="sha256-5NovOZc4iwiAWTYIFiIM7DxKUXKWvpVEuMEPLzcm5/g=" crossorigin=anonymous></script><script type=text/javascript src=/ts/main.js defer></script><script>(function(){const customFont=document.createElement('link');customFont.href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap";customFont.type="text/css";customFont.rel="stylesheet";document.head.appendChild(customFont);}());</script></body></html>