<!doctype html><html lang=zh-cn><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="这里主要记录一些我没有回答上来的面试题
1、作用域链 今天接到了一个电话面试，感觉回答的很不好，我对 css 尤其不太擅长，BFC 这个没答上来，其实之前是有看到过的，但是由于自己对 css 的不重视，导致没有关注。
但是这篇文章要说的是作用域链，本来 js 算是我擅长的，这个没答上来实属不应该，就算我没关注这个概念，但是我应该知道它的正确情况的，就这么一个平时写代码觉得理所应当的东西，被问起来的时候我竟然答错了。
1.1、执行环境 执行环境定义了变量或函数有权访问的其他数据，每个执行环境都有一个与之关联的变量对象（variable object），环境中定义的变量和函数都保存在这个对象中，全局执行环境是最外层的一个执行环境，每个函数都有自己的执行环境，当执行流进入一个函数时，函数的环境就会被推入到一个环境栈中，当函数执行完毕，这个环境就会出栈并销毁，同时保存在其中的变量和函数也随之销毁，控制权交还给之前的执行环境。
1.2、作用域链 当代码在一个环境中执行时，会创建变量对象的一个作用域链，作用域链的最前端，始终是当前执行的代码所在环境的变量对象，如果这个环境是函数，则将其活动对象（activation object）作为变量对象，，活动对象最开始只有一个变量，即 arguments 对象，作用域链中的下一个变量对象来自外部环境，再下一个则来自外部环境的外部环境，直到末端全局执行环境，这就形成了一个作用域链。
1.3、活动对象 1、当调用函数时，首先创建一个活动对象 2、为活动对象添加一个类似数组的 arguments 对象
3、将定义函数时所在的执行环境对应的作用域链复制到函数内部的[[scope]]属性上，把自己的活动对象推入作用域链的顶端
4、之后发生由 ECMA-262 中所谓’活动对象’完成的’变量实例化’(Variable Instatiation)的过程
(1)、此时将函数的形参创建为活动对象(变量对象)的属性，如果调用函数时传递的参数与形式参数一致，则将相应参数值赋给这些属性，否则，会给属性赋 undefined 值。 (2)、将函数内部声明的所有局部变量创建为活动对象(变量对象)的属性，其值都被'预解析'为undefined值，以上两步完成活动对象(变量对象)保存变量的过程。 (3)、对于定义的内部函数，用声明的函数名innerMethod，为活动对象(变量对象)创建同名属性，而定义的内部函数则被创建为函数对象并指定给该属性，完成活动对象(变量对象)保存函数的过程。 注：在这个过程中，除了实际参数和函数声明有值外，其它都被'预解析'为undefined值。 注：对于(1)、(2)、(3)步骤的顺序，因为变量声明比函数声明的优先级高，变量声明优先于函数声明被提升，如果两者同名同时存在，后被提升的函数声明会覆盖先被提升的变量声明**(引用来源作者(2)、(3)顺序反了)**。 注：对于(2)，函数被赋值为函数定义的字符串，并不会对函数体中的JS代码做特殊处理(如运算等)，只是将函数体JS代码的扫描结果(字符串)保存在活动对象(变量对象)的与此函数名对应的属性上，在函数执行时再做进一步处理。 2、数组去重 这是一个很经典的问题，当然最简单的回答就是使用 Set
const array = [1,2,3,2,4] [... new Set(array)] 很明显面试官不想再听到这个回答，然后我说了另一种方式
const array = [1, 2, 3, 2, 4]; array.reduce((targetAarr, item) =&amp;gt; { if (!targetAarr.includes(item)) targetAarr.push(item); return targetAarr; }, []); 然后面试官还想听到其他的方法，我就又说了一个对象键值对的方式
const array = [1, 2, 3, 2, 4]; const targetObject = {}; array."><title>面试记录</title><link rel=canonical href=https://jo-hnny.github.io/p/%E9%9D%A2%E8%AF%95%E8%AE%B0%E5%BD%95/><link rel=stylesheet href=/scss/style.min.css><script async src="https://www.googletagmanager.com/gtag/js?id=G-TFV4P906GT"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-TFV4P906GT")</script><meta property="og:title" content="面试记录"><meta property="og:description" content="这里主要记录一些我没有回答上来的面试题
1、作用域链 今天接到了一个电话面试，感觉回答的很不好，我对 css 尤其不太擅长，BFC 这个没答上来，其实之前是有看到过的，但是由于自己对 css 的不重视，导致没有关注。
但是这篇文章要说的是作用域链，本来 js 算是我擅长的，这个没答上来实属不应该，就算我没关注这个概念，但是我应该知道它的正确情况的，就这么一个平时写代码觉得理所应当的东西，被问起来的时候我竟然答错了。
1.1、执行环境 执行环境定义了变量或函数有权访问的其他数据，每个执行环境都有一个与之关联的变量对象（variable object），环境中定义的变量和函数都保存在这个对象中，全局执行环境是最外层的一个执行环境，每个函数都有自己的执行环境，当执行流进入一个函数时，函数的环境就会被推入到一个环境栈中，当函数执行完毕，这个环境就会出栈并销毁，同时保存在其中的变量和函数也随之销毁，控制权交还给之前的执行环境。
1.2、作用域链 当代码在一个环境中执行时，会创建变量对象的一个作用域链，作用域链的最前端，始终是当前执行的代码所在环境的变量对象，如果这个环境是函数，则将其活动对象（activation object）作为变量对象，，活动对象最开始只有一个变量，即 arguments 对象，作用域链中的下一个变量对象来自外部环境，再下一个则来自外部环境的外部环境，直到末端全局执行环境，这就形成了一个作用域链。
1.3、活动对象 1、当调用函数时，首先创建一个活动对象 2、为活动对象添加一个类似数组的 arguments 对象
3、将定义函数时所在的执行环境对应的作用域链复制到函数内部的[[scope]]属性上，把自己的活动对象推入作用域链的顶端
4、之后发生由 ECMA-262 中所谓’活动对象’完成的’变量实例化’(Variable Instatiation)的过程
(1)、此时将函数的形参创建为活动对象(变量对象)的属性，如果调用函数时传递的参数与形式参数一致，则将相应参数值赋给这些属性，否则，会给属性赋 undefined 值。 (2)、将函数内部声明的所有局部变量创建为活动对象(变量对象)的属性，其值都被'预解析'为undefined值，以上两步完成活动对象(变量对象)保存变量的过程。 (3)、对于定义的内部函数，用声明的函数名innerMethod，为活动对象(变量对象)创建同名属性，而定义的内部函数则被创建为函数对象并指定给该属性，完成活动对象(变量对象)保存函数的过程。 注：在这个过程中，除了实际参数和函数声明有值外，其它都被'预解析'为undefined值。 注：对于(1)、(2)、(3)步骤的顺序，因为变量声明比函数声明的优先级高，变量声明优先于函数声明被提升，如果两者同名同时存在，后被提升的函数声明会覆盖先被提升的变量声明**(引用来源作者(2)、(3)顺序反了)**。 注：对于(2)，函数被赋值为函数定义的字符串，并不会对函数体中的JS代码做特殊处理(如运算等)，只是将函数体JS代码的扫描结果(字符串)保存在活动对象(变量对象)的与此函数名对应的属性上，在函数执行时再做进一步处理。 2、数组去重 这是一个很经典的问题，当然最简单的回答就是使用 Set
const array = [1,2,3,2,4] [... new Set(array)] 很明显面试官不想再听到这个回答，然后我说了另一种方式
const array = [1, 2, 3, 2, 4]; array.reduce((targetAarr, item) =&amp;gt; { if (!targetAarr.includes(item)) targetAarr.push(item); return targetAarr; }, []); 然后面试官还想听到其他的方法，我就又说了一个对象键值对的方式
const array = [1, 2, 3, 2, 4]; const targetObject = {}; array."><meta property="og:url" content="https://jo-hnny.github.io/p/%E9%9D%A2%E8%AF%95%E8%AE%B0%E5%BD%95/"><meta property="og:site_name" content="冷宫"><meta property="og:type" content="article"><meta property="article:section" content="Post"><meta property="article:published_time" content="2019-09-18T21:00:11+08:00"><meta property="article:modified_time" content="2019-09-18T21:00:11+08:00"><meta property="og:image" content="https://jo-hnny.github.io/img/avatar.png"><meta name=twitter:site content="johnnyN70389377"><meta name=twitter:title content="面试记录"><meta name=twitter:description content="这里主要记录一些我没有回答上来的面试题
1、作用域链 今天接到了一个电话面试，感觉回答的很不好，我对 css 尤其不太擅长，BFC 这个没答上来，其实之前是有看到过的，但是由于自己对 css 的不重视，导致没有关注。
但是这篇文章要说的是作用域链，本来 js 算是我擅长的，这个没答上来实属不应该，就算我没关注这个概念，但是我应该知道它的正确情况的，就这么一个平时写代码觉得理所应当的东西，被问起来的时候我竟然答错了。
1.1、执行环境 执行环境定义了变量或函数有权访问的其他数据，每个执行环境都有一个与之关联的变量对象（variable object），环境中定义的变量和函数都保存在这个对象中，全局执行环境是最外层的一个执行环境，每个函数都有自己的执行环境，当执行流进入一个函数时，函数的环境就会被推入到一个环境栈中，当函数执行完毕，这个环境就会出栈并销毁，同时保存在其中的变量和函数也随之销毁，控制权交还给之前的执行环境。
1.2、作用域链 当代码在一个环境中执行时，会创建变量对象的一个作用域链，作用域链的最前端，始终是当前执行的代码所在环境的变量对象，如果这个环境是函数，则将其活动对象（activation object）作为变量对象，，活动对象最开始只有一个变量，即 arguments 对象，作用域链中的下一个变量对象来自外部环境，再下一个则来自外部环境的外部环境，直到末端全局执行环境，这就形成了一个作用域链。
1.3、活动对象 1、当调用函数时，首先创建一个活动对象 2、为活动对象添加一个类似数组的 arguments 对象
3、将定义函数时所在的执行环境对应的作用域链复制到函数内部的[[scope]]属性上，把自己的活动对象推入作用域链的顶端
4、之后发生由 ECMA-262 中所谓’活动对象’完成的’变量实例化’(Variable Instatiation)的过程
(1)、此时将函数的形参创建为活动对象(变量对象)的属性，如果调用函数时传递的参数与形式参数一致，则将相应参数值赋给这些属性，否则，会给属性赋 undefined 值。 (2)、将函数内部声明的所有局部变量创建为活动对象(变量对象)的属性，其值都被'预解析'为undefined值，以上两步完成活动对象(变量对象)保存变量的过程。 (3)、对于定义的内部函数，用声明的函数名innerMethod，为活动对象(变量对象)创建同名属性，而定义的内部函数则被创建为函数对象并指定给该属性，完成活动对象(变量对象)保存函数的过程。 注：在这个过程中，除了实际参数和函数声明有值外，其它都被'预解析'为undefined值。 注：对于(1)、(2)、(3)步骤的顺序，因为变量声明比函数声明的优先级高，变量声明优先于函数声明被提升，如果两者同名同时存在，后被提升的函数声明会覆盖先被提升的变量声明**(引用来源作者(2)、(3)顺序反了)**。 注：对于(2)，函数被赋值为函数定义的字符串，并不会对函数体中的JS代码做特殊处理(如运算等)，只是将函数体JS代码的扫描结果(字符串)保存在活动对象(变量对象)的与此函数名对应的属性上，在函数执行时再做进一步处理。 2、数组去重 这是一个很经典的问题，当然最简单的回答就是使用 Set
const array = [1,2,3,2,4] [... new Set(array)] 很明显面试官不想再听到这个回答，然后我说了另一种方式
const array = [1, 2, 3, 2, 4]; array.reduce((targetAarr, item) =&amp;gt; { if (!targetAarr.includes(item)) targetAarr.push(item); return targetAarr; }, []); 然后面试官还想听到其他的方法，我就又说了一个对象键值对的方式
const array = [1, 2, 3, 2, 4]; const targetObject = {}; array."><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://jo-hnny.github.io/img/avatar.png"><link rel="shortcut icon" href=/img/favicon.ico><script type=application/javascript>var doNotTrack=!1;doNotTrack||(window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga('create','G-TFV4P906GT','auto'),ga('send','pageview'))</script><script async src=https://www.google-analytics.com/analytics.js></script></head><body><script>(function(){const a='StackColorScheme';localStorage.getItem(a)||localStorage.setItem(a,"auto")})()</script><script>(function(){const b='StackColorScheme',a=localStorage.getItem(b),c=window.matchMedia('(prefers-color-scheme: dark)').matches===!0;a=='dark'||a==='auto'&&c?document.body.dataset.scheme='dark':document.body.dataset.scheme='light'})()</script><div class="container main-container flex on-phone--column extended article-page with-toolbar"><aside class="sidebar left-sidebar sticky"><button class="hamburger hamburger--spin" type=button id=toggle-menu aria-label=切换菜单>
<span class=hamburger-box><span class=hamburger-inner></span></span></button><header class=site-info><figure class=site-avatar><img src=/img/avatar_hud170f2c6bd12f3a098a294aad792bf80_1699879_300x0_resize_box_2.png width=300 height=195 class=site-logo loading=lazy alt=Avatar>
<span class=emoji>🏂🏻</span></figure><h1 class=site-name><a href=https://jo-hnny.github.io/>冷宫</a></h1><h2 class=site-description>她们都被我打入了冷宫，但是偶尔还是会过来看一下</h2></header><ol class=menu id=main-menu><li><a href=/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><polyline points="5 12 3 12 12 3 21 12 19 12"/><path d="M5 12v7a2 2 0 002 2h10a2 2 0 002-2v-7"/><path d="M9 21v-6a2 2 0 012-2h2a2 2 0 012 2v6"/></svg><span>Home</span></a></li><li><a href=about><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-user" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="7" r="4"/><path d="M6 21v-2a4 4 0 014-4h4a4 4 0 014 4v2"/></svg><span>About</span></a></li><li><a href=talks><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-hipchat" width="44" height="44" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M17.802 17.292s.077-.055.2-.149C19.845 15.718 21 13.653 21 11.354c0-4.286-4.03-7.764-8.998-7.764C7.032 3.59 3 7.068 3 11.354 3 15.642 7.03 19 12 19c.424.0 1.12-.028 2.088-.084 1.262.82 3.104 1.493 4.716 1.493.499.0.734-.41.414-.828-.486-.596-1.156-1.551-1.416-2.29z"/><path d="M7.5 13.5c2.5 2.5 6.5 2.5 9 0"/></svg><span>Talks</span></a></li><li><a href=archives><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><rect x="3" y="4" width="18" height="4" rx="2"/><path d="M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8"/><line x1="10" y1="12" x2="14" y2="12"/></svg><span>Archives</span></a></li><li><a href=search><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="10" cy="10" r="7"/><line x1="21" y1="21" x2="15" y2="15"/></svg><span>Search</span></a></li><li><a href=index.xml><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-rss" width="44" height="44" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><circle cx="5" cy="19" r="1"/><path d="M4 4a16 16 0 0116 16"/><path d="M4 11a9 9 0 019 9"/></svg><span>Feed</span></a></li><li id=dark-mode-toggle><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="8" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="16" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg><span>暗色模式</span></li></ol></aside><main class="main full-width"><div id=article-toolbar><a href=https://jo-hnny.github.io/ class=back-home><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-chevron-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><polyline points="15 6 9 12 15 18"/></svg><span>Back</span></a></div><article class=main-article><header class=article-header><div class=article-details><h2 class=article-title><a href=/p/%E9%9D%A2%E8%AF%95%E8%AE%B0%E5%BD%95/>面试记录</a></h2><footer class=article-time><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg><time class=article-time--published>Sep 18, 2019</time></footer></div></header><section class=article-content><p>这里主要记录一些我没有回答上来的面试题</p><h2 id=1作用域链>1、作用域链</h2><p>今天接到了一个电话面试，感觉回答的很不好，我对 css 尤其不太擅长，BFC 这个没答上来，其实之前是有看到过的，但是由于自己对 css 的不重视，导致没有关注。<br>但是这篇文章要说的是作用域链，本来 js 算是我擅长的，这个没答上来实属不应该，就算我没关注这个概念，但是我应该知道它的正确情况的，就这么一个平时写代码觉得理所应当的东西，被问起来的时候我竟然答错了。</p><h3 id=11执行环境>1.1、执行环境</h3><p>执行环境定义了变量或函数有权访问的其他数据，每个执行环境都有一个与之关联的变量对象（variable object），环境中定义的变量和函数都保存在这个对象中，全局执行环境是最外层的一个执行环境，每个函数都有自己的执行环境，当执行流进入一个函数时，函数的环境就会被推入到一个环境栈中，当函数执行完毕，这个环境就会出栈并销毁，同时保存在其中的变量和函数也随之销毁，控制权交还给之前的执行环境。</p><h3 id=12作用域链>1.2、作用域链</h3><p>当代码在一个环境中执行时，会创建变量对象的一个作用域链，作用域链的最前端，始终是当前执行的代码所在环境的变量对象，如果这个环境是函数，则将其活动对象（activation object）作为变量对象，，活动对象最开始只有一个变量，即 arguments 对象，作用域链中的下一个变量对象来自外部环境，再下一个则来自外部环境的外部环境，直到末端全局执行环境，这就形成了一个作用域链。</p><h3 id=13活动对象>1.3、活动对象</h3><p>1、当调用函数时，首先创建一个活动对象
2、为活动对象添加一个类似数组的 arguments 对象<br>3、将定义函数时所在的执行环境对应的作用域链复制到函数内部的<code>[[scope]]</code>属性上，把自己的活动对象推入作用域链的顶端<br>4、之后发生由 ECMA-262 中所谓’活动对象’完成的’变量实例化’(Variable Instatiation)的过程</p><pre><code>(1)、此时将函数的形参创建为活动对象(变量对象)的属性，如果调用函数时传递的参数与形式参数一致，则将相应参数值赋给这些属性，否则，会给属性赋 undefined 值。

(2)、将函数内部声明的所有局部变量创建为活动对象(变量对象)的属性，其值都被'预解析'为undefined值，以上两步完成活动对象(变量对象)保存变量的过程。

(3)、对于定义的内部函数，用声明的函数名innerMethod，为活动对象(变量对象)创建同名属性，而定义的内部函数则被创建为函数对象并指定给该属性，完成活动对象(变量对象)保存函数的过程。

注：在这个过程中，除了实际参数和函数声明有值外，其它都被'预解析'为undefined值。

注：对于(1)、(2)、(3)步骤的顺序，因为变量声明比函数声明的优先级高，变量声明优先于函数声明被提升，如果两者同名同时存在，后被提升的函数声明会覆盖先被提升的变量声明**(引用来源作者(2)、(3)顺序反了)**。

注：对于(2)，函数被赋值为函数定义的字符串，并不会对函数体中的JS代码做特殊处理(如运算等)，只是将函数体JS代码的扫描结果(字符串)保存在活动对象(变量对象)的与此函数名对应的属性上，在函数执行时再做进一步处理。

</code></pre><h2 id=2数组去重>2、数组去重</h2><p>这是一个很经典的问题，当然最简单的回答就是使用 Set</p><div class=highlight><pre class=chroma><code class=language-js data-lang=js><span class=kr>const</span> <span class=nx>array</span> <span class=o>=</span> <span class=p>[</span><span class=mi>1</span><span class=p>,</span><span class=mi>2</span><span class=p>,</span><span class=mi>3</span><span class=p>,</span><span class=mi>2</span><span class=p>,</span><span class=mi>4</span><span class=p>]</span>
<span class=p>[...</span> <span class=k>new</span> <span class=nx>Set</span><span class=p>(</span><span class=nx>array</span><span class=p>)]</span>
</code></pre></div><p>很明显面试官不想再听到这个回答，然后我说了另一种方式</p><div class=highlight><pre class=chroma><code class=language-js data-lang=js><span class=kr>const</span> <span class=nx>array</span> <span class=o>=</span> <span class=p>[</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>4</span><span class=p>];</span>
<span class=nx>array</span><span class=p>.</span><span class=nx>reduce</span><span class=p>((</span><span class=nx>targetAarr</span><span class=p>,</span> <span class=nx>item</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
  <span class=k>if</span> <span class=p>(</span><span class=o>!</span><span class=nx>targetAarr</span><span class=p>.</span><span class=nx>includes</span><span class=p>(</span><span class=nx>item</span><span class=p>))</span> <span class=nx>targetAarr</span><span class=p>.</span><span class=nx>push</span><span class=p>(</span><span class=nx>item</span><span class=p>);</span>
  <span class=k>return</span> <span class=nx>targetAarr</span><span class=p>;</span>
<span class=p>},</span> <span class=p>[]);</span>
</code></pre></div><p>然后面试官还想听到其他的方法，我就又说了一个对象键值对的方式</p><div class=highlight><pre class=chroma><code class=language-js data-lang=js><span class=kr>const</span> <span class=nx>array</span> <span class=o>=</span> <span class=p>[</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>4</span><span class=p>];</span>
<span class=kr>const</span> <span class=nx>targetObject</span> <span class=o>=</span> <span class=p>{};</span>
<span class=nx>array</span><span class=p>.</span><span class=nx>forEach</span><span class=p>((</span><span class=nx>item</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>(</span><span class=nx>targetObject</span><span class=p>[</span><span class=nx>item</span><span class=p>]</span> <span class=o>=</span> <span class=nx>item</span><span class=p>));</span>
<span class=nb>Object</span><span class=p>.</span><span class=nx>keys</span><span class=p>(</span><span class=nx>targetObject</span><span class=p>);</span>
</code></pre></div><p>很明显这种方式有个问题，不能区分<code>'1'</code>和<code>1</code>
再问我，我说了可以先排序，再查看相邻项是否相同，代码实现大概是这个样子，这儿不得不说到 sort 方法传参的问题，我之前一直是有自定义 callback 来排序的，面试官问我如果不传参是什么情况，这个我还正没注意到原来可以不传参，当然我直觉是如果不传参，应该是从小到大排序，但是我不知道的东西当然不敢胡说，就直接回答了不知道，回来一看，不传参的话，元素按照转换为的字符串的各个字符的 Unicode 位点进行排序。</p><div class=highlight><pre class=chroma><code class=language-js data-lang=js><span class=kr>const</span> <span class=nx>array</span> <span class=o>=</span> <span class=p>[</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>4</span><span class=p>];</span>
<span class=kr>const</span> <span class=nx>targetArr</span> <span class=o>=</span> <span class=nx>array</span><span class=p>.</span><span class=nx>sort</span><span class=p>();</span>
<span class=nx>targetArr</span><span class=p>.</span><span class=nx>forEach</span><span class=p>((</span><span class=nx>item</span><span class=p>,</span> <span class=nx>index</span><span class=p>,</span> <span class=nx>arr</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
  <span class=k>if</span> <span class=p>(</span><span class=nx>item</span> <span class=o>===</span> <span class=nx>arr</span><span class=p>[</span><span class=nx>index</span> <span class=o>+</span> <span class=mi>1</span><span class=p>])</span> <span class=nx>arr</span><span class=p>.</span><span class=nx>splice</span><span class=p>(</span><span class=nx>index</span><span class=p>,</span> <span class=mi>1</span><span class=p>);</span>
<span class=p>});</span>

<span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>targetArr</span><span class=p>);</span>
</code></pre></div><p>说到这了，我再记录一下数组和字符串常常弄混的几个方法，之前每次用到这几个方法都会打开 mdn 的文档，虽然我觉得这样没什么，但是万一被问到了呢，我感觉我回答的时候好像就有说混了的。<br>1、<code>Array.prototype.slice</code>:方法返回一个从开始到结束（不包括结束）选择的数组的一部分浅拷贝到一个新数组对象。且原始数组不会被修改。</p><div class=highlight><pre class=chroma><code class=language-js data-lang=js><span class=nx>arr</span><span class=p>.</span><span class=nx>slice</span><span class=p>();</span>
<span class=c1>// [0, end]
</span><span class=c1></span>
<span class=nx>arr</span><span class=p>.</span><span class=nx>slice</span><span class=p>(</span><span class=nx>begin</span><span class=p>);</span>
<span class=c1>// [begin, end]
</span><span class=c1></span>
<span class=nx>arr</span><span class=p>.</span><span class=nx>slice</span><span class=p>(</span><span class=nx>begin</span><span class=p>,</span> <span class=nx>end</span><span class=p>);</span>
<span class=c1>// [begin, end)
</span></code></pre></div><p>2、<code>Aarray.prototype.splice</code>:方法通过删除现有元素和/或添加新元素来更改一个数组的内容。</p><div class=highlight><pre class=chroma><code class=language-js data-lang=js><span class=nx>array</span><span class=p>.</span><span class=nx>splice</span><span class=p>(</span><span class=nx>start</span><span class=p>)</span>
<span class=c1>// 删除start - end
</span><span class=c1></span><span class=nx>array</span><span class=p>.</span><span class=nx>splice</span><span class=p>(</span><span class=nx>start</span><span class=p>,</span> <span class=nx>deleteCount</span><span class=p>)</span>
<span class=c1>// 从start开始，包括start，删除deletecount个元素
</span><span class=c1></span>
<span class=nx>array</span><span class=p>.</span><span class=nx>splice</span><span class=p>(</span><span class=nx>start</span><span class=p>,</span> <span class=nx>deleteCount</span><span class=p>,</span> <span class=nx>item1</span><span class=p>,</span> <span class=nx>item2</span><span class=p>,</span> <span class=p>...)</span>
<span class=c1>// 删除元素，并且从start位置开始添加若干个元素
</span></code></pre></div><p>3、<code>String.prototype.slice</code>:方法提取一个字符串的一部分，并返回一新的字符串。不修改原字符串。</p><div class=highlight><pre class=chroma><code class=language-js data-lang=js><span class=nx>str</span><span class=p>.</span><span class=nx>slice</span><span class=p>(</span><span class=nx>beginSlice</span><span class=p>[,</span> <span class=nx>endSlice</span><span class=p>])</span>
</code></pre></div><p><code>beginSlice</code><br>从该索引（以 0 为基数）处开始提取原字符串中的字符。如果值为负数，会被当做 sourceLength + beginSlice 看待，这里的 sourceLength 是字符串的长度 (例如， 如果 beginSlice 是 -3 则看作是: sourceLength - 3)<br><code>endSlice</code><br>可选。在该索引（以 0 为基数）处结束提取字符串。如果省略该参数，slice 会一直提取到字符串末尾。如果该参数为负数，则被看作是 sourceLength + endSlice，这里的 sourceLength 就是字符串的长度(例如，如果 endSlice 是 -3，则是, sourceLength - 3)。<br>这么看的话其实他和 Array 的用法基本一样<br>4、<code>String.prototype.split</code>:方法使用指定的分隔符字符串将一个 String 对象分割成字符串数组，以将字符串分隔为子字符串，以确定每个拆分的位置。<br><code>最后总结一下，Array和String都有slice方法，主要用来截取指定长度，Array有一个splice方法用来删除、添加元素，而String有一个slit方法用来把字符串分割成数组。</code></p><h2 id=update-20180323>update 2018.03.23</h2><h2 id=3promise-返回值的问题>3、Promise 返回值的问题</h2><p>被面试官问到 promise 连续点 then，第二个点 then 会返回什么，我很自信的说如果自己不指定返回值的话是 resolve 的值，事实上我错了：</p><div class=highlight><pre class=chroma><code class=language-js data-lang=js><span class=nb>Promise</span><span class=p>.</span><span class=nx>resolve</span><span class=p>(</span><span class=mi>1</span><span class=p>)</span>
  <span class=p>.</span><span class=nx>then</span><span class=p>((</span><span class=nx>rsp</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>rsp</span><span class=p>))</span> <span class=c1>// 1
</span><span class=c1></span>  <span class=p>.</span><span class=nx>then</span><span class=p>((</span><span class=nx>rsp</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>rsp</span><span class=p>));</span> <span class=c1>// undefined
</span></code></pre></div><p>so then 函数 callback 接收的值应该是上一个 thencallback 返回的值。</p><h2 id=4自己实现一个-co>4、自己实现一个 co</h2><p>下面是我一个简单的实现，主要就是要做到不断的递归调用：</p><div class=highlight><pre class=chroma><code class=language-js data-lang=js><span class=kd>function</span> <span class=nx>co</span><span class=p>(</span><span class=nx>gn</span><span class=p>)</span> <span class=p>{</span>
  <span class=nx>gn</span> <span class=o>=</span> <span class=nx>gn</span><span class=p>();</span>

  <span class=k>return</span> <span class=k>new</span> <span class=nb>Promise</span><span class=p>((</span><span class=nx>resolve</span><span class=p>,</span> <span class=nx>reject</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
    <span class=nx>next</span><span class=p>();</span>

    <span class=kd>function</span> <span class=nx>next</span><span class=p>(</span><span class=nx>data</span><span class=p>)</span> <span class=p>{</span>
      <span class=kr>const</span> <span class=p>{</span> <span class=nx>done</span><span class=p>,</span> <span class=nx>value</span> <span class=p>}</span> <span class=o>=</span> <span class=nx>gn</span><span class=p>.</span><span class=nx>next</span><span class=p>(</span><span class=nx>data</span><span class=p>);</span>
      <span class=k>if</span> <span class=p>(</span><span class=nx>done</span><span class=p>)</span> <span class=k>return</span> <span class=nx>resolve</span><span class=p>(</span><span class=nx>value</span><span class=p>);</span>
      <span class=nx>value</span><span class=p>.</span><span class=nx>then</span><span class=p>((</span><span class=nx>rsp</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=nx>next</span><span class=p>(</span><span class=nx>rsp</span><span class=p>)).</span><span class=k>catch</span><span class=p>((</span><span class=nx>err</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=nx>reject</span><span class=p>(</span><span class=nx>err</span><span class=p>));</span>
    <span class=p>}</span>
  <span class=p>});</span>
<span class=p>}</span>

<span class=kd>function</span><span class=o>*</span> <span class=nx>test</span><span class=p>()</span> <span class=p>{</span>
  <span class=kr>const</span> <span class=nx>a</span> <span class=o>=</span> <span class=k>yield</span> <span class=nb>Promise</span><span class=p>.</span><span class=nx>resolve</span><span class=p>(</span><span class=mi>1</span><span class=p>);</span>
  <span class=kr>const</span> <span class=nx>b</span> <span class=o>=</span> <span class=k>yield</span> <span class=nb>Promise</span><span class=p>.</span><span class=nx>resolve</span><span class=p>(</span><span class=mi>2</span><span class=p>);</span>
  <span class=k>return</span> <span class=nx>a</span> <span class=o>+</span> <span class=nx>b</span><span class=p>;</span>
<span class=p>}</span>

<span class=nx>co</span><span class=p>(</span><span class=nx>test</span><span class=p>)</span>
  <span class=p>.</span><span class=nx>then</span><span class=p>((</span><span class=nx>rsp</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>rsp</span><span class=p>))</span> <span class=c1>// 3
</span><span class=c1></span>  <span class=p>.</span><span class=k>catch</span><span class=p>((</span><span class=nx>err</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>err</span><span class=p>));</span>
</code></pre></div><p>建议这种问题最好能让上机写一下代码，让我干想和在纸上写实在是有点困难。</p><h2 id=5prototype-的问题>5、prototype 的问题</h2><p>现在才回想起来自己全说错了，当时还信誓旦旦，真是羞愧,都是自己的惯性思维，没有注意到这次是直接修改了 prototype 的指向,说到底还是对象引用的问题</p><div class=highlight><pre class=chroma><code class=language-js data-lang=js><span class=kd>function</span> <span class=nx>A</span><span class=p>()</span> <span class=p>{}</span>

<span class=kd>function</span> <span class=nx>B</span><span class=p>()</span> <span class=p>{</span>
  <span class=k>this</span><span class=p>.</span><span class=nx>hello</span> <span class=o>=</span> <span class=s2>&#34;hello&#34;</span><span class=p>;</span>
<span class=p>}</span>

<span class=kd>var</span> <span class=nx>a</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>A</span><span class=p>();</span>
<span class=nx>A</span><span class=p>.</span><span class=nx>prototype</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>B</span><span class=p>();</span>
<span class=kd>var</span> <span class=nx>a1</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>A</span><span class=p>();</span>

<span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>a</span><span class=p>.</span><span class=nx>hello</span><span class=p>);</span> <span class=c1>// undefined
</span><span class=c1></span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>a1</span><span class=p>.</span><span class=nx>hello</span><span class=p>);</span> <span class=c1>// hello
</span></code></pre></div><p>现在一看，感觉这次面试又凉了。</p><h2 id=6如何定义一个真正的常量>6、如何定义一个真正的常量</h2><p>大家都知道 ES6 引入了 const 表示常量，但是大家也知道 const 并不能防止用户修改对象的属性，添加、删除属性，那么如何定义一个真正意义上的常量，这个并没有什么技术上的含量（当然我也试着从其他方面去实现，像是代理之类的，现在先不说），打开红宝书，翻到高级技巧-防篡改对象，在这里给大家介绍了几个对象的方法：</p><h3 id=61不可扩展对象-即无法为对象添加属性>6.1、不可扩展对象-即无法为对象添加属性；</h3><div class=highlight><pre class=chroma><code class=language-js data-lang=js><span class=kd>var</span> <span class=nx>a</span> <span class=o>=</span> <span class=p>{</span> <span class=nx>name</span><span class=o>:</span> <span class=s2>&#34;johnny&#34;</span> <span class=p>};</span>

<span class=nb>Object</span><span class=p>.</span><span class=nx>preventExtensions</span><span class=p>(</span><span class=nx>a</span><span class=p>);</span>

<span class=nx>a</span><span class=p>.</span><span class=nx>age</span> <span class=o>=</span> <span class=mi>10</span><span class=p>;</span>

<span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>a</span><span class=p>.</span><span class=nx>age</span><span class=p>);</span> <span class=c1>// undefined
</span><span class=c1></span>
<span class=nx>a</span><span class=p>.</span><span class=nx>name</span> <span class=o>=</span> <span class=s2>&#34;saber&#34;</span><span class=p>;</span>

<span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>a</span><span class=p>.</span><span class=nx>name</span><span class=p>);</span> <span class=c1>// saber
</span><span class=c1></span>
<span class=k>delete</span> <span class=nx>a</span><span class=p>.</span><span class=nx>name</span><span class=p>;</span>
<span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>a</span><span class=p>.</span><span class=nx>name</span><span class=p>);</span> <span class=c1>// undefined
</span></code></pre></div><h3 id=62密封的对象-不能添加删除属性>6.2、密封的对象-不能添加、删除属性：</h3><div class=highlight><pre class=chroma><code class=language-js data-lang=js><span class=kd>var</span> <span class=nx>a</span> <span class=o>=</span> <span class=p>{</span> <span class=nx>name</span><span class=o>:</span> <span class=s2>&#34;johnny&#34;</span> <span class=p>};</span>

<span class=nb>Object</span><span class=p>.</span><span class=nx>seal</span><span class=p>(</span><span class=nx>a</span><span class=p>);</span>

<span class=nx>a</span><span class=p>.</span><span class=nx>age</span> <span class=o>=</span> <span class=mi>10</span><span class=p>;</span>

<span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>a</span><span class=p>.</span><span class=nx>age</span><span class=p>);</span> <span class=c1>// undefined
</span><span class=c1></span>
<span class=nx>a</span><span class=p>.</span><span class=nx>name</span> <span class=o>=</span> <span class=s2>&#34;saber&#34;</span><span class=p>;</span>

<span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>a</span><span class=p>.</span><span class=nx>name</span><span class=p>);</span> <span class=c1>// saber
</span><span class=c1></span>
<span class=k>delete</span> <span class=nx>a</span><span class=p>.</span><span class=nx>name</span><span class=p>;</span>
<span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>a</span><span class=p>.</span><span class=nx>name</span><span class=p>);</span> <span class=c1>// saber
</span></code></pre></div><h3 id=63冻结的对象-无法添加删除修改属性真正的常量>6.3、冻结的对象-无法添加、删除、修改属性，真正的常量：</h3><div class=highlight><pre class=chroma><code class=language-js data-lang=js><span class=kd>var</span> <span class=nx>a</span> <span class=o>=</span> <span class=p>{</span> <span class=nx>name</span><span class=o>:</span> <span class=s2>&#34;johnny&#34;</span> <span class=p>};</span>

<span class=nb>Object</span><span class=p>.</span><span class=nx>freeze</span><span class=p>(</span><span class=nx>a</span><span class=p>);</span>

<span class=nx>a</span><span class=p>.</span><span class=nx>age</span> <span class=o>=</span> <span class=mi>10</span><span class=p>;</span>

<span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>a</span><span class=p>.</span><span class=nx>age</span><span class=p>);</span> <span class=c1>// undefined
</span><span class=c1></span>
<span class=nx>a</span><span class=p>.</span><span class=nx>name</span> <span class=o>=</span> <span class=s2>&#34;saber&#34;</span><span class=p>;</span>

<span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>a</span><span class=p>.</span><span class=nx>name</span><span class=p>);</span> <span class=c1>// johnny
</span><span class=c1></span>
<span class=k>delete</span> <span class=nx>a</span><span class=p>.</span><span class=nx>name</span><span class=p>;</span>
<span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>a</span><span class=p>.</span><span class=nx>name</span><span class=p>);</span> <span class=c1>// johnny
</span></code></pre></div><p>上面添加、删除、修改操作在非严格模式下为不生效，在严格模式下会报错，建议大家开启严格模式。</p></section><footer class=article-footer><section class=article-copyright><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><path d="M14.5 9a3.5 4 0 100 6"/></svg><span>Licensed under CC BY-NC-SA 4.0</span></section></footer></article><aside class=related-contents--wrapper></aside><script src=https://utteranc.es/client.js repo=jo-hnny/jo-hnny.github.io issue-term=title label=comments crossorigin=anonymous async></script><style>.utterances{max-width:unset}</style><script>function setUtterancesTheme(b){let a=document.querySelector('.utterances iframe');a&&a.contentWindow.postMessage({type:'set-theme',theme:`github-${b}`},'https://utteranc.es')}addEventListener('message',a=>{if(a.origin!=='https://utteranc.es')return;setUtterancesTheme(document.body.dataset.scheme)}),window.addEventListener('onColorSchemeChange',a=>{setUtterancesTheme(a.detail)})</script><footer class=site-footer><section class=copyright>&copy;
2020 -
2021 冷宫</section><section class=powerby>Built with <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a><br>Theme <b><a href=https://github.com/CaiJimmy/hugo-theme-stack target=_blank rel=noopener data-version=2.3.0>Stack</a></b> designed by <a href=https://jimmycai.com target=_blank rel=noopener>Jimmy</a></section></footer><div class=pswp tabindex=-1 role=dialog aria-hidden=true><div class=pswp__bg></div><div class=pswp__scroll-wrap><div class=pswp__container><div class=pswp__item></div><div class=pswp__item></div><div class=pswp__item></div></div><div class="pswp__ui pswp__ui--hidden"><div class=pswp__top-bar><div class=pswp__counter></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class=pswp__preloader><div class=pswp__preloader__icn><div class=pswp__preloader__cut><div class=pswp__preloader__donut></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class=pswp__share-tooltip></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)"></button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class=pswp__caption><div class=pswp__caption__center></div></div></div></div></div><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo=" crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU=" crossorigin=anonymous defer></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.css integrity="sha256-c0uckgykQ9v5k+IqViZOZKc47Jn7KQil4/MP3ySA3F8=" crossorigin=anonymous><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.css integrity="sha256-SBLU4vv6CA6lHsZ1XyTdhyjJxCjPif/TRkjnsyGAGnE=" crossorigin=anonymous></main></div><script src=https://cdn.jsdelivr.net/npm/node-vibrant@3.1.5/dist/vibrant.min.js integrity="sha256-5NovOZc4iwiAWTYIFiIM7DxKUXKWvpVEuMEPLzcm5/g=" crossorigin=anonymous defer></script><script type=text/javascript src=/ts/main.js defer></script><script>(function(){const a=document.createElement('link');a.href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap",a.type="text/css",a.rel="stylesheet",document.head.appendChild(a)})()</script></body></html>